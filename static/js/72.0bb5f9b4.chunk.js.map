{"version":3,"sources":["../node_modules/@arcgis/core/views/interactive/snapping/featureSources/GraphicsSnappingSource.js","../node_modules/@arcgis/core/geometry/support/normalizeUtilsSync.js","../node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js","../node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","../node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js","../node_modules/@arcgis/core/views/interactive/snapping/hints/PointSnappingHint.js","../node_modules/@arcgis/core/views/interactive/snapping/candidates/VertexSnappingCandidate.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/queryEngineUtils.js"],"names":["k","e","availability","sources","multipoint","point","polygon","polyline","loadedWkids","Set","loadedWkts","pendingAdds","this","updatingHandles","updating","layerSource","layer","length","task","abort","mapSources","destroySource","handles","add","on","onGraphicUpdate","addOnCollectionChange","graphics","onGraphicsChanged","addMany","toArray","t","a","r","queryEngine","executeQueryForSnapping","coordinateHelper","vectorToPoint","toJSON","distance","types","query","o","filter","createQuery","where","then","candidates","s","flat","map","v","w","property","remove","graphic","removed","added","Map","i","geometry","needsInitializeProjection","spatialReference","push","set","uid","createPendingAdd","n","h","source","dest","signal","markLoadedSpatialReferences","addPromise","promise","wkid","wkt","visible","type","c","fromExtent","ensureSource","createOptimizedFeature","featureStore","has","l","u","m","f","g","O","createSource","y","S","geometryType","hasZ","hasM","j","fields","name","alias","objectIdField","scheduler","view","resourceController","removeFromSource","delete","size","removeById","destroy","p","constructOnly","prototype","readOnly","d","J","isWebMercator","I","maxX","minX","b","plus180Line","minus180Line","N","points","x","M","xmin","ymin","xmax","ymax","cut","valid","frameId","extent","frameIds","rings","Array","isArray","Math","ceil","abs","closed","minPts","paths","compareMinX","compareMinY","toBBox","_maxEntries","max","_minEntries","_initFormat","clear","prune","X","Y","B","_all","data","children","leaf","pop","insert","_build","slice","height","_splitRoot","_insert","indexHint","splice","_condense","pushArray","log","sqrt","min","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","_allDistMargin","sort","Function","join","minY","maxY","deallocator","arguments","getObjectId","objectId","getAttributes","attributes","getAttribute","cloneWithGeometry","getGeometry","getCentroid","centroid","_indexInvalid","_boundsToLoad","_boundsById","_idByBounds","_index","_loadIndex","forEach","load","get","search","geometryInfo","_boundsStore","_featuresById","_markedIds","events","featureAdapter","numFeatures","coords","featureCount","vertexCount","_add","_emitChanged","_remove","invalidateIndex","forEachInBounds","emit","displayId","onFeatureAdd","getLogger","error","feature","onFeatureRemove","constraint","targetPoint","edgeStart","pointToVector","start","edgeEnd","end","target"],"mappings":"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","file":"static/js/72.0bb5f9b4.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import{removeUnordered as r}from\"../../../../core/arrayUtils.js\";import{HandleOwnerMixin as s}from\"../../../../core/HandleOwner.js\";import{isSome as o,isNone as i}from\"../../../../core/maybe.js\";import{eachAlwaysValues as a,createTask as n}from\"../../../../core/promiseUtils.js\";import{property as p}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as d}from\"../../../../core/accessorSupport/decorators/subclass.js\";import c from\"../../../../geometry/Polygon.js\";import{canProjectWithoutEngine as l,project as u,initializeProjection as h}from\"../../../../geometry/projection.js\";import{normalizeCentralMeridianSync as m}from\"../../../../geometry/support/normalizeUtilsSync.js\";import{featureGeometryTypeKebabDictionary as y}from\"../../../../geometry/support/typeUtils.js\";import{convertFromGeometry as g}from\"../../../../layers/graphics/featureConversionUtils.js\";import f from\"../../../../layers/graphics/OptimizedFeature.js\";import S from\"../../../../layers/graphics/data/FeatureStore.js\";import j from\"../../../../layers/graphics/data/QueryEngine.js\";import{sortCandidatesInPlace as w}from\"../snappingUtils.js\";import{convertSnappingCandidate as v}from\"./queryEngineUtils.js\";let k=class extends(s(t)){constructor(e){super(e),this.availability=1,this.sources={multipoint:null,point:null,polygon:null,polyline:null},this.loadedWkids=new Set,this.loadedWkts=new Set,this.pendingAdds=[]}get updating(){return this.updatingHandles.updating}get layer(){return this.layerSource.layer}destroy(){const e=this.pendingAdds;this.pendingAdds.length=0;for(const t of e)t.task.abort();this.mapSources((e=>this.destroySource(e)))}initialize(){this.handles.add([this.layer.on(\"graphic-update\",(e=>this.onGraphicUpdate(e))),this.updatingHandles.addOnCollectionChange(this.layer.graphics,(e=>this.onGraphicsChanged(e)))]),this.addMany(this.layer.graphics.toArray())}async fetchCandidates(e,t){const r=await a(this.mapSources((r=>r.queryEngine.executeQueryForSnapping({point:e.coordinateHelper.vectorToPoint(e.point).toJSON(),distance:e.distance,types:e.types,query:o(e.filter)?e.filter.createQuery().toJSON():{where:\"1=1\"}},t).then((({candidates:e})=>e))))),s=r.flat().map((t=>v(t,e.coordinateHelper)));return w(e.point,s),s}refresh(){}onGraphicUpdate(e){switch(e.property){case\"geometry\":case\"visible\":this.remove(e.graphic),this.addMany([e.graphic])}}onGraphicsChanged(e){for(const t of e.removed)this.remove(t);this.addMany(e.added)}addMany(e){const t=[],r=new Map;for(const s of e)i(s.geometry)||(this.needsInitializeProjection(s.geometry.spatialReference)?(t.push(s.geometry.spatialReference),r.set(s.uid,s)):this.add(s));this.createPendingAdd(t,r)}createPendingAdd(e,t){if(!e.length)return;const s=n((async r=>{await h(e.map((e=>({source:e,dest:this.spatialReference}))),{signal:r}),this.markLoadedSpatialReferences(e);for(const[,e]of t)this.add(e)}));this.updatingHandles.addPromise(s.promise);const o={task:s,graphics:t},i=()=>r(this.pendingAdds,o);s.promise.then(i,i),this.pendingAdds.push(o)}markLoadedSpatialReferences(e){for(const t of e)null!=t.wkid&&this.loadedWkids.add(t.wkid),null!=t.wkt&&this.loadedWkts.add(t.wkt)}add(e){if(i(e.geometry)||!e.visible)return;let t=e.geometry;if(\"mesh\"===t.type)return;\"extent\"===t.type&&(t=c.fromExtent(t));const r=this.ensureSource(t.type);if(i(r))return;const s=this.createOptimizedFeature(e.uid,t);o(s)&&r.featureStore.add(s)}needsInitializeProjection(e){return(null==e.wkid||!this.loadedWkids.has(e.wkid))&&((null==e.wkt||!this.loadedWkts.has(e.wkt))&&!l(e,this.spatialReference))}createOptimizedFeature(e,t){const r=u(m(t),this.spatialReference);return r?new f(g(r,!1,!1),{[O]:e},null,e):null}ensureSource(e){const t=this.sources[e];if(o(t))return t;const r=this.createSource(e);return this.sources[e]=r,r}createSource(e){const t=y.toJSON(e),r=new S({geometryType:t,hasZ:!1,hasM:!1});return{featureStore:r,queryEngine:new j({featureStore:r,fields:[{name:O,type:\"esriFieldTypeOID\",alias:O}],geometryType:t,hasM:!1,hasZ:!1,objectIdField:O,spatialReference:this.spatialReference,scheduler:o(this.view)&&\"3d\"===this.view.type?this.view.resourceController.scheduler:null}),type:e}}remove(e){this.mapSources((t=>this.removeFromSource(t,e)));for(const t of this.pendingAdds)t.graphics.delete(e.uid),0===t.graphics.size&&t.task.abort()}removeFromSource(e,t){const r=t.uid;e.featureStore.has(r)&&e.featureStore.removeById(t.uid)}destroySource(e){e.queryEngine.destroy(),this.sources[e.type]=null}mapSources(e){const{point:t,polygon:r,polyline:s,multipoint:i}=this.sources,a=[];return o(t)&&a.push(e(t)),o(r)&&a.push(e(r)),o(s)&&a.push(e(s)),o(i)&&a.push(e(i)),a}};e([p({constructOnly:!0})],k.prototype,\"spatialReference\",void 0),e([p({constructOnly:!0})],k.prototype,\"layerSource\",void 0),e([p({constructOnly:!0})],k.prototype,\"view\",void 0),e([p({readOnly:!0})],k.prototype,\"updating\",null),e([p({readOnly:!0})],k.prototype,\"availability\",void 0),k=e([d(\"esri.views.interactive.snapping.featureSources.GraphicsSnappingSource\")],k);const O=\"OBJECTID\";export{k as GraphicsSnappingSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{create as n}from\"./aaBoundingRect.js\";import{getBoundsXY as t}from\"./boundsUtils.js\";import{extentIntersectsPolyline as i}from\"./intersectsBase.js\";import{isPoint as s,isMultipoint as m,isExtent as e,isPolygon as x,isPolyline as o}from\"./jsonUtils.js\";import{cutParams as r,getGeometryParts as a,offsetMagnitude as f}from\"./normalizeUtilsCommon.js\";import{getInfo as c}from\"./spatialReferenceUtils.js\";function l(n){if(!n)return null;if(\"mesh\"===n.type)return n.toJSON();let a=null;const l=n.spatialReference,h=c(l);if(!h)return n.toJSON();const d=l.isWebMercator?102100:4326,I=r[d].maxX,g=r[d].minX,b=r[d].plus180Line,v=r[d].minus180Line;let J;const N=n.toJSON();if(s(N))J=y(N,I,g);else if(m(N))N.points=N.points.map((n=>y(n,I,g))),J=N;else if(e(N))J=p(N,h);else if(x(N)||o(N)){const n=M;t(n,N);const s={xmin:n[0],ymin:n[1],xmax:n[2],ymax:n[3]},m=f(s.xmin,g)*(2*I),e=0===m?N:u(N,m);s.xmin+=m,s.xmax+=m,i(s,b)&&s.xmax!==I||i(s,v)&&s.xmin!==g?a=e:J=e}else J=n.toJSON();if(null!==a){return(new j).cut(a,I)}return J}function u(n,t){const i=a(n);for(const s of i)for(const n of s)n[0]+=t;return n}function p(n,t){if(!t)return n;const i=h(n,t).map((n=>n.extent));return i.length<2?i[0]||n:i.length>2?(n.xmin=t.valid[0],n.xmax=t.valid[1],n):{rings:i.map((n=>[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]))}}function y(n,t,i){if(Array.isArray(n)){const s=n[0];if(s>t){const i=f(s,t);n[0]=s+i*(-2*t)}else if(s<i){const t=f(s,i);n[0]=s+t*(-2*i)}}else{const s=n.x;if(s>t){const i=f(s,t);n.x+=i*(-2*t)}else if(s<i){const t=f(s,i);n.x+=t*(-2*i)}}return n}function h(n,t){const i=[],{ymin:s,ymax:m}=n,e=n.xmax-n.xmin,x=n.xmin,o=n.xmax;let r;const[a,f]=t.valid;r=d(n.xmin,t);const c=r.x,l=r.frameId;r=d(n.xmax,t);const u=r.x,p=r.frameId,y=c===u&&e>0;if(e>2*f){const n={xmin:x<o?c:u,ymin:s,xmax:f,ymax:m},t={xmin:a,ymin:s,xmax:x<o?u:c,ymax:m},e={xmin:0,ymin:s,xmax:f,ymax:m},r={xmin:a,ymin:s,xmax:0,ymax:m},y=[],h=[];I(n,e)&&y.push(l),I(n,r)&&h.push(l),I(t,e)&&y.push(p),I(t,r)&&h.push(p);for(let i=l+1;i<p;i++)y.push(i),h.push(i);i.push({extent:n,frameIds:[l]},{extent:t,frameIds:[p]},{extent:e,frameIds:y},{extent:r,frameIds:h})}else c>u||y?i.push({extent:{xmin:c,ymin:s,xmax:f,ymax:m},frameIds:[l]},{extent:{xmin:a,ymin:s,xmax:u,ymax:m},frameIds:[p]}):i.push({extent:{xmin:c,ymin:s,xmax:u,ymax:m},frameIds:[l]});return i}function d(n,t){const[i,s]=t.valid,m=2*s;let e,x=0;return n>s?(e=Math.ceil(Math.abs(n-s)/m),n-=e*m,x=e):n<i&&(e=Math.ceil(Math.abs(n-i)/m),n+=e*m,x=-e),{x:n,frameId:x}}function I(n,t){const{xmin:i,ymin:s,xmax:m,ymax:e}=t;return g(n,i,s)&&g(n,i,e)&&g(n,m,e)&&g(n,m,s)}function g(n,t,i){return t>=n.xmin&&t<=n.xmax&&i>=n.ymin&&i<=n.ymax}class j{cut(n,t){let i;if(n.rings)this.closed=!0,i=n.rings,this.minPts=4;else{if(!n.paths)return null;this.closed=!1,i=n.paths,this.minPts=2}const s=i.length,m=-2*t;for(let e=0;e<s;e++){const n=i[e];if(n&&n.length>=this.minPts){const t=[];for(const i of n)t.push([i[0]+m,i[1]]);i.push(t)}}return this.closed?n.rings=i:n.paths=i,n}}const M=n();export{l as normalizeCentralMeridianSync};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{indexOf as t,PositionHint as i}from\"../../arrayUtils.js\";import{assumeNonNull as n}from\"../../maybe.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this.compareMinX=l,this.compareMinY=c,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this.toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),M.prune(),X.prune(),Y.prune(),B.prune()}all(t){this._all(this.data,t)}search(t,i){let n=this.data;const e=this.toBBox;if(p(t,n))for(M.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;p(t,a)&&(n.leaf?i(h):x(t,a)?this._all(h,i):M.push(h))}n=M.pop()}}collides(t){let i=this.data;const n=this.toBBox;if(!p(t,i))return!1;for(M.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(p(t,h)){if(i.leaf||x(t,h))return!0;M.push(s)}}i=M.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new b([]),this}remove(i){if(!i)return this;let e,s=this.data,h=null,a=0,r=!1;const o=this.toBBox(i);for(Y.clear(),B.clear();s||Y.length>0;){var l;if(!s)s=n(Y.pop()),h=Y.data[Y.length-1],a=null!=(l=B.pop())?l:0,r=!0;if(s.leaf&&(e=t(s.children,i,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),Y.push(s),this._condense(Y),this;r||s.leaf||!x(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(Y.push(s),B.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=t;for(X.clear();n;){var e;if(!0===n.leaf)for(const t of n.children)i(t);else X.pushArray(n.children);n=null!=(e=X.pop())?e:null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this.toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));g(t,i,n,l,this.compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);g(t,a,i,o,this.compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this.toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this.toBBox,s=n?t:e(t);Y.clear();const h=this._chooseSubtree(s,this.data,i,Y);for(h.children.push(t),o(h,s);i>=0&&Y.data[i].children.length>this._maxEntries;)this._split(Y,i),i--;this._adjustParentBBoxes(s,Y,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this.toBBox),a(o,this.toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this.data=new j([t,i]),this.data.height=t.height+1,a(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this.toBBox),o=r(t,a,n,this.toBBox),l=f(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this.compareMinX:l,s=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this.toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=u(h)+u(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=u(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=u(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(i){for(let n=i.length-1;n>=0;n--){const e=i.data[n];if(0===e.children.length)if(n>0){const s=i.data[n-1],h=s.children;h.splice(t(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this.toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this.compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this.toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function f(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function x(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function g(t,i,e,h,a){const r=[i,e];for(;r.length;){const i=n(r.pop()),e=n(r.pop());if(i-e<=h)continue;const o=e+Math.ceil((i-e)/h/2)*h;s(t,o,e,i,a),r.push(e,o,o,i)}}const M=new e,X=new e,Y=new e,B=new e({deallocator:void 0});class _{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends _{constructor(){super(...arguments),this.height=1,this.indexHint=new i}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export{_ as BBox,h as PooledRBush,h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{getCentroidOptimizedGeometry as t}from\"../centroid.js\";import e from\"../OptimizedFeature.js\";import r from\"../OptimizedGeometry.js\";const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,r)=>new e(r,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(e,o)=>(e.centroid||(e.centroid=t(new r,e.geometry,o.hasZ,o.hasM)),e.centroid)};export{o as default,o as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport i from\"../../../core/has.js\";import{PooledRBush as s}from\"../../../core/libs/rbush/PooledRBush.js\";const d=5e4,n={minX:0,minY:0,maxX:0,maxY:0};function t(i,s,d){n.minX=s[0],n.minY=s[1],n.maxX=s[2],n.maxY=s[3],i.search(n,d)}class e{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s(9,i(\"csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),t(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>d&&this._loadIndex()))}}export{e as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/Evented.js\";import r from\"../../../core/Logger.js\";import{isSome as s,isNone as o}from\"../../../core/maybe.js\";import{fromRect as i}from\"../../../geometry/support/aaBoundingBox.js\";import{create as a,NEGATIVE_INFINITY as d}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as n}from\"../featureConversionUtils.js\";import{BoundsStore as h}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as u}from\"./optimizedFeatureQueryEngineAdapter.js\";class m{constructor(e){this.geometryInfo=e,this._boundsStore=new h,this._featuresById=new Map,this._markedIds=new Set,this.events=new t,this.featureAdapter=u}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=a(d);return this._featuresById.forEach((t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))})),e}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{s(t.geometry)&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(i(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(t){if(!t)return;const i=t.objectId;if(null==i)return void r.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new e(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:t}));const d=this._featuresById.get(i);let h;if(this._markedIds.add(i),d?(t.displayId=d.displayId,h=this._boundsStore.get(i),this._boundsStore.delete(i)):s(this.onFeatureAdd)&&this.onFeatureAdd(t),o(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,t);h=n(s(h)?h:a(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),s(h)&&this._boundsStore.set(i,h),this._featuresById.set(i,t)}_remove(e){return s(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{objectEqual as t}from\"../snappingUtils.js\";import{SnappingHint as n}from\"./SnappingHint.js\";class s extends n{constructor(t){super(),this.point=t}equals(n){return n instanceof s&&t(this.point,n.point)}}export{s as PointSnappingHint};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{PointConstraint as t}from\"../SnappingConstraint.js\";import{FeatureSnappingCandidate as n}from\"./FeatureSnappingCandidate.js\";import{PointSnappingHint as r}from\"../hints/PointSnappingHint.js\";class i extends n{constructor(n){super({...n,constraint:new t(n.coordinateHelper,n.targetPoint)})}get hints(){return[new r(this.targetPoint)]}}export{i as VertexSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{EdgeSnappingCandidate as e}from\"../candidates/EdgeSnappingCandidate.js\";import{VertexSnappingCandidate as t}from\"../candidates/VertexSnappingCandidate.js\";function o(o,r){switch(o.type){case\"edge\":return new e({coordinateHelper:r,edgeStart:r.pointToVector(o.start),edgeEnd:r.pointToVector(o.end),targetPoint:r.pointToVector(o.target),objectId:o.objectId});case\"vertex\":return new t({coordinateHelper:r,targetPoint:r.pointToVector(o.target),objectId:o.objectId})}}export{o as convertSnappingCandidate};\n"],"sourceRoot":""}