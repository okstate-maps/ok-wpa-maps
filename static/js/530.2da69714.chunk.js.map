{"version":3,"file":"static/js/530.2da69714.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/layers/StreamLayerView.js","../node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../chunks/tslib.es6.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import t from\"../../layers/support/FeatureFilter.js\";const o=o=>{let i=class extends o{resume(){this._isUserPaused=!1,this.suspended||this._doResume()}pause(){this._isUserPaused=!0,this.suspended||this._doPause()}constructor(...s){super(...s),this._isUserPaused=!1,this.filter=null}get connectionStatus(){return this._isUserPaused?\"paused\":this._streamConnectionStatus}_onSuspendedChange(s){s?this._doPause():this._isUserPaused||this._doResume()}};return s([e()],i.prototype,\"_isUserPaused\",void 0),s([e({readOnly:!0})],i.prototype,\"connectionStatus\",null),s([e({type:t})],i.prototype,\"filter\",void 0),i=s([r(\"esri.layers.mixins.StreamLayerView\")],i),i};export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{handlesGroup as r,makeHandle as s}from\"../../../core/handleUtils.js\";import{watch as i}from\"../../../core/reactiveUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../rest/support/FeatureSet.js\";import l from\"./FeatureLayerView2D.js\";import{toJSONGeometryType as p}from\"./support/util.js\";import c from\"../../layers/StreamLayerView.js\";function u(e,t){if(null==e&&null==t)return null;const r={};return null!=t&&(r.geometry=t.toJSON()),null!=e&&(r.where=e),r}let d=class extends(c(l)){constructor(){super(...arguments),this.pipelineConnectionStatus=\"disconnected\",this.pipelineErrorString=null,this._enabledEventTypes=new Set}initialize(){this.addHandles([i((()=>this.layer.customParameters),(e=>this._proxy.updateCustomParameters(e))),this.layer.on(\"send-message-to-socket\",(e=>this._proxy.sendMessageToSocket(e))),this.layer.on(\"send-message-to-client\",(e=>this._proxy.sendMessageToClient(e))),i((()=>this.layer.purgeOptions),(()=>this._update())),i((()=>this.suspended),this._onSuspendedChange.bind(this))],\"constructor\")}get connectionError(){return this.pipelineErrorString?new t(\"stream-controller\",this.pipelineErrorString):null}on(e,t){if(Array.isArray(e))return r(e.map((e=>this.on(e,t))));const i=[\"data-received\",\"message-received\"].includes(e);i&&(this._enabledEventTypes.add(e),this._proxy.enableEvent(e,!0));const n=super.on(e,t),o=this;return s((()=>{n.remove(),i&&(o._proxy.closed||o.hasEventListener(e)||o._proxy.enableEvent(e,!1))}))}queryLatestObservations(e,r){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new t(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");return this._proxy.queryLatestObservations(this._cleanUpQuery(e),r).then((e=>{const t=a.fromJSON(e);return t.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),t}))}detach(){super.detach(),this.pipelineConnectionStatus=\"disconnected\"}get _streamConnectionStatus(){return this.pipelineConnectionStatus}_doPause(){this._proxy?.pauseStream()}_doResume(){this._proxy?.resumeStream()}_createClientOptions(){return{...super._createClientOptions(),setProperty:e=>{this.set(e.propertyName,e.value)}}}_createTileRendererHash(e){const t=`${JSON.stringify(this.layer.purgeOptions)}.${JSON.stringify(u(this.layer.definitionExpression,this.layer.geometryDefinition))})`;return super._createTileRendererHash(e)+t}async _createServiceOptions(){const e=this.layer,{objectIdField:t}=e,r=e.fields.map((e=>e.toJSON())),s=p(e.geometryType),i=e.timeInfo?.toJSON()||null,n=e.spatialReference?e.spatialReference.toJSON():null;return{type:\"stream\",isPaused:this._isUserPaused,fields:r,fieldsIndex:this.layer.fieldsIndex.toJSON(),geometryType:s,objectIdField:t,timeInfo:i,source:this.layer.parsedUrl,serviceFilter:u(this.layer.definitionExpression,this.layer.geometryDefinition),purgeOptions:this.layer.purgeOptions.toJSON(),enabledEventTypes:Array.from(this._enabledEventTypes.values()),spatialReference:n,maxReconnectionAttempts:this.layer.maxReconnectionAttempts,maxReconnectionInterval:this.layer.maxReconnectionInterval,updateInterval:this.layer.updateInterval,customParameters:e.customParameters}}};e([n()],d.prototype,\"pipelineConnectionStatus\",void 0),e([n()],d.prototype,\"pipelineErrorString\",void 0),e([n({readOnly:!0})],d.prototype,\"connectionError\",null),e([n({readOnly:!0})],d.prototype,\"_streamConnectionStatus\",null),d=e([o(\"esri.views.2d.layers.StreamLayerView2D\")],d);const y=d;export{y as default};\n"],"names":["o","i","resume","this","_isUserPaused","suspended","_doResume","pause","_doPause","constructor","super","arguments","filter","connectionStatus","_streamConnectionStatus","_onSuspendedChange","s","e","prototype","readOnly","type","t","r","u","geometry","toJSON","where","d","c","l","pipelineConnectionStatus","pipelineErrorString","_enabledEventTypes","Set","initialize","addHandles","layer","customParameters","_proxy","updateCustomParameters","on","sendMessageToSocket","sendMessageToClient","purgeOptions","_update","bind","connectionError","Array","isArray","map","includes","add","enableEvent","n","remove","closed","hasEventListener","queryLatestObservations","_this$layer$timeInfo","_this$layer$timeInfo2","_this$layer$timeInfo3","timeInfo","endField","startField","trackIdField","_cleanUpQuery","then","a","fromJSON","features","forEach","sourceLayer","detach","_this$_proxy","pauseStream","_this$_proxy2","resumeStream","_createClientOptions","setProperty","set","propertyName","value","_createTileRendererHash","concat","JSON","stringify","definitionExpression","geometryDefinition","_createServiceOptions","_e$timeInfo","objectIdField","fields","p","geometryType","spatialReference","isPaused","fieldsIndex","source","parsedUrl","serviceFilter","enabledEventTypes","from","values","maxReconnectionAttempts","maxReconnectionInterval","updateInterval","y"],"sourceRoot":""}