(this["webpackJsonpok-wpa-maps"]=this["webpackJsonpok-wpa-maps"]||[]).push([[72],{1086:function(e,t,n){"use strict";n.r(t),n.d(t,"GraphicsSnappingSource",(function(){return Y}));var i=n(16),a=n(23),r=n(4),s=n.n(r),o=n(9),u=n(13),c=n(2),h=n(3),d=n(5),l=n(6),f=n(0),m=n(29),v=n(102),y=n(63),p=n(7),b=n(21),x=n(1),g=(n(12),n(15),n(11),n(8)),j=n(90),O=n(384),_=n(648),k=n(197),I=n(382),B=n(179),M=n(697),w=n(769),S=n(57),X=n(840),Y=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).availability=1,i.sources={multipoint:null,point:null,polygon:null,polyline:null},i.loadedWkids=new Set,i.loadedWkts=new Set,i.pendingAdds=[],i}return Object(h.a)(n,[{key:"updating",get:function(){return this.updatingHandles.updating}},{key:"layer",get:function(){return this.layerSource.layer}},{key:"destroy",value:function(){var e=this,t=this.pendingAdds;this.pendingAdds.length=0;var n,i=Object(u.a)(t);try{for(i.s();!(n=i.n()).done;){n.value.task.abort()}}catch(a){i.e(a)}finally{i.f()}this.mapSources((function(t){return e.destroySource(t)}))}},{key:"initialize",value:function(){var e=this;this.handles.add([this.layer.on("graphic-update",(function(t){return e.onGraphicUpdate(t)})),this.updatingHandles.addOnCollectionChange(this.layer.graphics,(function(t){return e.onGraphicsChanged(t)}))]),this.addMany(this.layer.graphics.toArray())}},{key:"fetchCandidates",value:function(){var e=Object(o.a)(s.a.mark((function e(t,n){var i,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.k)(this.mapSources((function(e){return e.queryEngine.executeQueryForSnapping({point:t.coordinateHelper.vectorToPoint(t.point).toJSON(),distance:t.distance,types:t.types,query:Object(p.k)(t.filter)?t.filter.createQuery().toJSON():{where:"1=1"}},n).then((function(e){return e.candidates}))})));case 2:return i=e.sent,a=i.flat().map((function(e){return Object(X.a)(e,t.coordinateHelper)})),e.abrupt("return",(Object(S.e)(t.point,a),a));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){}},{key:"onGraphicUpdate",value:function(e){switch(e.property){case"geometry":case"visible":this.remove(e.graphic),this.addMany([e.graphic])}}},{key:"onGraphicsChanged",value:function(e){var t,n=Object(u.a)(e.removed);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.remove(i)}}catch(a){n.e(a)}finally{n.f()}this.addMany(e.added)}},{key:"addMany",value:function(e){var t,n=[],i=new Map,a=Object(u.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;Object(p.j)(r.geometry)||(this.needsInitializeProjection(r.geometry.spatialReference)?(n.push(r.geometry.spatialReference),i.set(r.uid,r)):this.add(r))}}catch(s){a.e(s)}finally{a.f()}this.createPendingAdd(n,i)}},{key:"createPendingAdd",value:function(e,t){var n=this;if(e.length){var i=Object(b.h)(function(){var i=Object(o.a)(s.a.mark((function i(r){var o,c,h,d;return s.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(O.e)(e.map((function(e){return{source:e,dest:n.spatialReference}})),{signal:r});case 2:n.markLoadedSpatialReferences(e),o=Object(u.a)(t);try{for(o.s();!(c=o.n()).done;)h=Object(a.a)(c.value,2),d=h[1],n.add(d)}catch(s){o.e(s)}finally{o.f()}case 5:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}());this.updatingHandles.addPromise(i.promise);var r={task:i,graphics:t},c=function(){return Object(v.j)(n.pendingAdds,r)};i.promise.then(c,c),this.pendingAdds.push(r)}}},{key:"markLoadedSpatialReferences",value:function(e){var t,n=Object(u.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;null!=i.wkid&&this.loadedWkids.add(i.wkid),null!=i.wkt&&this.loadedWkts.add(i.wkt)}}catch(a){n.e(a)}finally{n.f()}}},{key:"add",value:function(e){if(!Object(p.j)(e.geometry)&&e.visible){var t=e.geometry;if("mesh"!==t.type){"extent"===t.type&&(t=j.a.fromExtent(t));var n=this.ensureSource(t.type);if(!Object(p.j)(n)){var i=this.createOptimizedFeature(e.uid,t);Object(p.k)(i)&&n.featureStore.add(i)}}}}},{key:"needsInitializeProjection",value:function(e){return(null==e.wkid||!this.loadedWkids.has(e.wkid))&&(null==e.wkt||!this.loadedWkts.has(e.wkt))&&!Object(O.a)(e,this.spatialReference)}},{key:"createOptimizedFeature",value:function(e,t){var n=Object(O.j)(Object(_.a)(t),this.spatialReference);return n?new B.b(Object(I.d)(n,!1,!1),Object(i.a)({},E,e),null,e):null}},{key:"ensureSource",value:function(e){var t=this.sources[e];if(Object(p.k)(t))return t;var n=this.createSource(e);return this.sources[e]=n,n}},{key:"createSource",value:function(e){var t=k.a.toJSON(e),n=new M.a({geometryType:t,hasZ:!1,hasM:!1});return{featureStore:n,queryEngine:new w.a({featureStore:n,fields:[{name:E,type:"esriFieldTypeOID",alias:E}],geometryType:t,hasM:!1,hasZ:!1,objectIdField:E,spatialReference:this.spatialReference,scheduler:Object(p.k)(this.view)&&"3d"===this.view.type?this.view.resourceController.scheduler:null}),type:e}}},{key:"remove",value:function(e){var t=this;this.mapSources((function(n){return t.removeFromSource(n,e)}));var n,i=Object(u.a)(this.pendingAdds);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.graphics.delete(e.uid),0===a.graphics.size&&a.task.abort()}}catch(r){i.e(r)}finally{i.f()}}},{key:"removeFromSource",value:function(e,t){var n=t.uid;e.featureStore.has(n)&&e.featureStore.removeById(t.uid)}},{key:"destroySource",value:function(e){e.queryEngine.destroy(),this.sources[e.type]=null}},{key:"mapSources",value:function(e){var t=this.sources,n=t.point,i=t.polygon,a=t.polyline,r=t.multipoint,s=[];return Object(p.k)(n)&&s.push(e(n)),Object(p.k)(i)&&s.push(e(i)),Object(p.k)(a)&&s.push(e(a)),Object(p.k)(r)&&s.push(e(r)),s}}]),n}(Object(y.b)(m.a));Object(f.a)([Object(x.b)({constructOnly:!0})],Y.prototype,"spatialReference",void 0),Object(f.a)([Object(x.b)({constructOnly:!0})],Y.prototype,"layerSource",void 0),Object(f.a)([Object(x.b)({constructOnly:!0})],Y.prototype,"view",void 0),Object(f.a)([Object(x.b)({readOnly:!0})],Y.prototype,"updating",null),Object(f.a)([Object(x.b)({readOnly:!0})],Y.prototype,"availability",void 0),Y=Object(f.a)([Object(g.a)("esri.views.interactive.snapping.featureSources.GraphicsSnappingSource")],Y);var E="OBJECTID"},648:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(2),a=n(3),r=n(23),s=n(13),o=n(139),u=n(303),c=n(306),h=n(73),d=n(112),l=n(42);function f(e){if(!e)return null;if("mesh"===e.type)return e.toJSON();var t=null,n=e.spatialReference,i=Object(l.e)(n);if(!i)return e.toJSON();var a,r=n.isWebMercator?102100:4326,o=d.a[r].maxX,f=d.a[r].minX,y=d.a[r].plus180Line,p=d.a[r].minus180Line,b=e.toJSON();if(Object(h.f)(b))a=v(b,o,f);else if(Object(h.e)(b))b.points=b.points.map((function(e){return v(e,o,f)})),a=b;else if(Object(h.d)(b))a=m(b,i);else if(Object(h.g)(b)||Object(h.h)(b)){var j=g;Object(u.a)(j,b);var O={xmin:j[0],ymin:j[1],xmax:j[2],ymax:j[3]},_=Object(d.d)(O.xmin,f)*(2*o),k=0===_?b:function(e,t){var n,i=Object(d.b)(e),a=Object(s.a)(i);try{for(a.s();!(n=a.n()).done;){var r,o=n.value,u=Object(s.a)(o);try{for(u.s();!(r=u.n()).done;){r.value[0]+=t}}catch(c){u.e(c)}finally{u.f()}}}catch(c){a.e(c)}finally{a.f()}return e}(b,_);O.xmin+=_,O.xmax+=_,Object(c.b)(O,y)&&O.xmax!==o||Object(c.b)(O,p)&&O.xmin!==f?t=k:a=k}else a=e.toJSON();return null!==t?(new x).cut(t,o):a}function m(e,t){if(!t)return e;var n=function(e,t){var n,i=[],a=e.ymin,s=e.ymax,o=e.xmax-e.xmin,u=e.xmin,c=e.xmax,h=Object(r.a)(t.valid,2),d=h[0],l=h[1],f=(n=y(e.xmin,t)).x,m=n.frameId,v=(n=y(e.xmax,t)).x,b=n.frameId,x=f===v&&o>0;if(o>2*l){var g={xmin:u<c?f:v,ymin:a,xmax:l,ymax:s},j={xmin:d,ymin:a,xmax:u<c?v:f,ymax:s},O={xmin:0,ymin:a,xmax:l,ymax:s},_={xmin:d,ymin:a,xmax:0,ymax:s},k=[],I=[];p(g,O)&&k.push(m),p(g,_)&&I.push(m),p(j,O)&&k.push(b),p(j,_)&&I.push(b);for(var B=m+1;B<b;B++)k.push(B),I.push(B);i.push({extent:g,frameIds:[m]},{extent:j,frameIds:[b]},{extent:O,frameIds:k},{extent:_,frameIds:I})}else f>v||x?i.push({extent:{xmin:f,ymin:a,xmax:l,ymax:s},frameIds:[m]},{extent:{xmin:d,ymin:a,xmax:v,ymax:s},frameIds:[b]}):i.push({extent:{xmin:f,ymin:a,xmax:v,ymax:s},frameIds:[m]});return i}(e,t).map((function(e){return e.extent}));return n.length<2?n[0]||e:n.length>2?(e.xmin=t.valid[0],e.xmax=t.valid[1],e):{rings:n.map((function(e){return[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]}))}}function v(e,t,n){if(Array.isArray(e)){var i=e[0];if(i>t){var a=Object(d.d)(i,t);e[0]=i+a*(-2*t)}else if(i<n){var r=Object(d.d)(i,n);e[0]=i+r*(-2*n)}}else{var s=e.x;if(s>t){var o=Object(d.d)(s,t);e.x+=o*(-2*t)}else if(s<n){var u=Object(d.d)(s,n);e.x+=u*(-2*n)}}return e}function y(e,t){var n,i=Object(r.a)(t.valid,2),a=i[0],s=i[1],o=2*s,u=0;return e>s?(e-=(n=Math.ceil(Math.abs(e-s)/o))*o,u=n):e<a&&(e+=(n=Math.ceil(Math.abs(e-a)/o))*o,u=-n),{x:e,frameId:u}}function p(e,t){var n=t.xmin,i=t.ymin,a=t.xmax,r=t.ymax;return b(e,n,i)&&b(e,n,r)&&b(e,a,r)&&b(e,a,i)}function b(e,t,n){return t>=e.xmin&&t<=e.xmax&&n>=e.ymin&&n<=e.ymax}var x=function(){function e(){Object(i.a)(this,e)}return Object(a.a)(e,[{key:"cut",value:function(e,t){var n;if(e.rings)this.closed=!0,n=e.rings,this.minPts=4;else{if(!e.paths)return null;this.closed=!1,n=e.paths,this.minPts=2}for(var i=n.length,a=-2*t,r=0;r<i;r++){var o=n[r];if(o&&o.length>=this.minPts){var u,c=[],h=Object(s.a)(o);try{for(h.s();!(u=h.n()).done;){var d=u.value;c.push([d[0]+a,d[1]])}}catch(l){h.e(l)}finally{h.f()}n.push(c)}}return this.closed?e.rings=n:e.paths=n,e}}]),e}(),g=Object(o.l)()},667:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(5),a=n(6),r=n(13),s=n(2),o=n(3),u=n(102),c=n(7),h=n(212),d=n(418),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,n=arguments.length>1?arguments[1]:void 0;Object(s.a)(this,e),this.compareMinX=y,this.compareMinY=p,this.toBBox=function(e){return e},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&("function"==typeof n?this.toBBox=n:this._initFormat(n)),this.clear()}return Object(o.a)(e,[{key:"destroy",value:function(){this.clear(),I.prune(),B.prune(),M.prune(),w.prune()}},{key:"all",value:function(e){this._all(this.data,e)}},{key:"search",value:function(e,t){var n=this.data,i=this.toBBox;if(_(e,n))for(I.clear();n;){for(var a=0,r=n.children.length;a<r;a++){var s=n.children[a],o=n.leaf?i(s):s;_(e,o)&&(n.leaf?t(s):O(e,o)?this._all(s,t):I.push(s))}n=I.pop()}}},{key:"collides",value:function(e){var t=this.data,n=this.toBBox;if(!_(e,t))return!1;for(I.clear();t;){for(var i=0,a=t.children.length;i<a;i++){var r=t.children[i],s=t.leaf?n(r):r;if(_(e,s)){if(t.leaf||O(e,s))return!0;I.push(r)}}t=I.pop()}return!1}},{key:"load",value:function(e){if(!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var i=this._build(e.slice(0,e.length),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var a=this.data;this.data=i,i=a}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}},{key:"insert",value:function(e){return e&&this._insert(e,this.data.height-1),this}},{key:"clear",value:function(){return this.data=new X([]),this}},{key:"remove",value:function(e){if(!e)return this;var t,n=this.data,i=null,a=0,r=!1,s=this.toBBox(e);for(M.clear(),w.clear();n||M.length>0;){var o;if(n||(n=Object(c.d)(M.pop()),i=M.data[M.length-1],a=null!=(o=w.pop())?o:0,r=!0),n.leaf&&-1!==(t=Object(u.e)(n.children,e,n.children.length,n.indexHint)))return n.children.splice(t,1),M.push(n),this._condense(M),this;r||n.leaf||!O(n,s)?i?(a++,n=i.children[a],r=!1):n=null:(M.push(n),w.push(a),a=0,i=n,n=n.children[0])}return this}},{key:"toJSON",value:function(){return this.data}},{key:"fromJSON",value:function(e){return this.data=e,this}},{key:"_all",value:function(e,t){var n=e;for(B.clear();n;){var i;if(!0===n.leaf){var a,s=Object(r.a)(n.children);try{for(s.s();!(a=s.n()).done;){t(a.value)}}catch(o){s.e(o)}finally{s.f()}}else B.pushArray(n.children);n=null!=(i=B.pop())?i:null}}},{key:"_build",value:function(e,t,n,i){var a=n-t+1,r=this._maxEntries;if(a<=r){var s=new X(e.slice(t,n+1));return f(s,this.toBBox),s}i||(i=Math.ceil(Math.log(a)/Math.log(r)),r=Math.ceil(a/Math.pow(r,i-1)));var o=new Y([]);o.height=i;var u=Math.ceil(a/r),c=u*Math.ceil(Math.sqrt(r));k(e,t,n,c,this.compareMinX);for(var h=t;h<=n;h+=c){var d=Math.min(h+c-1,n);k(e,h,d,u,this.compareMinY);for(var l=h;l<=d;l+=u){var m=Math.min(l+u-1,d);o.children.push(this._build(e,l,m,i-1))}}return f(o,this.toBBox),o}},{key:"_chooseSubtree",value:function(e,t,n,i){for(;i.push(t),!0!==t.leaf&&i.length-1!==n;){for(var a=void 0,r=1/0,s=1/0,o=0,u=t.children.length;o<u;o++){var c=t.children[o],h=b(c),d=g(e,c)-h;d<s?(s=d,r=h<r?h:r,a=c):d===s&&h<r&&(r=h,a=c)}t=a||t.children[0]}return t}},{key:"_insert",value:function(e,t,n){var i=this.toBBox,a=n?e:i(e);M.clear();var r=this._chooseSubtree(a,this.data,t,M);for(r.children.push(e),v(r,a);t>=0&&M.data[t].children.length>this._maxEntries;)this._split(M,t),t--;this._adjustParentBBoxes(a,M,t)}},{key:"_split",value:function(e,t){var n=e.data[t],i=n.children.length,a=this._minEntries;this._chooseSplitAxis(n,a,i);var r=this._chooseSplitIndex(n,a,i);if(r){var s=n.children.splice(r,n.children.length-r),o=n.leaf?new X(s):new Y(s);o.height=n.height,f(n,this.toBBox),f(o,this.toBBox),t?e.data[t-1].children.push(o):this._splitRoot(n,o)}else console.log("  Error: assertion failed at PooledRBush._split: no valid split index")}},{key:"_splitRoot",value:function(e,t){this.data=new Y([e,t]),this.data.height=e.height+1,f(this.data,this.toBBox)}},{key:"_chooseSplitIndex",value:function(e,t,n){var i,a,r;i=a=1/0;for(var s=t;s<=n-t;s++){var o=m(e,0,s,this.toBBox),u=m(e,s,n,this.toBBox),c=j(o,u),h=b(o)+b(u);c<i?(i=c,r=s,a=h<a?h:a):c===i&&h<a&&(a=h,r=s)}return r}},{key:"_chooseSplitAxis",value:function(e,t,n){var i=e.leaf?this.compareMinX:y,a=e.leaf?this.compareMinY:p;this._allDistMargin(e,t,n,i)<this._allDistMargin(e,t,n,a)&&e.children.sort(i)}},{key:"_allDistMargin",value:function(e,t,n,i){e.children.sort(i);for(var a=this.toBBox,r=m(e,0,t,a),s=m(e,n-t,n,a),o=x(r)+x(s),u=t;u<n-t;u++){var c=e.children[u];v(r,e.leaf?a(c):c),o+=x(r)}for(var h=n-t-1;h>=t;h--){var d=e.children[h];v(s,e.leaf?a(d):d),o+=x(s)}return o}},{key:"_adjustParentBBoxes",value:function(e,t,n){for(var i=n;i>=0;i--)v(t.data[i],e)}},{key:"_condense",value:function(e){for(var t=e.length-1;t>=0;t--){var n=e.data[t];if(0===n.children.length)if(t>0){var i=e.data[t-1],a=i.children;a.splice(Object(u.e)(a,n,a.length,i.indexHint),1)}else this.clear();else f(n,this.toBBox)}}},{key:"_initFormat",value:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}]),e}();function f(e,t){m(e,0,e.children.length,t,e)}function m(e,t,n,i,a){a||(a=new X([])),a.minX=1/0,a.minY=1/0,a.maxX=-1/0,a.maxY=-1/0;for(var r,s=t;s<n;s++)r=e.children[s],v(a,e.leaf?i(r):r);return a}function v(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function y(e,t){return e.minX-t.minX}function p(e,t){return e.minY-t.minY}function b(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function x(e){return e.maxX-e.minX+(e.maxY-e.minY)}function g(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function j(e,t){var n=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),a=Math.min(e.maxX,t.maxX),r=Math.min(e.maxY,t.maxY);return Math.max(0,a-n)*Math.max(0,r-i)}function O(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function _(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function k(e,t,n,i,a){for(var r=[t,n];r.length;){var s=Object(c.d)(r.pop()),o=Object(c.d)(r.pop());if(!(s-o<=i)){var u=o+Math.ceil((s-o)/i/2)*i;Object(d.a)(e,u,o,s,a),r.push(o,u,u,s)}}}var I=new h.a,B=new h.a,M=new h.a,w=new h.a({deallocator:void 0}),S=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.apply(this,arguments)).height=1,e.indexHint=new u.a,e}return n}((function e(){Object(s.a)(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0})),X=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this)).children=e,i.leaf=!0,i}return n}(S),Y=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this)).children=e,i.leaf=!1,i}return n}(S)},685:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(582),a=n(179),r=n(131),s={getObjectId:function(e){return e.objectId},getAttributes:function(e){return e.attributes},getAttribute:function(e,t){return e.attributes[t]},cloneWithGeometry:function(e,t){return new a.b(t,e.attributes,null,e.objectId)},getGeometry:function(e){return e.geometry},getCentroid:function(e,t){return e.centroid||(e.centroid=Object(i.a)(new r.a,e.geometry,t.hasZ,t.hasM)),e.centroid}}},691:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(2),a=n(3),r=n(12),s=n(667),o={minX:0,minY:0,maxX:0,maxY:0};var u=function(){function e(){var t=this;Object(i.a)(this,e),this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s.a(9,Object(r.a)("csp-restrictions")?function(e){return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}}:["[0]","[1]","[2]","[3]"]),this._loadIndex=function(){if(t._indexInvalid){var e=new Array(t._idByBounds.size),n=0;t._idByBounds.forEach((function(t,i){e[n++]=i})),t._indexInvalid=!1,t._index.clear(),t._index.load(e)}else t._boundsToLoad.length&&(t._index.load(t._boundsToLoad.filter((function(e){return t._idByBounds.has(e)}))),t._boundsToLoad.length=0)}}return Object(a.a)(e,[{key:"clear",value:function(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}},{key:"delete",value:function(e){var t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}},{key:"forEachInBounds",value:function(e,t){var n=this;this._loadIndex(),function(e,t,n){o.minX=t[0],o.minY=t[1],o.maxX=t[2],o.maxY=t[3],e.search(o,n)}(this._index,e,(function(e){return t(n._idByBounds.get(e))}))}},{key:"get",value:function(e){return this._boundsById.get(e)}},{key:"has",value:function(e){return this._boundsById.has(e)}},{key:"invalidateIndex",value:function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}},{key:"set",value:function(e,t){if(!this._indexInvalid){var n=this._boundsById.get(e);n&&(this._index.remove(n),this._idByBounds.delete(n))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}]),e}()},697:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n(13),a=n(2),r=n(3),s=n(18),o=n(67),u=n(11),c=n(7),h=n(304),d=n(139),l=n(382),f=n(691),m=n(685),v=function(){function e(t){Object(a.a)(this,e),this.geometryInfo=t,this._boundsStore=new f.a,this._featuresById=new Map,this._markedIds=new Set,this.events=new o.a,this.featureAdapter=m.a}return Object(r.a)(e,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){var e=this;if(!this.numFeatures)return null;var t=Object(d.l)(d.a);return this._featuresById.forEach((function(n){var i=e._boundsStore.get(n.objectId);i&&(t[0]=Math.min(i[0],t[0]),t[1]=Math.min(i[1],t[1]),t[2]=Math.max(i[2],t[2]),t[3]=Math.max(i[3],t[3]))})),t}},{key:"storeStatistics",get:function(){var e=0;return this._featuresById.forEach((function(t){Object(c.k)(t.geometry)&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}},{key:"add",value:function(e){this._add(e),this._emitChanged()}},{key:"addMany",value:function(e){var t,n=Object(i.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;this._add(a)}}catch(r){n.e(r)}finally{n.f()}this._emitChanged()}},{key:"clear",value:function(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}},{key:"removeById",value:function(e){var t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}},{key:"removeManyById",value:function(e){this._boundsStore.invalidateIndex();var t,n=Object(i.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,r=this._featuresById.get(a);r&&this._remove(r)}}catch(s){n.e(s)}finally{n.f()}this._emitChanged()}},{key:"forEachBounds",value:function(e,t,n){var a,r=Object(i.a)(e);try{for(r.s();!(a=r.n()).done;){var s=a.value,o=this._boundsStore.get(s.objectId);o&&t(Object(h.o)(n,o))}}catch(u){r.e(u)}finally{r.f()}}},{key:"getFeature",value:function(e){return this._featuresById.get(e)}},{key:"has",value:function(e){return this._featuresById.has(e)}},{key:"forEach",value:function(e){this._featuresById.forEach((function(t){return e(t)}))}},{key:"forEachInBounds",value:function(e,t){var n=this;this._boundsStore.forEachInBounds(e,(function(e){t(n._featuresById.get(e))}))}},{key:"startMarkingUsedFeatures",value:function(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}},{key:"sweep",value:function(){var e=this,t=!1;this._featuresById.forEach((function(n,i){e._markedIds.has(i)||(t=!0,e._remove(n))})),this._markedIds.clear(),t&&this._emitChanged()}},{key:"_emitChanged",value:function(){this.events.emit("changed",void 0)}},{key:"_add",value:function(e){if(e){var t=e.objectId;if(null!=t){var n,i=this._featuresById.get(t);if(this._markedIds.add(t),i?(e.displayId=i.displayId,n=this._boundsStore.get(t),this._boundsStore.delete(t)):Object(c.k)(this.onFeatureAdd)&&this.onFeatureAdd(e),Object(c.j)(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);n=Object(l.r)(Object(c.k)(n)?n:Object(d.l)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),Object(c.k)(n)&&this._boundsStore.set(t,n),this._featuresById.set(t,e)}else u.a.getLogger("esri.layers.graphics.data.FeatureStore").error(new s.a("featurestore:invalid-feature","feature id is missing",{feature:e}))}}},{key:"_remove",value:function(e){return Object(c.k)(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}]),e}()},724:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(2),a=n(3),r=n(5),s=n(6),o=n(57),u=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this)).point=e,a}return Object(a.a)(n,[{key:"equals",value:function(e){return e instanceof n&&Object(o.d)(this.point,e.point)}}]),n}(n(218).a)},840:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(436),a=n(10),r=n(2),s=n(3),o=n(5),u=n(6),c=n(133),h=n(331),d=n(724),l=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,Object(a.a)(Object(a.a)({},e),{},{constraint:new c.d(e.coordinateHelper,e.targetPoint)}))}return Object(s.a)(n,[{key:"hints",get:function(){return[new d.a(this.targetPoint)]}}]),n}(h.a);function f(e,t){switch(e.type){case"edge":return new i.a({coordinateHelper:t,edgeStart:t.pointToVector(e.start),edgeEnd:t.pointToVector(e.end),targetPoint:t.pointToVector(e.target),objectId:e.objectId});case"vertex":return new l({coordinateHelper:t,targetPoint:t.pointToVector(e.target),objectId:e.objectId})}}}}]);
//# sourceMappingURL=72.0bb5f9b4.chunk.js.map