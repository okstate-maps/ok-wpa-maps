"use strict";(self.webpackChunkok_wpa_maps=self.webpackChunkok_wpa_maps||[]).push([[29145],{29145(e,t,n){n.r(t),n.d(t,{default:()=>h});var o=n(6326),i=n(46053),s=(n(81806),n(76460),n(47249),n(87990)),a=n(25329),c=n(94126),r=n(98108),l=(n(15187),n(63582)),u=n(54761),d=n(10336);function m(e,t){return!!(e.sourceLayer&&"globalIdField"in e.sourceLayer&&e.sourceLayer.globalIdField&&t.fromNetworkElement)&&e.attributes[e.sourceLayer.globalIdField]===t.fromNetworkElement.globalId}const g="esri-feature-form-utility-network-association-settings",p={base:g,infoContainer:"".concat(g,"__info-container")};let y=class extends a.A{constructor(e,t){super(e,t),this.percentAlong=50,this.headingLevel=5,this.messagesFeature=null,this.messagesCommon=null,this.messagesFeatureForm=null,this.readOnly=!1,this.sourceFeature=null,this.targetFeature=null,this.utilityNetwork=null}loadDependencies(){return(0,c.W)({block:()=>Promise.all([n.e(55304),n.e(9474),n.e(91654),n.e(85375),n.e(62428),n.e(51866),n.e(14841),n.e(75502)]).then(n.bind(n,75502)),combobox:()=>Promise.all([n.e(55304),n.e(9474),n.e(91654),n.e(10239),n.e(64880),n.e(43453)]).then(n.bind(n,64880)),"combobox-item":()=>Promise.all([n.e(55304),n.e(73438)]).then(n.bind(n,73438)),"input-number":()=>Promise.all([n.e(55304),n.e(9474),n.e(36175),n.e(41763),n.e(91730)]).then(n.bind(n,41763)),label:()=>Promise.all([n.e(55304),n.e(11839)]).then(n.bind(n,11839)),switch:()=>Promise.all([n.e(55304),n.e(9474),n.e(8989)]).then(n.bind(n,8989))})}get association(){return this._get("association")}set association(e){this.percentAlong=e.percentAlong?100*e.percentAlong:50,this._set("association",e)}get associationType(){return this.association.associationType}set associationType(e){this.association.associationType=e,"junction-edge-to-connectivity"!==e&&"junction-edge-from-connectivity"!==e||(this.association.percentAlong=void 0)}render(){return(0,u.K)("div",{class:this.classes(p.base,r.D.widget)},this._renderFromAssociationEndpoint(),this._renderToAssociationEndpoint(),this._renderAdditionalContent())}_renderFromAssociationEndpoint(){const{associationType:e,association:t,sourceFeature:n,targetFeature:o,messagesFeatureForm:i}=this,s=m(n.feature,t)?n:o,a=s.label,c=(0,d.o)(t,"from",i.associations);switch(e){case"connectivity":case"junction-junction-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-from-connectivity":case"junction-edge-to-connectivity":return this._renderAssociationEndpoint(a,c,this._renderConnectivityContent(s.feature,t.fromNetworkElement))}return this._renderAssociationEndpoint(a,c)}_renderToAssociationEndpoint(){const{associationType:e,association:t,sourceFeature:n,targetFeature:o,messagesFeatureForm:i}=this,s=m(n.feature,t)?o:n,a=s.label,c=(0,d.o)(t,"to",i.associations);let r;switch(e){case"connectivity":case"junction-junction-connectivity":r=this._renderConnectivityContent(s.feature,t.toNetworkElement);break;case"containment":r=this._isNonspatial(s.feature)?null:this._renderContainmentContent()}return this._renderAssociationEndpoint(a,c,r)}_renderAssociationEndpoint(e,t,n){return(0,u.K)("calcite-block",{description:t,expanded:!0,heading:e},n)}_renderContainmentContent(){var e;const{messagesFeatureForm:t,association:n}=this,o=null!==(e=n.isContentVisible)&&void 0!==e&&e;return(0,u.K)("calcite-label",{layout:"inline"},t.associations.visible,(0,u.K)("calcite-switch",{checked:o,onCalciteSwitchChange:e=>{let{currentTarget:t}=e;n.isContentVisible=t.checked}}))}_renderConnectivityContent(e,t){const{messagesFeatureForm:n,utilityNetwork:o}=this,i=o.getTerminalConfiguration(e),s=(null===i||void 0===i?void 0:i.terminals.map(e=>this._renderComboboxListItemNumber(e.id,t.terminalId,e.name)))||[];return(0,u.K)("calcite-label",null,n.associations.terminal,(0,u.K)("calcite-combobox",{allowCustomValues:!1,label:n.associations.terminalComboboxLabel,overlayPositioning:"fixed",selectionMode:"single-persist",onCalciteComboboxChange:e=>{let{currentTarget:n}=e;t.terminalId=parseInt(n.value,10)}},...s))}_renderAdditionalContent(){const{associationType:e}=this;switch(e){case"connectivity":case"junction-junction-connectivity":case"attachment":case"containment":return}const t="junction-edge-midspan-connectivity"===e?e:"junction-edge-from-connectivity",{messagesFeatureForm:n}=this,o=[this._renderComboboxListItemString("junction-edge-midspan-connectivity",t,n.associations.midspanEdge),this._renderComboboxListItemString("junction-edge-from-connectivity",t,n.associations.endpointEdge)];return(0,u.K)("div",{class:p.infoContainer},(0,u.K)("calcite-label",{key:"additional-content"},n.associations.connectTo,(0,u.K)("calcite-combobox",{allowCustomValues:!1,label:n.associations.edgeConnectionComboboxLabel,overlayPositioning:"fixed",selectionMode:"single-persist",onCalciteComboboxChange:e=>{let{currentTarget:t}=e;this.associationType=t.value}},...o)),"junction-edge-midspan-connectivity"===t?this._renderMidspanEdgeContent():this._renderEndpointEdgeContent())}_renderMidspanEdgeContent(){const{messagesFeatureForm:e,percentAlong:t,association:n}=this;return n.percentAlong=t/100,(0,u.K)("calcite-label",{key:"midspan-edge"},e.associations.midspanLocation,(0,u.K)("calcite-input-number",{max:100,min:0,numberButtonType:"vertical",suffixText:"%",value:"".concat(t),onCalciteInputNumberInput:e=>{let{currentTarget:t}=e;this.percentAlong=parseFloat(t.value)}}))}_renderEndpointEdgeContent(){const{associationType:e,messagesFeatureForm:t}=this,n="junction-edge-to-connectivity"===e;return(0,u.K)("calcite-label",{key:"endpoint-edge"},t.associations.edgeSide,(0,u.K)("calcite-label",{layout:"inline"},t.associations.fromSide,(0,u.K)("calcite-switch",{checked:n,onCalciteSwitchChange:e=>{let{currentTarget:t}=e;const n=t.checked?"junction-edge-to-connectivity":"junction-edge-from-connectivity";this.associationType=n}}),t.associations.toSide))}_renderComboboxListItemNumber(e,t,n){return(0,u.K)("calcite-combobox-item",{heading:n,key:"#".concat(e),selected:t===e,value:"".concat(e)})}_renderComboboxListItemString(e,t,n){return(0,u.K)("calcite-combobox-item",{heading:n,key:"#".concat(e),selected:t===e,value:"".concat(e)})}_isNonspatial(e){const{sourceLayer:t}=e;return null!=t&&"geometryType"in t&&null==t.geometryType}};(0,o.Cg)([(0,i.MZ)()],y.prototype,"association",null),(0,o.Cg)([(0,i.MZ)()],y.prototype,"percentAlong",void 0),(0,o.Cg)([(0,i.MZ)()],y.prototype,"associationType",null),(0,o.Cg)([(0,i.MZ)()],y.prototype,"headingLevel",void 0),(0,o.Cg)([(0,i.MZ)(),(0,l.G)("esri/widgets/Feature/t9n/Feature")],y.prototype,"messagesFeature",void 0),(0,o.Cg)([(0,i.MZ)(),(0,l.G)("esri/t9n/common")],y.prototype,"messagesCommon",void 0),(0,o.Cg)([(0,i.MZ)(),(0,l.G)("esri/widgets/FeatureForm/t9n/FeatureForm")],y.prototype,"messagesFeatureForm",void 0),(0,o.Cg)([(0,i.MZ)()],y.prototype,"readOnly",void 0),(0,o.Cg)([(0,i.MZ)()],y.prototype,"sourceFeature",void 0),(0,o.Cg)([(0,i.MZ)()],y.prototype,"targetFeature",void 0),(0,o.Cg)([(0,i.MZ)()],y.prototype,"utilityNetwork",void 0),y=(0,o.Cg)([(0,s.$)("esri.widgets.FeatureForm.FeatureFormUtilityNetworkAssociations.UtilityNetworkAssociationSettings")],y);const h=y},10336(e,t,n){function o(e,t,n){const{associationType:o}=e;switch(o){case"attachment":return"to"===t?n.attachment:n.structure;case"containment":return"to"===t?n.content:n.container;case"junction-edge-from-connectivity":case"junction-edge-to-connectivity":case"junction-edge-midspan-connectivity":case"junction-junction-connectivity":case"connectivity":return n.connectivity}}n.d(t,{o:()=>o})}}]);
//# sourceMappingURL=29145.c38ebedc.chunk.js.map