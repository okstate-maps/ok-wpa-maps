{"version":3,"file":"static/js/8178.46b0d329.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js","../node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{createTask as e}from\"../../../core/asyncUtils.js\";import t from\"../../../core/Error.js\";import r from\"../../../core/Logger.js\";import{throwIfAborted as s,isAbortError as a}from\"../../../core/promiseUtils.js\";import{equals as i}from\"../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as o,convertToGeometry as n}from\"../featureConversionUtils.js\";import u from\"../data/FeatureStore.js\";import{checkProjectionSupport as p,project as l}from\"../data/projectionSupport.js\";import{QueryEngine as h}from\"../data/QueryEngine.js\";import{validateGeoJSON as c,createOptimizedFeatures as m}from\"./geojson/geojson.js\";import{mixAttributes as y}from\"./support/sourceUtils.js\";import{getGetFeatureSpatialReference as f,getFeature as g}from\"../../ogc/wfsUtils.js\";import d from\"../../support/FieldsIndex.js\";import{utc as _}from\"../../../time/timeZoneUtils.js\";class F{constructor(){this._queryEngine=null,this._customParameters=null}destroy(){this._queryEngine?.destroy(),this._queryEngine=null}async load(e,r){const{getFeatureUrl:a,getFeatureOutputFormat:i,fields:o,geometryType:n,featureType:l,objectIdField:c,customParameters:m}=e,{spatialReference:y,getFeatureSpatialReference:g}=f(a,l,e.spatialReference);this._featureType=l,this._customParameters=m,this._getFeatureUrl=a,this._getFeatureOutputFormat=i,this._getFeatureSpatialReference=g;try{await p(g,y)}catch{throw new t(\"unsupported-projection\",\"Projection not supported\",{inSpatialReference:g,outSpatialReference:y})}s(r);const F=d.fromLayerJSON({fields:o,dateFieldsTimeReference:o.some((e=>\"esriFieldTypeDate\"===e.type))?{timeZoneIANA:_}:null}),w=await this._snapshotFeatures({fieldsIndex:F,geometryType:n,objectIdField:c,spatialReference:y},r.signal);return this._queryEngine=new h({fieldsIndex:F,geometryType:n,hasM:!1,hasZ:!1,objectIdField:c,spatialReference:y,timeInfo:null,featureStore:new u({geometryType:n,hasM:!1,hasZ:!1})}),this._queryEngine.featureStore.addMany(w),{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async applyEdits(){throw new t(\"wfs-source:editing-not-supported\",\"applyEdits() is not supported on WFSLayer\")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(s){return this._customParameters=s,this._snapshotTask?.abort(),this._snapshotTask=e((e=>this._snapshotFeatures(this._queryEngine,e))),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)}),(e=>{this._queryEngine.featureStore.clear(),a(e)||r.getLogger(\"esri.layers.WFSLayer\").error(new t(\"wfs-layer:getfeature-error\",\"An error occurred during the GetFeature request\",{error:e}))})),await this._waitSnapshotComplete(),{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _snapshotFeatures({objectIdField:e,geometryType:t,spatialReference:r,fieldsIndex:a},u){const p=await g(this._getFeatureUrl??\"\",this._featureType.typeName,this._getFeatureSpatialReference,this._getFeatureOutputFormat,{customParameters:this._customParameters,signal:u});c(p,this._getFeatureSpatialReference.wkid),s(u);const h=m(p,{geometryType:t,hasZ:!1,objectIdField:e});if(!i(r,this._getFeatureSpatialReference))for(const s of h)null!=s.geometry&&(s.geometry=o(l(n(s.geometry,t,!1,!1),this._getFeatureSpatialReference,r)));let f=1;for(const s of h){const t={};y(a,t,s.attributes,!0),s.attributes=t,null==t[e]&&(s.objectId=t[e]=f++)}return h}}export{F as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{parseDate as t}from\"../../../../core/date.js\";import{isValid as n}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{validateFieldValue as e,validationErrorToString as r,isNumericField as i,isStringField as o,isDateField as s,sanitizeNullFieldValue as l}from\"../../../support/fieldUtils.js\";class u{constructor(){this.code=null,this.description=null}}class c{constructor(t){this.error=new u,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}}function f(t){return new c(t)}class a{constructor(t){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}}function d(t){return new a(t)}const m=new Set;function p(t,n,i,o=!1){m.clear();for(const s in i){const l=t.get(s);if(!l)continue;const u=h(l,i[s]);if(m.add(l.name),l&&(o||l.editable)){const t=e(l,u);if(t)return f(r(t,l,u));n[l.name]=u}}for(const e of t?.requiredFields??[])if(!m.has(e.name))return f(`missing required field \"${e.name}\"`);return null}function g(n,e){if(n?.length)for(const{name:r}of n)\"string\"==typeof e[r]&&(e[r]=t(e[r]))}function h(n,e){let r=e;return i(n)&&\"string\"==typeof e?r=parseFloat(e):o(n)&&null!=e&&\"string\"!=typeof e?r=String(e):s(n)&&\"string\"==typeof e&&(r=t(e)),l(r)}let y;function w(t,e){if(!t||!n(e))return t;if(\"rings\"in t||\"paths\"in t){if(null==y)throw new TypeError(\"geometry engine not loaded\");return y.simplify(e,t)}return t}async function j(){return null==y&&(y=await import(\"../../../../geometry/geometryEngineJSON.js\")),y}async function I(t,e){!n(t)||\"esriGeometryPolygon\"!==e&&\"esriGeometryPolyline\"!==e||await j()}export{f as createFeatureEditErrorResult,d as createFeatureEditSuccessResult,I as loadGeometryEngineForSimplify,p as mixAttributes,g as parseStringDateFieldValues,w as simplify};\n"],"names":["F","constructor","this","_queryEngine","_customParameters","destroy","_this$_queryEngine","load","e","r","getFeatureUrl","a","getFeatureOutputFormat","i","fields","o","geometryType","n","featureType","l","objectIdField","c","customParameters","m","spatialReference","y","getFeatureSpatialReference","g","f","_featureType","_getFeatureUrl","_getFeatureOutputFormat","_getFeatureSpatialReference","p","t","inSpatialReference","outSpatialReference","s","d","fromLayerJSON","dateFieldsTimeReference","some","type","timeZoneIANA","_","w","_snapshotFeatures","fieldsIndex","signal","h","hasM","hasZ","timeInfo","featureStore","u","addMany","extent","fetchRecomputedExtents","fullExtent","applyEdits","queryFeatures","arguments","length","undefined","_waitSnapshotComplete","executeQuery","queryFeatureCount","executeQueryForCount","queryObjectIds","executeQueryForIds","queryExtent","executeQueryForExtent","querySnapping","executeQueryForSnapping","refresh","_this$_snapshotTask","_snapshotTask","abort","promise","then","clear","getLogger","error","finished","_ref","_this$_getFeatureUrl","typeName","wkid","geometry","attributes","objectId","code","description","globalId","success","uniqueId","Set","get","add","name","editable","_t$requiredFields","requiredFields","has","concat","parseFloat","String","TypeError","simplify","async","I","j"],"sourceRoot":""}