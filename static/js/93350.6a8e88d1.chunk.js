"use strict";(self.webpackChunkok_wpa_maps=self.webpackChunkok_wpa_maps||[]).push([[93350],{93350(e,t,o){o.d(t,{createTemplateExecutor:()=>g});var i=o(89379),n=o(39356),l=o(50076),r=o(76460),a=o(87663),s=o(50346),d=o(49723),u=o(99879),p=o(17983),c=o(81130);const m={"buffer-line-to-polygon":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(55766),o.e(34432)]).then(o.bind(o,34432)),"buffer-point-to-polygon":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(55766),o.e(77492)]).then(o.bind(o,77492)),"buffer-polygon-to-polygon":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(55766),o.e(38900)]).then(o.bind(o,38900)),"connection-point":()=>o.e(47615).then(o.bind(o,47615)),"equally-spaced":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(40735),o.e(34578),o.e(50416)]).then(o.bind(o,50416)),"offset-line":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(40735),o.e(34578),o.e(78836)]).then(o.bind(o,78836)),"offset-primary-line":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(40735),o.e(34578),o.e(32968)]).then(o.bind(o,32968)),"point-at-all-vertices-of-line":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(40735),o.e(34578),o.e(94687)]).then(o.bind(o,94687)),"point-at-beginning-of-line":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(40735),o.e(34578),o.e(55012)]).then(o.bind(o,55012)),"point-at-beginning-of-radial":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(40735),o.e(34578),o.e(17057)]).then(o.bind(o,17057)),"point-at-end-of-line":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(40735),o.e(34578),o.e(1158)]).then(o.bind(o,1158)),"point-at-interior-vertices":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(40735),o.e(34578),o.e(253)]).then(o.bind(o,253)),"point-at-intersection-vertices-of-line":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(40735),o.e(34578),o.e(16563)]).then(o.bind(o,16563)),"point-at-not-beginning-of-line":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(40735),o.e(34578),o.e(86017)]).then(o.bind(o,86017)),"point-at-not-end-of-line":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(40735),o.e(34578),o.e(65587)]).then(o.bind(o,65587)),"point-at-polygon-centroid":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(23942)]).then(o.bind(o,23942)),"point-at-polygon-not-start":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(40735),o.e(6389)]).then(o.bind(o,6389)),"point-at-polygon-start":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(40735),o.e(98844)]).then(o.bind(o,98844)),"point-identity":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(1729)]).then(o.bind(o,1729)),"point-primary-identity":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(54767)]).then(o.bind(o,54767)),"polygon-boundary":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(40735),o.e(30429)]).then(o.bind(o,30429)),"polygon-boundary-two-point":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(40735),o.e(23673)]).then(o.bind(o,23673)),"polygon-identity":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(39377)]).then(o.bind(o,39377)),"polygon-primary-identity":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(50335)]).then(o.bind(o,50335)),"polygon-vertices":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(40735),o.e(75336)]).then(o.bind(o,75336)),"radial-lines":()=>o.e(49503).then(o.bind(o,49503)),"two-point-lines":()=>Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(40735),o.e(68350)]).then(o.bind(o,68350))};var f=o(19902),v=o(28009);const h=()=>r.A.getLogger("esri.editing.sharedTemplates.executor.createTemplateExecutor"),y="globalid";async function g(e){if(!(0,u.xZ)(e))throw new l.A("template-executor:template-not-loaded","The template must be loaded before it can be executed.");if((0,u.Cq)(e))return function(e){return t=>{var o,i;const n=[],l=[];(0,p.i)({geometry:t,template:e,edits:n,relationships:l});const r=(0,c.zE)(n);return{edits:(0,c.Vi)(n),relationships:l,primary:null!==(o=n[0])&&void 0!==o?o:null,featureExtent:r,rotationPoint:null!==(i=null===r||void 0===r?void 0:r.center)&&void 0!==i?i:null}}}(e);if((0,u.Dt)(e))return async function(e){const{definition:t}=e,o=await Promise.all(t.allParts.map(b));return(i,n)=>{const l=[],r=[],d=new Set,u=()=>{var e,o;if(t.createUtilityNetworkAssociations&&"completion"===n){const{utilityNetwork:e,utilityNetworkAssociationsTable:o}=t;e&&o?function(e){const{edits:t,utilityNetworkHelper:o}=e,i=new Map;for(const n of t)""!==n.tag&&o.layerIdToSourceIdLookup.has(n.id)&&(0,a.tE)(i,n.tag,()=>[]).push(n);for(const n of i.values())if(!(n.length<2))for(let t=0;t<n.length;t++){const o=n[t];for(let i=t+1;i<n.length;i++)w(o,n[i],e)}}({associationGraphics:d,associationsTable:o,edits:l,relationships:r,utilityNetworkHelper:e}):h().warn("Unable to create utility network associations between group template features. The utility network or its associations table is unavailable.")}const i=(0,c.zE)(l);return{associationGraphics:d,edits:(0,c.Vi)(l),relationships:r,primary:null!==(e=l[0])&&void 0!==e?e:null,featureExtent:i,rotationPoint:null!==(o=null===i||void 0===i?void 0:i.center)&&void 0!==o?o:null}};if(null==i)return h().warn("No geometry provided to group template executor. Result will be empty."),u();const p=o.map(t=>t({edits:l,mode:n,parentTemplate:e,relationships:r,shape:i})).filter(s.$X);return 0===p.length?u():Promise.all(p).then(()=>u())}}(e);if((0,u.JC)(e))return async function(e){const{createPresetServiceEdit:t}=await Promise.all([o.e(26871),o.e(16364),o.e(56175),o.e(48045),o.e(75274)]).then(o.bind(o,75274));return function(o,i){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(0,f.fT)(o))throw new l.A("template-executor:invalid-input-geometry","The input geometry for a preset template must be a point.");const a=[],s=[],d=t({geometry:o,template:e,edits:a,relationships:s,rotation:r,mode:i});return{edits:(0,c.Vi)(a),relationships:s,primary:null!==(n=a[0])&&void 0!==n?n:null,featureExtent:(0,c.zE)(a),rotationPoint:d}}}(e);throw new l.A("template-executor:unsupported-template-type","The template type is not supported.")}async function b(e){const t=await function(e){const t=m[e];if(!t)throw new Error("Builder type ".concat(e," is not supported."));return t()}(e.builderType);return o=>t.execute((0,i.A)((0,i.A)({},o),{},{templatePart:e}))}function w(e,t,o){const{associationGraphics:i,associationsTable:l,edits:r,utilityNetworkHelper:a,relationships:s}=o,u=a.findAgat(e.graphic,e.layer),p=a.findAgat(t.graphic,t.layer);if(!u||!p)return;const c=a.findRules(u).map(o=>{var i,n,l,r,a,s,d,c,m,f,v;return(null===(i=o.fromNetworkSource)||void 0===i?void 0:i.sourceId)!==u.networkSourceId||(null===(n=o.fromAssetGroup)||void 0===n?void 0:n.assetGroupCode)!==u.assetGroup||null!==(null===(l=o.fromAssetType)||void 0===l?void 0:l.assetTypeCode)&&(null===(r=o.fromAssetType)||void 0===r?void 0:r.assetTypeCode)!==u.assetType||o.toNetworkSource.sourceId!==p.networkSourceId||(null===(a=o.toAssetGroup)||void 0===a?void 0:a.assetGroupCode)!==p.assetGroup||null!==o.toAssetType&&(null===(s=o.toAssetType)||void 0===s?void 0:s.assetTypeCode)!==p.assetType?o.toNetworkSource.sourceId!==u.networkSourceId||(null===(d=o.toAssetGroup)||void 0===d?void 0:d.assetGroupCode)!==u.assetGroup||null!==o.toAssetType&&(null===(c=o.toAssetType)||void 0===c?void 0:c.assetTypeCode)!==u.assetType||o.fromNetworkSource.sourceId!==p.networkSourceId||(null===(m=o.fromAssetGroup)||void 0===m?void 0:m.assetGroupCode)!==p.assetGroup||null!==(null===(f=o.fromAssetType)||void 0===f?void 0:f.assetTypeCode)&&(null===(v=o.fromAssetType)||void 0===v?void 0:v.assetTypeCode)!==p.assetType?null:{rule:o,from:{agat:p,item:t},to:{agat:u,item:e}}:{rule:o,from:{agat:u,item:e},to:{agat:p,item:t}}}).filter(e=>4===(null===e||void 0===e?void 0:e.rule.ruleType)||5===(null===e||void 0===e?void 0:e.rule.ruleType)||2===(null===e||void 0===e?void 0:e.rule.ruleType)?null:e).filter(e=>null!==e);if(0===c.length)return;const m=(0,v.E)(l),f=new Set;for(const v of c){var h,g,b,w,I,T;const e={};e[m.fromNetworkSourceId]=v.rule.fromNetworkSource.sourceId,e[m.fromGlobalId]=v.from.item.graphic.attributes[null!==(h=v.from.item.layer.globalIdField)&&void 0!==h?h:y],e[m.fromTerminalId]=null,v.rule.fromTerminal&&(e[m.fromTerminalId]=v.rule.fromTerminal.terminalId),e[m.toNetworkSourceId]=v.rule.toNetworkSource.sourceId,e[m.toGlobalId]=v.to.item.graphic.attributes[null!==(g=v.to.item.layer.globalIdField)&&void 0!==g?g:y],e[m.toTerminalId]=null,v.rule.toTerminal&&(e[m.toTerminalId]=v.rule.toTerminal.terminalId),e[m.associationType]=v.rule.ruleType,e[m.percentAlong]=null,e[m.isContentVisible]=2===v.rule.ruleType?1:0,e[m.status]=0,e[m.globalId]=(0,d.yS)();const t="".concat(e[m.fromNetworkSourceId],"-").concat(e[m.fromGlobalId],"-").concat(e[m.toNetworkSourceId],"-").concat(e[m.toGlobalId],"-").concat(e[m.associationType]);if(f.has(t))continue;f.add(t);const o=new n.A({attributes:e,sourceLayer:l});i.add(o),r.push({id:l.layerId,graphic:o,tag:"",layer:l}),s.push({sourceGraphic:v.to.item.graphic,sourceLayerId:v.to.item.layer.layerId,destinationGraphic:o,destinationLayerId:l.layerId,sourceField:null!==(b=v.to.item.layer.globalIdField)&&void 0!==b?b:y,destinationField:null!==(w=m.toGlobalId)&&void 0!==w?w:y}),s.push({sourceGraphic:v.from.item.graphic,sourceLayerId:v.from.item.layer.layerId,destinationGraphic:o,destinationLayerId:l.layerId,sourceField:null!==(I=v.from.item.layer.globalIdField)&&void 0!==I?I:y,destinationField:null!==(T=m.fromGlobalId)&&void 0!==T?T:y})}}},17983(e,t,o){o.d(t,{i:()=>f});var i=o(89379),n=o(39356),l=o(50076),r=o(49723),a=o(99879),s=o(81130),d=o(66388),u=o(19247),p=o(65215),c=o(23701),m=o(31933);function f(e){let{edits:t,geometry:o,relationships:d,tag:u="",template:p}=e;if((0,s.AO)(o)){const e=o.geometry.clone();for(const o of e.paths)f({geometry:new c.A({spatialReference:e.spatialReference,paths:[o],hasZ:e.hasZ,hasM:e.hasM}),template:p,edits:t,relationships:d,tag:u});return}const{definition:m,layer:h}=p;o=v(o,h);const y=new n.A({attributes:m.defaultValues?(0,i.A)({},m.defaultValues):{},geometry:o,sourceLayer:h});if(w(y,h),h.globalIdField&&(y.attributes[h.globalIdField]=(0,r.yS)()),t.push({id:h.layerId,graphic:y,tag:u,layer:h}),0!==m.relationships.length)for(const s of m.relationships||[]){const e=s.template;if(null==s.relationshipMetadata||!(0,a.xZ)(e))throw new l.A("shared-template:missing-relationship-metadata-or-definition","Relationship part must have metadata and a fully loaded template with definition");const{layer:o}=e,u=new n.A({attributes:(0,i.A)({},m.defaultValues),sourceLayer:o});w(u,o),o.globalIdField&&(u.attributes[o.globalIdField]=(0,r.yS)()),t.push({graphic:u,id:o.layerId,tag:"",layer:o}),d.push((0,i.A)((0,i.A)({},s.relationshipMetadata),{},{sourceGraphic:y,destinationGraphic:u}))}}function v(e,t){var o;if(!e)return null;if(e.hasZ===t.hasZ&&e.hasM===t.hasM)return e;switch(e.type){case"point":return new u.A((0,i.A)((0,i.A)({spatialReference:e.spatialReference,x:e.x,y:e.y},t.hasZ?e.hasZ?{z:e.z}:{z:g(t)}:{}),t.hasM?e.hasM?{m:e.m}:{m:null!==(o=b(t))&&void 0!==o?o:void 0}:{}));case"polygon":return new p.A({spatialReference:e.spatialReference,rings:h(e.rings,t.hasZ,t.hasM,g(t),b(t),e.hasM?e.hasZ?3:2:-1,e.hasZ?2:-1),hasZ:t.hasZ,hasM:t.hasM});case"polyline":return new c.A({spatialReference:e.spatialReference,paths:h(e.paths,t.hasZ,t.hasM,g(t),b(t),e.hasM?e.hasZ?3:2:-1,e.hasZ?2:-1),hasZ:t.hasZ,hasM:t.hasM});case"multipoint":return new d.A({spatialReference:e.spatialReference,hasZ:t.hasZ,hasM:t.hasM,points:y(e.points,t.hasZ,t.hasM,g(t),b(t),e.hasM?e.hasZ?3:2:-1,e.hasZ?2:-1)});default:return e}}function h(e,t,o,i,n,l,r){const a=[];for(const s of e)a.push(y(s,t,o,i,n,l,r));return a}function y(e,t,o,i,n,l,r){const a=[];for(const s of e){const e=[s[0],s[1]];t&&(e[2]=r>-1?s[2]:i),o&&(e[t?3:2]=l>-1?s[l]:n),a.push(e)}return a}function g(e){var t,o;return null!==(t=null===(o=e.capabilities.editing)||void 0===o?void 0:o.zDefault)&&void 0!==t?t:0}function b(e){return e.capabilities.editing.supportsUpdateWithoutM?void 0:0}function w(e,t){(0,m.F2)(t)&&(e.sourceLayer=t.findSublayerForFeature(e))}},81130(e,t,o){o.d(t,{AO:()=>d,Bi:()=>a,Cg:()=>l,Rg:()=>s,Vi:()=>p,fT:()=>r,zE:()=>u});var i=o(87663),n=o(76797);const l=100;function r(e){return"point"===e.type}function a(e){return"polygon"===e.type}function s(e){return"polyline"===e.type}function d(e){return!!e&&"radial"===e.type}function u(e){let t=null;for(const o of e)if(o.graphic.geometry){const e=o.graphic.geometry,i=r(e)?new n.A({spatialReference:e.spatialReference,xmin:e.x,xmax:e.x,ymax:e.y,ymin:e.y}):e.extent;t=null==t?null===i||void 0===i?void 0:i.clone():t.union(i.extent)}return t}function p(e){const t=new Map;for(const n of e){var o;null===(o=(0,i.tE)(t,n.id,()=>({addFeatures:[],id:n.id,identifierFields:{globalIdField:n.layer.globalIdField,objectIdField:n.layer.objectIdField}})).addFeatures)||void 0===o||o.push(n.graphic)}return[...t.values()]}},28009(e,t,o){function i(e){var t,o,i,n,l,r,a,s,d,u,p,c,m,f,v,h,y,g,b,w,I,T,A,k,P,G,x,F,S,M,N;const Z=null===e||void 0===e?void 0:e.fieldsIndex,C="fromnetworksourceid",R="fromglobalid",E="fromterminalid",L="fromfirstunit",V="fromnumunits",z="tonetworksourceid",U="toglobalid",_="toterminalid",H="tofirstunit",j="tonumunits",q="status",B="associationtype",D="iscontentvisible",O="percentalong",J="globalid";return{fromNetworkSourceId:null!==(t=null===Z||void 0===Z||null===(o=Z.get(C))||void 0===o?void 0:o.name)&&void 0!==t?t:C,fromGlobalId:null!==(i=null===Z||void 0===Z||null===(n=Z.get(R))||void 0===n?void 0:n.name)&&void 0!==i?i:R,fromTerminalId:null!==(l=null===Z||void 0===Z||null===(r=Z.get(E))||void 0===r?void 0:r.name)&&void 0!==l?l:E,fromFirstUnit:null!==(a=null===Z||void 0===Z||null===(s=Z.get(L))||void 0===s?void 0:s.name)&&void 0!==a?a:L,fromNumUnits:null!==(d=null===Z||void 0===Z||null===(u=Z.get(V))||void 0===u?void 0:u.name)&&void 0!==d?d:V,toNetworkSourceId:null!==(p=null===Z||void 0===Z||null===(c=Z.get(z))||void 0===c?void 0:c.name)&&void 0!==p?p:z,toGlobalId:null!==(m=null===Z||void 0===Z||null===(f=Z.get(U))||void 0===f?void 0:f.name)&&void 0!==m?m:U,toTerminalId:null!==(v=null===Z||void 0===Z||null===(h=Z.get(_))||void 0===h?void 0:h.name)&&void 0!==v?v:_,toFirstUnit:null!==(y=null===Z||void 0===Z||null===(g=Z.get(H))||void 0===g?void 0:g.name)&&void 0!==y?y:H,toNumUnits:null!==(b=null===Z||void 0===Z||null===(w=Z.get(j))||void 0===w?void 0:w.name)&&void 0!==b?b:j,status:null!==(I=null===Z||void 0===Z||null===(T=Z.get(q))||void 0===T?void 0:T.name)&&void 0!==I?I:q,associationType:null!==(A=null===Z||void 0===Z||null===(k=Z.get(B))||void 0===k?void 0:k.name)&&void 0!==A?A:B,isContentVisible:null!==(P=null===Z||void 0===Z||null===(G=Z.get(D))||void 0===G?void 0:G.name)&&void 0!==P?P:D,percentAlong:null!==(x=null===Z||void 0===Z||null===(F=Z.get(O))||void 0===F?void 0:F.name)&&void 0!==x?x:O,globalId:null!==(S=null===Z||void 0===Z||null===(M=Z.get(null!==(N=null===e||void 0===e?void 0:e.globalIdField)&&void 0!==N?N:J))||void 0===M?void 0:M.name)&&void 0!==S?S:J}}function n(e,t){var o;if("feature"!==t.type&&"subtype-group"!==t.type)return[];if(!t.url)return[];const i="utilityNetworks"in e.map&&null!==(o=e.map.utilityNetworks)&&void 0!==o?o:[];for(const n of i)if(n.isUtilityLayer(t)){const e=t.fieldsIndex.get("assetgroup"),o=t.fieldsIndex.get("assettype");return[null===e||void 0===e?void 0:e.name,null===o||void 0===o?void 0:o.name].filter(e=>null!=e)}return[]}o.d(t,{E:()=>i,_:()=>n})}}]);
//# sourceMappingURL=93350.6a8e88d1.chunk.js.map