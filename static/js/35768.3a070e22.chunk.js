"use strict";(self.webpackChunkok_wpa_maps=self.webpackChunkok_wpa_maps||[]).push([[35768],{35768:(e,n,t)=>{t.r(n),t.d(n,{distanceToCoordinate:()=>k,measureToCoordinate:()=>g,pointToCoordinate:()=>P});var r=t(89379),s=t(92975),a=t(50076),i=t(31633),c=t(19247),l=t(65215),o=t(51235),u=t(12579),f=t(52796),h=t(10484),p=t(19393),d=t(83658),y=t(97589);var x=t(64241);var M=t(66330);function m(e){const n=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}(e);return[e[0]/n,e[1]/n,e[2]/n]}function A(e,n,t,r){const s=m([n[0]-e[0],n[1]-e[1],n[2]*r-e[2]*r]);return[e[0]+s[0]*t,e[1]+s[1]*t,e[2]+s[2]*t]}function R(e,n,t,r){return e+(n-e)/t*r}function v(e,n,t){let r=n[0]-e[0],s=n[1]-e[1];const a=Math.sqrt(r*r+s*s);return r/=a,s/=a,r*=t,s*=t,[e[0]+r,e[1]+s]}function g(e,n){if(!e)return null;switch(e.type){case"extent":case"multipoint":case"mesh":case"point":return null}const t="polygon"===e.type?e.rings:e.paths;let a=1;if((e.spatialReference.vcsWkid||e.spatialReference.latestVcsWkid)&&(a=(0,s.G9)(e.spatialReference)/(0,i.GA)(e.spatialReference)),0===t.length)return null;if(0===t[0].length)return null;if(!1===e.hasM)return null;let l=-1,o=0;const{hasM:u,hasZ:f}=e,h=f?3:2;for(const s of t){if(l++,s.length>0&&s[0][h]===n)return{partId:l,distanceAlong:o,coordinate:new c.A((0,r.A)((0,r.A)({hasZ:f,hasM:u,spatialReference:e.spatialReference,x:s[0][0],y:s[0][1]},f?{z:s[0][2]}:{}),u?{m:s[0][h]}:{})),segmentId:0};let t=-1;for(let i=1;i<s.length;i++){const p=W(s[i-1],s[i],f,a);t++;const d=s[i][h]-s[i-1][h],y=s[i][h];if(y===n)return{partId:l,distanceAlong:p+o,coordinate:new c.A((0,r.A)((0,r.A)({hasZ:f,hasM:u,spatialReference:e.spatialReference,x:s[i][0],y:s[i][1]},f?{z:s[i][2]}:{}),u?{m:s[i][h]}:{})),segmentId:t};if(y>n&&n>s[i-1][h]){const y=(n-s[i-1][h])/d*p;let x=f?A(s[i-1],s[i],y,a):v(s[i-1],s[i],y);x=[...x,n];const M=new c.A((0,r.A)((0,r.A)({hasZ:f,hasM:u,spatialReference:e.spatialReference,x:x[0],y:x[1]},f?{z:x[2]}:{}),u?{m:x[h]}:{}));return{partId:l,distanceAlong:o+W(s[i-1],[M.x,M.y,...f?[M.z]:[],...u?[M.m]:[]],f,a),coordinate:M,segmentId:t}}o+=p}}return null}function k(e,n){if(!e)return null;switch(e.type){case"extent":case"multipoint":case"mesh":case"point":return null}const t="polygon"===e.type?e.rings:e.paths;if(n<0)return null;let a=1;(e.spatialReference.vcsWkid||e.spatialReference.latestVcsWkid)&&(a=(0,s.G9)(e.spatialReference)/(0,i.GA)(e.spatialReference));let l=0;const{hasZ:o,hasM:u}=e,f=o?3:2;let h=-1;if(0===n)return 0===t.length||0===t[0].length?null:{partId:0,coordinate:new c.A((0,r.A)((0,r.A)({hasZ:o,hasM:u,spatialReference:e.spatialReference,x:t[0][0][0],y:t[0][0][1]},o?{z:t[0][0][2]}:{}),u?{m:t[0][0][f]}:{})),segmentId:0};for(const s of t){h++;let t=-1;for(let i=1;i<s.length;i++){t++;const p=W(s[i-1],s[i],o,a),d=l+p;if(d===n)return{partId:h,coordinate:new c.A((0,r.A)((0,r.A)({hasZ:o,hasM:u,spatialReference:e.spatialReference,x:s[i][0],y:s[i][1]},o?{z:s[i][2]}:{}),u?{m:s[i][f]}:{})),segmentId:t};if(d>n){let d=o?A(s[i-1],s[i],n-l,a):v(s[i-1],s[i],n-l);return d=[...d,R(s[i-1][f],s[i][f],p,n-l)],{partId:h,coordinate:new c.A((0,r.A)((0,r.A)({hasZ:o,hasM:u,spatialReference:e.spatialReference,x:d[0],y:d[1]},o?{z:d[2]}:{}),u?{m:d[f]}:{})),segmentId:t}}l=d}}return null}function I(e,n,t,r,i){const c=(0,h.yP)(n);if((0,h.Xq)(t)){const n=r?(0,s.Ws)(e,c,t):(0,s.ux)(e,c,t);return{closestPoint:n,distance:r?(0,s.BM)(n,e,i):(0,s.E8)(n,e,!1)}}const l=function(e,n,t){if((0,h.Xq)(n))return(0,y.T)(e,n,t);if((0,h.n1)(n)){const r=(0,o.m_)(e,n,t)[0];if(null==r)throw new a.A("closestPointOnCurve:unexpected-error","Failed to find close point on bezier curve");return r}if((0,h.aO)(n)){const r=(0,f.pM)(e,n);return(0,u.fM)(r,t)}if((0,h.DA)(n)){const r=(0,p.i)(e,n);return(0,u.fM)(r,t)}const r=(0,d.SW)(e,n);return(0,d.pb)(r,t)}(c,t,e);if(!l)throw new a.A("arcade:closestPointOnSegment","The given point is not on the curve");return{closestPoint:l.curvePoint,distance:l.distance}}function W(e,n,t,r){return(0,h.Xq)(n)?t?(0,s.BM)(e,n,r):(0,s.E8)(e,n,!1):function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if((0,h.n1)(n))return(0,o.ty)(e,n,t);if((0,h.aO)(n)){const t=(0,f.pM)(e,n);return t.isInvalid?Math.sqrt((0,x.kb)(e,n.c[0])):(0,u.zW)(t)}if((0,h.DA)(n)){const t=(0,p.i)(e,n);return t.isInvalid?Math.sqrt((0,x.kb)(e,n.a[0])):(0,u.zW)(t)}return(0,d.xm)(e,n,t)}(e,n,.001)}function P(e,n){var t,a,o;if(!e)return null;if(!n)return null;if("extent"===e.type){const n=e;e=new l.A({spatialReference:e.spatialReference,rings:[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]})}switch(e.type){case"point":return null!==(t=function(e,n){if(!e)return null;if(!n)return null;let t=1;(n.spatialReference.vcsWkid||n.spatialReference.latestVcsWkid)&&(t=(0,s.G9)(n.spatialReference)/(0,i.GA)(n.spatialReference));let r=null,a=0;return r=e,a=e.hasZ&&n.hasZ?(0,s.BM)([n.x,n.y,n.z],[e.x,e.y,e.z],t):(0,s.E8)([n.x,n.y],[e.x,e.y],!1),{coordinate:r,distance:a}}(e,n))&&void 0!==t?t:null;case"multipoint":return null!==(a=function(e,n){if(!e)return null;if(!n)return null;let t=1;(n.spatialReference.vcsWkid||n.spatialReference.latestVcsWkid)&&(t=(0,s.G9)(n.spatialReference)/(0,i.GA)(n.spatialReference));let r=null,a=0,c=Number.MAX_VALUE,l=-1,o=-1;for(const i of e.points||[]){o++;const r=e.hasZ&&n.hasZ?(0,s.x6)([i[0],i[1],i[2]],[n.x,n.y,n.z],t):(0,s.UX)([i[0],i[1]],[n.x,n.y],!1);r<c&&(c=r,l=o)}return l<0?null:(a=c,r=e.getPoint(l),{coordinate:r,distance:Math.sqrt(a)})}(e,n))&&void 0!==a?a:null;case"polygon":case"polyline":return null!==(o=function(e,n){var t,a;if(!e)return null;if(!n)return null;const l="polygon"===e.type?null!==(t=e.curveRings)&&void 0!==t?t:e.rings:null!==(a=e.curvePaths)&&void 0!==a?a:e.paths;let o=1;(n.spatialReference.vcsWkid||n.spatialReference.latestVcsWkid)&&(o=(0,s.G9)(n.spatialReference)/(0,i.GA)(n.spatialReference));let u=Number.MAX_VALUE,f=-1,p=-1,d=-1;const y=e.hasZ&&n.hasZ;let x=null;const m=y?[n.x,n.y,n.z]:[n.x,n.y];for(const r of l){p++;for(let e=1;e<r.length;e++){const n=I(m,r[e-1],r[e],y,o);n.distance<u&&(u=n.distance,x=n.closestPoint,d=p,f=e-1)}}if(f<0||!x)return null;const A=e.hasM&&e.hasZ?3:2,v=l[d][f],g=(0,h.yP)(v),k=l[d][f+1],P=(0,h.yP)(k);let Z=null,w=null,z=y?x[2]:null;const q=(0,h.Xq)(k)?x:(0,M.$)(g,k,x,.001)[0];let G=W(g,q,y,o);const V=W(g,k,y,o);e.hasM&&(w=R(g[A],P[A],V,G)),!e.hasZ||!1!==n.hasZ&&(0,h.Xq)(q)||(z=R(g[2],P[2],V,G),(0,h.yP)(q)[2]=z,G=W(g,q,!0,o)),Z=new c.A((0,r.A)((0,r.A)({hasZ:y,hasM:e.hasM,spatialReference:n.spatialReference,x:x[0],y:x[1]},e.hasZ?{z:z}:{}),e.hasM?{m:w}:{}));let b=0;for(let r=0;r<=d;r++){const n=l[r],t=r===d?f:n.length-1;for(let r=1;r<=t;r++)b+=W((0,h.yP)(n[r-1]),n[r],e.hasZ,o)}return b+=G,{partId:d,segmentId:f,coordinate:Z,distance:u,distanceAlong:b}}(e,n))&&void 0!==o?o:null;default:return null}}},92975:(e,n,t)=>{t.d(n,{BM:()=>s,E8:()=>o,G9:()=>l,L5:()=>M,UX:()=>u,Uc:()=>x,Ws:()=>m,eb:()=>p,ln:()=>d,ux:()=>A,x6:()=>a});var r=t(15941);t(19247);function s(e,n,t){return Math.sqrt((e[0]-n[0])**2+(e[1]-n[1])**2+(void 0!==e[2]&&void 0!==n[2]?(e[2]*t-n[2]*t)**2:0))}function a(e,n,t){return(e[0]-n[0])**2+(e[1]-n[1])**2+(void 0!==e[2]&&void 0!==n[2]?(e[2]*t-n[2]*t)**2:0)}const i=[];for(const R of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const e=R[0];for(let n=1;n<R.length;n++)i[R[n]]=e}const c=[];function l(e){return e.vcsWkid&&void 0!==i[e.vcsWkid]?c[i[e.vcsWkid]]:e.latestVcsWkid&&void 0!==i[e.latestVcsWkid]?c[i[e.latestVcsWkid]]:1}function o(e,n,t){const r=n[0]-e[0],s=n[1]-e[1];if(t){const e=n[2]-n[2];return Math.sqrt(r*r+s*s+e*e)}return Math.sqrt(r*r+s*s)}function u(e,n,t){const r=n[0]-e[0],s=n[1]-e[1];if(t){const e=n[2]-n[2];return r*r+s*s+e*e}return r*r+s*s}function f(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(;e<t;)e+=n;const r=t+n;for(;e>=r;)e-=n;return e}function h(e,n){return Math.atan2(n.y-e.y,n.x-e.x)}function p(e,n){return f(h(e,n),2*Math.PI)*(180/Math.PI)}function d(e,n){return f(Math.PI/2-h(e,n),2*Math.PI)*(180/Math.PI)}function y(e,n,t){const r={x:e.x-n.x,y:e.y-n.y},s={x:t.x-n.x,y:t.y-n.y};return Math.atan2(function(e,n){return e.x*n.y-n.x*e.y}(r,s),function(e,n){return e.x*n.x+e.y*n.y}(r,s))}function x(e,n,t){return(0,r.KJ)(f(y(e,n,t),2*Math.PI))}function M(e,n,t){return(0,r.KJ)(f(-1*y(e,n,t),2*Math.PI))}function m(e,n,t){const r=[t[0]-n[0],t[1]-n[1],t[2]-n[2]],s=function(e,n,t){return Math.max(n,Math.min(t,e))}(function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]}(r,[e[0]-n[0],e[1]-n[1],e[2]-n[2]])/function(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}(r),0,1);return[n[0]+(t[0]-n[0])*s,n[1]+(t[1]-n[1])*s,n[2]+(t[2]-n[2])*s]}function A(e,n,t){let r=0;const s=t[0]-n[0],a=t[1]-n[1],i=s*s+a*a;return 0===i?r=.5:(r=((e[0]-n[0])*s+(e[1]-n[1])*a)/i,r<0?r=0:r>1&&(r=1)),r<=.5?[n[0]+(t[0]-n[0])*r,n[1]+(t[1]-n[1])*r]:[t[0]-(t[0]-n[0])*(1-r),t[1]-(t[1]-n[1])*(1-r)]}c[9002]=.3048,c[9003]=.3048006096012192,c[9095]=.3048007491}}]);
//# sourceMappingURL=35768.3a070e22.chunk.js.map