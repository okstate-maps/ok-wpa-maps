{"version":3,"file":"static/js/3671.97868b26.chunk.js","mappings":"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","sources":["../node_modules/@esri/calcite-components/dist/chunks/array.js","../node_modules/@esri/calcite-components/dist/chunks/resources2.js","../node_modules/@esri/calcite-components/dist/components/calcite-action-menu/customElement.js"],"sourcesContent":["/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\nv3.3.3 */\nfunction getRoundRobinIndex(index, total) {\n  return (index + total) % total;\n}\nexport {\n  getRoundRobinIndex as g\n};\n","/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\nv3.3.3 */\nconst CSS = {\n  menu: \"menu\",\n  defaultTrigger: \"default-trigger\"\n};\nconst idPrefix = \"calcite-action-menu\";\nconst IDS = {\n  button: (id) => `${idPrefix}-${id}-menu-button`,\n  menu: (id) => `${idPrefix}-${id}-menu`,\n  action: (id, actionId) => `${idPrefix}-${id}-action-${actionId}`\n};\nconst SLOTS = {\n  tooltip: \"tooltip\",\n  trigger: \"trigger\"\n};\nconst ICONS = {\n  menu: \"ellipsis\"\n};\nexport {\n  CSS as C,\n  IDS as I,\n  SLOTS as S,\n  ICONS as a\n};\n","/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\nv3.3.3 */\nimport { c as customElement } from \"../../chunks/runtime.js\";\nimport { ref } from \"lit/directives/ref.js\";\nimport { css, html, nothing } from \"lit\";\nimport { LitElement, createEvent, safeClassMap } from \"@arcgis/lumina\";\nimport { g as getRoundRobinIndex } from \"../../chunks/array.js\";\nimport { t as toAriaBoolean } from \"../../chunks/dom.js\";\nimport { g as guid } from \"../../chunks/guid.js\";\nimport { i as isActivationKey } from \"../../chunks/key.js\";\nimport { u as useSetFocus } from \"../../chunks/useSetFocus.js\";\nimport { I as IDS, S as SLOTS, a as ICONS, C as CSS } from \"../../chunks/resources2.js\";\nconst styles = css`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--calcite-font-size-1)}::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{display:flex;max-block-size:45vh;flex-direction:column;flex-wrap:nowrap;overflow-y:auto;overflow-x:hidden;outline:2px solid transparent;outline-offset:2px;gap:var(--calcite-action-menu-items-space, 0)}:host([hidden]){display:none}[hidden]{display:none}`;\nconst SUPPORTED_MENU_NAV_KEYS = [\"ArrowUp\", \"ArrowDown\", \"End\", \"Home\"];\nclass ActionMenu extends LitElement {\n  constructor() {\n    super(...arguments);\n    this.guid = guid();\n    this.actionElements = [];\n    this.menuButtonClick = () => {\n      this.toggleOpen();\n    };\n    this.menuButtonId = IDS.button(this.guid);\n    this.menuButtonKeyDown = (event) => {\n      const { key } = event;\n      const { actionElements, activeMenuItemIndex, open } = this;\n      if (!actionElements.length) {\n        return;\n      }\n      if (isActivationKey(key)) {\n        event.preventDefault();\n        if (!open) {\n          this.toggleOpen();\n          return;\n        }\n        const action = actionElements[activeMenuItemIndex];\n        if (action) {\n          action.click();\n        } else {\n          this.toggleOpen(false);\n        }\n      }\n      if (key === \"Tab\") {\n        this.open = false;\n        return;\n      }\n      if (key === \"Escape\") {\n        this.toggleOpen(false);\n        event.preventDefault();\n        return;\n      }\n      this.handleActionNavigation(event, key, actionElements);\n    };\n    this.menuId = IDS.menu(this.guid);\n    this._open = false;\n    this.updateAction = (action, index) => {\n      const { guid: guid2, activeMenuItemIndex } = this;\n      const id = IDS.action(guid2, index);\n      action.tabIndex = -1;\n      action.setAttribute(\"role\", \"menuitem\");\n      if (!action.id) {\n        action.id = id;\n      }\n      action.activeDescendant = index === activeMenuItemIndex;\n    };\n    this.focusSetter = useSetFocus()(this);\n    this.activeMenuItemIndex = -1;\n    this.appearance = \"solid\";\n    this.expanded = false;\n    this.overlayPositioning = \"absolute\";\n    this.placement = \"auto\";\n    this.scale = \"m\";\n    this.calciteActionMenuCollapse = createEvent({ cancelable: false });\n    this.calciteActionMenuExpand = createEvent({ cancelable: false });\n    this.calciteActionMenuOpen = createEvent({ cancelable: false });\n  }\n  static {\n    this.properties = { activeMenuItemIndex: [16, {}, { state: true }], menuButtonEl: [16, {}, { state: true }], appearance: [3, {}, { reflect: true }], expanded: [7, {}, { reflect: true, type: Boolean }], flipPlacements: [0, {}, { attribute: false }], label: 1, open: [7, {}, { reflect: true, type: Boolean }], overlayPositioning: [3, {}, { reflect: true }], placement: [3, {}, { reflect: true }], scale: [3, {}, { reflect: true }] };\n  }\n  static {\n    this.styles = styles;\n  }\n  get open() {\n    return this._open;\n  }\n  set open(open) {\n    const oldOpen = this._open;\n    if (open !== oldOpen) {\n      this._open = open;\n      this.openHandler(open);\n    }\n  }\n  async setFocus(options) {\n    return this.focusSetter(() => this.menuButtonEl, options);\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.connectMenuButtonEl();\n  }\n  willUpdate(changes) {\n    if (changes.has(\"expanded\") && (this.hasUpdated || this.expanded !== false)) {\n      this.expandedHandler();\n    }\n    if (changes.has(\"activeMenuItemIndex\") && (this.hasUpdated || this.activeMenuItemIndex !== -1)) {\n      this.updateActions(this.actionElements);\n    }\n    if (changes.has(\"expanded\") && this.hasUpdated) {\n      if (this.expanded) {\n        this.calciteActionMenuExpand.emit();\n      } else {\n        this.calciteActionMenuCollapse.emit();\n      }\n    }\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.disconnectMenuButtonEl();\n  }\n  expandedHandler() {\n    this.open = false;\n    this.setTooltipReferenceElement();\n  }\n  openHandler(open) {\n    if (this.menuButtonEl) {\n      this.menuButtonEl.active = open;\n      this.menuButtonEl.aria = {\n        expanded: open\n      };\n    }\n    if (this.popoverEl) {\n      this.popoverEl.open = open;\n    }\n    this.activeMenuItemIndex = this.open ? 0 : -1;\n    this.calciteActionMenuOpen.emit();\n    this.setTooltipReferenceElement();\n  }\n  connectMenuButtonEl() {\n    const { menuButtonId, menuId, open, label } = this;\n    const menuButtonEl = this.slottedMenuButtonEl || this.defaultMenuButtonEl;\n    if (this.menuButtonEl === menuButtonEl) {\n      return;\n    }\n    this.disconnectMenuButtonEl();\n    this.menuButtonEl = menuButtonEl;\n    this.setTooltipReferenceElement();\n    if (!menuButtonEl) {\n      return;\n    }\n    menuButtonEl.active = open;\n    menuButtonEl.setAttribute(\"aria-controls\", menuId);\n    menuButtonEl.setAttribute(\"aria-expanded\", toAriaBoolean(open));\n    menuButtonEl.setAttribute(\"aria-haspopup\", \"true\");\n    if (!menuButtonEl.id) {\n      menuButtonEl.id = menuButtonId;\n    }\n    if (!menuButtonEl.label) {\n      menuButtonEl.label = label;\n    }\n    if (!menuButtonEl.text) {\n      menuButtonEl.text = label;\n    }\n    menuButtonEl.addEventListener(\"click\", this.menuButtonClick);\n    menuButtonEl.addEventListener(\"keydown\", this.menuButtonKeyDown);\n  }\n  disconnectMenuButtonEl() {\n    const { menuButtonEl } = this;\n    if (!menuButtonEl) {\n      return;\n    }\n    menuButtonEl.removeEventListener(\"click\", this.menuButtonClick);\n    menuButtonEl.removeEventListener(\"keydown\", this.menuButtonKeyDown);\n    this.menuButtonEl = null;\n  }\n  setMenuButtonEl(event) {\n    const actions = event.target.assignedElements({\n      flatten: true\n    }).filter((el) => el?.matches(\"calcite-action\"));\n    this.slottedMenuButtonEl = actions[0];\n    this.connectMenuButtonEl();\n  }\n  setDefaultMenuButtonEl(el) {\n    this.defaultMenuButtonEl = el;\n    this.connectMenuButtonEl();\n  }\n  setPopoverEl(el) {\n    if (!el) {\n      return;\n    }\n    this.popoverEl = el;\n    el.open = this.open;\n  }\n  handleCalciteActionClick() {\n    this.open = false;\n    this.setFocus();\n  }\n  updateTooltip(event) {\n    const tooltips = event.target.assignedElements({\n      flatten: true\n    }).filter((el) => el?.matches(\"calcite-tooltip\"));\n    this.tooltipEl = tooltips[0];\n    this.setTooltipReferenceElement();\n  }\n  setTooltipReferenceElement() {\n    const { tooltipEl, expanded, menuButtonEl, open } = this;\n    if (tooltipEl) {\n      tooltipEl.referenceElement = !expanded && !open ? menuButtonEl : null;\n    }\n  }\n  updateActions(actions) {\n    actions?.forEach(this.updateAction);\n  }\n  async handleDefaultSlotChange(event) {\n    const actions = event.target.assignedElements({\n      flatten: true\n    }).reduce((previousValue, currentValue) => {\n      if (currentValue?.matches(\"calcite-action\")) {\n        previousValue.push(currentValue);\n        return previousValue;\n      }\n      if (currentValue?.matches(\"calcite-action-group\")) {\n        return previousValue.concat(Array.from(currentValue.querySelectorAll(\"calcite-action\")));\n      }\n      return previousValue;\n    }, []);\n    await this.componentOnReady();\n    this.actionElements = actions.filter((action) => !action.disabled && !action.hidden);\n  }\n  isValidKey(key, supportedKeys) {\n    return !!supportedKeys.find((k) => k === key);\n  }\n  handleActionNavigation(event, key, actions) {\n    if (!this.isValidKey(key, SUPPORTED_MENU_NAV_KEYS)) {\n      return;\n    }\n    event.preventDefault();\n    if (!this.open) {\n      this.toggleOpen();\n      if (key === \"Home\" || key === \"ArrowDown\") {\n        this.activeMenuItemIndex = 0;\n      }\n      if (key === \"End\" || key === \"ArrowUp\") {\n        this.activeMenuItemIndex = actions.length - 1;\n      }\n      return;\n    }\n    if (key === \"Home\") {\n      this.activeMenuItemIndex = 0;\n    }\n    if (key === \"End\") {\n      this.activeMenuItemIndex = actions.length - 1;\n    }\n    const currentIndex = this.activeMenuItemIndex;\n    if (key === \"ArrowUp\") {\n      this.activeMenuItemIndex = getRoundRobinIndex(Math.max(currentIndex - 1, -1), actions.length);\n    }\n    if (key === \"ArrowDown\") {\n      this.activeMenuItemIndex = getRoundRobinIndex(currentIndex + 1, actions.length);\n    }\n  }\n  toggleOpen(value = !this.open) {\n    this.open = value;\n  }\n  handlePopoverOpen(event) {\n    event.stopPropagation();\n    this.open = true;\n    this.setFocus();\n  }\n  handlePopoverClose(event) {\n    event.stopPropagation();\n    this.open = false;\n  }\n  renderMenuButton() {\n    const { appearance, label, scale, expanded } = this;\n    const menuButtonSlot = html`<slot name=${SLOTS.trigger} @slotchange=${this.setMenuButtonEl}><calcite-action .appearance=${appearance} .aria=${{ expanded }} class=${safeClassMap(CSS.defaultTrigger)} .icon=${ICONS.menu} .scale=${scale} .text=${label} .textEnabled=${expanded} ${ref(this.setDefaultMenuButtonEl)}></calcite-action></slot>`;\n    return menuButtonSlot;\n  }\n  renderMenuItems() {\n    const { actionElements, activeMenuItemIndex, menuId, menuButtonEl, label, placement, overlayPositioning, flipPlacements } = this;\n    const activeAction = actionElements[activeMenuItemIndex];\n    const activeDescendantId = activeAction?.id || null;\n    return html`<calcite-popover auto-close .flipPlacements=${flipPlacements} focus-trap-disabled .label=${label} offset-distance=0 @calcitePopoverClose=${this.handlePopoverClose} @calcitePopoverOpen=${this.handlePopoverOpen} .overlayPositioning=${overlayPositioning} .placement=${placement} pointer-disabled .referenceElement=${menuButtonEl} trigger-disabled ${ref(this.setPopoverEl)}><div aria-activedescendant=${activeDescendantId ?? nothing} aria-labelledby=${menuButtonEl?.id ?? nothing} class=${safeClassMap(CSS.menu)} id=${menuId ?? nothing} @click=${this.handleCalciteActionClick} role=menu tabindex=-1><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></calcite-popover>`;\n  }\n  render() {\n    return html`${this.renderMenuButton()}${this.renderMenuItems()}<slot name=${SLOTS.tooltip} @slotchange=${this.updateTooltip}></slot>`;\n  }\n}\ncustomElement(\"calcite-action-menu\", ActionMenu);\nexport {\n  ActionMenu\n};\n"],"names":["getRoundRobinIndex","index","total","CSS","menu","defaultTrigger","idPrefix","IDS","button","id","concat","action","actionId","SLOTS","tooltip","trigger","ICONS","styles","css","_templateObject","_taggedTemplateLiteral","SUPPORTED_MENU_NAV_KEYS","ActionMenu","LitElement","constructor","super","arguments","this","guid","actionElements","menuButtonClick","toggleOpen","menuButtonId","menuButtonKeyDown","event","key","activeMenuItemIndex","open","length","isActivationKey","preventDefault","click","handleActionNavigation","menuId","_open","updateAction","guid2","tabIndex","setAttribute","activeDescendant","focusSetter","useSetFocus","appearance","expanded","overlayPositioning","placement","scale","calciteActionMenuCollapse","createEvent","cancelable","calciteActionMenuExpand","calciteActionMenuOpen","openHandler","setFocus","options","menuButtonEl","connectedCallback","connectMenuButtonEl","willUpdate","changes","has","hasUpdated","expandedHandler","updateActions","emit","disconnectedCallback","disconnectMenuButtonEl","setTooltipReferenceElement","active","aria","popoverEl","label","slottedMenuButtonEl","defaultMenuButtonEl","toAriaBoolean","text","addEventListener","removeEventListener","setMenuButtonEl","actions","target","assignedElements","flatten","filter","el","matches","setDefaultMenuButtonEl","setPopoverEl","handleCalciteActionClick","updateTooltip","tooltips","tooltipEl","referenceElement","forEach","handleDefaultSlotChange","reduce","previousValue","currentValue","push","Array","from","querySelectorAll","componentOnReady","disabled","hidden","isValidKey","supportedKeys","find","k","currentIndex","Math","max","value","undefined","handlePopoverOpen","stopPropagation","handlePopoverClose","renderMenuButton","html","_templateObject2","safeClassMap","ref","renderMenuItems","_menuButtonEl$id","flipPlacements","activeAction","activeDescendantId","_templateObject3","nothing","render","_templateObject4","_ActionMenu","properties","state","reflect","type","Boolean","attribute","customElement"],"sourceRoot":""}