{"version":3,"file":"static/js/6553.113eab2e.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/labelFormatUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{parseWhereClause as t}from\"../../core/sql.js\";import{formatDate as n,convertDateFormatToIntlOptions as o}from\"../../intl/date.js\";import{formatNumber as a}from\"../../intl/number.js\";import{getDomainRange as l}from\"./domainUtils.js\";import{isDateField as i,isNumericField as s}from\"./fieldUtils.js\";import{getLabelExpression as u,getSingleFieldArcadeExpression as c}from\"./labelUtils.js\";import{createLabelExpression as f}from\"../../support/arcadeOnDemand.js\";const m=r.getLogger(\"esri.layers.support.labelFormatUtils\"),p={type:\"simple\",evaluate:()=>null},d={getAttribute:(e,r)=>e.field(r)};async function w(r,n,o){if(!r||!r.symbol||!n)return p;const a=r.where,l=u(r);let i;if(\"arcade\"===l.type){const r=await f(l.expression,o,n);if(null==r)return p;i={type:\"arcade\",evaluate(t,n){try{const e=\"attributes\"in t?r.repurposeFeature(t):t;e.contextTimeZone=n??null;const o=r.evaluate({$view:{timeZone:n},$feature:e},r.services);if(null!=o)return o.toString()}catch(o){m.error(new e(\"arcade-expression-error\",\"Encountered an error when evaluating label expression for feature\",{error:o,feature:t,expression:l}))}return null},needsHydrationToEvaluate:()=>null==c(l.expression)}}else i={type:\"simple\",evaluate:e=>l.expression.replaceAll(/{[^}]*}/g,(r=>{const t=r.slice(1,-1),o=n.get(t);if(!o)return r;let a=null;if(\"attributes\"in e){e&&e.attributes&&(a=e.attributes[o.name])}else a=e.field(o.name);return null==a?\"\":g(a,o)}))};if(a){let r;try{r=await t(a,n)}catch(s){return m.error(new e(\"bad-where-clause\",\"Encountered an error when evaluating where clause, ignoring\",{where:a,error:s})),p}const o=i.evaluate;i.evaluate=(t,n)=>{const l=\"attributes\"in t?void 0:d;try{if(r.testFeature(t,l))return o(t,n)}catch(s){m.error(new e(\"bad-where-clause\",\"Encountered an error when evaluating where clause for feature\",{where:a,feature:t,error:s}))}return null}}return i}function g(e,r){if(null==e)return\"\";const t=r.domain;if(t)if(\"codedValue\"===t.type||\"coded-value\"===t.type){const r=e;for(const e of t.codedValues)if(e.code===r)return e.name}else if(\"range\"===t.type){const{max:n,min:o}=l(r),a=+e;if(null!=o&&null!=n&&o<=a&&a<=n)return t.name}let u=e;return i(r)?u=n(u,o(\"short-date\")):s(r)&&(u=a(+u)),u||\"\"}export{w as createLabelFunction,g as formatField};\n"],"names":["m","r","getLogger","p","type","evaluate","d","getAttribute","e","field","async","w","n","o","symbol","a","where","l","u","i","f","expression","t","repurposeFeature","contextTimeZone","$view","timeZone","$feature","services","toString","error","feature","needsHydrationToEvaluate","c","replaceAll","slice","get","attributes","name","domain","codedValues","code","max","min","s","g","testFeature"],"sourceRoot":""}