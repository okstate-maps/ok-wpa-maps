{"version":3,"file":"static/js/3671.01cd600e.chunk.js","mappings":"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","sources":["../node_modules/@esri/calcite-components/dist/components/calcite-action-menu/customElement.js","../node_modules/@esri/calcite-components/dist/chunks/resources2.js","../node_modules/@esri/calcite-components/dist/chunks/array.js"],"sourcesContent":["/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\nv3.3.3 */\nimport { c as customElement } from \"../../chunks/runtime.js\";\nimport { ref } from \"lit/directives/ref.js\";\nimport { css, html, nothing } from \"lit\";\nimport { LitElement, createEvent, safeClassMap } from \"@arcgis/lumina\";\nimport { g as getRoundRobinIndex } from \"../../chunks/array.js\";\nimport { t as toAriaBoolean } from \"../../chunks/dom.js\";\nimport { g as guid } from \"../../chunks/guid.js\";\nimport { i as isActivationKey } from \"../../chunks/key.js\";\nimport { u as useSetFocus } from \"../../chunks/useSetFocus.js\";\nimport { I as IDS, S as SLOTS, a as ICONS, C as CSS } from \"../../chunks/resources2.js\";\nconst styles = css`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--calcite-font-size-1)}::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{display:flex;max-block-size:45vh;flex-direction:column;flex-wrap:nowrap;overflow-y:auto;overflow-x:hidden;outline:2px solid transparent;outline-offset:2px;gap:var(--calcite-action-menu-items-space, 0)}:host([hidden]){display:none}[hidden]{display:none}`;\nconst SUPPORTED_MENU_NAV_KEYS = [\"ArrowUp\", \"ArrowDown\", \"End\", \"Home\"];\nclass ActionMenu extends LitElement {\n  constructor() {\n    super(...arguments);\n    this.guid = guid();\n    this.actionElements = [];\n    this.menuButtonClick = () => {\n      this.toggleOpen();\n    };\n    this.menuButtonId = IDS.button(this.guid);\n    this.menuButtonKeyDown = (event) => {\n      const { key } = event;\n      const { actionElements, activeMenuItemIndex, open } = this;\n      if (!actionElements.length) {\n        return;\n      }\n      if (isActivationKey(key)) {\n        event.preventDefault();\n        if (!open) {\n          this.toggleOpen();\n          return;\n        }\n        const action = actionElements[activeMenuItemIndex];\n        if (action) {\n          action.click();\n        } else {\n          this.toggleOpen(false);\n        }\n      }\n      if (key === \"Tab\") {\n        this.open = false;\n        return;\n      }\n      if (key === \"Escape\") {\n        this.toggleOpen(false);\n        event.preventDefault();\n        return;\n      }\n      this.handleActionNavigation(event, key, actionElements);\n    };\n    this.menuId = IDS.menu(this.guid);\n    this._open = false;\n    this.updateAction = (action, index) => {\n      const { guid: guid2, activeMenuItemIndex } = this;\n      const id = IDS.action(guid2, index);\n      action.tabIndex = -1;\n      action.setAttribute(\"role\", \"menuitem\");\n      if (!action.id) {\n        action.id = id;\n      }\n      action.activeDescendant = index === activeMenuItemIndex;\n    };\n    this.focusSetter = useSetFocus()(this);\n    this.activeMenuItemIndex = -1;\n    this.appearance = \"solid\";\n    this.expanded = false;\n    this.overlayPositioning = \"absolute\";\n    this.placement = \"auto\";\n    this.scale = \"m\";\n    this.calciteActionMenuCollapse = createEvent({ cancelable: false });\n    this.calciteActionMenuExpand = createEvent({ cancelable: false });\n    this.calciteActionMenuOpen = createEvent({ cancelable: false });\n  }\n  static {\n    this.properties = { activeMenuItemIndex: [16, {}, { state: true }], menuButtonEl: [16, {}, { state: true }], appearance: [3, {}, { reflect: true }], expanded: [7, {}, { reflect: true, type: Boolean }], flipPlacements: [0, {}, { attribute: false }], label: 1, open: [7, {}, { reflect: true, type: Boolean }], overlayPositioning: [3, {}, { reflect: true }], placement: [3, {}, { reflect: true }], scale: [3, {}, { reflect: true }] };\n  }\n  static {\n    this.styles = styles;\n  }\n  get open() {\n    return this._open;\n  }\n  set open(open) {\n    const oldOpen = this._open;\n    if (open !== oldOpen) {\n      this._open = open;\n      this.openHandler(open);\n    }\n  }\n  async setFocus(options) {\n    return this.focusSetter(() => this.menuButtonEl, options);\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.connectMenuButtonEl();\n  }\n  willUpdate(changes) {\n    if (changes.has(\"expanded\") && (this.hasUpdated || this.expanded !== false)) {\n      this.expandedHandler();\n    }\n    if (changes.has(\"activeMenuItemIndex\") && (this.hasUpdated || this.activeMenuItemIndex !== -1)) {\n      this.updateActions(this.actionElements);\n    }\n    if (changes.has(\"expanded\") && this.hasUpdated) {\n      if (this.expanded) {\n        this.calciteActionMenuExpand.emit();\n      } else {\n        this.calciteActionMenuCollapse.emit();\n      }\n    }\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.disconnectMenuButtonEl();\n  }\n  expandedHandler() {\n    this.open = false;\n    this.setTooltipReferenceElement();\n  }\n  openHandler(open) {\n    if (this.menuButtonEl) {\n      this.menuButtonEl.active = open;\n      this.menuButtonEl.aria = {\n        expanded: open\n      };\n    }\n    if (this.popoverEl) {\n      this.popoverEl.open = open;\n    }\n    this.activeMenuItemIndex = this.open ? 0 : -1;\n    this.calciteActionMenuOpen.emit();\n    this.setTooltipReferenceElement();\n  }\n  connectMenuButtonEl() {\n    const { menuButtonId, menuId, open, label } = this;\n    const menuButtonEl = this.slottedMenuButtonEl || this.defaultMenuButtonEl;\n    if (this.menuButtonEl === menuButtonEl) {\n      return;\n    }\n    this.disconnectMenuButtonEl();\n    this.menuButtonEl = menuButtonEl;\n    this.setTooltipReferenceElement();\n    if (!menuButtonEl) {\n      return;\n    }\n    menuButtonEl.active = open;\n    menuButtonEl.setAttribute(\"aria-controls\", menuId);\n    menuButtonEl.setAttribute(\"aria-expanded\", toAriaBoolean(open));\n    menuButtonEl.setAttribute(\"aria-haspopup\", \"true\");\n    if (!menuButtonEl.id) {\n      menuButtonEl.id = menuButtonId;\n    }\n    if (!menuButtonEl.label) {\n      menuButtonEl.label = label;\n    }\n    if (!menuButtonEl.text) {\n      menuButtonEl.text = label;\n    }\n    menuButtonEl.addEventListener(\"click\", this.menuButtonClick);\n    menuButtonEl.addEventListener(\"keydown\", this.menuButtonKeyDown);\n  }\n  disconnectMenuButtonEl() {\n    const { menuButtonEl } = this;\n    if (!menuButtonEl) {\n      return;\n    }\n    menuButtonEl.removeEventListener(\"click\", this.menuButtonClick);\n    menuButtonEl.removeEventListener(\"keydown\", this.menuButtonKeyDown);\n    this.menuButtonEl = null;\n  }\n  setMenuButtonEl(event) {\n    const actions = event.target.assignedElements({\n      flatten: true\n    }).filter((el) => el?.matches(\"calcite-action\"));\n    this.slottedMenuButtonEl = actions[0];\n    this.connectMenuButtonEl();\n  }\n  setDefaultMenuButtonEl(el) {\n    this.defaultMenuButtonEl = el;\n    this.connectMenuButtonEl();\n  }\n  setPopoverEl(el) {\n    if (!el) {\n      return;\n    }\n    this.popoverEl = el;\n    el.open = this.open;\n  }\n  handleCalciteActionClick() {\n    this.open = false;\n    this.setFocus();\n  }\n  updateTooltip(event) {\n    const tooltips = event.target.assignedElements({\n      flatten: true\n    }).filter((el) => el?.matches(\"calcite-tooltip\"));\n    this.tooltipEl = tooltips[0];\n    this.setTooltipReferenceElement();\n  }\n  setTooltipReferenceElement() {\n    const { tooltipEl, expanded, menuButtonEl, open } = this;\n    if (tooltipEl) {\n      tooltipEl.referenceElement = !expanded && !open ? menuButtonEl : null;\n    }\n  }\n  updateActions(actions) {\n    actions?.forEach(this.updateAction);\n  }\n  async handleDefaultSlotChange(event) {\n    const actions = event.target.assignedElements({\n      flatten: true\n    }).reduce((previousValue, currentValue) => {\n      if (currentValue?.matches(\"calcite-action\")) {\n        previousValue.push(currentValue);\n        return previousValue;\n      }\n      if (currentValue?.matches(\"calcite-action-group\")) {\n        return previousValue.concat(Array.from(currentValue.querySelectorAll(\"calcite-action\")));\n      }\n      return previousValue;\n    }, []);\n    await this.componentOnReady();\n    this.actionElements = actions.filter((action) => !action.disabled && !action.hidden);\n  }\n  isValidKey(key, supportedKeys) {\n    return !!supportedKeys.find((k) => k === key);\n  }\n  handleActionNavigation(event, key, actions) {\n    if (!this.isValidKey(key, SUPPORTED_MENU_NAV_KEYS)) {\n      return;\n    }\n    event.preventDefault();\n    if (!this.open) {\n      this.toggleOpen();\n      if (key === \"Home\" || key === \"ArrowDown\") {\n        this.activeMenuItemIndex = 0;\n      }\n      if (key === \"End\" || key === \"ArrowUp\") {\n        this.activeMenuItemIndex = actions.length - 1;\n      }\n      return;\n    }\n    if (key === \"Home\") {\n      this.activeMenuItemIndex = 0;\n    }\n    if (key === \"End\") {\n      this.activeMenuItemIndex = actions.length - 1;\n    }\n    const currentIndex = this.activeMenuItemIndex;\n    if (key === \"ArrowUp\") {\n      this.activeMenuItemIndex = getRoundRobinIndex(Math.max(currentIndex - 1, -1), actions.length);\n    }\n    if (key === \"ArrowDown\") {\n      this.activeMenuItemIndex = getRoundRobinIndex(currentIndex + 1, actions.length);\n    }\n  }\n  toggleOpen(value = !this.open) {\n    this.open = value;\n  }\n  handlePopoverOpen(event) {\n    event.stopPropagation();\n    this.open = true;\n    this.setFocus();\n  }\n  handlePopoverClose(event) {\n    event.stopPropagation();\n    this.open = false;\n  }\n  renderMenuButton() {\n    const { appearance, label, scale, expanded } = this;\n    const menuButtonSlot = html`<slot name=${SLOTS.trigger} @slotchange=${this.setMenuButtonEl}><calcite-action .appearance=${appearance} .aria=${{ expanded }} class=${safeClassMap(CSS.defaultTrigger)} .icon=${ICONS.menu} .scale=${scale} .text=${label} .textEnabled=${expanded} ${ref(this.setDefaultMenuButtonEl)}></calcite-action></slot>`;\n    return menuButtonSlot;\n  }\n  renderMenuItems() {\n    const { actionElements, activeMenuItemIndex, menuId, menuButtonEl, label, placement, overlayPositioning, flipPlacements } = this;\n    const activeAction = actionElements[activeMenuItemIndex];\n    const activeDescendantId = activeAction?.id || null;\n    return html`<calcite-popover auto-close .flipPlacements=${flipPlacements} focus-trap-disabled .label=${label} offset-distance=0 @calcitePopoverClose=${this.handlePopoverClose} @calcitePopoverOpen=${this.handlePopoverOpen} .overlayPositioning=${overlayPositioning} .placement=${placement} pointer-disabled .referenceElement=${menuButtonEl} trigger-disabled ${ref(this.setPopoverEl)}><div aria-activedescendant=${activeDescendantId ?? nothing} aria-labelledby=${menuButtonEl?.id ?? nothing} class=${safeClassMap(CSS.menu)} id=${menuId ?? nothing} @click=${this.handleCalciteActionClick} role=menu tabindex=-1><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></calcite-popover>`;\n  }\n  render() {\n    return html`${this.renderMenuButton()}${this.renderMenuItems()}<slot name=${SLOTS.tooltip} @slotchange=${this.updateTooltip}></slot>`;\n  }\n}\ncustomElement(\"calcite-action-menu\", ActionMenu);\nexport {\n  ActionMenu\n};\n","/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\nv3.3.3 */\nconst CSS = {\n  menu: \"menu\",\n  defaultTrigger: \"default-trigger\"\n};\nconst idPrefix = \"calcite-action-menu\";\nconst IDS = {\n  button: (id) => `${idPrefix}-${id}-menu-button`,\n  menu: (id) => `${idPrefix}-${id}-menu`,\n  action: (id, actionId) => `${idPrefix}-${id}-action-${actionId}`\n};\nconst SLOTS = {\n  tooltip: \"tooltip\",\n  trigger: \"trigger\"\n};\nconst ICONS = {\n  menu: \"ellipsis\"\n};\nexport {\n  CSS as C,\n  IDS as I,\n  SLOTS as S,\n  ICONS as a\n};\n","/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\nv3.3.3 */\nfunction getRoundRobinIndex(index, total) {\n  return (index + total) % total;\n}\nexport {\n  getRoundRobinIndex as g\n};\n"],"names":["styles","css","_templateObject","_taggedTemplateLiteral","SUPPORTED_MENU_NAV_KEYS","ActionMenu","LitElement","constructor","super","arguments","this","guid","actionElements","menuButtonClick","toggleOpen","menuButtonId","IDS","button","menuButtonKeyDown","event","key","activeMenuItemIndex","open","length","isActivationKey","preventDefault","action","click","handleActionNavigation","menuId","menu","_open","updateAction","index","guid2","id","tabIndex","setAttribute","activeDescendant","focusSetter","useSetFocus","appearance","expanded","overlayPositioning","placement","scale","calciteActionMenuCollapse","createEvent","cancelable","calciteActionMenuExpand","calciteActionMenuOpen","openHandler","setFocus","options","menuButtonEl","connectedCallback","connectMenuButtonEl","willUpdate","changes","has","hasUpdated","expandedHandler","updateActions","emit","disconnectedCallback","disconnectMenuButtonEl","setTooltipReferenceElement","active","aria","popoverEl","label","slottedMenuButtonEl","defaultMenuButtonEl","toAriaBoolean","text","addEventListener","removeEventListener","setMenuButtonEl","actions","target","assignedElements","flatten","filter","el","matches","setDefaultMenuButtonEl","setPopoverEl","handleCalciteActionClick","updateTooltip","tooltips","tooltipEl","referenceElement","forEach","handleDefaultSlotChange","reduce","previousValue","currentValue","push","concat","Array","from","querySelectorAll","componentOnReady","disabled","hidden","isValidKey","supportedKeys","find","k","currentIndex","getRoundRobinIndex","Math","max","value","undefined","handlePopoverOpen","stopPropagation","handlePopoverClose","renderMenuButton","html","_templateObject2","SLOTS","trigger","safeClassMap","CSS","defaultTrigger","ICONS","ref","renderMenuItems","_menuButtonEl$id","flipPlacements","activeAction","activeDescendantId","_templateObject3","nothing","render","_templateObject4","tooltip","_class","properties","state","reflect","type","Boolean","attribute","customElement","idPrefix","actionId","total"],"sourceRoot":""}