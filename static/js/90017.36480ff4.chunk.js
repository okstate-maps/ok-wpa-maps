"use strict";(self.webpackChunkok_wpa_maps=self.webpackChunkok_wpa_maps||[]).push([[90017],{90017(e,r,s){s.r(r),s.d(r,{post:()=>w,serverVersionCacheMap:()=>m});var t=s(89379),o=s(3825),n=s(50076),i=s(54994),a=s(94487),c=s(6326),p=s(42553),u=s(46053),l=(s(81806),s(76460),s(47249),s(87990));let v=class extends p.o{constructor(e){super(e),this.moment=null,this.success=!1}};(0,c.Cg)([(0,u.MZ)({type:Date,json:{type:Number,write:{writer:(e,r)=>{r.moment=e?e.getTime():null}}}})],v.prototype,"moment",void 0),(0,c.Cg)([(0,u.MZ)({type:Boolean,json:{write:!0}})],v.prototype,"success",void 0),v=(0,c.Cg)([(0,l.$)("esri.rest.versionManagement.gdbVersion.support.PostResult")],v);const m=new Map;async function w(e,r,s,c){var p;m.has(e)||await(0,a.t)(m,e);const u=m.get(e);if((null!==(p=null===u||void 0===u?void 0:u.serverVersion)&&void 0!==p?p:0)<=11.1)throw new n.A("post:enterprise-version","versioning API requires ArcGIS Enterprise version 11.2 or higher");if(!r)throw new n.A("post:missing-guid","guid for version is missing");const l=(0,i.Dl)(e),w=s.toJSON();s.rows&&(w.rows=JSON.stringify(s.rows));const g=(0,i.jV)(l.query,(0,t.A)((0,t.A)({query:(0,i.lF)((0,t.A)((0,t.A)({},w),{},{f:"json"}))},c),{},{method:"post"}));r.startsWith("{")&&(r=r.slice(1,-1));const h="".concat(l.path,"/versions/").concat(r,"/post"),{data:d}=await(0,o.A)(h,g);return v.fromJSON(d)}},94487(e,r,s){s.d(r,{t:()=>o});var t=s(3825);async function o(e,r){let s=null;const o="string"==typeof r?r:r.path;if(!e.has(o)){const n=await(0,t.A)(o.replace(/\/VersionManagementServer/i,"/FeatureServer"),{query:{f:"json"}});s={serverVersion:Number(n.data.currentVersion),featureServerUrl:o.replace(/\/VersionManagementServer/i,"/FeatureServer")},e.set(r,s)}}}}]);
//# sourceMappingURL=90017.36480ff4.chunk.js.map