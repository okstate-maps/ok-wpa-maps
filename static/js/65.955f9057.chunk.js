(this["webpackJsonpok-wpa-maps"]=this["webpackJsonpok-wpa-maps"]||[]).push([[65],{1127:function(e,t,n){"use strict";n.r(t),n.d(t,"FeatureServiceSnappingSource",(function(){return ie}));var r=n(4),i=n.n(r),a=n(10),c=n(9),o=n(2),u=n(3),s=n(5),l=n(6),b=n(0),f=n(29),d=n(63),h=n(124),O=n(7),j=n(25),v=n(1),g=(n(12),n(15),n(11),n(8)),p=n(129),y=n(13),k=n(58),w=n(557),m=n(749);function I(e,t){return Object(m.f)(t.extent,_),Object(m.e)(_,Object(k.w)(S,e.x,e.y,0))}var _=Object(m.a)(),S=Object(w.e)(),P=n(335),H=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).pointOfInterest=null,r}return Object(u.a)(n,[{key:"tiles",get:function(){var e=this.tilesCoveringView,t=Object(O.k)(this.pointOfInterest)?this.pointOfInterest:this.view.center;return e.sort((function(e,n){return I(t,e)-I(t,n)})),e}},{key:"scaleEnabled",value:function(){return Object(P.b)(this.view.scale,this.layer.minScale||0,this.layer.maxScale||0)}},{key:"tilesCoveringView",get:function(){if(!this.view.ready||!this.view.featuresTilingScheme||!this.view.state||Object(O.j)(this.tileInfo))return[];if(!this.scaleEnabled)return[];var e,t=this.view.featuresTilingScheme.getTileCoverage(this.view.state,0),n=t.spans,r=t.lodInfo,i=r.level,a=[],c=Object(y.a)(n);try{for(c.s();!(e=c.n()).done;)for(var o=e.value,u=o.row,s=o.colFrom,l=o.colTo,b=s;b<=l;b++){var f={id:null,level:i,row:u,col:r.normalizeCol(b)};this.tileInfo.updateTileInfo(f),a.push(f)}}catch(d){c.e(d)}finally{c.f()}return a}},{key:"tileInfo",get:function(){var e,t;return null!=(e=null==(t=this.view.featuresTilingScheme)?void 0:t.tileInfo)?e:null}},{key:"tileSize",get:function(){return Object(O.k)(this.tileInfo)?this.tileInfo.size[0]:256}},{key:"initialize",value:function(){var e=this;this.handles.add(this.watch("view.state.viewpoint",(function(){return e.notifyChange("tilesCoveringView")}),!0))}}]),n}(Object(d.b)(f.a));Object(b.a)([Object(v.b)({readOnly:!0})],H.prototype,"tiles",null),Object(b.a)([Object(v.b)({readOnly:!0})],H.prototype,"scaleEnabled",null),Object(b.a)([Object(v.b)({readOnly:!0})],H.prototype,"tilesCoveringView",null),Object(b.a)([Object(v.b)({readOnly:!0})],H.prototype,"tileInfo",null),Object(b.a)([Object(v.b)({readOnly:!0})],H.prototype,"tileSize",null),Object(b.a)([Object(v.b)({constructOnly:!0})],H.prototype,"view",void 0),Object(b.a)([Object(v.b)({constructOnly:!0})],H.prototype,"layer",void 0),Object(b.a)([Object(v.b)()],H.prototype,"pointOfInterest",void 0),H=Object(b.a)([Object(g.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles2D")],H);var T=n(23),M=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).pointOfInterest=null,r}return Object(u.a)(n,[{key:"tiles",get:function(){var e=this.tilesCoveringView,t=this.effectivePointOfInterest;if(Object(O.k)(t))for(var n=e.map((function(e){return I(t,e)})),r=1;r<n.length;r++)if(n[r-1]>n[r])return e.sort((function(e,n){return I(t,e)-I(t,n)})),e.slice();return e}},{key:"tilesCoveringView",get:function(){var e,t;return this.filterTiles(null==(e=this.view.featureTiles)||null==(t=e.tiles)?void 0:t.toArray()).map(E)}},{key:"tileInfo",get:function(){var e,t;return null!=(e=null==(t=this.view.featureTiles)?void 0:t.tilingScheme.toTileInfo())?e:null}},{key:"tileSize",get:function(){var e,t;return null!=(e=null==(t=this.view.featureTiles)?void 0:t.tileSize)?e:256}},{key:"effectivePointOfInterest",get:function(){var e,t=this.pointOfInterest;return Object(O.k)(t)?t:null==(e=this.view.pointsOfInterest)?void 0:e.focus.location}},{key:"initialize",value:function(){var e=this;this.handles.add(Object(j.a)(this.view,"featureTiles",(function(t){e.handles.remove(A),t&&e.handles.add(t.addClient(),A)})))}},{key:"filterTiles",value:function(e){return Object(O.j)(e)?[]:e.filter((function(e){return Math.abs(e.measures.screenRect[3]-e.measures.screenRect[1])>N&&2===e.measures.visibility}))}}]),n}(d.a);function E(e){var t=Object(T.a)(e.lij,3),n=t[0],r=t[1],i=t[2],a=e.extent;return{id:"".concat(n,"/").concat(r,"/").concat(i),level:n,row:r,col:i,extent:a}}Object(b.a)([Object(v.b)({readOnly:!0})],M.prototype,"tiles",null),Object(b.a)([Object(v.b)({readOnly:!0})],M.prototype,"tilesCoveringView",null),Object(b.a)([Object(v.b)({readOnly:!0})],M.prototype,"tileInfo",null),Object(b.a)([Object(v.b)({readOnly:!0})],M.prototype,"tileSize",null),Object(b.a)([Object(v.b)({constructOnly:!0})],M.prototype,"view",void 0),Object(b.a)([Object(v.b)()],M.prototype,"pointOfInterest",void 0),Object(b.a)([Object(v.b)()],M.prototype,"effectivePointOfInterest",null),M=Object(b.a)([Object(g.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles3D")],M);var N=50,A="feature-tiles",z=n(839),x=n(68),V=n(90),C=n(139),R=n(40),F=n(80),L=n(65),U=n(153),B=n(117),q=n(166),D=n(152),J=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]],W=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).updating=!1,r.enablePolygons=!0,r.enableLabels=!0,r._polygons=new Map,r._labels=new Map,r._enabled=!0,r}return Object(u.a)(n,[{key:"initialize",value:function(){this._symbols=J.map((function(e){return new B.default({color:[e[0],e[1],e[2],.6],outline:{color:"black",width:1}})})),this.update()}},{key:"destroy",value:function(){this._enabled=!1,this.clear()}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled!==e&&(this._enabled=e,this.update())}},{key:"update",value:function(){var e=this;if(this._enabled){var t=this.getTiles(),n=new Array,r=new Set((this._labels.size,this._labels.keys()));t.forEach((function(i,a){var c=i.lij.toString();r.delete(c);var o=i.lij[0],u=i.geometry;if(e.enablePolygons&&!e._polygons.has(c)){var s=new F.a({geometry:u,symbol:e._symbols[o%e._symbols.length]});e._polygons.set(c,s),n.push(s)}if(e.enableLabels){var l=function(e){if(Object(O.k)(e.label))return e.label;var t=e.lij.toString();return Object(O.k)(e.loadPriority)&&(t+=" (".concat(e.loadPriority,")")),t}(i),b=a/(t.length-1),f=Object(L.j)(0,200,b),d=Object(L.j)(20,6,b)/.75,h=Object(O.k)(i.loadPriority)&&i.loadPriority>=t.length,j=new R.a([f,h?0:f,h?0:f]),v="3d"===e.view.type?function(){return new U.a({verticalOffset:{screenLength:40/.75},callout:{type:"line",color:"white",border:{color:"black"}},symbolLayers:[new D.a({text:l,halo:{color:"white",size:1/.75},material:{color:j},size:d})]})}:function(){return new q.a({text:l,haloColor:"white",haloSize:1/.75,color:j,size:d})};if(e._labels.has(c)){var g=e._labels.get(c),p=v();(Object(O.j)(g.symbol)||JSON.stringify(p)!==JSON.stringify(g.symbol))&&(g.symbol=p)}else{var y=new F.a({geometry:u.extent.center,symbol:v()});e._labels.set(c,y),n.push(y)}}}));var i=new Array;r.forEach((function(t){e._polygons.has(t)&&(i.push(e._polygons.get(t)),e._polygons.delete(t)),e._labels.has(t)&&(i.push(e._labels.get(t)),e._labels.delete(t))})),this.view.graphics.removeMany(i),this.view.graphics.addMany(n)}else this.clear()}},{key:"clear",value:function(){this.view.graphics.removeMany(Array.from(this._polygons.values())),this.view.graphics.removeMany(Array.from(this._labels.values())),this._polygons.clear(),this._labels.clear()}}]),n}(f.a);Object(b.a)([Object(v.b)({constructOnly:!0})],W.prototype,"view",void 0),Object(b.a)([Object(v.b)({readOnly:!0})],W.prototype,"updating",void 0),Object(b.a)([Object(v.b)()],W.prototype,"enabled",null);var Y=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).handles=new x.a,r}return Object(u.a)(n,[{key:"initialize",value:function(){var e=this,t=setInterval((function(){return e.fetchDebugInfo()}),2e3);this.handles.add(Object(h.c)((function(){return clearInterval(t)})))}},{key:"destroy",value:function(){this.handles.destroy()}},{key:"getTiles",value:function(){var e=this;if(!this.debugInfo)return[];var t=new Map,n=new Map;this.debugInfo.storedTiles.forEach((function(e){t.set(e.data.id,e.featureCount)})),this.debugInfo.pendingTiles.forEach((function(e){t.set(e.data.id,e.featureCount),n.set(e.data.id,e.state)}));var r=function(e){var r,i=n.get(e),a=null!=(r=t.get(e))?r:"?";return i?"".concat(i,":").concat(a,"\n").concat(e):"store:".concat(a,"\n").concat(e)},i=new Map;return this.debugInfo.storedTiles.forEach((function(e){i.set(e.data.id,e.data)})),this.debugInfo.pendingTiles.forEach((function(e){i.set(e.data.id,e.data)})),Array.from(i.values()).map((function(t){return{lij:[t.level,t.row,t.col],geometry:V.a.fromExtent(Object(C.v)(t.extent,e.view.spatialReference)),label:r(t.id)}}))}},{key:"fetchDebugInfo",value:function(){var e=this;this.handle.getDebugInfo(null).then((function(t){e.debugInfo=t,e.update()}))}}]),n}(W=Object(b.a)([Object(g.a)("esri.views.support.TileTreeDebugger")],W));Object(b.a)([Object(v.b)({constructOnly:!0})],Y.prototype,"handle",void 0),Y=Object(b.a)([Object(g.a)("esri.views.interactive.snapping.featureSources.WorkerTileTreeDebugger")],Y);var G=n(21),Q=n(905),Z=n(197),K=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).availability=0,r.workerHandleUpdating=!0,r.editId=0,r}return Object(u.a)(n,[{key:"updating",get:function(){return this.updatingHandles.updating||this.workerHandleUpdating}},{key:"destroy",value:function(){this.workerHandle.destroy()}},{key:"initialize",value:function(){var e=this;this.workerHandle=new X(this.schedule),this.handles.add([this.workerHandle.on("notify-updating",(function(t){var n=t.updating;return e.workerHandleUpdating=n})),this.workerHandle.on("notify-availability",(function(t){var n=t.availability;return e._set("availability",n)}))])}},{key:"setup",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.serviceInfoFromLayer(t.layer),!Object(O.j)(r)){e.next=3;break}return e.abrupt("return");case 3:return a={configuration:this.convertConfiguration(t.configuration),serviceInfo:r,spatialReference:t.spatialReference.toJSON()},e.next=6,this.updatingHandles.addPromise(this.workerHandle.invokeMethod("setup",a,n));case 6:this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},n));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"configure",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.convertConfiguration(t),e.next=3,this.updatingHandles.addPromise(this.workerHandle.invokeMethod("configure",r,n));case 3:this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},n));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updatingHandles.addPromise(this.workerHandle.invokeMethod("refresh",{},t));case 2:this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCandidates",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={distance:t.distance,point:t.coordinateHelper.vectorToPoint(t.point).toJSON(),types:t.types,filter:Object(O.k)(t.filter)?t.filter.createQuery().toJSON():null},e.abrupt("return",this.workerHandle.invoke(r,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTiles",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={tiles:t.tiles,tileInfo:Object(O.k)(t.tileInfo)?t.tileInfo.toJSON():null,tileSize:t.tileSize},e.next=3,this.updatingHandles.addPromise(this.workerHandle.invokeMethod("updateTiles",r,n));case 3:this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},n));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a,c,o,u,s,l,b,f,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=this.editId++,b={id:l},e.next=3,this.updatingHandles.addPromise(this.workerHandle.invokeMethod("beginApplyEdits",b,n));case 3:return this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},n)),e.next=6,this.updatingHandles.addPromise(Object(G.y)(t.result,n));case 6:return f=e.sent,d={id:l,edits:{addedFeatures:null!=(r=null==(a=f.addedFeatures)?void 0:a.map((function(e){return e.objectId})))?r:[],deletedFeatures:null!=(c=null==(o=f.deletedFeatures)?void 0:o.map((function(e){return{objectId:e.objectId,globalId:e.globalId}})))?c:[],updatedFeatures:null!=(u=null==(s=f.updatedFeatures)?void 0:s.map((function(e){return e.objectId})))?u:[]}},e.next=10,this.updatingHandles.addPromise(this.workerHandle.invokeMethod("endApplyEdits",d,n));case 10:this.updatingHandles.addPromise(this.workerHandle.invokeMethod("whenNotUpdating",{},n));case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDebugInfo",value:function(e){return this.workerHandle.invokeMethod("getDebugInfo",{},e)}},{key:"convertConfiguration",value:function(e){return{filter:Object(O.k)(e.filter)?e.filter.toJSON():null,customParameters:e.customParameters}}},{key:"serviceInfoFromLayer",value:function(e){var t;return"multipatch"===e.geometryType||"mesh"===e.geometryType?null:{url:e.parsedUrl.path,fields:e.fields.map((function(e){return e.toJSON()})),geometryType:Z.a.toJSON(e.geometryType),capabilities:e.capabilities,objectIdField:e.objectIdField,globalIdField:e.globalIdField,spatialReference:e.spatialReference.toJSON(),timeInfo:null==(t=e.timeInfo)?void 0:t.toJSON()}}}]),n}(d.a);Object(b.a)([Object(v.b)({constructOnly:!0})],K.prototype,"schedule",void 0),Object(b.a)([Object(v.b)({readOnly:!0})],K.prototype,"updating",null),Object(b.a)([Object(v.b)({readOnly:!0})],K.prototype,"availability",void 0),Object(b.a)([Object(v.b)()],K.prototype,"workerHandleUpdating",void 0),K=Object(b.a)([Object(g.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorkerHandle")],K);var X=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,"FeatureServiceSnappingSourceWorker","fetchCandidates",e,{strategy:"dedicated"})}return Object(u.a)(n,[{key:"getTransferList",value:function(){return[]}}]),n}(Q.a),$=n(47),ee=n(262),te=n(213),ne=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).pointOfInterest=null,r}return Object(u.a)(n,[{key:"tiles",get:function(){return[{id:"0/0/0",level:0,row:0,col:0,extent:Object(C.r)(-1e8,-1e8,1e8,1e8)}]}},{key:"tileInfo",get:function(){return new te.a({origin:new $.a({x:-1e8,y:1e8,spatialReference:this.layer.spatialReference}),size:[512,512],lods:[new ee.a({level:0,scale:1,resolution:390625})],spatialReference:this.layer.spatialReference})}},{key:"tileSize",get:function(){return this.tileInfo.size[0]}}]),n}(f.a);Object(b.a)([Object(v.b)({readOnly:!0})],ne.prototype,"tiles",null),Object(b.a)([Object(v.b)({readOnly:!0})],ne.prototype,"tileInfo",null),Object(b.a)([Object(v.b)({readOnly:!0})],ne.prototype,"tileSize",null),Object(b.a)([Object(v.b)({constructOnly:!0})],ne.prototype,"layer",void 0),Object(b.a)([Object(v.b)()],ne.prototype,"pointOfInterest",void 0),ne=Object(b.a)([Object(g.a)("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTilesSimple")],ne);var re=n(761),ie=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"updateTilesParameters",get:function(){return{tiles:this.tilesOfInterest.tiles,tileInfo:this.tilesOfInterest.tileInfo,tileSize:this.tilesOfInterest.tileSize}}},{key:"updating",get:function(){return this.workerHandle.updating||this.updatingHandles.updating}},{key:"configuration",get:function(){return{filter:this.layer.createQuery(),customParameters:this.layer.customParameters}}},{key:"availability",get:function(){return this.workerHandle.availability}},{key:"layer",get:function(){return this.layerSource.layer}},{key:"initialize",value:function(){var e=this,t=this.view;if(Object(O.k)(t))switch(t.type){case"2d":this.tilesOfInterest=new H({view:t,layer:this.layer}),this.workerHandle=new K;break;case"3d":var n=t.resourceController;this.tilesOfInterest=new M({view:t}),this.workerHandle=new K({schedule:function(e){return n.schedule(e)}})}else this.tilesOfInterest=new ne({layer:this.layer}),this.workerHandle=new K;this.handles.add([Object(h.a)(this.workerHandle)]),this.workerHandle.setup({layer:this.layer,spatialReference:this.spatialReference,configuration:this.configuration},null),this.updatingHandles.add(this,"updateTilesParameters",(function(){return e.workerHandle.updateTiles(e.updateTilesParameters,null)}),2),this.handles.add([Object(p.b)((function(){return e.configuration}),(function(t){return e.workerHandle.configure(t,null)}))]),Object(O.k)(t)&&this.handles.add(Object(j.a)(re.a,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",(function(n){n&&!e.debug?(e.debug=new Y({view:t,handle:e.workerHandle}),e.handles.add(Object(h.a)(e.debug),"debug")):!n&&e.debug&&e.handles.remove("debug")}))),this.handles.add(this.layerSource.layer.on("apply-edits",(function(t){e.workerHandle.applyEdits(t,null)})))}},{key:"refresh",value:function(){this.workerHandle.refresh(null)}},{key:"fetchCandidates",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tilesOfInterest.pointOfInterest=t.coordinateHelper.vectorToPoint(t.point),e.next=3,this.workerHandle.fetchCandidates(Object(a.a)(Object(a.a)({},t),{},{filter:null}),n);case 3:return e.abrupt("return",e.sent.candidates.map((function(e){return Object(z.a)(e,t.coordinateHelper)})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDebugInfo",value:function(e){return this.workerHandle.getDebugInfo(e)}}]),n}(Object(d.b)(f.a));Object(b.a)([Object(v.b)({constructOnly:!0})],ie.prototype,"spatialReference",void 0),Object(b.a)([Object(v.b)({constructOnly:!0})],ie.prototype,"layerSource",void 0),Object(b.a)([Object(v.b)({constructOnly:!0})],ie.prototype,"view",void 0),Object(b.a)([Object(v.b)()],ie.prototype,"tilesOfInterest",void 0),Object(b.a)([Object(v.b)({readOnly:!0})],ie.prototype,"updateTilesParameters",null),Object(b.a)([Object(v.b)({readOnly:!0})],ie.prototype,"updating",null),Object(b.a)([Object(v.b)({readOnly:!0})],ie.prototype,"configuration",null),Object(b.a)([Object(v.b)({readOnly:!0})],ie.prototype,"availability",null),ie=Object(b.a)([Object(g.a)("esri.views.interactive.snapping.featureSources.FeatureServiceSnappingSource")],ie)},546:function(e,t,n){"use strict";function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function a(e,t,n,r,i,a,c,o,u,s,l,b,f,d,h,O){return[e,t,n,r,i,a,c,o,u,s,l,b,f,d,h,O]}function c(e,t){return new Float64Array(e,t,16)}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return a}));var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze({__proto__:null,create:r,clone:i,fromValues:a,createView:c,IDENTITY:o})},557:function(e,t,n){"use strict";function r(){return[0,0,0,0]}function i(e){return[e[0],e[1],e[2],e[3]]}function a(e,t,n,r){return[e,t,n,r]}function c(e){for(var t=[0,0,0,0],n=Math.min(4,e.length),r=0;r<n;++r)t[r]=e[r];return t}function o(e,t){return new Float64Array(e,t,4)}function u(){return[0,0,0,0]}function s(){return a(1,1,1,1)}function l(){return a(1,0,0,0)}function b(){return a(0,1,0,0)}function f(){return a(0,0,1,0)}function d(){return a(0,0,0,1)}n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return i})),n.d(t,"g",(function(){return a}));var h=[0,0,0,0],O=s(),j=l(),v=b(),g=f(),p=d();Object.freeze({__proto__:null,create:r,clone:i,fromValues:a,fromArray:c,createView:o,zeros:u,ones:s,unitX:l,unitY:b,unitZ:f,unitW:d,ZEROS:h,ONES:O,UNIT_X:j,UNIT_Y:v,UNIT_Z:g,UNIT_W:p})},562:function(e,t,n){"use strict";function r(){return[1,0,0,0,1,0,0,0,1]}function i(e,t){return new Float64Array(e,t,9)}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));Object.freeze({__proto__:null,create:r,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},fromValues:function(e,t,n,r,i,a,c,o,u){return[e,t,n,r,i,a,c,o,u]},createView:i})},569:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return j})),n.d(t,"e",(function(){return v}));var r=n(2),i=n(3),a=n(7),c=n(385),o=n(562),u=n(546),s=n(610),l=n(60),b=n(79),f=n(557),d=function(){function e(t,n,i){var a=this;Object(r.a)(this,e),this.itemByteSize=t,this.itemCreate=n,this.buffers=[],this.items=[],this.itemsPerBuffer=0,this.itemsPtr=0,this.itemsPerBuffer=Math.ceil(i/this.itemByteSize),this.tickHandle=c.a.before((function(){return a.reset()}))}return Object(i.a)(e,[{key:"destroy",value:function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=Object(a.p)(this.tickHandle)),this.itemsPtr=0,this.items=Object(a.p)(this.items),this.buffers=Object(a.p)(this.buffers)}},{key:"get",value:function(){0===this.itemsPtr&&Object(c.a)((function(){}));for(var e=Math.floor(this.itemsPtr/this.itemsPerBuffer);this.buffers.length<=e;){for(var t=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize),n=0;n<this.itemsPerBuffer;++n)this.items.push(this.itemCreate(t,n*this.itemByteSize));this.buffers.push(t)}return this.items[this.itemsPtr++]}},{key:"reset",value:function(){for(var e=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);this.buffers.length>e;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0}},{key:"test",get:function(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}}}],[{key:"createVec2f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return new e(16,l.c,t)}},{key:"createVec3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return new e(24,b.d,t)}},{key:"createVec4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return new e(32,f.c,t)}},{key:"createMat3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return new e(72,o.a,t)}},{key:"createMat4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return new e(128,u.b,t)}},{key:"createQuatf64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return new e(32,s.d,t)}}]),e}(),h=4096,O=d.createVec2f64(),j=d.createVec3f64(),v=d.createVec4f64(),g=(d.createMat3f64(),d.createMat4f64()),p=d.createQuatf64()},578:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return u}));var r=n(640),i=n(58),a=n(79),c=n(569);function o(e){return e?{origin:Object(a.c)(e.origin),direction:Object(a.c)(e.direction)}:{origin:Object(a.e)(),direction:Object(a.e)()}}function u(e,t){var n=h.get();return n.origin=e,n.direction=t,n}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o();return b(e.origin,e.direction,t)}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o();return Object(i.k)(n.origin,e),Object(i.j)(n.direction,t,e),n}function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o();return Object(i.k)(n.origin,e),Object(i.k)(n.direction,t),n}function f(e,t){var n=Object(i.g)(c.d.get(),Object(i.r)(c.d.get(),e.direction),Object(i.j)(c.d.get(),t,e.origin));return Object(i.h)(n,n)}function d(e,t,n){var r=Object(i.h)(e.direction,Object(i.j)(n,t,e.origin));return Object(i.f)(n,e.origin,Object(i.e)(n,e.direction,r)),n}var h=new r.a((function(){return{origin:null,direction:null}}))},596:function(e,t,n){"use strict";n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return E})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return b})),n.d(t,"i",(function(){return m})),n.d(t,"j",(function(){return I})),n.d(t,"k",(function(){return S})),n.d(t,"l",(function(){return P})),n.d(t,"m",(function(){return _})),n.d(t,"n",(function(){return T})),n.d(t,"o",(function(){return H})),n.d(t,"p",(function(){return w})),n.d(t,"q",(function(){return x})),n.d(t,"r",(function(){return N})),n.d(t,"s",(function(){return k})),n.d(t,"t",(function(){return A})),n.d(t,"u",(function(){return s}));var r=n(65),i=n(7),a=n(58),c=n(79),o=(n(677),n(569));function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;return[e[0],e[1],e[2],e[3]]}function s(e,t,n,r){return b(e,t,n,r,o.e.get())}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u();return b(e[0],e[1],e[2],e[3],t)}function b(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u();return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function f(e,t,n){var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return n[0]=t[0]*i,n[1]=t[1]*i,n[2]=t[2]*i,n[3]=-(n[0]*e[0]+n[1]*e[1]+n[2]*e[2]),n}function d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u(),i=n[0]-t[0],a=n[1]-t[1],c=n[2]-t[2],o=e[0]-t[0],s=e[1]-t[1],l=e[2]-t[2],b=a*l-c*s,f=c*o-i*l,d=i*s-a*o,h=b*b+f*f+d*d,O=Math.abs(h-1)>1e-5&&h>1e-12?1/Math.sqrt(h):1;r[0]=b*O,r[1]=f*O,r[2]=d*O,r[3]=-(r[0]*e[0]+r[1]*e[1]+r[2]*e[2])}function h(e,t,n,r,i){if(e.count<3)return!1;e.getVec(n,j);for(var c=r,o=!1;c<e.count-1&&!o;)e.getVec(c,v),c++,o=!Object(a.o)(j,v);if(!o)return!1;for(c=Math.max(c,i),o=!1;c<e.count&&!o;)e.getVec(c,g),c++,Object(a.j)(p,j,v),Object(a.r)(p,p),Object(a.j)(y,v,g),Object(a.r)(y,y),o=!Object(a.o)(j,g)&&!Object(a.o)(v,g)&&Math.abs(Object(a.h)(p,y))<O;return o?(d(j,v,g,t),!0):(0!==n||1!==r||2!==i)&&h(e,t,0,1,2)}var O=.99619469809,j=Object(c.e)(),v=Object(c.e)(),g=Object(c.e)(),p=Object(c.e)(),y=Object(c.e)();function k(e,t,n){return e!==n&&l(e,n),n[3]=-Object(a.h)(n,t),n}function w(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function m(e,t,n,r){return Object(a.g)(g,t,e),f(n,g,r)}function I(e,t,n,r){return z(e,t,Object(a.j)(o.d.get(),n,t),C,r)}function _(e,t,n){return!!Object(i.k)(t)&&z(e,t.origin,t.direction,R,n)}function S(e,t,n){return z(e,t.origin,t.vector,0,n)}function P(e,t,n){return z(e,t.origin,t.vector,1,n)}function H(e,t){return A(e,t)>=0}function T(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],c=t[4],o=t[5];return e[0]*(e[0]>0?n:a)+e[1]*(e[1]>0?r:c)+e[2]*(e[2]>0?i:o)+e[3]>=0}function M(e,t){var n=Object(a.h)(e,t.ray.direction),r=-A(e,t.ray.origin);if(r<0&&n>=0)return!1;if(n>-1e-6&&n<1e-6)return r>0;if((r<0||n<0)&&!(r<0&&n<0))return!0;var i=r/n;return n>0?i<t.c1&&(t.c1=i):i>t.c0&&(t.c0=i),t.c0<=t.c1}function E(e,t){var n=Object(a.h)(e,t.ray.direction),r=-A(e,t.ray.origin);if(n>-1e-6&&n<1e-6)return r>0;var i=r/n;return n>0?i<t.c1&&(t.c1=i):i>t.c0&&(t.c0=i),t.c0<=t.c1}function N(e,t,n){var r=Object(a.e)(o.d.get(),e,-e[3]),i=function(e,t,n){var r=Object(a.e)(o.d.get(),e,Object(a.h)(e,t));return Object(a.j)(n,t,r),n}(e,Object(a.j)(o.d.get(),t,r),o.d.get());return Object(a.f)(n,i,r),n}function A(e,t){return Object(a.h)(e,t)+e[3]}function z(e,t,n,i,c){var o=Object(a.h)(e,n);if(0===o)return!1;var u=-(Object(a.h)(e,t)+e[3])/o;return 1&i&&(u=Object(r.d)(u,0,1)),!(!(4&i)&&u<0||!(8&i)&&u>1)&&(Object(a.f)(c,t,Object(a.e)(c,n,u)),!0)}function x(e){return e}var V=[0,0,1,0],C=12,R=8},610:function(e,t,n){"use strict";function r(){return[0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3]]}function a(e,t){return new Float64Array(e,t,4)}n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return a}));var c=[0,0,0,1];Object.freeze({__proto__:null,create:r,clone:i,fromValues:function(e,t,n,r){return[e,t,n,r]},createView:a,IDENTITY:c})},640:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),i=n(3),a=n(7),c=n(385),o=function(){function e(t){var n=this;Object(r.a)(this,e),this.allocator=t,this.items=[],this.itemsPtr=0,this.tickHandle=c.a.before((function(){return n.reset()})),this.grow()}return Object(i.a)(e,[{key:"destroy",value:function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=Object(a.p)(this.tickHandle)),this.items=Object(a.p)(this.items)}},{key:"get",value:function(){return 0===this.itemsPtr&&Object(c.a)((function(){})),this.itemsPtr===this.items.length&&this.grow(),this.items[this.itemsPtr++]}},{key:"reset",value:function(){var e=Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3*u);this.items.length=Math.min(e,this.items.length),this.itemsPtr=0}},{key:"grow",value:function(){for(var e=0;e<Math.max(8,Math.min(this.items.length,u));e++)this.items.push(this.allocator())}}]),e}(),u=1024},662:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"i",(function(){return h}));var r=n(65),i=n(640),a=n(58),c=n(79),o=n(569);function u(e){return e?{origin:Object(c.c)(e.origin),vector:Object(c.c)(e.vector)}:{origin:Object(c.e)(),vector:Object(c.e)()}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u();return l(e.origin,e.vector,t)}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return Object(a.k)(n.origin,e),Object(a.k)(n.vector,t),n}function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return Object(a.k)(n.origin,e),Object(a.j)(n.vector,t,e),n}function f(e,t){var n=Object(a.j)(o.d.get(),t,e.origin),i=Object(a.h)(e.vector,n),c=Object(a.h)(e.vector,e.vector),u=Object(r.d)(i/c,0,1),s=Object(a.j)(o.d.get(),Object(a.e)(o.d.get(),e.vector,u),n);return Object(a.h)(s,s)}function d(e,t,n){return Object(a.f)(n,e.origin,Object(a.e)(n,e.vector,t))}function h(e,t,n,i,c){var u=e.vector,s=e.origin,l=Object(a.j)(o.d.get(),t,s),b=Object(a.h)(u,l)/Object(a.t)(u);return Object(a.e)(c,u,Object(r.d)(b,n,i)),Object(a.f)(c,c,e.origin)}function O(e,t){if(v(e,function(e,t){var n=p.get();return n.origin=e,n.vector=t,n}(t.origin,t.direction),!1,g)){var n=g.tA,r=g.pB,i=g.distance2;if(n>=0&&n<=1)return i;if(n<0)return Object(a.l)(e.origin,r);if(n>1)return Object(a.l)(Object(a.f)(o.d.get(),e.origin,e.vector),r)}return null}function j(e,t,n){return!!v(e,t,!0,g)&&(Object(a.k)(n,g.pA),!0)}function v(e,t,n,i){var c=1e-6,u=e.origin,s=Object(a.f)(o.d.get(),u,e.vector),l=t.origin,b=Object(a.f)(o.d.get(),l,t.vector),f=o.d.get(),d=o.d.get();if(f[0]=u[0]-l[0],f[1]=u[1]-l[1],f[2]=u[2]-l[2],d[0]=b[0]-l[0],d[1]=b[1]-l[1],d[2]=b[2]-l[2],Math.abs(d[0])<c&&Math.abs(d[1])<c&&Math.abs(d[2])<c)return!1;var h=o.d.get();if(h[0]=s[0]-u[0],h[1]=s[1]-u[1],h[2]=s[2]-u[2],Math.abs(h[0])<c&&Math.abs(h[1])<c&&Math.abs(h[2])<c)return!1;var O=f[0]*d[0]+f[1]*d[1]+f[2]*d[2],j=d[0]*h[0]+d[1]*h[1]+d[2]*h[2],v=f[0]*h[0]+f[1]*h[1]+f[2]*h[2],g=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],p=(h[0]*h[0]+h[1]*h[1]+h[2]*h[2])*g-j*j;if(Math.abs(p)<c)return!1;var y=(O*j-v*g)/p,k=(O+j*y)/g;n&&(y=Object(r.d)(y,0,1),k=Object(r.d)(k,0,1));var w=o.d.get(),m=o.d.get();return w[0]=u[0]+y*h[0],w[1]=u[1]+y*h[1],w[2]=u[2]+y*h[2],m[0]=l[0]+k*d[0],m[1]=l[1]+k*d[1],m[2]=l[2]+k*d[2],i.tA=y,i.tB=k,i.pA=w,i.pB=m,i.distance2=Object(a.l)(w,m),!0}var g={tA:0,tB:0,pA:Object(c.e)(),pB:Object(c.e)(),distance2:0},p=new i.a((function(){return{origin:null,vector:null}}))},677:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return j})),n.d(t,"e",(function(){return w})),n.d(t,"f",(function(){return v}));n(12);var r=n(11),i=n(65),a=n(7),c=n(100),o=n(58),u=n(79),s=n(406),l=n(557),b=n(578),f=n(678),d=n(569),h=r.a.getLogger("esri.geometry.support.sphere");function O(){return Object(l.e)()}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O();return Object(s.c)(t,e)}function v(e){return e}function g(e){e[0]=e[1]=e[2]=e[3]=0}function p(e){return Array.isArray(e)?e[3]:e}function y(e){return Array.isArray(e)?e:T}function k(e,t,n){if(Object(a.j)(t))return!1;var r=Object(o.j)(d.d.get(),t.origin,y(e)),i=Object(o.h)(t.direction,t.direction),c=2*Object(o.h)(t.direction,r),u=c*c-4*i*(Object(o.h)(r,r)-e[3]*e[3]);if(u<0)return!1;var s=Math.sqrt(u),l=(-c-s)/(2*i),b=(-c+s)/(2*i);return(l<0||b<l&&b>0)&&(l=b),!(l<0)&&(n&&Object(o.f)(n,t.origin,Object(o.e)(d.d.get(),t.direction,l)),!0)}function w(e,t){return k(e,t,null)}function m(e,t,n){var r=d.d.get(),i=d.a.get();Object(o.g)(r,t.origin,t.direction);var a=p(e);Object(o.g)(n,r,t.origin),Object(o.e)(n,n,1/Object(o.p)(n)*a);var u=_(e,t.origin),s=Object(f.a)(t.origin,n);return Object(c.j)(i),Object(c.e)(i,i,s+u,r),Object(o.q)(n,n,i),n}function I(e,t,n){var r=Object(o.j)(d.d.get(),t,y(e)),i=Object(o.e)(d.d.get(),r,e[3]/Object(o.p)(r));return Object(o.f)(n,i,y(e))}function _(e,t){var n=Object(o.j)(d.d.get(),t,y(e)),r=Object(o.p)(n),a=p(e),c=a+Math.abs(a-r);return Object(i.a)(a/c)}var S=Object(u.e)();function P(e,t,n,r){var a=Object(o.j)(S,t,y(e));switch(n){case 0:var c=Object(i.c)(a,S)[2];return Object(o.w)(r,-Math.sin(c),Math.cos(c),0);case 1:var u=Object(i.c)(a,S),s=u[1],l=u[2],b=Math.sin(s);return Object(o.w)(r,-b*Math.cos(l),-b*Math.sin(l),Math.cos(s));case 2:return Object(o.r)(r,a);default:return}}function H(e,t){var n=Object(o.j)(M,t,y(e));return Object(o.p)(n)-e[3]}var T=Object(u.e)(),M=Object(u.e)();Object.freeze({__proto__:null,create:O,copy:j,fromCenterAndRadius:function(e,t){return Object(l.g)(e[0],e[1],e[2],t)},wrap:v,clear:g,fromRadius:function(e){return e},getRadius:p,getCenter:y,fromValues:function(e,t,n,r){return Object(l.g)(e,t,n,r)},elevate:function(e,t,n){return e!==n&&Object(o.k)(n,e),n[3]=e[3]+t,n},setExtent:function(e,t,n){return h.error("sphere.setExtent is not yet supported"),e===n?n:j(e,n)},intersectRay:k,intersectsRay:w,intersectRayClosestSilhouette:function(e,t,n){if(k(e,t,n))return n;var r=m(e,t,d.d.get());return Object(o.f)(n,t.origin,Object(o.e)(d.d.get(),t.direction,Object(o.m)(t.origin,r)/Object(o.p)(t.direction))),n},closestPointOnSilhouette:m,closestPoint:function(e,t,n){return k(e,t,n)?n:(Object(b.a)(t,y(e),n),I(e,n,n))},projectPoint:I,distanceToSilhouette:function(e,t){var n=Object(o.j)(d.d.get(),t,y(e)),r=Object(o.t)(n),i=e[3]*e[3];return Math.sqrt(Math.abs(r-i))},angleToSilhouette:_,axisAt:P,altitudeAt:H,setAltitudeAt:function(e,t,n,r){var i=H(e,t),a=P(e,t,2,M),c=Object(o.e)(M,a,n-i);return Object(o.f)(r,t,c)}})},678:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return o}));var r=n(65),i=n(58),a=n(79);function c(e,t,n){var r=Object(i.h)(e,t)/Object(i.h)(e,e);return Object(i.e)(n,e,r)}function o(e,t){return Object(i.h)(e,t)/Object(i.p)(e)}function u(e,t){var n=Object(i.h)(e,t)/(Object(i.p)(e)*Object(i.p)(t));return-Object(r.a)(n)}function s(e,t,n){Object(i.r)(l,e),Object(i.r)(b,t);var a=Object(i.h)(l,b),c=Object(r.a)(a),o=Object(i.g)(l,l,b);return Object(i.h)(o,n)<0?2*Math.PI-c:c}var l=Object(a.e)(),b=Object(a.e)()},723:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),i=n(3),a=n(5),c=n(6),o=n(57),u=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this)).point=e,i}return Object(i.a)(n,[{key:"equals",value:function(e){return e instanceof n&&Object(o.d)(this.point,e.point)}}]),n}(n(218).a)},749:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return M})),n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return I})),n.d(t,"h",(function(){return z})),n.d(t,"i",(function(){return A})),n.d(t,"j",(function(){return k}));var r=n(13),i=n(2),a=(n(12),n(11)),c=n(65),o=n(640),u=n(100),s=n(546),l=n(58),b=n(79),f=n(662),d=n(596),h=n(578),O=n(678),j=n(569),v=a.a.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;return{plane:Object(d.d)(e.plane),origin:Object(b.c)(e.origin),basis1:Object(b.c)(e.basis1),basis2:Object(b.c)(e.basis2)}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g();return y(e.origin,e.basis1,e.basis2,t)}function y(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g();return Object(l.k)(r.origin,e),Object(l.k)(r.basis1,t),Object(l.k)(r.basis2,n),k(r),R(r,"fromValues()"),r}function k(e){Object(d.i)(e.basis2,e.basis1,e.origin,e.plane)}function w(e,t,n){e!==n&&p(e,n);var r=Object(l.e)(j.d.get(),z(e),t);return Object(l.f)(n.origin,n.origin,r),n.plane[3]-=t,n}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g(),n=(e[2]-e[0])/2,r=(e[3]-e[1])/2;return Object(l.w)(t.origin,e[0]+n,e[1]+r,0),Object(l.w)(t.basis1,n,0,0),Object(l.w)(t.basis2,0,r,0),Object(d.h)(0,0,1,0,t.plane),t}function I(e,t,n){return!!Object(d.m)(e.plane,t,n)&&x(e,n)}function _(e,t,n){var i=U.get();F(e,t,i,U.get());var a,o=Number.POSITIVE_INFINITY,u=Object(r.a)(J);try{for(u.s();!(a=u.n()).done;){var s=C(e,a.value,B.get()),b=j.d.get();if(Object(d.k)(i,s,b)){var f=Object(l.v)(j.d.get(),t.origin,b),h=Math.abs(Object(c.a)(Object(l.h)(t.direction,f)));h<o&&(o=h,Object(l.k)(n,b))}}}catch(O){u.e(O)}finally{u.f()}return o===Number.POSITIVE_INFINITY?S(e,t,n):n}function S(e,t,n){if(I(e,t,n))return n;var i=U.get(),a=U.get();F(e,t,i,a);var c,o=Number.POSITIVE_INFINITY,u=Object(r.a)(J);try{for(u.s();!(c=u.n()).done;){var s=C(e,c.value,B.get()),b=j.d.get();if(Object(d.l)(i,s,b)){var f=Object(h.d)(t,b);if(!Object(d.o)(a,b))continue;f<o&&(o=f,Object(l.k)(n,b))}}}catch(O){u.e(O)}finally{u.f()}return T(e,t.origin)<o&&P(e,t.origin,n),n}function P(e,t,n){var r=Object(d.r)(e.plane,t,j.d.get()),i=Object(f.i)(V(e,e.basis1),r,-1,1,j.d.get()),a=Object(f.i)(V(e,e.basis2),r,-1,1,j.d.get());return Object(l.j)(n,Object(l.f)(j.d.get(),i,a),e.origin),n}function H(e,t,n){var r=e.origin,i=e.basis1,a=e.basis2,c=Object(l.j)(j.d.get(),t,r),o=Object(O.d)(i,c),u=Object(O.d)(a,c),s=Object(O.d)(z(e),c);return Object(l.w)(n,o,u,s)}function T(e,t){var n=H(e,t,j.d.get()),r=e.basis1,i=e.basis2,a=Object(l.p)(r),c=Object(l.p)(i),o=Math.max(Math.abs(n[0])-a,0),u=Math.max(Math.abs(n[1])-c,0),s=n[2];return o*o+u*u+s*s}function M(e,t){return Math.sqrt(T(e,t))}function E(e,t){return Object(d.o)(e.plane,t)&&x(e,t)}function N(e,t){var n=-e.plane[3];return Object(O.d)(z(e),t)-n}function A(e,t,n,r){return e!==r&&p(e,r),Object(u.e)(Y,Object(u.j)(Y),t,n),Object(l.q)(r.basis1,e.basis1,Y),Object(l.q)(r.basis2,e.basis2,Y),k(r),r}function z(e){return Object(d.q)(e.plane)}function x(e,t){var n=Object(l.j)(j.d.get(),t,e.origin),r=Object(l.t)(e.basis1),i=Object(l.t)(e.basis2),a=Object(l.h)(e.basis1,n),c=Object(l.h)(e.basis2,n);return-a-r<0&&a-r<0&&-c-i<0&&c-i<0}function V(e,t){var n=B.get();return Object(l.k)(n.origin,e.origin),Object(l.k)(n.vector,t),n}function C(e,t,n){var r=e.basis1,i=e.basis2,a=e.origin,c=Object(l.e)(j.d.get(),r,t.origin[0]),o=Object(l.e)(j.d.get(),i,t.origin[1]);Object(l.f)(n.origin,c,o),Object(l.f)(n.origin,n.origin,a);var u=Object(l.e)(j.d.get(),r,t.direction[0]),s=Object(l.e)(j.d.get(),i,t.direction[1]);return Object(l.e)(n.vector,Object(l.f)(u,u,s),2),n}function R(e,t){Math.abs(Object(l.h)(e.basis1,e.basis2)/(Object(l.p)(e.basis1)*Object(l.p)(e.basis2)))>1e-6&&v.warn(t,"Provided basis vectors are not perpendicular"),Math.abs(Object(l.h)(e.basis1,z(e)))>1e-6&&v.warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-Object(l.h)(z(e),e.origin)-e.plane[3])>1e-6&&v.warn(t,"Plane offset is not consistent with plane origin")}function F(e,t,n,r){var i=z(e);Object(d.i)(i,t.direction,t.origin,n),Object(d.i)(Object(d.q)(n),i,t.origin,r)}var L={plane:Object(d.d)(),origin:Object(b.g)(0,0,0),basis1:Object(b.g)(1,0,0),basis2:Object(b.g)(0,1,0)},U=new o.a(d.d),B=new o.a(f.d),q=Object(b.e)(),D=new o.a((function(){return{origin:null,basis1:null,basis2:null,plane:null}})),J=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],W=Object(s.d)(),Y=Object(s.d)();Object.freeze({__proto__:null,BoundedPlaneClass:function e(){Object(i.a)(this,e),this.plane=Object(d.d)(),this.origin=Object(b.e)(),this.basis1=Object(b.e)(),this.basis2=Object(b.e)()},create:g,wrap:function(e,t,n){var r=D.get();return r.origin=e,r.basis1=t,r.basis2=n,r.plane=Object(d.u)(0,0,0,0),k(r),r},copy:p,copyWithoutVerify:function(e,t){Object(l.k)(t.origin,e.origin),Object(l.k)(t.basis1,e.basis1),Object(l.k)(t.basis2,e.basis2),Object(d.c)(e.plane,t.plane)},fromValues:y,updateUnboundedPlane:k,elevate:w,setExtent:function(e,t,n){return m(t,n),w(n,N(e,e.origin),n),n},fromAABoundingRect:m,intersectRay:I,intersectRayClosestSilhouette:function(e,t,n){if(I(e,t,n))return n;var r=_(e,t,j.d.get());return Object(l.f)(n,t.origin,Object(l.e)(j.d.get(),t.direction,Object(l.m)(t.origin,r)/Object(l.p)(t.direction))),n},closestPointOnSilhouette:_,closestPoint:S,projectPoint:P,projectPointLocal:H,distance2:T,distance:M,distanceToSilhouette:function(e,t){var n,i=Number.NEGATIVE_INFINITY,a=Object(r.a)(J);try{for(a.s();!(n=a.n()).done;){var c=C(e,n.value,B.get()),o=Object(f.e)(c,t);o>i&&(i=o)}}catch(u){a.e(u)}finally{a.f()}return Math.sqrt(i)},extrusionContainsPoint:E,axisAt:function(e,t,n,r){return function(e,t,n){switch(t){case 0:Object(l.k)(n,e.basis1),Object(l.r)(n,n);break;case 1:Object(l.k)(n,e.basis2),Object(l.r)(n,n);break;case 2:Object(l.k)(n,z(e))}return n}(e,n,r)},altitudeAt:N,setAltitudeAt:function(e,t,n,r){var i=N(e,t),a=Object(l.e)(q,z(e),n-i);return Object(l.f)(r,t,a),r},equals:function(e,t){return Object(l.o)(e.basis1,t.basis1)&&Object(l.o)(e.basis2,t.basis2)&&Object(l.o)(e.origin,t.origin)},transform:function(e,t,n){return e!==n&&p(e,n),Object(u.c)(W,t),Object(u.b)(W,W),Object(l.q)(n.basis1,e.basis1,W),Object(l.q)(n.basis2,e.basis2,W),Object(l.q)(Object(d.q)(n.plane),Object(d.q)(e.plane),W),Object(l.q)(n.origin,e.origin,t),Object(d.s)(n.plane,n.origin,n.plane),n},rotate:A,normal:z,UP:L})},761:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(2),i=n(5),a=n(6),c=n(0),o=n(29),u=n(1),s=(n(12),n(15),n(11),n(8)),l=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).SCHEDULER_LOG_SLOW_TASKS=!1,e.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1,e}return n}(o.a);Object(c.a)([Object(u.b)()],l.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),Object(c.a)([Object(u.b)()],l.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);var b=new(l=Object(c.a)([Object(s.a)("esri.views.support.DebugFlags")],l))},839:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(435),i=n(10),a=n(2),c=n(3),o=n(5),u=n(6),s=n(133),l=n(331),b=n(723),f=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(a.a)(this,n),t.call(this,Object(i.a)(Object(i.a)({},e),{},{constraint:new s.d(e.coordinateHelper,e.targetPoint)}))}return Object(c.a)(n,[{key:"hints",get:function(){return[new b.a(this.targetPoint)]}}]),n}(l.a);function d(e,t){switch(e.type){case"edge":return new r.a({coordinateHelper:t,edgeStart:t.pointToVector(e.start),edgeEnd:t.pointToVector(e.end),targetPoint:t.pointToVector(e.target),objectId:e.objectId});case"vertex":return new f({coordinateHelper:t,targetPoint:t.pointToVector(e.target),objectId:e.objectId})}}},905:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(13),i=n(10),a=n(2),c=n(3),o=n(102),u=n(124),s=n(11),l=n(7),b=n(21),f=n(320),d=s.a.getLogger("esri.core.workers.WorkerHandle"),h=function(){function e(t,n,c){var o=this,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Object(a.a)(this,e),this._mainMethod=n,this._listeners=[],this._promise=Object(f.b)(t,Object(i.a)(Object(i.a)({},u),{},{schedule:c})).then((function(e){if(void 0===o._thread){o._thread=e,o._promise=null,u.hasInitialize&&o.broadcast({},"initialize");var t,n=Object(r.a)(o._listeners);try{for(n.s();!(t=n.n()).done;){var i=t.value;o._connectListener(i)}}catch(a){n.e(a)}finally{n.f()}}else e.close()})),this._promise.catch((function(e){return d.error("Failed to initialize ".concat(t," worker: ").concat(e))}))}return Object(c.a)(e,[{key:"on",value:function(e,t){var n=this,r={removed:!1,eventName:e,callback:t,threadHandle:null};return this._listeners.push(r),this._connectListener(r),Object(u.c)((function(){r.removed=!0,Object(o.i)(n._listeners,r),n._thread&&Object(l.k)(r.threadHandle)&&r.threadHandle.remove()}))}},{key:"destroy",value:function(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null}},{key:"invoke",value:function(e,t){return this.invokeMethod(this._mainMethod,e,t)}},{key:"invokeMethod",value:function(e,t,n){var r=this;if(this._thread){var i=this.getTransferList(t,e);return this._thread.invoke(e,t,{transferList:i,signal:n})}return this._promise?this._promise.then((function(){return Object(b.v)(n),r.invokeMethod(e,t,n)})):Promise.reject(null)}},{key:"broadcast",value:function(e,t){var n=this;return this._thread?Promise.all(this._thread.broadcast(t,e)).then((function(){})):this._promise?this._promise.then((function(){return n.broadcast(e,t)})):Promise.reject()}},{key:"promise",get:function(){return this._promise}},{key:"_connectListener",value:function(e){this._thread&&this._thread.on(e.eventName,e.callback).then((function(t){e.removed||(e.threadHandle=t)}))}}]),e}()}}]);
//# sourceMappingURL=65.955f9057.chunk.js.map