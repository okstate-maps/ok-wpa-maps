"use strict";(self.webpackChunkok_wpa_maps=self.webpackChunkok_wpa_maps||[]).push([[8329],{70444:(e,t,n)=>{n.d(t,{S$:()=>d,Ue:()=>s,Ws:()=>a,iL:()=>h});var o=n(21530),i=n(11186),r=n(40885);function s(e){return e?{ray:(0,r.Ue)(e.ray),c0:e.c0,c1:e.c1}:{ray:(0,r.Ue)(),c0:0,c1:Number.MAX_VALUE}}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s();return(0,r.JG)(e,t.ray),t.c0=0,t.c1=Number.MAX_VALUE,t}function a(e,t){return l(e,e.c0,t)}function d(e,t){return l(e,e.c1,t)}function l(e,t,n){return(0,i.g)(n,e.ray.origin,(0,i.i)(n,e.ray.direction,t))}new o.x((()=>s()))},95773:(e,t,n)=>{n.d(t,{JG:()=>O,Nu:()=>o,Ue:()=>f,hr:()=>R,q_:()=>m,zq:()=>p});var o,i,r,s=n(21530),h=n(14226),a=n(11186),d=n(71353),l=n(90045),c=n(67077),u=n(70444),_=n(55652),T=n(51378);function f(e){return e?[(0,_.Ue)(e[0]),(0,_.Ue)(e[1]),(0,_.Ue)(e[2]),(0,_.Ue)(e[3]),(0,_.Ue)(e[4]),(0,_.Ue)(e[5])]:[(0,_.Ue)(),(0,_.Ue)(),(0,_.Ue)(),(0,_.Ue)(),(0,_.Ue)(),(0,_.Ue)()]}function O(e,t){for(let n=0;n<E;n++)(0,_.JG)(e[n],t[n]);return e}function m(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;const s=(0,h.m)(T.MP.get(),t,e);(0,h.i)(s,s);for(let o=0;o<A;++o){const e=(0,l.t)(T.o6.get(),b[o],s);(0,a.s)(r[o],e[0]/e[3],e[1]/e[3],e[2]/e[3])}!function(e,t){(0,_.zk)(t[i.FAR_BOTTOM_LEFT],t[i.NEAR_BOTTOM_LEFT],t[i.NEAR_TOP_LEFT],e[o.LEFT]),(0,_.zk)(t[i.NEAR_BOTTOM_RIGHT],t[i.FAR_BOTTOM_RIGHT],t[i.FAR_TOP_RIGHT],e[o.RIGHT]),(0,_.zk)(t[i.FAR_BOTTOM_LEFT],t[i.FAR_BOTTOM_RIGHT],t[i.NEAR_BOTTOM_RIGHT],e[o.BOTTOM]),(0,_.zk)(t[i.NEAR_TOP_LEFT],t[i.NEAR_TOP_RIGHT],t[i.FAR_TOP_RIGHT],e[o.TOP]),(0,_.zk)(t[i.NEAR_BOTTOM_LEFT],t[i.NEAR_BOTTOM_RIGHT],t[i.NEAR_TOP_RIGHT],e[o.NEAR]),(0,_.zk)(t[i.FAR_BOTTOM_RIGHT],t[i.FAR_BOTTOM_LEFT],t[i.FAR_TOP_LEFT],e[o.FAR])}(n,r)}function R(e,t){for(let n=0;n<E;n++){const o=e[n];if(o[0]*t[0]+o[1]*t[1]+o[2]*t[2]+o[3]>=t[3])return!1}return!0}function p(e,t){for(let n=0;n<E;n++){const o=e[n];if(!(0,_.Er)(o,t))return!1}return!0}(r=o||(o={}))[r.LEFT=0]="LEFT",r[r.RIGHT=1]="RIGHT",r[r.BOTTOM=2]="BOTTOM",r[r.TOP=3]="TOP",r[r.NEAR=4]="NEAR",r[r.FAR=5]="FAR",function(e){e[e.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",e[e.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",e[e.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",e[e.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",e[e.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",e[e.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",e[e.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",e[e.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(i||(i={}));i.FAR_BOTTOM_RIGHT,i.NEAR_BOTTOM_RIGHT,i.NEAR_BOTTOM_LEFT,i.FAR_BOTTOM_LEFT,i.NEAR_BOTTOM_LEFT,i.NEAR_BOTTOM_RIGHT,i.NEAR_TOP_RIGHT,i.NEAR_TOP_LEFT,i.FAR_BOTTOM_RIGHT,i.FAR_BOTTOM_LEFT,i.FAR_TOP_LEFT,i.FAR_TOP_RIGHT,i.NEAR_BOTTOM_RIGHT,i.FAR_BOTTOM_RIGHT,i.FAR_TOP_RIGHT,i.NEAR_TOP_RIGHT,i.FAR_BOTTOM_LEFT,i.NEAR_BOTTOM_LEFT,i.NEAR_TOP_LEFT,i.FAR_TOP_LEFT,i.FAR_TOP_LEFT,i.NEAR_TOP_LEFT,i.NEAR_TOP_RIGHT,i.FAR_TOP_RIGHT;const E=6,A=8,b=[(0,c.f)(-1,-1,-1,1),(0,c.f)(1,-1,-1,1),(0,c.f)(1,1,-1,1),(0,c.f)(-1,1,-1,1),(0,c.f)(-1,-1,1,1),(0,c.f)(1,-1,1,1),(0,c.f)(1,1,1,1),(0,c.f)(-1,1,1,1)],g=(new s.x(u.Ue),[(0,d.c)(),(0,d.c)(),(0,d.c)(),(0,d.c)(),(0,d.c)(),(0,d.c)(),(0,d.c)(),(0,d.c)()])},78329:(e,t,n)=>{n.d(t,{Z:()=>G});var o=n(13005),i=n(27546),r=n(11186),s=n(71353),h=n(95773),a=n(40885),d=n(23470),l=n(97731);class c{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}constructor(e,t){this.objectToBoundingSphere=e,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new u,this._objectCount=0,t&&(void 0!==t.maximumObjectsPerNode&&(this._maximumObjectsPerNode=t.maximumObjectsPerNode),void 0!==t.maximumDepth&&(this._maximumDepth=t.maximumDepth))}destroy(){this._degenerateObjects.clear(),u.clearPool(),g[0]=null,B.prune(),L.prune()}add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;this._objectCount+=t,this._grow(e,t);const n=u.acquire();for(let o=0;o<t;o++){const t=e[o];this._isDegenerate(t)?this._degenerateObjects.add(t):(n.init(this._root),this._add(t,n))}u.release(n)}remove(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._objectCount-=e.length;const n=u.acquire();for(const o of e){const e=null!=t?t:(0,d.h)(this.objectToBoundingSphere(o),x);p(e[3])?(n.init(this._root),this._remove(o,e,n)):this._degenerateObjects.delete(o)}u.release(n),this._shrink()}update(e,t){if(!p(t[3])&&this._isDegenerate(e))return;const n=function(e){return g[0]=e,g}(e);this.remove(n,t),this.add(n)}forEachAlongRay(e,t,n){const o=(0,a.re)(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNode(o,e))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObject(o,e)&&n(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObject(o,e)&&n(e)})),!0}))}forEachAlongRayWithVerticalOffset(e,t,n,o){const i=(0,a.re)(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNodeWithOffset(i,e,o))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObjectWithOffset(i,e,o)&&n(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObjectWithOffset(i,e,o)&&n(e)})),!0}))}forEach(e){this._forEachNode(this._root,(t=>{const n=t.node;return n.terminals.forAll(e),null!==n.residents&&n.residents.forAll(e),!0})),this._degenerateObjects.forEach(e)}forEachDegenerateObject(e){this._degenerateObjects.forEach(e)}findClosest(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>!0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,s=1/0,a=1/0,l=null;const c=m(e,t),u=r=>{if(--i,!o(r))return;const c=this.objectToBoundingSphere(r);if(!(0,h.hr)(n,c))return;const u=R(e,t,(0,d.g)(c)),_=u-c[3],T=u+c[3];_<s&&(s=_,a=T,l=r)};return this._forEachNodeDepthOrdered(this._root,(o=>{if(i<=0||!(0,h.hr)(n,o.bounds))return!1;if((0,r.i)(N,c,o.halfSize),(0,r.g)(N,N,o.bounds),R(e,t,N)>a)return!1;const s=o.node;return s.terminals.forAll((e=>u(e))),null!==s.residents&&s.residents.forAll((e=>u(e))),!0}),e,t),l}forEachInDepthRange(e,t,n,o,i,s,a){let l=-1/0,u=1/0;const _={setRange:e=>{n===c.DepthOrder.FRONT_TO_BACK?(l=Math.max(l,e.near),u=Math.min(u,e.far)):(l=Math.max(l,-e.far),u=Math.min(u,-e.near))}};_.setRange(o);const T=R(t,n,e),f=m(t,n),O=m(t,-n),p=e=>{if(!a(e))return;const o=this.objectToBoundingSphere(e),r=(0,d.g)(o),c=R(t,n,r)-T,f=c-o[3],O=c+o[3];f>u||O<l||!(0,h.hr)(s,o)||i(e,_)};this._forEachNodeDepthOrdered(this._root,(e=>{if(!(0,h.hr)(s,e.bounds))return!1;if((0,r.i)(N,f,e.halfSize),(0,r.g)(N,N,e.bounds),R(t,n,N)-T>u)return!1;if((0,r.i)(N,O,e.halfSize),(0,r.g)(N,N,e.bounds),R(t,n,N)-T<l)return!1;const o=e.node;return o.terminals.forAll((e=>p(e))),null!==o.residents&&o.residents.forAll((e=>p(e))),!0}),t,n)}forEachNode(e){this._forEachNode(this._root,(t=>e(t.node,t.bounds,t.halfSize,t.depth)))}forEachNeighbor(e,t){const n=(0,d.a)(t),o=(0,d.g)(t),i=t=>{const i=this.objectToBoundingSphere(t),s=(0,d.a)(i),h=n+s;return!((0,r.a)((0,d.g)(i),o)-h*h<=0)||e(t)};let s=!0;const h=e=>{s&&(s=i(e))};this._forEachNode(this._root,(e=>{const t=(0,d.a)(e.bounds),i=n+t;if((0,r.a)((0,d.g)(e.bounds),o)-i*i>0)return!1;const a=e.node;return a.terminals.forAll(h),s&&null!==a.residents&&a.residents.forAll(h),s})),s&&this.forEachDegenerateObject(h)}_intersectsNode(e,t){return f(t.bounds,2*-t.halfSize,M),f(t.bounds,2*t.halfSize,S),(0,l.yK)(e.origin,e.direction,M,S)}_intersectsNodeWithOffset(e,t,n){return f(t.bounds,2*-t.halfSize,M),f(t.bounds,2*t.halfSize,S),n.applyToMinMax(M,S),(0,l.yK)(e.origin,e.direction,M,S)}_intersectsObject(e,t){const n=this.objectToBoundingSphere(t);return!(n[3]>0)||(0,d.j)(n,e)}_intersectsObjectWithOffset(e,t,n){const o=this.objectToBoundingSphere(t);return!(o[3]>0)||(0,d.j)(n.applyToBoundingSphere(o),e)}_forEachNode(e,t){let n=u.acquire().init(e);const o=[n];for(;0!==o.length;){if(n=o.pop(),t(n)&&!n.isLeaf())for(let e=0;e<n.node.children.length;e++)n.node.children[e]&&o.push(u.acquire().init(n).advance(e));u.release(n)}}_forEachNodeDepthOrdered(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.DepthOrder.FRONT_TO_BACK,i=u.acquire().init(e);const r=[i];for(function(e,t,n){if(!L.length)for(let o=0;o<8;++o)L.push({index:0,distance:0});for(let o=0;o<8;++o){const n=E[o];L.data[o].index=o,L.data[o].distance=R(e,t,n)}L.sort(((e,t)=>e.distance-t.distance));for(let o=0;o<8;++o)n[o]=L.data[o].index}(n,o,H);0!==r.length;){if(i=r.pop(),t(i)&&!i.isLeaf())for(let e=7;e>=0;--e){const t=H[e];i.node.children[t]&&r.push(u.acquire().init(i).advance(t))}u.release(i)}}_remove(e,t,n){B.clear();const o=n.advanceTo(t,((e,t)=>{B.push(e.node),B.push(t)}))?n.node.terminals:n.node.residents;if(o.removeUnordered(e),0===o.length)for(let i=B.length-2;i>=0;i-=2){const e=B.data[i],t=B.data[i+1];if(!this._purge(e,t))break}}_nodeIsEmpty(e){if(0!==e.terminals.length)return!1;if(null!==e.residents)return 0===e.residents.length;for(let t=0;t<e.children.length;t++)if(e.children[t])return!1;return!0}_purge(e,t){return t>=0&&(e.children[t]=null),!!this._nodeIsEmpty(e)&&(null===e.residents&&(e.residents=new i.Z({shrink:!0})),!0)}_add(e,t){t.advanceTo(this.objectToBoundingSphere(e))?t.node.terminals.push(e):(t.node.residents.push(e),t.node.residents.length>this._maximumObjectsPerNode&&t.depth<this._maximumDepth&&this._split(t))}_split(e){const t=e.node.residents;e.node.residents=null;for(let n=0;n<t.length;n++){const o=u.acquire().init(e);this._add(t.at(n),o),u.release(o)}}_grow(e,t){if(0!==t&&(O(e,t,(e=>this.objectToBoundingSphere(e)),j),p(j[3])&&!this._fitsInsideTree(j)))if(this._nodeIsEmpty(this._root.node))(0,d.h)(j,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],this._root.updateBoundsRadiusFromHalfSize();else{const e=this._rootBoundsForRootAsSubNode(j);this._placingRootViolatesMaxDepth(e)?this._rebuildTree(j,e):this._growRootAsSubNode(e),u.release(e)}}_rebuildTree(e,t){(0,r.c)(P,t.bounds),P[3]=t.halfSize,O([e,P],2,(e=>e),z);const n=u.acquire().init(this._root);this._root.initFrom(null,z,z[3]),this._root.increaseHalfSize(1.25),this._forEachNode(n,(e=>(this.add(e.node.terminals.data,e.node.terminals.length),null!==e.node.residents&&this.add(e.node.residents.data,e.node.residents.length),!0))),u.release(n)}_placingRootViolatesMaxDepth(e){const t=Math.log(e.halfSize/this._root.halfSize)*Math.LOG2E;let n=0;return this._forEachNode(this._root,(e=>(n=Math.max(n,e.depth),n+t<=this._maximumDepth))),n+t>this._maximumDepth}_rootBoundsForRootAsSubNode(e){const t=e[3],n=e;let o=-1/0;const i=this._root.bounds,r=this._root.halfSize;for(let h=0;h<3;h++){const e=i[h]-r-(n[h]-t),s=n[h]+t-(i[h]+r),a=Math.max(0,Math.ceil(e/(2*r))),d=Math.max(0,Math.ceil(s/(2*r)))+1,l=2**Math.ceil(Math.log(a+d)*Math.LOG2E);o=Math.max(o,l),I[h].min=a,I[h].max=d}for(let h=0;h<3;h++){let e=I[h].min,t=I[h].max;const n=(o-(e+t))/2;e+=Math.ceil(n),t+=Math.floor(n);const s=i[h]-r-e*r*2;F[h]=s+(t+e)*r}const s=o*r;return F[3]=s*b,u.acquire().initFrom(null,F,s,0)}_growRootAsSubNode(e){const t=this._root.node;(0,r.c)(j,this._root.bounds),j[3]=this._root.halfSize,this._root.init(e),e.advanceTo(j,null,!0),e.node.children=t.children,e.node.residents=t.residents,e.node.terminals=t.terminals}_shrink(){for(;;){const e=this._findShrinkIndex();if(-1===e)break;this._root.advance(e),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let e=null;const t=this._root.node.children;let n=0,o=0;for(;o<t.length&&null==e;)n=o++,e=t[n];for(;o<t.length;)if(t[o++])return-1;return n}_isDegenerate(e){return!p(this.objectToBoundingSphere(e)[3])}_fitsInsideTree(e){const t=this._root.bounds,n=this._root.halfSize;return e[3]<=n&&e[0]>=t[0]-n&&e[0]<=t[0]+n&&e[1]>=t[1]-n&&e[1]<=t[1]+n&&e[2]>=t[2]-n&&e[2]<=t[2]+n}toJSON(){const{maximumDepth:e,maximumObjectsPerNode:t,_objectCount:n}=this,o=this._nodeToJSON(this._root.node);return{maximumDepth:e,maximumObjectsPerNode:t,objectCount:n,root:{bounds:this._root.bounds,halfSize:this._root.halfSize,depth:this._root.depth,node:o}}}_nodeToJSON(e){var t,n;const o=e.children.map((e=>e?this._nodeToJSON(e):null)),i=null===(t=e.residents)||void 0===t?void 0:t.map((e=>this.objectToBoundingSphere(e))),r=null===(n=e.terminals)||void 0===n?void 0:n.map((e=>this.objectToBoundingSphere(e)));return{children:o,residents:i,terminals:r}}static fromJSON(e){const t=new c((e=>e),{maximumDepth:e.maximumDepth,maximumObjectsPerNode:e.maximumObjectsPerNode});return t._objectCount=e.objectCount,t._root.initFrom(e.root.node,e.root.bounds,e.root.halfSize,e.root.depth),t}}class u{constructor(){this.bounds=(0,d.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(e){return this.initFrom(e.node,e.bounds,e.halfSize,e.depth)}initFrom(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.depth;return this.node=null!=e?e:u.createEmptyNode(),null!=t&&(0,d.h)(t,this.bounds),this.halfSize=n,this.depth=o,this}increaseHalfSize(e){this.halfSize*=e,this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=this.halfSize*b}advance(e){let t=this.node.children[e];t||(t=u.createEmptyNode(),this.node.children[e]=t),this.node=t,this.halfSize/=2,this.depth++;const n=E[e];return this.bounds[0]+=n[0]*this.halfSize,this.bounds[1]+=n[1]*this.halfSize,this.bounds[2]+=n[2]*this.halfSize,this.updateBoundsRadiusFromHalfSize(),this}advanceTo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(;;){if(this.isTerminalFor(e))return t&&t(this,-1),!0;if(this.isLeaf()){if(!n)return t&&t(this,-1),!1;this.node.residents=null}const o=this._childIndex(e);t&&t(this,o),this.advance(o)}}isLeaf(){return null!=this.node.residents}isTerminalFor(e){return e[3]>this.halfSize/2}_childIndex(e){const t=this.bounds;return(t[0]<e[0]?1:0)+(t[1]<e[1]?2:0)+(t[2]<e[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new i.Z({shrink:!0}),residents:new i.Z({shrink:!0})}}static acquire(){return u._pool.acquire()}static release(e){u._pool.release(e)}static clearPool(){u._pool.prune()}}function _(e,t){e[0]=Math.min(e[0],t[0]-t[3]),e[1]=Math.min(e[1],t[1]-t[3]),e[2]=Math.min(e[2],t[2]-t[3])}function T(e,t){e[0]=Math.max(e[0],t[0]+t[3]),e[1]=Math.max(e[1],t[1]+t[3]),e[2]=Math.max(e[2],t[2]+t[3])}function f(e,t,n){n[0]=e[0]+t,n[1]=e[1]+t,n[2]=e[2]+t}function O(e,t,n,o){if(1===t){const t=n(e[0]);(0,d.h)(t,o)}else{M[0]=1/0,M[1]=1/0,M[2]=1/0,S[0]=-1/0,S[1]=-1/0,S[2]=-1/0;for(let o=0;o<t;o++){const t=n(e[o]);p(t[3])&&(_(M,t),T(S,t))}(0,r.p)(o,M,S,.5),o[3]=Math.max(S[0]-M[0],S[1]-M[1],S[2]-M[2])/2}}function m(e,t){let n,o=1/0;for(let i=0;i<8;++i){const r=R(e,t,A[i]);r<o&&(o=r,n=A[i])}return n}function R(e,t,n){return t*(e[0]*n[0]+e[1]*n[1]+e[2]*n[2])}function p(e){return!isNaN(e)&&e!==-1/0&&e!==1/0&&e>0}u._pool=new o.Z(u),function(e){var t;(t=e.DepthOrder||(e.DepthOrder={}))[t.FRONT_TO_BACK=1]="FRONT_TO_BACK",t[t.BACK_TO_FRONT=-1]="BACK_TO_FRONT"}(c||(c={}));const E=[(0,s.f)(-1,-1,-1),(0,s.f)(1,-1,-1),(0,s.f)(-1,1,-1),(0,s.f)(1,1,-1),(0,s.f)(-1,-1,1),(0,s.f)(1,-1,1),(0,s.f)(-1,1,1),(0,s.f)(1,1,1)],A=[(0,s.f)(-1,-1,-1),(0,s.f)(-1,-1,1),(0,s.f)(-1,1,-1),(0,s.f)(-1,1,1),(0,s.f)(1,-1,-1),(0,s.f)(1,-1,1),(0,s.f)(1,1,-1),(0,s.f)(1,1,1)],b=Math.sqrt(3),g=[null];const F=(0,d.c)(),N=(0,s.c)(),M=(0,s.c)(),S=(0,s.c)(),B=new i.Z,x=(0,d.c)(),j=(0,d.c)(),P=(0,d.c)(),z=(0,d.c)(),I=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],L=new i.Z,H=[0,0,0,0,0,0,0,0],G=c}}]);
//# sourceMappingURL=8329.dc41128b.chunk.js.map