{"version":3,"file":"static/js/97161.7ae44605.chunk.js","mappings":"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","sources":["../node_modules/src/.internal/core/render/Button.ts","../node_modules/src/.internal/core/render/RoundedRectangle.ts","../node_modules/src/.internal/charts/xy/axes/AxisTick.ts","../node_modules/src/.internal/charts/xy/axes/Grid.ts","../node_modules/src/.internal/charts/xy/axes/AxisLabel.ts","../node_modules/src/.internal/charts/xy/axes/AxisRenderer.ts","../node_modules/src/.internal/charts/xy/axes/AxisRendererX.ts","../node_modules/src/.internal/charts/xy/axes/AxisRendererY.ts","../node_modules/src/.internal/charts/xy/axes/Axis.ts","../node_modules/src/.internal/charts/xy/axes/ValueAxis.ts","../node_modules/src/.internal/charts/xy/axes/CategoryAxis.ts","../node_modules/src/.internal/charts/xy/series/XYSeries.ts","../node_modules/src/.internal/charts/xy/series/BaseColumnSeries.ts","../node_modules/src/.internal/charts/xy/series/ColumnSeries.ts","../node_modules/d3-shape/src/array.js","../node_modules/d3-shape/src/curve/linear.js","../node_modules/d3-shape/src/point.js","../node_modules/d3-shape/src/line.js","../node_modules/d3-shape/src/area.js","../node_modules/src/.internal/charts/xy/series/LineSeries.ts","../node_modules/src/.internal/charts/xy/XYChartDefaultTheme.ts","../node_modules/src/.internal/charts/xy/XYChart.ts","../node_modules/src/.internal/charts/xy/XYCursor.ts"],"sourcesContent":["import type { Label } from \"../render/Label\";\nimport type { Graphics } from \"../render/Graphics\";\n\nimport { RoundedRectangle } from \"../render/RoundedRectangle\";\nimport { Container, IContainerPrivate, IContainerSettings, IContainerEvents } from \"./Container\";\n\nimport * as $utils from \"../../core/util/Utils\";\n\nexport interface IButtonSettings extends IContainerSettings {\n\n\t/**\n\t * A [[Label]] element for the button to show as a label.\n\t */\n\tlabel?: Label;\n\n\t/**\n\t * A [[Graphics]] element for the button to show as icon.\n\t */\n\ticon?: Graphics;\n\n}\n\nexport interface IButtonPrivate extends IContainerPrivate {\n}\n\nexport interface IButtonEvents extends IContainerEvents {\n}\n\n/**\n * Draws an interactive button.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/buttons/} for more info\n * @important\n */\nexport class Button extends Container {\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"button\"]);\n\n\t\tsuper._afterNew();\n\n\t\tif (!this._settings.background) {\n\t\t\tthis.set(\"background\", RoundedRectangle.new(this._root, {\n\t\t\t\tthemeTags: $utils.mergeTags(this._settings.themeTags, [\"background\"])\n\t\t\t}));\n\t\t}\n\n\t\tthis.setPrivate(\"trustBounds\", true);\n\t}\n\n\tdeclare public _settings: IButtonSettings;\n\tdeclare public _privateSettings: IButtonPrivate;\n\tdeclare public _events: IButtonEvents;\n\n\tpublic static className: string = \"Button\";\n\tpublic static classNames: Array<string> = Container.classNames.concat([Button.className]);\n\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tif (this.isDirty(\"icon\")) {\n\t\t\tconst previous = this._prevSettings.icon;\n\t\t\tconst icon = this.get(\"icon\")!;\n\t\t\tif (icon !== previous) {\n\t\t\t\tthis._disposeProperty(\"icon\");\n\n\t\t\t\tif (previous) {\n\t\t\t\t\tprevious.dispose();\n\t\t\t\t}\n\t\t\t\tif (icon) {\n\t\t\t\t\tthis.children.push(icon);\n\t\t\t\t}\n\n\t\t\t\tthis._prevSettings.icon = icon;\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"label\")) {\n\t\t\tconst previous = this._prevSettings.label;\n\t\t\tconst label = this.get(\"label\")!;\n\t\t\tif (label !== previous) {\n\t\t\t\tthis._disposeProperty(\"label\");\n\t\t\t\tif (previous) {\n\t\t\t\t\tprevious.dispose();\n\t\t\t\t}\n\n\t\t\t\tif (label) {\n\t\t\t\t\tthis.children.push(label);\n\t\t\t\t}\n\n\t\t\t\tthis._prevSettings.label = label;\n\t\t\t}\n\t\t}\n\t}\n}\n","import * as $type from \"../util/Type\";\nimport * as $math from \"../util/Math\";\nimport * as $utils from \"../util/Utils\";\nimport { Rectangle, IRectangleSettings, IRectanglePrivate } from \"./Rectangle\";\n\n\nexport interface IRoundedRectangleSettings extends IRectangleSettings {\n\n\t/**\n\t * Radius of the top-left corner in pixels.\n\t */\n\tcornerRadiusTL?: number;\n\n\t/**\n\t * Radius of the top-right corner in pixels.\n\t */\n\tcornerRadiusTR?: number;\n\n\t/**\n\t * Radius of the botttom-right corner in pixels.\n\t */\n\tcornerRadiusBR?: number;\n\n\t/**\n\t * Radius of the bottom-left corner in pixels.\n\t */\n\tcornerRadiusBL?: number;\n\n}\n\nexport interface IRoundedRectanglePrivate extends IRectanglePrivate {\n}\n\n/**\n * Draws a rectangle with rounded corners.\n *\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\n * @important\n */\nexport class RoundedRectangle extends Rectangle {\n\n\tdeclare public _settings: IRoundedRectangleSettings;\n\tdeclare public _privateSettings: IRoundedRectanglePrivate;\n\n\tpublic static className: string = \"RoundedRectangle\";\n\tpublic static classNames: Array<string> = Rectangle.classNames.concat([RoundedRectangle.className]);\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"cornerRadiusTL\") || this.isDirty(\"cornerRadiusTR\") || this.isDirty(\"cornerRadiusBR\") || this.isDirty(\"cornerRadiusBL\")) {\n\t\t\tthis._clear = true;\n\t\t}\n\t}\n\n\tpublic _draw() {\n\t\tlet width = this.width();\n\t\tlet height = this.height();\n\n\t\tlet wSign = width / Math.abs(width);\n\t\tlet hSign = height / Math.abs(height);\n\n\t\tlet x = 0;\n\t\tlet y = 0;\n\n\t\tconst strokeWidth = this.get(\"strokeWidth\", 0);\n\n\t\tif (this.get(\"containStroke\", false)) {\n\t\t\twidth -= wSign * strokeWidth;\n\t\t\theight -= hSign * strokeWidth;\n\t\t\tx += wSign * strokeWidth / 2;\n\t\t\ty += hSign * strokeWidth / 2;\n\t\t}\n\n\t\tlet w = width;\n\t\tlet h = height;\n\n\t\tif ($type.isNumber(w) && $type.isNumber(h)) {\n\n\t\t\tlet minSide = Math.min(w, h) / 2;\n\n\t\t\tlet crtl = $utils.relativeToValue(this.get(\"cornerRadiusTL\", 8), minSide);\n\t\t\tlet crtr = $utils.relativeToValue(this.get(\"cornerRadiusTR\", 8), minSide);\n\t\t\tlet crbr = $utils.relativeToValue(this.get(\"cornerRadiusBR\", 8), minSide);\n\t\t\tlet crbl = $utils.relativeToValue(this.get(\"cornerRadiusBL\", 8), minSide);\n\n\t\t\tlet maxcr = Math.min(Math.abs(w / 2), Math.abs(h / 2));\n\n\t\t\tcrtl = $math.fitToRange(crtl, 0, maxcr);\n\t\t\tcrtr = $math.fitToRange(crtr, 0, maxcr);\n\t\t\tcrbr = $math.fitToRange(crbr, 0, maxcr);\n\t\t\tcrbl = $math.fitToRange(crbl, 0, maxcr);\n\n\t\t\tconst display = this._display;\n\t\t\tdisplay.moveTo(x + crtl * wSign, y);\n\t\t\tdisplay.lineTo(x + w - crtr * wSign, y);\n\t\t\tif (crtr > 0) {\n\t\t\t\tdisplay.arcTo(x + w, y, x + w, y + crtr * hSign, crtr);\n\t\t\t}\n\t\t\tdisplay.lineTo(x + w, y + h - crbr * hSign);\n\t\t\tif (crbr > 0) {\n\t\t\t\tdisplay.arcTo(x + w, y + h, x + w - crbr * wSign, y + h, crbr);\n\t\t\t}\n\t\t\tdisplay.lineTo(x + crbl * wSign, y + h);\n\t\t\tif (crbl > 0) {\n\t\t\t\tdisplay.arcTo(x, y + h, x, y + h - crbl * hSign, crbl);\n\t\t\t}\n\t\t\tdisplay.lineTo(x, y + crtl * hSign);\n\t\t\tif (crtl > 0) {\n\t\t\t\tdisplay.arcTo(x, y, x + crtl * wSign, y, crtl);\n\t\t\t}\n\t\t\tdisplay.closePath();\n\t\t}\n\t}\n}\n","import type { IPoint } from \"../../../core/util/IPoint\";\n\nimport { Tick, ITickSettings, ITickPrivate } from \"../../../core/render/Tick\";\n\n\nexport interface IAxisTickSettings extends ITickSettings {\n\n\t/**\n\t * Relative location of the tick within the cell.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Location_of_axis_elements} for more info\n\t */\n\tlocation?: number;\n\n\t/**\n\t * Relative location of the tick within the cell when it spans multiple\n\t * intervals.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Multi_location} for more info\n\t */\n\tmultiLocation?: number;\n\n\t/**\n\t * If set to `true` the tick will be shown inside plot area.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Labels_ticks_inside_plot_area} for more info\n\t * @default false\n\t */\n\tinside?: boolean | undefined;\n\n\t/**\n\t * The minimum relative position within visible axis scope the tick can\n\t * appear on.\n\t *\n\t * E.g. `0.1` will mean that tick will not be shown if it's closer to the\n\t * beginning of the axis than 10%.\n\t *\n\t * @default 0\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Start_end_labels_and_ticks} for more info\n\t */\n\tminPosition?: number;\n\n\t/**\n\t * The maximum relative position within visible axis scope the tick can\n\t * appear on.\n\t *\n\t * E.g. `0.9` will mean that tick will not be shown if it's closer to the\n\t * end of the axis than 10%.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Start_end_labels_and_ticks} for more info\n\t * @default 1\n\t */\n\tmaxPosition?: number;\n\n}\n\nexport interface IAxisTickPrivate extends ITickPrivate {\n}\n\n/**\n * Draws an axis tick.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Ticks} for more info\n * @important\n */\nexport class AxisTick extends Tick {\n\n\tdeclare public _settings: IAxisTickSettings;\n\tdeclare public _privateSettings: IAxisTickPrivate;\n\n\tprotected _tickPoints: Array<IPoint> = [];\n\n\tpublic static className: string = \"AxisTick\";\n\tpublic static classNames: Array<string> = Tick.classNames.concat([AxisTick.className]);\n}\n","import { Graphics, IGraphicsPrivate, IGraphicsSettings } from \"../../../core/render/Graphics\";\n\nexport interface IGridSettings extends IGraphicsSettings {\n\n\t/**\n\t * Relative location of the grid line within the cell.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Location_of_axis_elements} for more info\n\t */\n\tlocation?: number;\n\n}\n\nexport interface IGridPrivate extends IGraphicsPrivate {\n}\n\n/**\n * Creates an axis grid line.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Grid} for more info\n * @important\n */\nexport class Grid extends Graphics {\n\n\tdeclare public _settings: IGridSettings;\n\tdeclare public _privateSettings: IGridPrivate;\n\n\tpublic static className: string = \"Grid\";\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([Grid.className]);\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\")) {\n\t\t\tthis._clear = true;\n\t\t}\n\t}\n}\n","import type { IPoint } from \"../../../core/util/IPoint\";\n\nimport { Label, ILabelSettings, ILabelPrivate } from \"../../../core/render/Label\";\n\nexport interface IAxisLabel extends Label {\n\n\t/**\n\t * Relative location of the label within the cell.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Location_of_axis_elements} for more info\n\t */\n\tlocation?: number;\n\n\t/**\n\t * Relative location of the label within the cell when it spans multiple\n\t * intervals.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Multi_location} for more info\n\t */\n\tmultiLocation?: number;\n\n\t/**\n\t * If set to `true` the label will be shown inside plot area.\n\t *\n\t * @default false\n\t */\n\tinside?: boolean | undefined;\n\n\t/**\n\t * The minimum relative position within visible axis scope the label can\n\t * appear on.\n\t *\n\t * E.g. `0.1` will mean that label will not be shown if it's closer to the\n\t * beginning of the axis than 10%.\n\t *\n\t * @default 0\n\t */\n\tminPosition?: number;\n\n\t/**\n\t * The maximum relative position within visible axis scope the label can\n\t * appear on.\n\t *\n\t * E.g. `0.9` will mean that label will not be shown if it's closer to the\n\t * end of the axis than 10%.\n\t *\n\t * @default 0\n\t */\n\tmaxPosition?: number;\n\n\t_tickPoints: Array<IPoint>;\n}\n\n\nexport interface IAxisLabelSettings extends ILabelSettings {\n\n\t/**\n\t * Relative location of the label within the cell.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Location_of_axis_elements} for more info\n\t */\n\tlocation?: number;\n\n\t/**\n\t * Relative location of the label within the cell when it spans multiple\n\t * intervals.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Multi_location} for more info\n\t */\n\tmultiLocation?: number;\n\n\t/**\n\t * If set to `true` the label will be shown inside plot area.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Labels_ticks_inside_plot_area} for more info\n\t * @default false\n\t */\n\tinside?: boolean | undefined;\n\n\t/**\n\t * The minimum relative position within visible axis scope the label can\n\t * appear on.\n\t *\n\t * E.g. `0.1` will mean that label will not be shown if it's closer to the\n\t * beginning of the axis than 10%.\n\t *\n\t * @default 0\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Start_end_labels_and_ticks} for more info\n\t */\n\tminPosition?: number;\n\n\t/**\n\t * The maximum relative position within visible axis scope the label can\n\t * appear on.\n\t *\n\t * E.g. `0.9` will mean that label will not be shown if it's closer to the\n\t * end of the axis than 10%.\n\t *\n\t * @default 1\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Start_end_labels_and_ticks} for more info\n\t */\n\tmaxPosition?: number;\n\n}\n\nexport interface IAxisLabelPrivate extends ILabelPrivate {\n}\n\n/**\n * Draws an axis label.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Labels} for more info\n * @important\n */\nexport class AxisLabel extends Label implements IAxisLabel {\n\n\tdeclare public _settings: IAxisLabelSettings;\n\tdeclare public _privateSettings: IAxisLabelPrivate;\n\n\tpublic _tickPoints: Array<IPoint> = [];\n\n\tpublic static className: string = \"AxisLabel\";\n\tpublic static classNames: Array<string> = Label.classNames.concat([AxisLabel.className]);\n}\n","import type { Sprite, ISpritePointerEvent } from \"../../../core/render/Sprite\";\nimport type { Axis, IAxisDataItem } from \"./Axis\";\nimport type { IPoint } from \"../../../core/util/IPoint\";\nimport type { Tooltip } from \"../../../core/render/Tooltip\";\nimport type { AxisBullet } from \"./AxisBullet\";\nimport type { XYChart } from \"../XYChart\";\nimport type { DataItem } from \"../../../core/render/Component\";\n\nimport { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"../../../core/render/Graphics\";\nimport { Template } from \"../../../core/util/Template\";\nimport { ListTemplate } from \"../../../core/util/List\";\nimport { AxisTick } from \"./AxisTick\";\nimport { Grid } from \"./Grid\";\nimport { AxisLabel } from \"./AxisLabel\";\n\nimport * as $utils from \"../../../core/util/Utils\";\n\nexport interface IAxisRendererSettings extends IGraphicsSettings {\n\n\t/**\n\t * The minimum distance between grid lines in pixels.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Grid_density} for more info\n\t */\n\tminGridDistance?: number;\n\n\t/**\n\t * Re-enable display of skipped grid lines due to lack of space and as per\n\t * the `minGridDistance` setting. Not recommended for CategoryAxis with a lot of data items.\n\t *\n\t * @default false\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Minor_grid} for more info\n\t * @since 5.6.0\n\t */\n\tminorGridEnabled?: boolean;\n\n\t/**\n\t * Enable labels on minor grid. If you enable labels, grid will be enabled automatically.\n\t *\n\t * @default false\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Enabling_minor_grid_labels} for more info\n\t * @since 5.6.0\n\t */\n\tminorLabelsEnabled?: boolean;\n\n\t/**\n\t * Set to `true` to invert direction of the axis.\n\t *\n\t * @default false\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Inversed_axes} for more info\n\t */\n\tinversed?: boolean;\n\n\t/**\n\t * Indicates relative position where \"usable\" space of the cell starts.\n\t *\n\t * `0` - beginning, `1` - end, or anything in-between.\n\t *\n\t * @default 0\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Cell_start_end_locations} for more info\n\t */\n\tcellStartLocation?: number;\n\n\t/**\n\t * Indicates relative position where \"usable\" space of the cell ends.\n\t *\n\t * `0` - beginning, `1` - end, or anything in-between.\n\t *\n\t * @default 1\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Cell_start_end_locations} for more info\n\t */\n\tcellEndLocation?: number;\n\n\t/**\n\t * If set to `\"zoom\"` will enable axis zoom by panning it in the axis label\n\t * area.\n\t *\n\t * Works on [[AxisRendererX]] and [[AxisRendererY]] only.\n\t *\n\t * For a better result, set `maxDeviation` to `1` or so on the Axis.\n\t *\n\t * Will not work if `inside` is set to `true`.\n\t *\n\t * @since 5.0.7\n\t * @default \"none\"\n\t */\n\tpan?: \"none\" | \"zoom\"\n\n\n\t/**\n\t * Sensitivity of panning. The higher the number, the more sensitive it is.\n\t *\n\t * @default 1\n\t */\n\tpanSensitivity?: number;\n\n}\n\nexport interface IAxisRendererPrivate extends IGraphicsPrivate {\n\t/**\n\t * @ignore\n\t */\n\tletter?: \"X\" | \"Y\";\n}\n\n/**\n * Base class for an axis renderer.\n *\n * Should not be used on its own.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/#Axis_renderer} for more info\n */\nexport abstract class AxisRenderer extends Graphics {\n\tpublic static className: string = \"AxisRenderer\";\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([AxisRenderer.className]);\n\n\t// save for quick access\n\tpublic _axisLength: number = 100;\n\tpublic _start: number = 0;\n\tpublic _end: number = 1;\n\tpublic _inversed: boolean = false;\n\n\tprotected _minSize: number = 0;\n\n\t/**\n\t * Chart the renderer is used in.\n\t */\n\tpublic chart: XYChart | undefined;\n\n\tprotected _lc = 1;\n\n\tprotected _ls = 0;\n\n\tprotected _thumbDownPoint?: IPoint;\n\n\tprotected _downStart?: number;\n\tprotected _downEnd?: number;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeTick(dataItem: DataItem<IAxisDataItem>, themeTags: Array<string>): AxisTick {\n\t\tconst tick = this.ticks.make();\n\t\ttick._setDataItem(dataItem);\n\t\tdataItem.setRaw(\"tick\", tick);\n\t\ttick.set(\"themeTags\", $utils.mergeTags(tick.get(\"themeTags\"), themeTags));\n\t\tthis.axis.labelsContainer.children.push(tick);\n\t\tthis.ticks.push(tick);\n\t\treturn tick;\n\t}\n\n\t/**\n\t * A list of ticks in the axis.\n\t *\n\t * `ticks.template` can be used to configure ticks.\n\t *\n\t * @default new ListTemplate<AxisTick>\n\t */\n\tpublic readonly ticks: ListTemplate<AxisTick> = this.addDisposer(new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => AxisTick._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.ticks.template.get(\"themeTags\", []), this.get(\"themeTags\", []))\n\t\t}, [this.ticks.template])\n\t));\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeGrid(dataItem: DataItem<IAxisDataItem>, themeTags: Array<string>): Grid {\n\t\tconst grid = this.grid.make();\n\t\tgrid._setDataItem(dataItem);\n\t\tdataItem.setRaw(\"grid\", grid);\n\t\tgrid.set(\"themeTags\", $utils.mergeTags(grid.get(\"themeTags\"), themeTags));\n\n\t\tthis.axis.gridContainer.children.push(grid);\n\t\tthis.grid.push(grid);\n\t\treturn grid;\n\t}\n\n\t/**\n\t * A list of grid elements in the axis.\n\t *\n\t * `grid.template` can be used to configure grid.\n\t *\n\t * @default new ListTemplate<Grid>\n\t */\n\tpublic readonly grid: ListTemplate<Grid> = this.addDisposer(new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Grid._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.grid.template.get(\"themeTags\", []), this.get(\"themeTags\", []))\n\t\t}, [this.grid.template])\n\t));\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeAxisFill(dataItem: DataItem<IAxisDataItem>, themeTags: Array<string>): Grid {\n\t\tconst axisFill = this.axisFills.make();\n\t\taxisFill._setDataItem(dataItem);\n\t\taxisFill.set(\"themeTags\", $utils.mergeTags(axisFill.get(\"themeTags\"), themeTags));\n\n\t\tthis.axis.gridContainer.children.push(axisFill);\n\t\tdataItem.setRaw(\"axisFill\", axisFill);\n\t\tthis.axisFills.push(axisFill);\n\t\treturn axisFill;\n\t}\n\n\t/**\n\t * A list of fills in the axis.\n\t *\n\t * `axisFills.template` can be used to configure axis fills.\n\t *\n\t * @default new ListTemplate<Graphics>\n\t */\n\tpublic readonly axisFills: ListTemplate<Graphics> = this.addDisposer(new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Graphics._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.axisFills.template.get(\"themeTags\", [\"axis\", \"fill\"]), this.get(\"themeTags\", []))\n\t\t}, [this.axisFills.template])\n\t));\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeLabel(dataItem: DataItem<IAxisDataItem>, themeTags: Array<string>): AxisLabel {\n\n\t\tconst label = this.labels.make();\n\n\t\tlabel.set(\"themeTags\", $utils.mergeTags(label.get(\"themeTags\"), themeTags));\n\t\tthis.axis.labelsContainer.children.moveValue(label, 0);\n\n\t\tlabel._setDataItem(dataItem);\n\t\tdataItem.setRaw(\"label\", label);\n\t\tthis.labels.push(label);\n\t\treturn label;\n\t}\n\n\t/**\n\t * A list of labels in the axis.\n\t *\n\t * `labels.template` can be used to configure axis labels.\n\t *\n\t * @default new ListTemplate<AxisLabel>\n\t */\n\tpublic readonly labels: ListTemplate<AxisLabel> = this.addDisposer(new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => AxisLabel._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.labels.template.get(\"themeTags\", []), this.get(\"themeTags\", []))\n\t\t}, [this.labels.template])\n\t));\n\n\n\tdeclare public _settings: IAxisRendererSettings;\n\tdeclare public _privateSettings: IAxisRendererPrivate;\n\n\t/**\n\t * An [[Axis]] renderer is for.\n\t */\n\tpublic axis!: Axis<this>;\n\n\tpublic axisLength(): number {\n\t\treturn 0;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic gridCount(): number {\n\t\treturn this.axisLength() / this.get(\"minGridDistance\", 50);\n\t}\n\n\tpublic _updatePositions() {\n\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract updateLabel(_label?: AxisLabel, _position?: number, _endPosition?: number, _count?: number): void;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract updateGrid(_grid?: Grid, _position?: number, _endPosition?: number): void;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract updateTick(_grid?: AxisTick, _position?: number, _endPosition?: number, _count?: number): void;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract updateFill(_fill?: Graphics, _position?: number, _endPosition?: number): void;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract updateBullet(_bullet?: AxisBullet, _position?: number, _endPosition?: number): void;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract positionToPoint(_position: number): IPoint;\n\n\n\t/**\n\t * A thumb Graphics to be used for panning the axis (the one which shows under the labels when hovered)\n\t */\n\tpublic readonly thumb?: Graphics;\n\n\tprotected _afterNew() {\n\t\tsuper._afterNew();\n\t\tthis.set(\"isMeasured\", false);\n\n\t\tconst thumb = this.thumb;\n\t\tif (thumb) {\n\t\t\tthis._disposers.push(thumb.events.on(\"pointerdown\", (event) => {\n\t\t\t\tthis._handleThumbDown(event);\n\t\t\t}));\n\n\t\t\tthis._disposers.push(thumb.events.on(\"globalpointerup\", (event) => {\n\t\t\t\tthis._handleThumbUp(event);\n\t\t\t}));\n\n\t\t\tthis._disposers.push(thumb.events.on(\"globalpointermove\", (event) => {\n\t\t\t\tthis._handleThumbMove(event);\n\t\t\t}));\n\t\t}\n\t}\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\t\tif (this.isDirty(\"minGridDistance\")) {\n\t\t\tthis.root.events.once(\"frameended\", () => {\n\t\t\t\tthis.axis.markDirtySize();\n\t\t\t})\n\t\t}\n\t}\n\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\tif (this.isDirty(\"pan\")) {\n\t\t\tconst thumb = this.thumb;\n\t\t\tif (thumb) {\n\t\t\t\tconst labelsContainer = this.axis.labelsContainer;\n\t\t\t\tconst pan = this.get(\"pan\");\n\t\t\t\tif (pan == \"zoom\") {\n\t\t\t\t\tlabelsContainer.children.push(thumb);\n\t\t\t\t}\n\t\t\t\telse if (pan == \"none\") {\n\t\t\t\t\tlabelsContainer.children.removeValue(thumb);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _handleThumbDown(event: ISpritePointerEvent) {\n\t\tthis._thumbDownPoint = this.toLocal(event.point);\n\t\tconst axis = this.axis;\n\t\tthis._downStart = axis.get(\"start\");\n\t\tthis._downEnd = axis.get(\"end\");\n\t}\n\n\tprotected _handleThumbUp(_event: ISpritePointerEvent) {\n\t\tthis._thumbDownPoint = undefined;\n\t}\n\n\tprotected _handleThumbMove(event: ISpritePointerEvent) {\n\t\tconst downPoint = this._thumbDownPoint;\n\t\tif (downPoint) {\n\t\t\tconst point = this.toLocal(event.point);\n\n\t\t\tconst downStart = this._downStart!;\n\t\t\tconst downEnd = this._downEnd!;\n\t\t\tconst extra = this._getPan(point, downPoint) * Math.min(1, (downEnd - downStart)) / 2 * this.get(\"panSensitivity\", 1);\n\t\t\tthis.axis.zoom(downStart - extra, downEnd + extra, 0);\n\t\t}\n\t}\n\n\tprotected _getPan(_point1: IPoint, _point2: IPoint): number {\n\t\treturn 0;\n\t}\n\n\t/**\n\t * Converts relative position (0-1) on axis to a pixel coordinate.\n\t *\n\t * @param position  Position (0-1)\n\t * @return Coordinate (px)\n\t */\n\tpublic positionToCoordinate(position: number): number {\n\t\tif (this._inversed) {\n\t\t\treturn (this._end - position) * this._axisLength;\n\t\t}\n\t\telse {\n\t\t\treturn (position - this._start) * this._axisLength;\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract positionTooltip(_tooltip: Tooltip, _position: number): void;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateTooltipBounds(_tooltip: Tooltip) { }\n\n\tpublic _updateSize() {\n\t\tthis.markDirty()\n\t\tthis._clear = true;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic toAxisPosition(position: number): number {\n\t\tconst start = this._start || 0;\n\t\tconst end = this._end || 1;\n\n\t\tposition = position * (end - start);\n\t\tif (!this.get(\"inversed\")) {\n\t\t\tposition = start + position;\n\t\t}\n\t\telse {\n\t\t\tposition = end - position;\n\t\t}\n\n\t\treturn position;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic toGlobalPosition(position: number): number {\n\t\tconst start = this._start || 0;\n\t\tconst end = this._end || 1;\n\n\t\tif (!this.get(\"inversed\")) {\n\t\t\tposition = position - start;\n\t\t}\n\t\telse {\n\t\t\tposition = end - position;\n\t\t}\n\n\t\tposition = position / (end - start);\n\n\t\treturn position;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic fixPosition(position: number) {\n\t\tif (this.get(\"inversed\")) {\n\t\t\treturn 1 - position;\n\t\t}\n\t\treturn position;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic _updateLC() {\n\n\t}\n\n\tprotected toggleVisibility(sprite: Sprite, position: number, minPosition: number, maxPosition: number): void {\n\t\tlet axis = this.axis;\n\n\t\tconst start = axis.get(\"start\", 0);\n\t\tconst end = axis.get(\"end\", 1);\n\n\t\tlet updatedStart = start + (end - start) * (minPosition - 0.0001);\n\t\tlet updatedEnd = start + (end - start) * (maxPosition + 0.0001);\n\n\t\tif (position < updatedStart || position > updatedEnd) {\n\t\t\tsprite.setPrivate(\"visible\", false);\n\t\t}\n\t\telse {\n\t\t\tsprite.setPrivate(\"visible\", true);\n\t\t}\n\t}\n\n\tprotected _positionTooltip(tooltip: Tooltip, point: IPoint) {\n\t\tconst chart = this.chart;\n\t\tif (chart) {\n\t\t\ttooltip.set(\"pointTo\", this._display.toGlobal(point));\n\t\t\tif (!chart.inPlot(point)) {\n\t\t\t\ttooltip.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic processAxis() { }\n}\n","import type { IPoint } from \"../../../core/util/IPoint\";\nimport type { AxisLabel } from \"./AxisLabel\";\nimport type { Grid } from \"./Grid\";\nimport type { AxisTick } from \"./AxisTick\";\nimport type { Graphics } from \"../../../core/render/Graphics\";\nimport type { Tooltip } from \"../../../core/render/Tooltip\";\nimport type { Template } from \"../../../core/util/Template\";\nimport type { AxisBullet } from \"./AxisBullet\";\n\nimport { AxisRenderer, IAxisRendererSettings, IAxisRendererPrivate } from \"./AxisRenderer\";\nimport { p100 } from \"../../../core/util/Percent\";\nimport { Rectangle } from \"../../../core/render/Rectangle\";\n\nimport * as $type from \"../../../core/util/Type\";\nimport * as $utils from \"../../../core/util/Utils\";\n\nexport interface IAxisRendererXSettings extends IAxisRendererSettings {\n\n\t/**\n\t * If set to `true` the axis will be drawn on the opposite side of the plot\n\t * area.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Axis_position} for more info\n\t * @default false\n\t */\n\topposite?: boolean;\n\n\t/**\n\t * If set to `true`, all axis elements (ticks, labels) will be drawn inside\n\t * plot area.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Labels_ticks_inside_plot_area} for more info\n\t * @default false\n\t */\n\tinside?: boolean;\n}\n\nexport interface IAxisRendererXPrivate extends IAxisRendererPrivate {\n}\n\n/**\n * Used to render horizontal axis.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/#Axis_renderer} for more info\n * @important\n */\nexport class AxisRendererX extends AxisRenderer {\n\n\tpublic static className: string = \"AxisRendererX\";\n\tpublic static classNames: Array<string> = AxisRenderer.classNames.concat([AxisRendererX.className]);\n\n\tdeclare public _settings: IAxisRendererXSettings;\n\tdeclare public _privateSettings: IAxisRendererXPrivate;\n\n\tdeclare public readonly labelTemplate: Template<AxisLabel>;\n\n\tpublic thumb: Rectangle = Rectangle.new(this._root, { width: p100, isMeasured: false, themeTags: [\"axis\", \"x\", \"thumb\", \"zoomgrip\"] });\n\n\tpublic _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"renderer\", \"x\"]);\n\n\t\tsuper._afterNew();\n\t\tthis.setPrivateRaw(\"letter\", \"X\");\n\n\t\tconst gridTemplate = this.grid.template;\n\t\tgridTemplate.set(\"height\", p100);\n\t\tgridTemplate.set(\"width\", 0);\n\t\tgridTemplate.set(\"draw\", (display, graphics) => {\n\t\t\tdisplay.moveTo(0, 0);\n\t\t\tdisplay.lineTo(0, graphics.height());\n\t\t});\n\n\t\tthis.set(\"draw\", (display, graphics) => {\n\t\t\tdisplay.moveTo(0, 0);\n\t\t\tdisplay.lineTo(graphics.width(), 0);\n\t\t});\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\tconst axis = this.axis;\n\t\tconst ghostLabel = axis.ghostLabel;\n\t\tif (ghostLabel) {\n\t\t\tghostLabel.setPrivate(\"visible\", !this.get(\"inside\"));\n\t\t\tghostLabel.set(\"x\", -1000);\n\t\t}\n\n\t\tconst opposite = \"opposite\"\n\t\tconst inside = \"inside\";\n\n\t\tif (this.isDirty(opposite) || this.isDirty(inside)) {\n\t\t\tconst chart = this.chart;\n\t\t\tconst axisChildren = axis.children;\n\n\t\t\tif (this.get(inside)) {\n\t\t\t\taxis.addTag(inside);\n\t\t\t}\n\t\t\telse {\n\t\t\t\taxis.removeTag(inside);\n\t\t\t}\n\n\t\t\tif (chart) {\n\t\t\t\tif (this.get(opposite)) {\n\t\t\t\t\tconst children = chart.topAxesContainer.children;\n\t\t\t\t\tif (children.indexOf(axis) == -1) {\n\t\t\t\t\t\tchildren.insertIndex(0, axis);\n\t\t\t\t\t}\n\t\t\t\t\taxis.addTag(opposite);\n\t\t\t\t\taxisChildren.moveValue(this);\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst children = chart.bottomAxesContainer.children;\n\t\t\t\t\tif (children.indexOf(axis) == -1) {\n\t\t\t\t\t\tchildren.moveValue(axis);\n\t\t\t\t\t}\n\t\t\t\t\taxis.removeTag(opposite);\n\n\t\t\t\t\taxisChildren.moveValue(this, 0);\n\n\t\t\t\t}\n\n\t\t\t\taxis.ghostLabel?._applyThemes();\n\t\t\t\tthis.labels.each((label) => {\n\t\t\t\t\tlabel._applyThemes();\n\t\t\t\t})\n\t\t\t\tthis.root._markDirtyRedraw();\n\t\t\t}\n\t\t\taxis.markDirtySize();\n\t\t}\n\n\t\tthis.thumb.setPrivate(\"height\", axis.labelsContainer.height());\n\t}\n\n\n\tprotected _getPan(point1: IPoint, point2: IPoint): number {\n\t\treturn (point2.x - point1.x) / this.width();\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic toAxisPosition(position: number): number {\n\t\tconst start = this._start || 0;\n\t\tconst end = this._end || 1;\n\n\t\tposition -= this._ls;\n\n\t\tposition = position * (end - start) / this._lc;\n\t\tif (!this.get(\"inversed\")) {\n\t\t\tposition = start + position;\n\t\t}\n\t\telse {\n\t\t\tposition = end - position;\n\t\t}\n\n\t\treturn position;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic toGlobalPosition(position: number): number {\n\t\tconst start = this._start || 0;\n\t\tconst end = this._end || 1;\n\n\t\tif (!this.get(\"inversed\")) {\n\t\t\tposition = position - start;\n\t\t}\n\t\telse {\n\t\t\tposition = end - position;\n\t\t}\n\n\t\tposition = position / (end - start) * this._lc\n\n\t\tposition += this._ls;\n\n\t\treturn position;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic _updateLC() {\n\t\tconst axis = this.axis;\n\t\tconst parent = axis.parent;\n\t\tif (parent) {\n\t\t\tconst w = parent.innerWidth();\n\t\t\tthis._lc = this.axisLength() / w;\n\t\t\tthis._ls = (axis.x() - parent.get(\"paddingLeft\", 0)) / w;\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic _updatePositions() {\n\t\tconst axis = this.axis;\n\t\tconst x = axis.x() - $utils.relativeToValue(axis.get(\"centerX\", 0), axis.width()) - axis.parent!.get(\"paddingLeft\", 0);\n\t\taxis.gridContainer.set(\"x\", x);\n\t\taxis.topGridContainer.set(\"x\", x);\n\t\taxis.bulletsContainer.set(\"y\", this.y());\n\n\t\tconst chart = axis.chart;\n\t\tif (chart) {\n\t\t\tconst plotContainer = chart.plotContainer;\n\t\t\tconst axisHeader = axis.axisHeader;\n\t\t\tlet width = axis.get(\"marginLeft\", 0);\n\n\t\t\tlet x = axis.x() - width;\n\n\t\t\tconst parent = axis.parent;\n\t\t\tif (parent) {\n\t\t\t\tx -= parent.get(\"paddingLeft\", 0);\n\t\t\t}\n\n\t\t\tif (axisHeader.children.length > 0) {\n\t\t\t\twidth = axis.axisHeader.width();\n\t\t\t\taxis.set(\"marginLeft\", width + 1);\n\t\t\t}\n\t\t\telse {\n\t\t\t\taxisHeader.set(\"width\", width);\n\t\t\t}\n\t\t\taxisHeader.setAll({ x: x, y: -1, height: plotContainer.height() + 2 });\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic processAxis() {\n\t\tsuper.processAxis();\n\t\tconst axis = this.axis;\n\t\tif (axis.get(\"width\") == null) {\n\t\t\taxis.set(\"width\", p100);\n\t\t};\n\t\tconst verticalLayout = this._root.verticalLayout;\n\t\taxis.set(\"layout\", verticalLayout);\n\t\taxis.labelsContainer.set(\"width\", p100);\n\t\taxis.axisHeader.setAll({ layout: verticalLayout });\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic axisLength(): number {\n\t\treturn this.axis.width();\n\t}\n\n\t/**\n\t * Converts axis relative position to actual coordinate in pixels.\n\t *\n\t * @param   position  Position\n\t * @return            Point\n\t */\n\tpublic positionToPoint(position: number): IPoint {\n\t\treturn { x: this.positionToCoordinate(position), y: 0 };\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateTick(tick?: AxisTick, position?: number, endPosition?: number, count?: number) {\n\t\tif (tick) {\n\t\t\tif (!$type.isNumber(position)) {\n\t\t\t\tposition = 0;\n\t\t\t}\n\n\t\t\tlet location = 0.5;\n\t\t\tif ($type.isNumber(count) && count > 1) {\n\t\t\t\tlocation = tick.get(\"multiLocation\", location)\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlocation = tick.get(\"location\", location)\n\t\t\t}\n\n\t\t\tif ($type.isNumber(endPosition) && endPosition != position) {\n\t\t\t\tposition = position + (endPosition - position) * location;\n\t\t\t}\n\n\t\t\ttick.set(\"x\", this.positionToCoordinate(position));\n\n\t\t\tlet length = tick.get(\"length\", 0);\n\t\t\tconst inside = tick.get(\"inside\", this.get(\"inside\", false));\n\n\t\t\tif (this.get(\"opposite\")) {\n\t\t\t\ttick.set(\"y\", p100);\n\t\t\t\tif (!inside) {\n\t\t\t\t\tlength *= -1\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttick.set(\"y\", 0);\n\t\t\t\tif (inside) {\n\t\t\t\t\tlength *= -1\n\t\t\t\t}\n\t\t\t}\n\t\t\ttick.set(\"draw\", (display) => {\n\t\t\t\tdisplay.moveTo(0, 0);\n\t\t\t\tdisplay.lineTo(0, length);\n\t\t\t})\n\n\t\t\tthis.toggleVisibility(tick, position, tick.get(\"minPosition\", 0), tick.get(\"maxPosition\", 1));\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateLabel(label?: AxisLabel, position?: number, endPosition?: number, count?: number) {\n\t\tif (label) {\n\t\t\tlet location = 0.5;\n\t\t\tif ($type.isNumber(count) && count > 1) {\n\t\t\t\tlocation = label.get(\"multiLocation\", location)\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlocation = label.get(\"location\", location)\n\t\t\t}\n\n\t\t\tif (!$type.isNumber(position)) {\n\t\t\t\tposition = 0;\n\t\t\t}\n\n\t\t\tconst inside = label.get(\"inside\", this.get(\"inside\", false));\n\n\t\t\tconst opposite = this.get(\"opposite\");\n\t\t\tif (opposite) {\n\t\t\t\tif (!inside) {\n\t\t\t\t\tlabel.set(\"position\", \"relative\");\n\t\t\t\t\tlabel.set(\"y\", p100);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlabel.set(\"position\", \"absolute\");\n\t\t\t\t\tlabel.set(\"y\", 0)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!inside) {\n\t\t\t\t\tlabel.set(\"y\", undefined);\n\t\t\t\t\tlabel.set(\"position\", \"relative\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlabel.set(\"y\", 0)\n\t\t\t\t\tlabel.set(\"position\", \"absolute\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ($type.isNumber(endPosition) && endPosition != position) {\n\t\t\t\tposition = position + (endPosition - position) * location;\n\t\t\t}\n\n\t\t\tlabel.set(\"x\", this.positionToCoordinate(position));\n\t\t\tthis.toggleVisibility(label, position, label.get(\"minPosition\", 0), label.get(\"maxPosition\", 1));\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateGrid(grid?: Grid, position?: number, endPosition?: number) {\n\t\tif (grid) {\n\t\t\tif (!$type.isNumber(position)) {\n\t\t\t\tposition = 0;\n\t\t\t}\n\n\t\t\tlet location = grid.get(\"location\", 0.5);\n\t\t\tif ($type.isNumber(endPosition) && endPosition != position) {\n\t\t\t\tposition = position + (endPosition - position) * location;\n\t\t\t}\n\n\t\t\tgrid.set(\"x\", this.positionToCoordinate(position));\n\n\t\t\tthis.toggleVisibility(grid, position, 0, 1);\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateBullet(bullet?: AxisBullet, position?: number, endPosition?: number) {\n\t\tif (bullet) {\n\n\t\t\tconst sprite = bullet.get(\"sprite\");\n\t\t\tif (sprite) {\n\t\t\t\tif (!$type.isNumber(position)) {\n\t\t\t\t\tposition = 0;\n\t\t\t\t}\n\n\t\t\t\tlet location = bullet.get(\"location\", 0.5);\n\n\t\t\t\tif ($type.isNumber(endPosition) && endPosition != position) {\n\t\t\t\t\tposition = position + (endPosition - position) * location;\n\t\t\t\t}\n\n\t\t\t\tlet bulletPosition = this.axis.roundAxisPosition(position, location);\n\t\t\t\tlet previousBullet = this.axis._bullets[bulletPosition];\n\t\t\t\tlet d = -1;\n\t\t\t\tif (this.get(\"opposite\")) {\n\t\t\t\t\td = 1;\n\t\t\t\t}\n\n\t\t\t\tif (bullet.get(\"stacked\")) {\n\t\t\t\t\tif (previousBullet) {\n\t\t\t\t\t\tlet previousSprite = previousBullet.get(\"sprite\");\n\t\t\t\t\t\tif (previousSprite) {\n\t\t\t\t\t\t\tsprite.set(\"y\", previousSprite.y() + previousSprite.height() * d);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tsprite.set(\"y\", 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.axis._bullets[bulletPosition] = bullet;\n\t\t\t\tsprite.set(\"x\", this.positionToCoordinate(position));\n\t\t\t\tthis.toggleVisibility(sprite, position, 0, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateFill(fill?: Graphics, position?: number, endPosition?: number) {\n\t\tif (fill) {\n\t\t\tif (!$type.isNumber(position)) {\n\t\t\t\tposition = 0;\n\t\t\t}\n\t\t\tif (!$type.isNumber(endPosition)) {\n\t\t\t\tendPosition = 1;\n\t\t\t}\n\n\t\t\tlet x0 = this.positionToCoordinate(position);\n\t\t\tlet x1 = this.positionToCoordinate(endPosition);\n\n\t\t\tthis.fillDrawMethod(fill, x0, x1);\n\t\t}\n\t}\n\n\tprotected fillDrawMethod(fill: Graphics, x0: number, x1: number) {\n\t\tfill.set(\"draw\", (display) => {\n\t\t\t//display.drawRect(x0, 0, x1 - x0, this.axis!.gridContainer.height());\n\t\t\t// using for holes, so can not be rectangle\n\t\t\tconst h = this.axis!.gridContainer.height();\n\t\t\tconst w = this.width();\n\n\t\t\tif (x1 < x0) {\n\t\t\t\t[x1, x0] = [x0, x1];\n\t\t\t}\n\t\t\tif (x0 > w || x1 < 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*\n\t\t\tconst limit = 10000;\n\n\t\t\tx0 = Math.max(-limit, x0);\n\t\t\tx1 = Math.min(limit, x1);\n\t\t\t*/\n\n\t\t\tdisplay.moveTo(x0, 0);\n\t\t\tdisplay.lineTo(x1, 0);\n\t\t\tdisplay.lineTo(x1, h);\n\t\t\tdisplay.lineTo(x0, h);\n\t\t\tdisplay.lineTo(x0, 0);\n\t\t})\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic positionTooltip(tooltip: Tooltip, position: number) {\n\t\tthis._positionTooltip(tooltip, { x: this.positionToCoordinate(position), y: 0 })\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateTooltipBounds(tooltip: Tooltip) {\n\t\tconst inside = this.get(\"inside\");\n\t\tconst num = 100000;\n\n\t\tlet global = this._display.toGlobal({ x: 0, y: 0 });\n\t\tlet x = global.x;\n\t\tlet y = 0;\n\t\tlet w = this.axisLength();\n\t\tlet h = num;\n\n\t\tlet pointerOrientation: \"up\" | \"down\" = \"up\";\n\n\t\tif (this.get(\"opposite\")) {\n\t\t\tif (inside) {\n\t\t\t\tpointerOrientation = \"up\";\n\t\t\t\ty = global.y;\n\t\t\t\th = num;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpointerOrientation = \"down\";\n\t\t\t\ty = global.y - num;\n\t\t\t\th = num;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (inside) {\n\t\t\t\tpointerOrientation = \"down\";\n\t\t\t\ty = global.y - num;\n\t\t\t\th = num;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpointerOrientation = \"up\";\n\t\t\t\ty = global.y;\n\t\t\t\th = num;\n\t\t\t}\n\t\t}\n\n\t\tconst bounds = { left: x, right: x + w, top: y, bottom: y + h };\n\t\tconst oldBounds = tooltip.get(\"bounds\");\n\n\t\tif (!$utils.sameBounds(bounds, oldBounds)) {\n\t\t\ttooltip.set(\"bounds\", bounds);\n\t\t\ttooltip.set(\"pointerOrientation\", pointerOrientation);\n\t\t}\n\t}\n}\n","import type { IPoint } from \"../../../core/util/IPoint\";\nimport type { Graphics } from \"../../../core/render/Graphics\";\nimport type { AxisLabel } from \"./AxisLabel\";\nimport type { AxisBullet } from \"./AxisBullet\";\nimport type { Grid } from \"./Grid\";\nimport type { AxisTick } from \"./AxisTick\";\nimport type { Tooltip } from \"../../../core/render/Tooltip\";\nimport type { Template } from \"../../../core/util/Template\";\n\nimport { AxisRenderer, IAxisRendererSettings, IAxisRendererPrivate } from \"./AxisRenderer\";\nimport { p100 } from \"../../../core/util/Percent\";\nimport { Rectangle } from \"../../../core/render/Rectangle\";\n\nimport * as $type from \"../../../core/util/Type\";\nimport * as $utils from \"../../../core/util/Utils\";\n\nexport interface IAxisRendererYSettings extends IAxisRendererSettings {\n\n\t/**\n\t * If set to `true` the axis will be drawn on the opposite side of the plot\n\t * area.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Axis_position} for more info\n\t * @default false\n\t */\n\topposite?: boolean;\n\n\t/**\n\t * If set to `true`, all axis elements (ticks, labels) will be drawn inside\n\t * plot area.\n\t *\n\t * @default false\n\t */\n\tinside?: boolean;\n}\n\nexport interface IAxisRendererYPrivate extends IAxisRendererPrivate {\n}\n\n/**\n * Used to render vertical axis.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/#Axis_renderer} for more info\n * @important\n */\nexport class AxisRendererY extends AxisRenderer {\n\n\tpublic static className: string = \"AxisRendererY\";\n\tpublic static classNames: Array<string> = AxisRenderer.classNames.concat([AxisRendererY.className]);\n\n\tdeclare public _settings: IAxisRendererYSettings;\n\tdeclare public _privateSettings: IAxisRendererYPrivate;\n\n\tdeclare public readonly labelTemplate: Template<AxisLabel>;\n\n\tprotected _downY?: number;\n\n\tpublic thumb: Rectangle = Rectangle.new(this._root, { height: p100, isMeasured: false, themeTags: [\"axis\", \"y\", \"thumb\", \"zoomgrip\"] });\n\n\tpublic _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"renderer\", \"y\"]);\n\t\tif (this._settings.opposite) {\n\t\t\tthis._settings.themeTags.push(\"opposite\");\n\t\t}\n\n\t\tsuper._afterNew();\n\t\tthis.setPrivateRaw(\"letter\", \"Y\");\n\n\t\tconst gridTemplate = this.grid.template;\n\t\tgridTemplate.set(\"width\", p100);\n\t\tgridTemplate.set(\"height\", 0);\n\t\tgridTemplate.set(\"draw\", (display, graphics) => {\n\t\t\tdisplay.moveTo(0, 0);\n\t\t\tdisplay.lineTo(graphics.width(), 0);\n\t\t});\n\n\t\tthis.set(\"draw\", (display, renderer) => {\n\t\t\tdisplay.moveTo(0, 0);\n\t\t\tdisplay.lineTo(0, renderer.height());\n\t\t});\n\t}\n\n\tprotected _getPan(point1: IPoint, point2: IPoint): number {\n\t\treturn (point1.y - point2.y) / this.height();\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\tconst axis = this.axis;\n\t\tconst ghostLabel = axis.ghostLabel;\n\t\tif (ghostLabel) {\n\t\t\tghostLabel.setPrivate(\"visible\", !this.get(\"inside\"));\n\t\t\tghostLabel.set(\"y\", -1000);\n\t\t}\n\n\t\tconst thumb = this.thumb;\n\t\tconst opposite = \"opposite\";\n\t\tconst inside = \"inside\";\n\t\tconst chart = this.chart;\n\n\t\tif (this.isDirty(opposite) || this.isDirty(inside)) {\n\n\t\t\tconst axisChildren = axis.children;\n\n\t\t\tif (this.get(inside)) {\n\t\t\t\taxis.addTag(inside);\n\t\t\t}\n\t\t\telse {\n\t\t\t\taxis.removeTag(inside);\n\t\t\t}\n\n\t\t\tif (chart) {\n\t\t\t\tif (this.get(opposite)) {\n\t\t\t\t\tconst children = chart.rightAxesContainer.children;\n\t\t\t\t\tif (children.indexOf(axis) == -1) {\n\t\t\t\t\t\tchildren.moveValue(axis, 0);\n\t\t\t\t\t}\n\t\t\t\t\taxis.addTag(opposite);\n\t\t\t\t\taxisChildren.moveValue(this, 0);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst children = chart.leftAxesContainer.children;\n\t\t\t\t\tif (children.indexOf(axis) == -1) {\n\t\t\t\t\t\tchildren.moveValue(axis);\n\t\t\t\t\t}\n\t\t\t\t\taxis.removeTag(opposite);\n\n\t\t\t\t\taxisChildren.moveValue(this);\n\t\t\t\t}\n\n\t\t\t\taxis.ghostLabel?._applyThemes();\n\t\t\t\tthis.labels.each((label) => {\n\t\t\t\t\tlabel._applyThemes();\n\t\t\t\t})\n\t\t\t\tthis.root._markDirtyRedraw();\n\t\t\t}\n\t\t\taxis.markDirtySize();\n\t\t}\n\n\t\tconst w = axis.labelsContainer.width();\n\n\t\tif (chart) {\n\t\t\tif (this.get(opposite)) {\n\t\t\t\tthumb.set(\"centerX\", 0);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthumb.set(\"centerX\", w);\n\t\t\t}\n\t\t}\n\n\t\tthumb.setPrivate(\"width\", w);\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic processAxis() {\n\t\tsuper.processAxis();\n\t\tconst axis = this.axis;\n\t\tif (axis.get(\"height\") == null) {\n\t\t\taxis.set(\"height\", p100);\n\t\t}\n\t\tconst horizontalLayout = this._root.horizontalLayout;\n\t\taxis.set(\"layout\", horizontalLayout);\n\t\taxis.labelsContainer.set(\"height\", p100);\n\t\taxis.axisHeader.set(\"layout\", horizontalLayout);\n\t}\n\n\tpublic _updatePositions() {\n\t\tconst axis = this.axis;\n\t\tconst y = axis.y() - $utils.relativeToValue(axis.get(\"centerY\", 0), axis.height());\n\t\taxis.gridContainer.set(\"y\", y);\n\t\taxis.topGridContainer.set(\"y\", y);\n\t\taxis.bulletsContainer.set(\"x\", this.x());\n\n\t\tconst chart = axis.chart;\n\t\tif (chart) {\n\t\t\tconst plotContainer = chart.plotContainer;\n\t\t\tconst axisHeader = axis.axisHeader;\n\t\t\tlet height = axis.get(\"marginTop\", 0);\n\n\t\t\tif (axisHeader.children.length > 0) {\n\t\t\t\theight = axis.axisHeader.height();\n\t\t\t\taxis.set(\"marginTop\", height + 1);\n\t\t\t}\n\t\t\telse {\n\t\t\t\taxisHeader.set(\"height\", height);\n\t\t\t}\n\t\t\taxisHeader.setAll({ y: axis.y() - height, x: -1, width: plotContainer.width() + 2 });\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic axisLength(): number {\n\t\treturn this.axis.innerHeight();\n\t}\n\n\t/**\n\t * Converts axis relative position to actual coordinate in pixels.\n\t *\n\t * @param   position  Position\n\t * @return            Point\n\t */\n\tpublic positionToPoint(position: number): IPoint {\n\t\treturn { x: 0, y: this.positionToCoordinate(position) };\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateLabel(label?: AxisLabel, position?: number, endPosition?: number, count?: number) {\n\t\tif (label) {\n\t\t\tif (!$type.isNumber(position)) {\n\t\t\t\tposition = 0;\n\t\t\t}\n\n\t\t\tlet location = 0.5;\n\t\t\tif ($type.isNumber(count) && count > 1) {\n\t\t\t\tlocation = label.get(\"multiLocation\", location)\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlocation = label.get(\"location\", location)\n\t\t\t}\n\n\t\t\tconst opposite = this.get(\"opposite\");\n\t\t\tconst inside = label.get(\"inside\", this.get(\"inside\", false));\n\n\t\t\tif (opposite) {\n\t\t\t\tlabel.set(\"x\", 0);\n\n\t\t\t\tif (inside) {\n\t\t\t\t\tlabel.set(\"position\", \"absolute\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlabel.set(\"position\", \"relative\");\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (inside) {\n\t\t\t\t\tlabel.set(\"x\", 0);\n\t\t\t\t\tlabel.set(\"position\", \"absolute\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlabel.set(\"x\", undefined);\n\t\t\t\t\tlabel.set(\"position\", \"relative\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ($type.isNumber(endPosition) && endPosition != position) {\n\t\t\t\tposition = position + (endPosition - position) * location;\n\t\t\t}\n\n\t\t\tlabel.set(\"y\", this.positionToCoordinate(position));\n\t\t\tthis.toggleVisibility(label, position, label.get(\"minPosition\", 0), label.get(\"maxPosition\", 1));\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateGrid(grid?: Grid, position?: number, endPosition?: number) {\n\t\tif (grid) {\n\t\t\tif (!$type.isNumber(position)) {\n\t\t\t\tposition = 0;\n\t\t\t}\n\n\t\t\tlet location = grid.get(\"location\", 0.5);\n\t\t\tif ($type.isNumber(endPosition) && endPosition != position) {\n\t\t\t\tposition = position + (endPosition - position) * location;\n\t\t\t}\n\n\t\t\tgrid.set(\"y\", this.positionToCoordinate(position));\n\t\t\tthis.toggleVisibility(grid, position, 0, 1);\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateTick(tick?: AxisTick, position?: number, endPosition?: number, count?: number) {\n\t\tif (tick) {\n\t\t\tif (!$type.isNumber(position)) {\n\t\t\t\tposition = 0;\n\t\t\t}\n\n\t\t\tlet location = 0.5;\n\t\t\tif ($type.isNumber(count) && count > 1) {\n\t\t\t\tlocation = tick.get(\"multiLocation\", location);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlocation = tick.get(\"location\", location);\n\t\t\t}\n\n\t\t\tif ($type.isNumber(endPosition) && endPosition != position) {\n\t\t\t\tposition = position + (endPosition - position) * location;\n\t\t\t}\n\n\t\t\ttick.set(\"y\", this.positionToCoordinate(position));\n\n\t\t\tlet length = tick.get(\"length\", 0);\n\t\t\tconst inside = tick.get(\"inside\", this.get(\"inside\", false));\n\n\t\t\tif (this.get(\"opposite\")) {\n\t\t\t\ttick.set(\"x\", 0);\n\t\t\t\tif (inside) {\n\t\t\t\t\tlength *= -1\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!inside) {\n\t\t\t\t\tlength *= -1\n\t\t\t\t}\n\t\t\t}\n\t\t\ttick.set(\"draw\", (display) => {\n\t\t\t\tdisplay.moveTo(0, 0);\n\t\t\t\tdisplay.lineTo(length, 0);\n\t\t\t})\n\n\t\t\tthis.toggleVisibility(tick, position, tick.get(\"minPosition\", 0), tick.get(\"maxPosition\", 1));\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateBullet(bullet?: AxisBullet, position?: number, endPosition?: number) {\n\t\tif (bullet) {\n\n\t\t\tconst sprite = bullet.get(\"sprite\");\n\t\t\tif (sprite) {\n\n\t\t\t\tif (!$type.isNumber(position)) {\n\t\t\t\t\tposition = 0;\n\t\t\t\t}\n\n\t\t\t\tlet location = bullet.get(\"location\", 0.5);\n\t\t\t\tif ($type.isNumber(endPosition) && endPosition != position) {\n\t\t\t\t\tposition = position + (endPosition - position) * location;\n\t\t\t\t}\n\n\n\t\t\t\tlet bulletPosition = this.axis.roundAxisPosition(position, location);\n\t\t\t\tlet previousBullet = this.axis._bullets[bulletPosition];\n\t\t\t\tlet d = 1;\n\t\t\t\tif (this.get(\"opposite\")) {\n\t\t\t\t\td = -1;\n\t\t\t\t}\n\n\t\t\t\tif (bullet.get(\"stacked\")) {\n\t\t\t\t\tif (previousBullet) {\n\t\t\t\t\t\tlet previousSprite = previousBullet.get(\"sprite\");\n\t\t\t\t\t\tif (previousSprite) {\n\t\t\t\t\t\t\tsprite.set(\"x\", previousSprite.x() + previousSprite.width() * d);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tsprite.set(\"x\", 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.axis._bullets[bulletPosition] = bullet;\n\n\n\t\t\t\tsprite.set(\"y\", this.positionToCoordinate(position));\n\n\t\t\t\tthis.toggleVisibility(sprite, position, 0, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateFill(fill?: Graphics, position?: number, endPosition?: number) {\n\t\tif (fill) {\n\t\t\tif (!$type.isNumber(position)) {\n\t\t\t\tposition = 0;\n\t\t\t}\n\t\t\tif (!$type.isNumber(endPosition)) {\n\t\t\t\tendPosition = 1;\n\t\t\t}\n\n\t\t\tlet y0 = this.positionToCoordinate(position);\n\t\t\tlet y1 = this.positionToCoordinate(endPosition);\n\n\t\t\tthis.fillDrawMethod(fill, y0, y1);\n\t\t}\n\t}\n\n\tprotected fillDrawMethod(fill: Graphics, y0: number, y1: number) {\n\t\tfill.set(\"draw\", (display) => {\n\t\t\t// using for holes, so can not be rectangle\n\t\t\tconst w = this.axis!.gridContainer.width();\n\t\t\tconst h = this.height();\n\n\t\t\tif (y1 < y0) {\n\t\t\t\t[y1, y0] = [y0, y1];\n\t\t\t}\n\n\t\t\tif (y0 > h || y1 < 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//y0 = Math.max(0, y0);\n\t\t\t//y1 = Math.min(h, y1);\n\n\t\t\tdisplay.moveTo(0, y0);\n\t\t\tdisplay.lineTo(w, y0);\n\t\t\tdisplay.lineTo(w, y1);\n\t\t\tdisplay.lineTo(0, y1);\n\t\t\tdisplay.lineTo(0, y0);\n\t\t})\n\t}\n\n\t/**\n\t * Converts relative position (0-1) on axis to a pixel coordinate.\n\t *\n\t * @param position  Position (0-1)\n\t * @return Coordinate (px)\n\t */\n\tpublic positionToCoordinate(position: number): number {\n\t\tif (!this._inversed) {\n\t\t\treturn (this._end - position) * this._axisLength;\n\t\t}\n\t\telse {\n\t\t\treturn (position - this._start) * this._axisLength;\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic positionTooltip(tooltip: Tooltip, position: number) {\n\t\tthis._positionTooltip(tooltip, { x: 0, y: this.positionToCoordinate(position) });\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateTooltipBounds(tooltip: Tooltip) {\n\t\tconst inside = this.get(\"inside\");\n\t\tconst num = 100000;\n\n\t\tlet global = this._display.toGlobal({ x: 0, y: 0 });\n\t\tlet y = global.y;\n\t\tlet x = 0;\n\t\tlet h = this.axisLength();\n\t\tlet w = num;\n\n\t\tlet pointerOrientation: \"left\" | \"right\" = \"right\";\n\n\t\tif (this.get(\"opposite\")) {\n\t\t\tif (inside) {\n\t\t\t\tpointerOrientation = \"right\";\n\t\t\t\tx = global.x - num;\n\t\t\t\tw = num;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpointerOrientation = \"left\";\n\t\t\t\tx = global.x;\n\t\t\t\tw = num;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (inside) {\n\t\t\t\tpointerOrientation = \"left\";\n\t\t\t\tx = global.x;\n\t\t\t\tw = num;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpointerOrientation = \"right\";\n\t\t\t\tx = global.x - num;\n\t\t\t\tw = num;\n\t\t\t}\n\t\t}\n\n\t\tconst bounds = { left: x, right: x + w, top: y, bottom: y + h };\n\t\tconst oldBounds = tooltip.get(\"bounds\");\n\n\t\tif (!$utils.sameBounds(bounds, oldBounds)) {\n\t\t\ttooltip.set(\"bounds\", bounds);\n\t\t\ttooltip.set(\"pointerOrientation\", pointerOrientation);\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic _updateLC() {\n\t\tconst axis = this.axis;\n\t\tconst parent = axis.parent;\n\t\tif (parent) {\n\t\t\tconst h = parent.innerHeight();\n\t\t\tthis._lc = this.axisLength() / h;\n\t\t\tthis._ls = axis.y() / h;\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic toAxisPosition(position: number): number {\n\t\tconst start = this._start || 0;\n\t\tconst end = this._end || 1;\n\n\t\tposition -= this._ls;\n\n\t\tposition = position * (end - start) / this._lc;\n\n\t\tif (this.get(\"inversed\")) {\n\t\t\tposition = start + position;\n\t\t}\n\t\telse {\n\t\t\tposition = end - position;\n\t\t}\n\n\t\treturn position;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic toGlobalPosition(position: number): number {\n\t\tconst start = this._start || 0;\n\t\tconst end = this._end || 1;\n\n\t\tif (this.get(\"inversed\")) {\n\t\t\tposition = position - start;\n\t\t}\n\t\telse {\n\t\t\tposition = end - position;\n\t\t}\n\n\t\tposition = position / (end - start) * this._lc\n\n\t\tposition += this._ls;\n\n\t\treturn position;\n\t}\n\n\n\t/**\n\t * @ignore\n\t */\n\tpublic fixPosition(position: number) {\n\t\tif (!this.get(\"inversed\")) {\n\t\t\treturn 1 - position;\n\t\t}\n\t\treturn position;\n\t}\n\n}\n","import type { AxisRenderer } from \"./AxisRenderer\";\nimport type { AxisLabel } from \"./AxisLabel\";\nimport type { AxisTick } from \"./AxisTick\";\nimport type { Graphics } from \"../../../core/render/Graphics\";\nimport type { Grid } from \"./Grid\";\nimport type { AxisBullet } from \"./AxisBullet\";\nimport type { XYChart } from \"../XYChart\";\nimport type { XYSeries, IXYSeriesDataItem } from \"../series/XYSeries\";\nimport type { Animation } from \"../../../core/util/Entity\";\nimport type { Tooltip } from \"../../../core/render/Tooltip\";\nimport type { Root } from \"../../../core/Root\";\n\nimport { DataItem } from \"../../../core/render/Component\";\nimport { Component, IComponentSettings, IComponentPrivate, IComponentEvents, IComponentDataItem } from \"../../../core/render/Component\";\nimport { Container } from \"../../../core/render/Container\";\nimport { p100 } from \"../../../core/util/Percent\";\nimport { List } from \"../../../core/util/List\";\nimport { Rectangle } from \"../../../core/render/Rectangle\";\n\nimport * as $array from \"../../../core/util/Array\";\nimport * as $type from \"../../../core/util/Type\";\nimport * as $utils from \"../../../core/util/Utils\";\n\nexport interface IAxisSettings<R extends AxisRenderer> extends IComponentSettings {\n\t/**\n\t * A renderer object which is responsible of rendering visible axis elements.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/#Axis_renderer} for more info\n\t */\n\trenderer: R;\n\n\t/**\n\t * The initial relative zoom start position of the axis.\n\t *\n\t * E.g. stting it to `0.1` will pre-zoom axis to 10% from the start.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Pre_zooming_axes} for more info\n\t */\n\tstart?: number;\n\n\t/**\n\t * The initial relative zoom end position of the axis.\n\t *\n\t * E.g. stting it to `0.9` will pre-zoom axis to 10% from the end.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Pre_zooming_axes} for more info\n\t */\n\tend?: number;\n\n\t/**\n\t * Maximum number of times the scope of the axis could auto-zoom-in.\n\t *\n\t * This is to prevent axis jumping too drastically when scrolling/zooming.\n\t *\n\t * @default 1000\n\t */\n\tmaxZoomFactor?: number | null;\n\n\t/**\n\t * Maximum number of axis elements to show at a time.\n\t *\n\t * E.g. for a [[CategoryAxis]] that would be number of categories.\n\t * For a [[DateAxis]] it would be number of `baseInterval`.\n\t *\n\t * The axis will not allow to be zoomed out beyond this number.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Limiting_zoom_scope} for more info\n\t */\n\tmaxZoomCount?: number;\n\n\t/**\n\t * Minimum number of axis elements to show at a time.\n\t *\n\t * E.g. for a [[CategoryAxis]] that would be number of categories.\n\t * For a [[DateAxis]] it would be number of `baseInterval`.\n\t *\n\t * The axis will not allow to be zoomed in beyond this number.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Limiting_zoom_scope} for more info\n\t */\n\tminZoomCount?: number;\n\n\t/**\n\t * Base value of the axis.\n\t */\n\tbaseValue?: number;\n\n\t/**\n\t * If set to `false` the axis will be exempt when chart is panned\n\t * horizontally, and will keep its current position.`\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Excluding_axes_from_pan_or_zoom} for more info\n\t */\n\tpanX?: boolean;\n\n\t/**\n\t * If set to `false` the axis will be exempt when chart is panned\n\t * vertically, and will keep its current position.`\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Excluding_axes_from_pan_or_zoom} for more info\n\t */\n\tpanY?: boolean;\n\n\t/**\n\t * If set to `false` the axis will be exempt when chart is zoomed\n\t * horizontally, and will keep its current zoom/position.`\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Excluding_axes_from_pan_or_zoom} for more info\n\t */\n\tzoomX?: boolean;\n\n\t/**\n\t * If set to `false` the axis will be exempt when chart is zoomed\n\t * vertically, and will keep its current zoom/position.`\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Excluding_axes_from_pan_or_zoom} for more info\n\t */\n\tzoomY?: boolean;\n\n\t/**\n\t * Set this to `false` to prevent axis from being zoomed.\n\t */\n\tzoomable?: boolean;\n\n\t/**\n\t * A relative distance the axis is allowed to be zoomed/panned beyond its\n\t * actual scope.\n\t *\n\t * @default 0.1\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Over_zooming} for more info\n\t */\n\tmaxDeviation?: number;\n\n\t/**\n\t * [[Tooltip]] element to use for axis.\n\t */\n\ttooltip?: Tooltip;\n\n\t/**\n\t * `tooltipLocation` indicates\n\t * which relative place to snap to: `0` beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @default 0.5\n\t */\n\ttooltipLocation?: number;\n\n\t/**\n\t * Should tooltip snap to the `tooltipLocation` (`true`) or follow cursor.\n\t *\n\t * @default true\n\t */\n\tsnapTooltip?: boolean;\n\n\t/**\n\t * If set to `true` (default) the axis width will stay constant across all\n\t * zooms, even if actual length of all visible labels changes.\n\t *\n\t * @default true\n\t */\n\tfixAxisSize?: boolean;\n\n\t/**\n\t * A function that will be used to create bullets on each cell.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Axis_bullets} for more info\n\t */\n\tbullet?: (root: Root, axis: Axis<AxisRenderer>, dataItem: DataItem<IAxisDataItem>) => AxisBullet;\n\n\t/**\n\t * Specifies how axis fill should be drawn (if fill rule allows it).\n\t *\n\t * @since 5.14.0\n\t */\n\tminorAxisFillsEnabled?: boolean;\n\n\t/**\n\t * If set to `false`, the axis will not be zoomed out when the chart's zoom\n\t * out button is pressed, and vice versa when axis is zoomed, it will not\n\t * trigger the button to appear.\n\t *\n\t * @default true\n\t * @since 5.14.0\n\t */\n\tzoomOut?: boolean;\n}\n\nexport interface IAxisEvents extends IComponentEvents {\n}\n\nexport interface IAxisPrivate extends IComponentPrivate {\n\n\t/**\n\t * @ignore\n\t */\n\tname?: \"value\" | \"date\" | \"category\";\n\n\t/**\n\t * @ignore\n\t */\n\tupdateScrollbar?: boolean;\n\n\t/**\n\t * @ignore\n\t */\n\tmaxZoomFactor?: number | null;\n\n\t/**\n\t * Saves position to which tooltip points.\n\t */\n\ttooltipPosition?: number;\n\n\t/**\n\t * Width in pixels between grid lines (read-only).\n\t * \n\t * It might not be exact, as [[DateAxis]] can have grids at irregular\n\t * intervals.\n\t * \n\t * Could be used to detect when size changes and to adjust labels for them\n\t * not to overlap.\n\t */\n\tcellWidth?: number;\n\n}\n\nexport interface IAxisDataItem extends IComponentDataItem {\n\n\t/**\n\t * Axis label element.\n\t */\n\tlabel?: AxisLabel;\n\n\t/**\n\t * Tick element.\n\t */\n\ttick?: AxisTick;\n\n\t/**\n\t * Grid line element.\n\t */\n\tgrid?: Grid;\n\n\t/**\n\t * Axis fill element.\n\t */\n\taxisFill?: Graphics;\n\n\t/**\n\t * Bullet element.\n\t */\n\tbullet?: AxisBullet;\n\n\t/**\n\t * Indicates if this data item represents an axis range.\n\t */\n\tisRange?: boolean;\n\n\t/**\n\t * If set to `true`, the grid and axis fill of this data item will be drawn\n\t * above series.\n\t *\n\t * NOTE: this needs to be set **before** crating an axis range. Updating this\n\t * dynamically won't have any effect.\n\t *\n\t * NOTE: if you need all grid to be drawn above series, you can brig it to\n\t * front with `chart.gridContainer.toFront();`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-ranges/#Grid_fill_above_series} for more info\n\t * @default false\n\t */\n\tabove?: boolean\n\n}\n\n/**\n * A base class for all axes.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/#Adding_axes} for more info\n */\nexport abstract class Axis<R extends AxisRenderer> extends Component {\n\tpublic static className: string = \"Axis\";\n\tpublic static classNames: Array<string> = Component.classNames.concat([Axis.className]);\n\n\tdeclare public _settings: IAxisSettings<R>;\n\tdeclare public _privateSettings: IAxisPrivate;\n\tdeclare public _dataItemSettings: IAxisDataItem;\n\tdeclare public _events: IAxisEvents;\n\n\tdeclare public _seriesType: XYSeries;\n\n\tprotected _series: Array<this[\"_seriesType\"]> = [];\n\n\tpublic _isPanning: boolean = false;\n\n\t/**\n\t * Array of minor data items.\n\t */\n\tpublic minorDataItems: Array<DataItem<this[\"_dataItemSettings\"]>> = [];\n\n\t/**\n\t * A [[Container]] that holds all the axis label elements.\n\t *\n\t * @default Container.new()\n\t */\n\tpublic readonly labelsContainer: Container = this.children.push(Container.new(this._root, {}));\n\n\t/**\n\t * A [[Container]] that holds all the axis grid and fill elements.\n\t *\n\t * @default Container.new()\n\t */\n\tpublic readonly gridContainer: Container = Container.new(this._root, { width: p100, height: p100 });\n\n\t/**\n\t * A [[Container]] that holds axis grid elements which goes above the series.\n\t *\n\t * @default Container.new()\n\t */\n\tpublic readonly topGridContainer: Container = Container.new(this._root, { width: p100, height: p100 });\n\n\t/**\n\t * A [[Container]] that holds all the axis bullet elements.\n\t *\n\t * @default new Container\n\t */\n\tpublic readonly bulletsContainer: Container = this.children.push(Container.new(this._root, { isMeasured: false, width: p100, height: p100, position: \"absolute\" }));\n\n\t/**\n\t * A referenece to the the chart the axis belongs to.\n\t */\n\tpublic chart: XYChart | undefined;\n\n\tprotected _rangesDirty: Boolean = false;\n\n\tpublic _panStart: number = 0;\n\tpublic _panEnd: number = 1;\n\n\tprotected _sAnimation?: Animation<this[\"_settings\"][\"start\"]>;\n\tprotected _eAnimation?: Animation<this[\"_settings\"][\"end\"]>;\n\n\tpublic _skipSync: boolean = false;\n\n\t/**\n\t * A list of axis ranges.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-ranges/} for more info\n\t * @default new List()\n\t */\n\tpublic readonly axisRanges: List<DataItem<this[\"_dataItemSettings\"]>> = new List();\n\n\tpublic _seriesAxisRanges: Array<DataItem<this[\"_dataItemSettings\"]>> = [];\n\n\t/**\n\t * A control label that is invisible but is used to keep width the width of\n\t * the axis constant.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/#Ghost_label} for more info\n\t */\n\tpublic ghostLabel?: AxisLabel;\n\n\tprotected _cursorPosition: number = -1;\n\n\tprotected _snapToSeries?: Array<XYSeries>;\n\n\tpublic _seriesValuesDirty = false;\n\n\tpublic _seriesAdded = false;\n\n\t/**\n\t * A container above the axis that can be used to add additional stuff into\n\t * it. For example a legend, label, or an icon.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-headers/} for more info\n\t * @default new Container\n\t */\n\tpublic axisHeader: Container = this.children.push(Container.new(this._root, {\n\t\tthemeTags: [\"axis\", \"header\"],\n\t\tposition: \"absolute\",\n\t\tbackground: Rectangle.new(this._root, {\n\t\t\tthemeTags: [\"header\", \"background\"],\n\t\t\tfill: this._root.interfaceColors.get(\"background\")\n\t\t})\n\t}));\n\n\tpublic _bullets: { [index: string]: AxisBullet } = {};\n\n\tprotected _dispose() {\n\t\t// these could be in other parents, so disposing just in case\n\t\tthis.gridContainer.dispose();\n\t\tthis.topGridContainer.dispose();\n\t\tthis.bulletsContainer.dispose();\n\t\tthis.labelsContainer.dispose();\n\t\tthis.axisHeader.dispose();\n\t\tsuper._dispose();\n\t}\n\n\tprotected _afterNew() {\n\t\tsuper._afterNew();\n\n\t\tthis.setPrivate(\"updateScrollbar\", true);\n\n\t\tthis._disposers.push(this.axisRanges.events.onAll((change) => {\n\t\t\tif (change.type === \"clear\") {\n\t\t\t\t$array.each(change.oldValues, (dataItem) => {\n\t\t\t\t\tdataItem.dispose();\n\t\t\t\t});\n\t\t\t} else if (change.type === \"push\") {\n\t\t\t\tthis._processAxisRange(change.newValue, [\"range\"]);\n\t\t\t} else if (change.type === \"setIndex\") {\n\t\t\t\tthis._processAxisRange(change.newValue, [\"range\"]);\n\t\t\t} else if (change.type === \"insertIndex\") {\n\t\t\t\tthis._processAxisRange(change.newValue, [\"range\"]);\n\t\t\t} else if (change.type === \"removeIndex\") {\n\t\t\t\tthis.disposeDataItem(change.oldValue);\n\t\t\t} else if (change.type === \"moveIndex\") {\n\t\t\t\tthis._processAxisRange(change.value, [\"range\"]);\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"Unknown IStreamEvent type\");\n\t\t\t}\n\t\t}))\n\n\t\tconst renderer = this.get(\"renderer\");\n\t\tif (renderer) {\n\t\t\trenderer.axis = this;\n\t\t\trenderer.processAxis();\n\t\t}\n\t\tthis.children.push(renderer);\n\t\tthis._createGhostLabel();\n\t}\n\n\tprotected _createGhostLabel() {\n\t\tconst renderer = this.get(\"renderer\");\n\t\tconst ghostLabel = renderer.makeLabel(new DataItem(this, undefined, {}), []);\n\t\tghostLabel.adapters.disable(\"text\");\n\t\tghostLabel.setAll({ opacity: 0, tooltipText: undefined, tooltipHTML: undefined, interactive: false });\n\t\tghostLabel.events.disable();\n\t\tthis.ghostLabel = ghostLabel;\n\t}\n\n\tprotected _updateFinals(_start: number, _end: number) {\n\n\t}\n\n\t/**\n\t * Zooms the axis to relative locations.\n\t *\n\t * Both `start` and `end` are relative: 0 means start of the axis, 1 - end.\n\t *\n\t * @param   start     Relative start\n\t * @param   end       Relative end\n\t * @param   duration  Duration of the zoom animation in milliseconds\n\t * @return            Zoom animation\n\t */\n\tpublic zoom(start: number, end: number, duration?: number, priority?: \"start\" | \"end\"): Animation<this[\"_settings\"][\"start\"]> | Animation<this[\"_settings\"][\"end\"]> | undefined {\n\t\tif (this.get(\"zoomable\", true)) {\n\n\t\t\tthis._updateFinals(start, end);\n\n\t\t\tif (this.get(\"start\") !== start || this.get(\"end\") != end) {\n\t\t\t\tlet sAnimation = this._sAnimation;\n\t\t\t\tlet eAnimation = this._eAnimation;\n\n\t\t\t\tif (start > end) {\n\t\t\t\t\t[start, end] = [end, start];\n\t\t\t\t}\n\n\t\t\t\tlet maxDeviation = this.get(\"maxDeviation\", 0.5) * Math.min(1, (end - start));\n\n\t\t\t\tif (start < - maxDeviation) {\n\t\t\t\t\tstart = -maxDeviation;\n\t\t\t\t}\n\n\t\t\t\tif (end > 1 + maxDeviation) {\n\t\t\t\t\tend = 1 + maxDeviation;\n\t\t\t\t}\n\n\t\t\t\tlet maxZoomFactor = this.getPrivate(\"maxZoomFactor\", this.get(\"maxZoomFactor\", 100));\n\t\t\t\tlet maxZoomFactorReal = maxZoomFactor;\n\n\t\t\t\tif (!$type.isNumber(duration)) {\n\t\t\t\t\tduration = this.get(\"interpolationDuration\", 0);\n\t\t\t\t}\n\n\t\t\t\tif (!priority) {\n\t\t\t\t\tpriority = \"end\";\n\t\t\t\t}\n\n\t\t\t\tif (end === 1 && start !== 0) {\n\t\t\t\t\tif (start < this.get(\"start\", 0)) {\n\t\t\t\t\t\tpriority = \"start\";\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tpriority = \"end\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (start === 0 && end !== 1) {\n\t\t\t\t\tif (end > this.get(\"end\", 1)) {\n\t\t\t\t\t\tpriority = \"end\";\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tpriority = \"start\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet minZoomCount = this.get(\"minZoomCount\", 0);\n\t\t\t\tconst dataItems = this.dataItems;\n\n\t\t\t\tif (dataItems && dataItems.length < minZoomCount) {\n\t\t\t\t\tminZoomCount = dataItems.length;\n\t\t\t\t}\n\n\t\t\t\tlet maxZoomCount = this.get(\"maxZoomCount\", Infinity);\n\n\t\t\t\tif ($type.isNumber(minZoomCount)) {\n\t\t\t\t\tmaxZoomFactor = maxZoomFactorReal / minZoomCount;\n\t\t\t\t}\n\n\t\t\t\tlet minZoomFactor: number = 1;\n\n\t\t\t\tif ($type.isNumber(maxZoomCount)) {\n\t\t\t\t\tminZoomFactor = maxZoomFactorReal / maxZoomCount;\n\t\t\t\t}\n\n\t\t\t\t// need one more\n\t\t\t\tif (start > end) {\n\t\t\t\t\t[start, end] = [end, start];\n\t\t\t\t}\n\n\t\t\t\t// most likely we are dragging left scrollbar grip here, so we tend to modify end\n\t\t\t\tif (priority === \"start\") {\n\t\t\t\t\tif (maxZoomCount > 0) {\n\t\t\t\t\t\t// add to the end\n\t\t\t\t\t\tif (1 / (end - start) < minZoomFactor) {\n\t\t\t\t\t\t\tend = start + 1 / minZoomFactor;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// add to the end\n\t\t\t\t\tif (1 / (end - start) > maxZoomFactor) {\n\t\t\t\t\t\tend = start + 1 / maxZoomFactor;\n\t\t\t\t\t}\n\t\t\t\t\t//unless end is > 0\n\t\t\t\t\tif (end > 1 && end - start < 1 / maxZoomFactor) {\n\t\t\t\t\t\t//end = 1;\n\t\t\t\t\t\tstart = end - 1 / maxZoomFactor;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// most likely we are dragging right, so we modify left\n\t\t\t\telse {\n\t\t\t\t\tif (maxZoomCount > 0) {\n\t\t\t\t\t\t// add to the end\n\t\t\t\t\t\tif (1 / (end - start) < minZoomFactor) {\n\t\t\t\t\t\t\tstart = end - 1 / minZoomFactor;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// remove from start\n\t\t\t\t\tif (1 / (end - start) > maxZoomFactor) {\n\t\t\t\t\t\tstart = end - 1 / maxZoomFactor;\n\t\t\t\t\t}\n\t\t\t\t\tif (start < 0 && end - start < 1 / maxZoomFactor) {\n\t\t\t\t\t\t//start = 0;\n\t\t\t\t\t\tend = start + 1 / maxZoomFactor;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\tif (1 / (end - start) > maxZoomFactor) {\n\t\t\t\t\tend = start + 1 / maxZoomFactor;\n\t\t\t\t}\n\n\t\t\t\tif (1 / (end - start) > maxZoomFactor) {\n\t\t\t\t\tstart = end - 1 / maxZoomFactor;\n\t\t\t\t}\n\n\t\t\t\tif (maxZoomCount != null && minZoomCount != null && (start == this.get(\"start\") && end == this.get(\"end\"))) {\n\t\t\t\t\tconst chart = this.chart;\n\t\t\t\t\tif (chart) {\n\t\t\t\t\t\tchart._handleAxisSelection(this, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (((sAnimation && sAnimation.playing && sAnimation.to == start) || this.get(\"start\") == start) && ((eAnimation && eAnimation.playing && eAnimation.to == end) || this.get(\"end\") == end)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (duration > 0) {\n\t\t\t\t\tlet easing = this.get(\"interpolationEasing\");\n\t\t\t\t\tlet sAnimation, eAnimation;\n\t\t\t\t\tif (this.get(\"start\") != start) {\n\t\t\t\t\t\tsAnimation = this.animate({ key: \"start\", to: start, duration: duration, easing: easing });\n\t\t\t\t\t}\n\t\t\t\t\tif (this.get(\"end\") != end) {\n\t\t\t\t\t\teAnimation = this.animate({ key: \"end\", to: end, duration: duration, easing: easing });\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._sAnimation = sAnimation;\n\t\t\t\t\tthis._eAnimation = eAnimation;\n\n\t\t\t\t\tif (sAnimation) {\n\t\t\t\t\t\treturn sAnimation;\n\t\t\t\t\t}\n\t\t\t\t\telse if (eAnimation) {\n\t\t\t\t\t\treturn eAnimation;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.set(\"start\", start);\n\t\t\t\t\tthis.set(\"end\", end);\n\t\t\t\t\tthis.root.events.once(\"frameended\", () => {\n\t\t\t\t\t\tthis.markDirtyKey(\"start\");\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (this._sAnimation) {\n\t\t\t\t\tthis._sAnimation.stop();\n\t\t\t\t}\n\t\t\t\tif (this._eAnimation) {\n\t\t\t\t\tthis._eAnimation.stop();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * A list of series using this axis.\n\t *\n\t * @return Series\n\t */\n\tpublic get series(): Array<this[\"_seriesType\"]> {\n\t\treturn this._series;\n\t}\n\n\n\tpublic _processAxisRange(dataItem: DataItem<this[\"_dataItemSettings\"]>, themeTags: Array<string>) {\n\t\tdataItem.setRaw(\"isRange\", true);\n\t\tthis._createAssets(dataItem, themeTags);\n\t\tthis._rangesDirty = true;\n\t\tthis._prepareDataItem(dataItem);\n\n\t\tconst above = dataItem.get(\"above\");\n\t\tconst container = this.topGridContainer;\n\n\t\tconst grid = dataItem.get(\"grid\");\n\t\tif (above && grid) {\n\t\t\tcontainer.children.moveValue(grid);\n\t\t}\n\n\t\tconst fill = dataItem.get(\"axisFill\");\n\t\tif (above && fill) {\n\t\t\tcontainer.children.moveValue(fill);\n\t\t}\n\t}\n\n\tpublic _prepareDataItem(_dataItem: DataItem<this[\"_dataItemSettings\"]>, _index?: number) { }\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract getX(_value: any, _location: number, baseValue?: any): number;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract getY(_value: any, _location: number, baseValue?: any): number;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract getDataItemCoordinateX(_dataItem: DataItem<IXYSeriesDataItem>, _field: string, _cellLocation?: number, _axisLocation?: number): number;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract getDataItemCoordinateY(_dataItem: DataItem<IXYSeriesDataItem>, _field: string, _cellLocation?: number, _axisLocation?: number): number;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract getDataItemPositionX(_dataItem: DataItem<IXYSeriesDataItem>, _field: string, _cellLocation?: number, _axisLocation?: number, exactLocation?: boolean): number;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract getDataItemPositionY(_dataItem: DataItem<IXYSeriesDataItem>, _field: string, _cellLocation?: number, _axisLocation?: number, exactLocation?: boolean): number;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic markDirtyExtremes() {\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic markDirtySelectionExtremes() {\n\t}\n\n\tpublic _calculateTotals() {\n\t}\n\n\tprotected _updateAxisRanges() {\n\t\tthis._bullets = {};\n\t\tthis.axisRanges.each((axisRange) => {\n\t\t\tthis._prepareDataItem(axisRange);\n\t\t})\n\n\t\t$array.each(this._seriesAxisRanges, (axisRange) => {\n\t\t\tthis._prepareDataItem(axisRange);\n\t\t})\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract baseValue(): any;\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tconst ghostLabel = this.ghostLabel;\n\t\tif (ghostLabel) {\n\t\t\tif (this.get(\"fixAxisSize\")) {\n\t\t\t\tghostLabel.set(\"visible\", true);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tghostLabel.set(\"visible\", false);\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"start\") || this.isDirty(\"end\")) {\n\t\t\tconst chart = this.chart;\n\t\t\tif (chart) {\n\t\t\t\tchart._updateCursor();\n\t\t\t}\n\n\t\t\tlet start = this.get(\"start\", 0);\n\t\t\tlet end = this.get(\"end\", 1);\n\n\t\t\tlet maxDeviation = this.get(\"maxDeviation\", 0.5) * Math.min(1, (end - start));\n\n\t\t\tif (start < -maxDeviation) {\n\t\t\t\tlet delta = start + maxDeviation;\n\t\t\t\tstart = -maxDeviation;\n\t\t\t\tthis.setRaw(\"start\", start);\n\t\t\t\tif (this.isDirty(\"end\")) {\n\t\t\t\t\tthis.setRaw(\"end\", end - delta);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (end > 1 + maxDeviation) {\n\t\t\t\tlet delta = end - 1 - maxDeviation;\n\t\t\t\tend = 1 + maxDeviation;\n\t\t\t\tthis.setRaw(\"end\", end);\n\n\t\t\t\tif (this.isDirty(\"start\")) {\n\t\t\t\t\tthis.setRaw(\"start\", start - delta);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\tconst renderer = this.get(\"renderer\");\n\t\trenderer._start = this.get(\"start\")!;\n\t\trenderer._end = this.get(\"end\")!;\n\t\trenderer._inversed = renderer.get(\"inversed\", false);\n\t\trenderer._axisLength = renderer.axisLength() / (renderer._end - renderer._start);\n\t\trenderer._updateLC();\n\n\t\tif (this.isDirty(\"tooltip\")) {\n\t\t\tconst tooltip = this.get(\"tooltip\");\n\t\t\tif (tooltip) {\n\t\t\t\tconst rendererTags = renderer.get(\"themeTags\");\n\t\t\t\ttooltip.addTag(\"axis\");\n\t\t\t\ttooltip.addTag(this.className.toLowerCase());\n\t\t\t\ttooltip._applyThemes();\n\n\t\t\t\tif (rendererTags) {\n\t\t\t\t\ttooltip.set(\"themeTags\", $utils.mergeTags(tooltip.get(\"themeTags\"), rendererTags));\n\t\t\t\t\ttooltip.label._applyThemes();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _updateTooltipBounds() {\n\t\tconst tooltip = this.get(\"tooltip\")!;\n\t\tif (tooltip) {\n\t\t\tthis.get(\"renderer\").updateTooltipBounds(tooltip);\n\t\t}\n\t}\n\n\tpublic _updateBounds() {\n\t\tsuper._updateBounds();\n\t\tthis._updateTooltipBounds();\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic processChart(chart: XYChart) {\n\t\tthis.chart = chart;\n\t\tconst renderer = this.get(\"renderer\");\n\n\t\trenderer.chart = chart;\n\t\tchart.gridContainer.children.push(this.gridContainer);\n\t\tchart.topGridContainer.children.push(this.topGridContainer);\n\n\t\tchart.axisHeadersContainer.children.push(this.axisHeader);\n\n\t\tthis.on(\"start\", () => {\n\t\t\tchart._handleAxisSelection(this);\n\t\t});\n\t\tthis.on(\"end\", () => {\n\t\t\tchart._handleAxisSelection(this);\n\t\t});\n\n\t\tchart.plotContainer.onPrivate(\"width\", () => {\n\t\t\tthis.markDirtySize();\n\t\t});\n\t\tchart.plotContainer.onPrivate(\"height\", () => {\n\t\t\tthis.markDirtySize();\n\t\t});\n\n\t\tchart.processAxis(this);\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic hideDataItem(dataItem: DataItem<IAxisDataItem>): Promise<void> {\n\t\tthis._toggleFHDataItem(dataItem, true);\n\t\treturn super.hideDataItem(dataItem);\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic showDataItem(dataItem: DataItem<IAxisDataItem>): Promise<void> {\n\t\tthis._toggleFHDataItem(dataItem, false);\n\t\treturn super.showDataItem(dataItem);\n\t}\n\n\tpublic _toggleFHDataItem(dataItem: DataItem<IAxisDataItem>, forceHidden: boolean) {\n\t\tconst fh = \"forceHidden\";\n\t\tconst label = dataItem.get(\"label\");\n\t\tif (label) {\n\t\t\tlabel.set(fh, forceHidden);\n\t\t}\n\t\tconst grid = dataItem.get(\"grid\");\n\t\tif (grid) {\n\t\t\tgrid.set(fh, forceHidden);\n\t\t}\n\t\tconst tick = dataItem.get(\"tick\");\n\t\tif (tick) {\n\t\t\ttick.set(fh, forceHidden);\n\t\t}\n\t\tconst axisFill = dataItem.get(\"axisFill\");\n\t\tif (axisFill) {\n\t\t\taxisFill.set(fh, forceHidden);\n\t\t}\n\n\t\tconst bullet = dataItem.get(\"bullet\");\n\t\tif (bullet) {\n\t\t\tconst sprite = bullet.get(\"sprite\");\n\t\t\tif (sprite) {\n\t\t\t\tsprite.set(fh, forceHidden);\n\t\t\t}\n\t\t}\n\t}\n\n\n\tpublic _toggleDataItem(dataItem: DataItem<IAxisDataItem>, visible: boolean) {\n\t\tconst label = dataItem.get(\"label\");\n\t\tconst v = \"visible\";\n\t\tif (label) {\n\t\t\tlabel.setPrivate(v, visible);\n\t\t}\n\t\tconst grid = dataItem.get(\"grid\");\n\t\tif (grid) {\n\t\t\tgrid.setPrivate(v, visible);\n\t\t}\n\t\tconst tick = dataItem.get(\"tick\");\n\t\tif (tick) {\n\t\t\ttick.setPrivate(v, visible);\n\t\t}\n\t\tconst axisFill = dataItem.get(\"axisFill\");\n\t\tif (axisFill) {\n\t\t\taxisFill.setPrivate(v, visible);\n\t\t}\n\n\t\tconst bullet = dataItem.get(\"bullet\");\n\t\tif (bullet) {\n\t\t\tconst sprite = bullet.get(\"sprite\");\n\t\t\tif (sprite) {\n\t\t\t\tsprite.setPrivate(v, visible);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract basePosition(): number;\n\n\tpublic _createAssets(dataItem: DataItem<this[\"_dataItemSettings\"]>, tags: Array<string>, minor?: boolean) {\n\t\tconst renderer = this.get(\"renderer\");\n\t\tlet m = \"minor\";\n\n\t\tconst label = dataItem.get(\"label\");\n\t\tif (!label) {\n\t\t\trenderer.makeLabel(dataItem, tags);\n\t\t}\n\t\telse {\n\t\t\tlet themeTags = label.get(\"themeTags\");\n\t\t\tlet remove = false;\n\t\t\tif (minor) {\n\t\t\t\tif (themeTags?.indexOf(m) == -1) {\n\t\t\t\t\tremove = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (themeTags?.indexOf(m) != -1) {\n\t\t\t\t\tremove = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (remove) {\n\t\t\t\tlabel.parent?.children.removeValue(label);\n\t\t\t\trenderer.makeLabel(dataItem, tags);\n\t\t\t\tlabel.dispose();\n\t\t\t\trenderer.labels.removeValue(label);\n\t\t\t}\n\t\t}\n\n\t\tconst grid = dataItem.get(\"grid\");\n\n\t\tif (!grid) {\n\t\t\trenderer.makeGrid(dataItem, tags);\n\t\t}\n\t\telse {\n\t\t\tlet themeTags = grid.get(\"themeTags\");\n\t\t\tlet remove = false;\n\t\t\tif (minor) {\n\t\t\t\tif (themeTags?.indexOf(m) == -1) {\n\t\t\t\t\tremove = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (themeTags?.indexOf(m) != -1) {\n\t\t\t\t\tremove = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (remove) {\n\t\t\t\tgrid.parent?.children.removeValue(grid);\n\t\t\t\trenderer.makeGrid(dataItem, tags);\n\t\t\t\tgrid.dispose();\n\t\t\t\trenderer.grid.removeValue(grid);\n\t\t\t}\n\t\t}\n\n\t\tconst tick = dataItem.get(\"tick\");\n\t\tif (!tick) {\n\t\t\trenderer.makeTick(dataItem, tags);\n\t\t}\n\t\telse {\n\t\t\tlet remove = false;\n\t\t\tlet themeTags = tick.get(\"themeTags\");\n\t\t\tif (minor) {\n\t\t\t\tif (themeTags?.indexOf(m) == -1) {\n\t\t\t\t\tremove = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (themeTags?.indexOf(m) != -1) {\n\t\t\t\t\tremove = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (remove) {\n\t\t\t\ttick.parent?.children.removeValue(tick);\n\t\t\t\trenderer.makeTick(dataItem, tags);\n\t\t\t\ttick.dispose();\n\t\t\t\trenderer.ticks.removeValue(tick);\n\t\t\t}\n\t\t}\n\n\t\tif (!minor && !dataItem.get(\"axisFill\")) {\n\t\t\trenderer.makeAxisFill(dataItem, tags);\n\t\t}\n\t\telse if (minor && !dataItem.get(\"axisFill\") && this.get(\"minorAxisFillsEnabled\")) {\n\t\t\trenderer.makeAxisFill(dataItem, tags);\n\t\t}\n\n\t\tthis._processBullet(dataItem);\n\t}\n\n\tprotected _processBullet(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tlet bullet = dataItem.get(\"bullet\");\n\t\tlet axisBullet = this.get(\"bullet\");\n\n\t\tif (!bullet && axisBullet && !dataItem.get(\"isRange\")) {\n\t\t\tbullet = axisBullet(this._root, this, dataItem);\n\t\t}\n\n\t\tif (bullet) {\n\t\t\tbullet.axis = this;\n\t\t\tconst sprite = bullet.get(\"sprite\");\n\n\t\t\tif (sprite) {\n\t\t\t\tsprite._setDataItem(dataItem);\n\t\t\t\tdataItem.setRaw(\"bullet\", bullet);\n\t\t\t\tif (!sprite.parent) {\n\t\t\t\t\tthis.bulletsContainer.children.push(sprite);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _afterChanged() {\n\t\tsuper._afterChanged();\n\n\t\tconst chart = this.chart;\n\t\tif (chart) {\n\t\t\tchart._updateChartLayout();\n\t\t\tchart.axisHeadersContainer.markDirtySize();\n\t\t}\n\n\t\tthis.get(\"renderer\")._updatePositions();\n\n\t\tthis._seriesAdded = false;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic disposeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.disposeDataItem(dataItem);\n\t\tconst renderer = this.get(\"renderer\");\n\t\tconst label = dataItem.get(\"label\");\n\t\tif (label) {\n\t\t\trenderer.labels.removeValue(label);\n\t\t\tlabel.dispose();\n\t\t}\n\t\tconst tick = dataItem.get(\"tick\");\n\t\tif (tick) {\n\t\t\trenderer.ticks.removeValue(tick);\n\t\t\ttick.dispose();\n\t\t}\n\t\tconst grid = dataItem.get(\"grid\");\n\t\tif (grid) {\n\t\t\trenderer.grid.removeValue(grid);\n\t\t\tgrid.dispose();\n\t\t}\n\t\tconst axisFill = dataItem.get(\"axisFill\");\n\t\tif (axisFill) {\n\t\t\trenderer.axisFills.removeValue(axisFill);\n\t\t\taxisFill.dispose();\n\t\t}\n\t\tconst bullet = dataItem.get(\"bullet\");\n\n\t\tif (bullet) {\n\t\t\tbullet.dispose();\n\t\t}\n\t}\n\n\tprotected _updateGhost() {\n\t\tthis.setPrivate(\"cellWidth\", this.getCellWidthPosition() * this.get(\"renderer\").axisLength());\n\t\tconst ghostLabel = this.ghostLabel;\n\t\tif (ghostLabel) {\n\t\t\tif (!ghostLabel.isHidden()) {\n\t\t\t\tconst bounds = ghostLabel.localBounds();\n\t\t\t\tconst gWidth = Math.ceil(bounds.right - bounds.left);\n\t\t\t\tlet text = ghostLabel.get(\"text\");\n\t\t\t\t$array.each(this.dataItems, (dataItem) => {\n\t\t\t\t\tconst label = dataItem.get(\"label\");\n\t\t\t\t\tif (label && !label.isHidden()) {\n\t\t\t\t\t\tconst bounds = label.localBounds();\n\t\t\t\t\t\tconst w = Math.ceil(bounds.right - bounds.left);\n\n\t\t\t\t\t\tif (w > gWidth) {\n\t\t\t\t\t\t\ttext = label.text._getText();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tghostLabel.set(\"text\", text);\n\t\t\t}\n\t\t\tlet start = this.get(\"start\", 0);\n\t\t\tlet end = this.get(\"end\", 1);\n\t\t\tthis.get(\"renderer\").updateLabel(ghostLabel, start + (end - start) * 0.5);\n\t\t}\n\t}\n\n\tpublic _handleCursorPosition(position: number, snapToSeries?: Array<XYSeries>) {\n\t\tconst renderer = this.get(\"renderer\");\n\t\tposition = renderer.toAxisPosition(position);\n\n\t\tthis._cursorPosition = position;\n\t\tthis._snapToSeries = snapToSeries;\n\n\t\tthis.updateTooltip();\n\t}\n\n\t/**\n\t * Can be called when axis zoom changes and you need to update tooltip\n\t * position.\n\t */\n\tpublic updateTooltip() {\n\t\tconst snapToSeries = this._snapToSeries;\n\t\tlet position = this._cursorPosition;\n\t\tconst tooltip = this.get(\"tooltip\")!;\n\t\tconst renderer = this.get(\"renderer\");\n\n\t\tif ($type.isNumber(position)) {\n\n\t\t\t$array.each(this.series, (series) => {\n\t\t\t\tif (series.get(\"baseAxis\") === this) {\n\t\t\t\t\tconst dataItem = this.getSeriesItem(series, position!, this.get(\"tooltipLocation\"));\n\n\t\t\t\t\tif (snapToSeries && snapToSeries.indexOf(series) != -1) {\n\t\t\t\t\t\tseries.updateLegendMarker(dataItem);\n\t\t\t\t\t\tseries.updateLegendValue(dataItem);\n\t\t\t\t\t\tseries._settings.tooltipDataItem = dataItem;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tseries.showDataItemTooltip(dataItem);\n\t\t\t\t\t\tseries.setRaw(\"tooltipDataItem\", dataItem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tif (this.get(\"snapTooltip\")) {\n\t\t\t\tposition = this.roundAxisPosition(position, this.get(\"tooltipLocation\", 0.5));\n\t\t\t}\n\n\t\t\tthis.setPrivateRaw(\"tooltipPosition\", position);\n\n\t\t\tif (tooltip) {\n\t\t\t\trenderer.updateTooltipBounds(tooltip);\n\n\t\t\t\tif (!$type.isNaN(position)) {\n\t\t\t\t\tthis._updateTooltipText(tooltip, position);\n\t\t\t\t\trenderer.positionTooltip(tooltip, position);\n\n\t\t\t\t\tif (position < this.get(\"start\", 0) || position > this.get(\"end\", 1)) {\n\t\t\t\t\t\ttooltip.hide(0);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\ttooltip.show(0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttooltip.hide(0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _updateTooltipText(tooltip: Tooltip, position: number) {\n\t\ttooltip.label.set(\"text\", this.getTooltipText(position));\n\t}\n\n\t/**\n\t * Returns text to be used in an axis tooltip for specific relative position.\n\t *\n\t * @param   position        Position\n\t * @param   adjustPosition  Adjust position\n\t * @return                  Tooltip text\n\t */\n\tpublic abstract getTooltipText(position: number, adjustPosition?: boolean): string | undefined;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic roundAxisPosition(position: number, _location: number): number {\n\t\treturn position;\n\t}\n\n\tpublic _handleSeriesRemoved() {\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic handleCursorShow() {\n\t\tlet tooltip = this.get(\"tooltip\");\n\t\tif (tooltip) {\n\t\t\ttooltip.show();\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic handleCursorHide() {\n\t\tlet tooltip = this.get(\"tooltip\");\n\t\tif (tooltip) {\n\t\t\ttooltip.hide();\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic processSeriesDataItem(_dataItem: DataItem<IXYSeriesDataItem>, _fields: Array<string>) {\n\n\t}\n\n\tpublic _clearDirty() {\n\t\tsuper._clearDirty();\n\t\tthis._sizeDirty = false;\n\t\tthis._rangesDirty = false;\n\t}\n\n\t/**\n\t * Converts pixel coordinate to a relative position on axis.\n\t *\n\t * @param   coordinate  Coordinate\n\t * @return              Relative position\n\t */\n\tpublic coordinateToPosition(coordinate: number): number {\n\t\tconst renderer = this.get(\"renderer\");\n\t\treturn renderer.toAxisPosition(coordinate / renderer.axisLength());\n\t}\n\n\t/**\n\t * Converts relative position of the plot area to relative position of the\n\t * axis with zoom taken into account.\n\t *\n\t * @param position Position\n\t * @return Relative position\n\t */\n\tpublic toAxisPosition(position: number): number {\n\t\treturn this.get(\"renderer\").toAxisPosition(position);\n\t}\n\n\t/**\n\t * Converts relative position of the axis to a global position taking current\n\t * zoom into account (opposite to what `toAxisPosition` does).\n\t *\n\t * @since 5.4.2\n\t * @param position Position\n\t * @return Global position\n\t */\n\tpublic toGlobalPosition(position: number): number {\n\t\treturn this.get(\"renderer\").toGlobalPosition(position);\n\t}\n\n\t/**\n\t * Adjusts position with inversed taken into account.\n\t *\n\t * @ignore\n\t */\n\tpublic fixPosition(position: number): number {\n\t\treturn this.get(\"renderer\").fixPosition(position);\n\t}\n\n\t/**\n\t * Returns a data item from series that is closest to the `position`.\n\t *\n\t * @param   series    Series\n\t * @param   position  Relative position\n\t * @return            Data item\n\t */\n\tpublic abstract getSeriesItem(series: XYSeries, position: number, location?: number): DataItem<IXYSeriesDataItem> | undefined\n\n\t/**\n\t * @ignore\n\t */\n\tpublic shouldGap(_dataItem: DataItem<IXYSeriesDataItem>, _nextItem: DataItem<IXYSeriesDataItem>, _autoGapCount: number, _fieldName: string): boolean {\n\t\treturn false;\n\t}\n\n\t/**\n\t * Creates and returns an axis range object.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-ranges/} for more info\n\t * @param   axisDataItem  Axis data item\n\t * @return                Axis range\n\t */\n\tpublic createAxisRange(axisDataItem: DataItem<IAxisDataItem>): DataItem<this[\"_dataItemSettings\"]> {\n\t\treturn this.axisRanges.push(axisDataItem);\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic _groupSeriesData(_series: XYSeries) { }\n\n\t/**\n\t * Returns relative position between two grid lines of the axis.\n\t *\n\t * @return Position\n\t */\n\tpublic getCellWidthPosition(): number {\n\t\treturn 0.05;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract nextPosition(_count?: number): number\n}\n","import type { AxisRenderer } from \"./AxisRenderer\";\nimport type { IXYSeriesDataItem, XYSeries } from \"../series/XYSeries\";\n\nimport { DataItem } from \"../../../core/render/Component\";\nimport { Axis, IAxisSettings, IAxisPrivate, IAxisDataItem, IAxisEvents } from \"./Axis\";\nimport { MultiDisposer } from \"../../../core/util/Disposer\";\n\nimport * as $type from \"../../../core/util/Type\";\nimport * as $array from \"../../../core/util/Array\";\nimport * as $math from \"../../../core/util/Math\";\nimport * as $utils from \"../../../core/util/Utils\";\n\nexport interface IValueAxisSettings<R extends AxisRenderer> extends IAxisSettings<R> {\n\n\t/**\n\t * Override minimum value for the axis scale.\n\t *\n\t * NOTE: the axis might modify the minimum value to fit into its scale better,\n\t * unless `strictMinMax` is set to `true`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/#Custom_scope} for more info\n\t */\n\tmin?: number;\n\n\t/**\n\t * Override maximum value for the axis scale.\n\t *\n\t * NOTE: the axis might modify the maximum value to fit into its scale better,\n\t * unless `strictMinMax` is set to `true`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/#Custom_scope} for more info\n\t */\n\tmax?: number;\n\n\t/**\n\t * Force axis scale to be precisely at values as set in `min` and/or `max`.\n\t *\n\t * In case `min` and/or `max` is not set, the axis will fix its scale to\n\t * precise lowest and highest values available through all of the series\n\t * attached to it.\n\t *\n\t * This effectively locks the axis from auto-zooming itself when chart\n\t * is zoomed in.\n\t *\n\t * If you need to zoom to actual low/high values within currently visible\n\t * scope, use `strictMinMaxSelection` instead.\n\t *\n\t * Use `extraMin` and `extraMax` to add extra \"padding\".\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/#Custom_scope} for more info\n\t */\n\tstrictMinMax?: boolean;\n\n\t/**\n\t * Force axis to auto-zoom to exact lowest and highest values from attached\n\t * series' data items within currently visible range.\n\t * \n\t * This is a good feature when your series is plotted from derivative values,\n\t * like `valueYChangeSelection` as it helps to avoid frequent jumping of\n\t * series to adjusted min and max of the axis.\n\t * \n\t * This will not work if strictMinMax is set to true (the axis will not zoom at all in this case).\n\t * \n\t * Use `extraMin` and `extraMax` to add extra \"padding\".\n\t *\n\t * @since 5.1.11\n\t */\n\tstrictMinMaxSelection?: boolean;\n\n\t/**\n\t * If set to `true` axis will use logarithmic scale.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/#Logarithmic_scale} for more info\n\t */\n\tlogarithmic?: boolean;\n\n\t/**\n\t * Treat zero values as some other value.\n\t *\n\t * Useful in situations where zero would result in error, i.e. logarithmic\n\t * scale.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/#Logarithmic_scale} for more info\n\t */\n\ttreatZeroAs?: number;\n\n\t/**\n\t * Relative extension to the automatically-calculated minimum value of the\n\t * axis scale.\n\t *\n\t * E..g. `0.1` will extend the scale by 10%, so if max value is `1000` and\n\t * minimum value is `0`, the new minimum value will be `-100`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/#Relative_scope_extension} for more info\n\t */\n\textraMin?: number;\n\n\t/**\n\t * Relative extension to the automatically-calculated maximum value of the\n\t * axis scale.\n\t *\n\t * E..g. `0.1` will extend the scale by 10%, so if max value is `1000`, the\n\t * axis will now show maximum value of `1100`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/#Relative_scope_extension} for more info\n\t */\n\textraMax?: number;\n\n\t/**\n\t * Base value, which indicates the threshold between \"positive\" and \"negative\"\n\t * values.\n\t *\n\t * @default 0\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/#Base_value} for more info\n\t */\n\tbaseValue?: number;\n\n\t/**\n\t * Maximum number of decimals to allow in axis labels.\n\t *\n\t * This setting not only affects formatting of the labels, but also where and\n\t * how many grid/labels are placed on the axis.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/#Label_format} for more info\n\t */\n\tmaxPrecision?: number;\n\n\t/**\n\t * A function that can be used to specify how to configure axis fills.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Axis_fills} for more info\n\t */\n\tfillRule?: (dataItem: DataItem<IValueAxisDataItem>) => void;\n\n\t/**\n\t * Number format to use for axis labels.\n\t *\n\t * If not set, will use format set in global number formatter.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/#Label_format} for more info\n\t */\n\tnumberFormat?: string;\n\n\t/**\n\t * A numeric format used for numbers displayed in axis tooltip.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/#Tooltip_number_format} for more info\n\t */\n\ttooltipNumberFormat?: string | Intl.NumberFormatOptions;\n\n\t/**\n\t * If set, will use greater precision for the axis tooltip than the one for\n\t * axis' actual labels.\n\t *\n\t * E.g. if axis displays labels with one decimal (`1.0`, `1.1`, `1.2`) setting\n\t * this setting to `1` would allow two decimals in axis tooltip, e.g. `1.15`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/#Tooltip_number_format} for more info\n\t */\n\textraTooltipPrecision?: number;\n\n\t/**\n\t * If your series relies on dynamically calculated values, like value\n\t * changes, percents, or total sums, set this to `true`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/#Calculated_values} for more info\n\t */\n\tcalculateTotals?: boolean;\n\n\t/**\n\t * This setting can be set to an instance of another [[ValueAxis]].\n\t *\n\t * If set the grid of this axis will be synced with grid of the target axis.\n\t *\n\t * NOTE: this is not 100% guaranteed to work. In some rare cases perfect\n\t * sync might not be possible.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/#Syncing_grid} for more info\n\t */\n\tsyncWithAxis?: ValueAxis<AxisRenderer>;\n\n\t/**\n\t * If set to `false`, the axis won't be auto-zoomed to a selection (this\n\t * works only if the other axis is a `DateAxis` or a `CategoryAxis`).\n\t * \n\t * IMPORTANT: This setting will be ignored if both X and Y axes are\n\t * a `ValueAxis`.\n\t *\n\t * @since 5.2.20\n\t * @default true\n\t */\n\tautoZoom?: boolean;\n\n}\n\nexport interface IValueAxisDataItem extends IAxisDataItem {\n\n\t/**\n\t * Value of the data item.\n\t */\n\tvalue?: number;\n\n\t/**\n\t * End value for axis items that span multiple values, like axis ranges.\n\t */\n\tendValue?: number;\n\n\t/**\n\t * @ignore\n\t */\n\tlabelEndValue?: number;\n\n\t/**\n\t * If set to `true` the values fo this data item will be factored in when\n\t * calculating scale of the [[ValueAxis]]. Useful for axis ranges.\n\t * \n\t * @since 5.1.4\n\t */\n\taffectsMinMax?: boolean;\n\n}\n\nexport interface IMinMaxStep {\n\tmin: number;\n\tmax: number;\n\tstep: number;\n}\n\nexport interface IValueAxisPrivate extends IAxisPrivate {\n\n\t/**\n\t * Calculated current minimum value of the axis scale.\n\t * \n\t * @readonly\n\t */\n\tmin?: number;\n\n\t/**\n\t * Calculated current maximum value of the axis scale.\n\t * \n\t * @readonly\n\t */\n\tmax?: number;\n\n\t/**\n\t * A minimum value of the axis scale.\n\t *\n\t * Can be useful in cases where axis zoom is currently being animated, and\n\t * `min` is reflecting current intermediate value, whereas `minFinal` will\n\t * show target value.\n\t * \n\t * @readonly\n\t */\n\tminFinal?: number;\n\n\t/**\n\t * A maximum value of the axis scale.\n\t *\n\t * Can be useful in cases where axis zoom is currently being animated, and\n\t * `max` is reflecting current intermediate value, whereas `maxFinal` will\n\t * show target value.\n\t * \n\t * @readonly\n\t */\n\tmaxFinal?: number;\n\n\t/**\n\t * Calculated minimum value of the currently viewable (zoomed) scope.\n\t * \n\t * @readonly\n\t */\n\tselectionMin?: number;\n\n\t/**\n\t * Calculated maximum value of the currently viewable (zoomed) scope.\n\t * \n\t * @readonly\n\t */\n\tselectionMax?: number;\n\n\t/**\n\t * A target minimum value of the viewable value scope.\n\t *\n\t * Can be useful in cases where axis zoom is currently being animated, and\n\t * `selectionMin` is reflecting current intermediate value,\n\t * whereas `selectionMinFinal` will show target value.\n\t * \n\t * @readonly\n\t */\n\tselectionMinFinal?: number;\n\n\t/**\n\t * A target maximum value of the viewable value scope.\n\t *\n\t * Can be useful in cases where axis zoom is currently being animated, and\n\t * `selectionMax` is reflecting current intermediate value,\n\t * whereas `selectionMaxFinal` will show target value.\n\t * \n\t * @readonly\n\t */\n\tselectionMaxFinal?: number;\n\n\t/**\n\t * When selection step changes, it might change during axis zoom animation.\n\t *\n\t * `selectionStepFinal` will show what step will be when animation is\n\t * finished.\n\t * \n\t * @readonly\n\t */\n\tselectionStepFinal?: number;\n\n\t/**\n\t * Value step between grid lines.\n\t * \n\t * @readonly\n\t */\n\tstep?: number;\n\n\t/**\n\t * Decimal places used when formatting axis labels.\n\t * \n\t * @readonly\n\t */\n\tstepDecimalPlaces?: number;\n\n}\n\nexport interface IValueAxisEvents extends IAxisEvents {\n\n}\n\n/**\n * Creates a value axis.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/} for more info\n * @important\n */\nexport class ValueAxis<R extends AxisRenderer> extends Axis<R> {\n\tpublic static className: string = \"ValueAxis\";\n\tpublic static classNames: Array<string> = Axis.classNames.concat([ValueAxis.className]);\n\n\tdeclare public _settings: IValueAxisSettings<R>;\n\tdeclare public _privateSettings: IValueAxisPrivate;\n\tdeclare public _dataItemSettings: IValueAxisDataItem;\n\tdeclare public _events: IValueAxisEvents;\n\n\tprotected _dirtyExtremes: boolean = false;\n\tprotected _dirtySelectionExtremes: boolean = false;\n\tprotected _dseHandled = false;\n\tprotected _deltaMinMax: number = 1;\n\tpublic _minReal: number | undefined;\n\tpublic _maxReal: number | undefined;\n\n\tprotected _minRealLog: number | undefined;\n\n\tprotected _baseValue: number = 0;\n\tprotected _syncDp?: MultiDisposer;\n\tprotected _minLogAdjusted: number = 1;\n\t/**\n\t * @ignore\n\t */\n\tpublic markDirtyExtremes() {\n\t\tthis._dirtyExtremes = true;\n\t\tthis.markDirty();\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic markDirtySelectionExtremes() {\n\t\tthis._dirtySelectionExtremes = true;\n\t\tthis.markDirty();\n\t}\n\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"axis\"]);\n\t\tthis.setPrivateRaw(\"name\", \"value\");\n\t\tthis.addTag(\"value\");\n\t\tsuper._afterNew();\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tif (this.isDirty(\"syncWithAxis\")) {\n\t\t\tlet previousValue = this._prevSettings.syncWithAxis;\n\t\t\tif (previousValue) {\n\t\t\t\tif (this._syncDp) {\n\t\t\t\t\tthis._syncDp.dispose();\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet syncWithAxis = this.get(\"syncWithAxis\");\n\t\t\tif (syncWithAxis) {\n\t\t\t\tthis._syncDp = new MultiDisposer([\n\t\t\t\t\tsyncWithAxis.onPrivate(\"selectionMinFinal\", () => {\n\t\t\t\t\t\tthis._dirtySelectionExtremes = true;\n\t\t\t\t\t}),\n\t\t\t\t\tsyncWithAxis.onPrivate(\"selectionMaxFinal\", () => {\n\t\t\t\t\t\tthis._dirtySelectionExtremes = true;\n\t\t\t\t\t})\n\t\t\t\t])\n\t\t\t}\n\t\t}\n\n\t\tlet someDirty = false;\n\t\tif (this.isDirty(\"min\") || this.isDirty(\"max\") || this.isDirty(\"maxPrecision\") || this.isDirty(\"numberFormat\")) {\n\t\t\tsomeDirty = true;\n\t\t\tthis.ghostLabel?.set(\"text\", \"\");\n\t\t}\n\n\t\t//if (this._dirtyExtremes || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\") || this.isDirty(\"min\") || this.isDirty(\"max\") || this.isDirty(\"extraMin\") || this.isDirty(\"extraMax\") || this.isDirty(\"logarithmic\") || this.isDirty(\"treatZeroAs\") || this.isDirty(\"baseValue\") || this.isDirty(\"strictMinMax\") || this.isDirty(\"maxPrecision\")) {\n\t\tif (this._sizeDirty || this._dirtyExtremes || this._valuesDirty || someDirty || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\") || this.isDirty(\"extraMin\") || this.isDirty(\"extraMax\") || this.isDirty(\"logarithmic\") || this.isDirty(\"treatZeroAs\") || this.isDirty(\"baseValue\") || this.isDirty(\"strictMinMax\") || this.isDirty(\"strictMinMaxSelection\")) {\n\t\t\tthis._getMinMax();\n\t\t\tthis._dirtyExtremes = false;\n\t\t}\n\n\t\tthis._handleSizeDirty();\n\n\t\tif (this._dirtySelectionExtremes && !this._isPanning && this.get(\"autoZoom\", true)) {\n\t\t\tconst chart = this.chart;\n\t\t\tlet getMM = false;\n\t\t\t// #1563\n\t\t\tif (chart) {\n\t\t\t\tconst letter = this.get(\"renderer\").getPrivate(\"letter\");\n\t\t\t\tif (letter == \"Y\") {\n\t\t\t\t\tchart.xAxes.each((axis) => {\n\t\t\t\t\t\tif (axis.className != \"ValueAxis\") {\n\t\t\t\t\t\t\tgetMM = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse if (letter == \"X\") {\n\t\t\t\t\tchart.yAxes.each((axis) => {\n\t\t\t\t\t\tif (axis.className != \"ValueAxis\") {\n\t\t\t\t\t\t\tgetMM = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (getMM) {\n\t\t\t\tthis._getSelectionMinMax();\n\t\t\t}\n\t\t\tthis._dirtySelectionExtremes = false;\n\t\t}\n\n\t\tthis._groupData();\n\n\t\tif (this._sizeDirty || this._valuesDirty || this.isDirty(\"start\") || this.isDirty(\"end\") || this.isPrivateDirty(\"min\") || this.isPrivateDirty(\"selectionMax\") || this.isPrivateDirty(\"selectionMin\") || this.isPrivateDirty(\"max\") || this.isPrivateDirty(\"step\") || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\") || this.isDirty(\"logarithmic\")) {\n\t\t\tthis._handleRangeChange();\n\t\t\tthis._prepareAxisItems();\n\t\t\tthis._updateAxisRanges();\n\t\t}\n\n\t\tthis._baseValue = this.baseValue();\n\n\t}\n\n\tprotected _handleSizeDirty() {\n\t\tif (this._sizeDirty && !this._dseHandled) {\n\t\t\tthis._dirtySelectionExtremes = true;\n\t\t\tthis._dseHandled = true;\n\n\t\t\tif (this.getPrivate(\"selectionMinFinal\") != this.getPrivate(\"selectionMin\") || this.getPrivate(\"selectionMaxFinal\") != this.getPrivate(\"selectionMax\")) {\n\t\t\t\tthis._dirtySelectionExtremes = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _clearDirty(): void {\n\t\tsuper._clearDirty();\n\t\tthis._dseHandled = false;\n\t}\n\n\tprotected _groupData() {\n\n\t}\n\n\tprotected _formatText(value: number) {\n\t\tconst numberFormat = this.get(\"numberFormat\");\n\t\tconst formatter = this.getNumberFormatter();\n\n\t\tlet text = \"\";\n\n\t\tif (numberFormat) {\n\t\t\ttext = formatter.format(value, numberFormat);\n\t\t}\n\t\telse {\n\t\t\ttext = formatter.format(value, undefined, this.getPrivate(\"stepDecimalPlaces\"));\n\t\t}\n\t\treturn text;\n\t}\n\n\tprotected _prepareAxisItems() {\n\t\tconst min = this.getPrivate(\"min\");\n\t\tconst max = this.getPrivate(\"max\");\n\n\t\tif ($type.isNumber(min) && $type.isNumber(max)) {\n\n\t\t\tconst logarithmic = this.get(\"logarithmic\");\n\t\t\tconst step = this.getPrivate(\"step\")!;\n\t\t\tconst selectionMin = this.getPrivate(\"selectionMin\")!;\n\t\t\tconst selectionMax = this.getPrivate(\"selectionMax\")! + step;\n\n\t\t\tlet value = selectionMin - step;\n\t\t\tlet differencePower = 1;\n\t\t\tlet minLog: number = min;\n\n\t\t\tif (logarithmic) {\n\t\t\t\tvalue = this._minLogAdjusted;\n\n\t\t\t\tif (value < selectionMin) {\n\t\t\t\t\twhile (value < selectionMin) {\n\t\t\t\t\t\tvalue += step;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tminLog = value;\n\n\t\t\t\tif (minLog <= 0) {\n\t\t\t\t\tlet minRealLog = this._minRealLog;\n\t\t\t\t\tif (!$type.isNumber(minRealLog)) {\n\t\t\t\t\t\tminRealLog = 1;\n\t\t\t\t\t}\n\t\t\t\t\tminLog = Math.pow(10, Math.log(minRealLog) * Math.LOG10E);\n\n\t\t\t\t\tif (step < 1) {\n\t\t\t\t\t\tif ($type.isNumber(this._minRealLog)) {\n\t\t\t\t\t\t\tminLog = this._minRealLog;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tminLog = Math.pow(10, -50);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdifferencePower = Math.log(selectionMax - step) * Math.LOG10E - Math.log(minLog) * Math.LOG10E;\n\n\t\t\t\tif (differencePower > 2) {\n\t\t\t\t\tvalue = Math.pow(10, Math.log(minLog) * Math.LOG10E - 50);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/// minor grid\n\t\t\tconst renderer = this.get(\"renderer\");\n\t\t\tconst minorLabelsEnabled = renderer.get(\"minorLabelsEnabled\");\n\t\t\tconst minorGridEnabled = renderer.get(\"minorGridEnabled\", minorLabelsEnabled);\n\n\t\t\tlet stepPower = Math.pow(10, Math.floor(Math.log(Math.abs(step)) * Math.LOG10E));\n\n\t\t\tconst stepAdjusted = Math.round(step / stepPower);\n\n\t\t\tlet minorGridCount = 2;\n\n\t\t\tif ($math.round(stepAdjusted / 5, 10) % 1 == 0) {\n\t\t\t\tminorGridCount = 5;\n\t\t\t}\n\n\t\t\tif ($math.round(stepAdjusted / 10, 10) % 1 == 0) {\n\t\t\t\tminorGridCount = 10;\n\t\t\t}\n\n\t\t\tlet minorStep = step / minorGridCount;\n\n\t\t\t// end of minor grid\n\t\t\tlet i = 0;\n\t\t\tlet m = 0;\n\t\t\tlet previous = -Infinity;\n\n\t\t\twhile (value < selectionMax) {\n\t\t\t\tlet dataItem: DataItem<this[\"_dataItemSettings\"]>;\n\t\t\t\tif (this.dataItems.length < i + 1) {\n\t\t\t\t\tdataItem = new DataItem(this, undefined, {});\n\t\t\t\t\tthis._dataItems.push(dataItem);\n\t\t\t\t\tthis.processDataItem(dataItem);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdataItem = this.dataItems[i];\n\t\t\t\t}\n\n\t\t\t\tthis._createAssets(dataItem, []);\n\t\t\t\tthis._toggleDataItem(dataItem, true);\n\n\t\t\t\tdataItem.setRaw(\"value\", value);\n\t\t\t\tconst label = dataItem.get(\"label\");\n\t\t\t\tif (label) {\n\t\t\t\t\tlabel.set(\"text\", this._formatText(value));\n\t\t\t\t}\n\n\t\t\t\tthis._prepareDataItem(dataItem);\n\n\t\t\t\tlet nextValue = value;\n\t\t\t\tif (!logarithmic) {\n\t\t\t\t\tnextValue += step;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (differencePower > 2) {\n\t\t\t\t\t\tnextValue = Math.pow(10, Math.log(minLog) * Math.LOG10E + i - 50);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnextValue += step;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// minor grid\n\t\t\t\tif (minorGridEnabled) {\n\t\t\t\t\tlet minorValue = value + minorStep;\n\n\t\t\t\t\tif (logarithmic) {\n\t\t\t\t\t\tif (differencePower > 2) {\n\t\t\t\t\t\t\tlet minorMinMaxStep = this._adjustMinMax(value, nextValue, 10);\n\t\t\t\t\t\t\tminorStep = minorMinMaxStep.step;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tminorValue = value + minorStep;\n\t\t\t\t\t}\n\n\t\t\t\t\twhile (minorValue < nextValue - step * 0.00000000001) {\n\t\t\t\t\t\tlet minorDataItem: DataItem<this[\"_dataItemSettings\"]>;\n\t\t\t\t\t\tif (this.minorDataItems.length < m + 1) {\n\t\t\t\t\t\t\tminorDataItem = new DataItem(this, undefined, {});\n\t\t\t\t\t\t\tthis.minorDataItems.push(minorDataItem);\n\t\t\t\t\t\t\tthis.processDataItem(minorDataItem);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tminorDataItem = this.minorDataItems[m];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._createAssets(minorDataItem, [\"minor\"], true);\n\t\t\t\t\t\tthis._toggleDataItem(minorDataItem, true);\n\t\t\t\t\t\tminorDataItem.setRaw(\"value\", minorValue);\n\n\t\t\t\t\t\tconst minorLabel = minorDataItem.get(\"label\");\n\t\t\t\t\t\tif (minorLabel) {\n\t\t\t\t\t\t\tif (minorLabelsEnabled) {\n\t\t\t\t\t\t\t\tminorLabel.set(\"text\", this._formatText(minorValue));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tminorLabel.setPrivate(\"visible\", false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._prepareDataItem(minorDataItem);\n\t\t\t\t\t\tminorValue += minorStep;\n\t\t\t\t\t\tm++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvalue = nextValue;\n\n\t\t\t\tif (previous == value) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tlet stepPower = Math.pow(10, Math.floor(Math.log(Math.abs(step)) * Math.LOG10E));\n\t\t\t\tif (stepPower < 1 && !logarithmic) {\n\t\t\t\t\t// exponent is less then 1 too. Count decimals of exponent\n\t\t\t\t\tlet decCount = Math.round(Math.abs(Math.log(Math.abs(stepPower)) * Math.LOG10E)) + 2;\n\t\t\t\t\t// round value to avoid floating point issues\n\t\t\t\t\tvalue = $math.round(value, decCount);\n\t\t\t\t}\n\t\t\t\ti++;\n\n\t\t\t\t// #103520\n\t\t\t\tif (logarithmic && differencePower <= 2) {\n\t\t\t\t\tif (value - step < step) {\n\t\t\t\t\t\tvalue = step;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tprevious = value;\n\t\t\t}\n\n\t\t\tfor (let j = i; j < this.dataItems.length; j++) {\n\t\t\t\tthis._toggleDataItem(this.dataItems[j], false);\n\t\t\t}\n\n\t\t\tfor (let j = m; j < this.minorDataItems.length; j++) {\n\t\t\t\tthis._toggleDataItem(this.minorDataItems[j], false);\n\t\t\t}\n\n\t\t\t$array.each(this.series, (series) => {\n\t\t\t\tif (series.inited) {\n\t\t\t\t\tseries._markDirtyAxes();\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tthis._updateGhost();\n\t\t}\n\t}\n\n\n\tpublic _prepareDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, count?: number) {\n\t\tlet renderer = this.get(\"renderer\");\n\t\tlet value = dataItem.get(\"value\")!;\n\t\tlet endValue = dataItem.get(\"endValue\");\n\n\t\tlet position = this.valueToPosition(value);\n\n\t\tlet endPosition = position;\n\t\tlet fillEndPosition = this.valueToPosition(value + this.getPrivate(\"step\")!);\n\n\t\tif ($type.isNumber(endValue)) {\n\t\t\tendPosition = this.valueToPosition(endValue);\n\t\t\tfillEndPosition = endPosition;\n\t\t}\n\n\t\tif (dataItem.get(\"isRange\")) {\n\t\t\tif (endValue == null) {\n\t\t\t\tfillEndPosition = position;\n\t\t\t}\n\t\t}\n\n\t\tlet labelEndPosition = endPosition;\n\n\t\tlet labelEndValue = dataItem.get(\"labelEndValue\");\n\t\tif (labelEndValue != null) {\n\t\t\tlabelEndPosition = this.valueToPosition(labelEndValue);\n\t\t}\n\n\t\trenderer.updateLabel(dataItem.get(\"label\"), position, labelEndPosition, count);\n\n\t\tconst grid = dataItem.get(\"grid\");\n\t\trenderer.updateGrid(grid, position, endPosition);\n\t\tif (grid) {\n\t\t\tif (value == this.get(\"baseValue\", 0)) {\n\t\t\t\tgrid.addTag(\"base\");\n\t\t\t\tgrid._applyThemes();\n\t\t\t}\n\t\t\telse if (grid.hasTag(\"base\")) {\n\t\t\t\tgrid.removeTag(\"base\");\n\t\t\t\tgrid._applyThemes();\n\t\t\t}\n\t\t}\n\n\t\trenderer.updateTick(dataItem.get(\"tick\"), position, labelEndPosition, count);\n\t\trenderer.updateFill(dataItem.get(\"axisFill\"), position, fillEndPosition);\n\n\t\tthis._processBullet(dataItem);\n\t\trenderer.updateBullet(dataItem.get(\"bullet\"), position, endPosition);\n\n\t\tif (!dataItem.get(\"isRange\")) {\n\t\t\tconst fillRule = this.get(\"fillRule\");\n\t\t\tif (fillRule) {\n\t\t\t\tfillRule(dataItem)\n\t\t\t}\n\t\t}\n\t}\n\n\n\tprotected _handleRangeChange() {\n\t\tlet selectionMin: number = this.positionToValue(this.get(\"start\", 0));\n\t\tlet selectionMax: number = this.positionToValue(this.get(\"end\", 1));\n\n\t\tconst gridCount = this.get(\"renderer\").gridCount();\n\t\tlet minMaxStep: IMinMaxStep = this._adjustMinMax(selectionMin, selectionMax, gridCount, true);\n\n\t\tlet stepDecimalPlaces = $utils.decimalPlaces(minMaxStep.step);\n\t\tthis.setPrivateRaw(\"stepDecimalPlaces\", stepDecimalPlaces);\n\n\t\tselectionMin = $math.round(selectionMin, stepDecimalPlaces);\n\t\tselectionMax = $math.round(selectionMax, stepDecimalPlaces);\n\n\t\tminMaxStep = this._adjustMinMax(selectionMin, selectionMax, gridCount, true);\n\n\t\tlet step = minMaxStep.step;\n\t\tselectionMin = minMaxStep.min;\n\t\tselectionMax = minMaxStep.max;\n\n\t\tif (this.getPrivate(\"selectionMin\") !== selectionMin || this.getPrivate(\"selectionMax\") !== selectionMax || this.getPrivate(\"step\") !== step) {\n\t\t\t// do not change to setPrivate, will cause SO\n\t\t\tthis.setPrivateRaw(\"selectionMin\", selectionMin);\n\t\t\tthis.setPrivateRaw(\"selectionMax\", selectionMax);\n\n\t\t\tthis.setPrivateRaw(\"step\", step);\n\t\t}\n\t}\n\n\t/**\n\t * Converts a relative position to a corresponding numeric value from axis\n\t * scale.\n\t *\n\t * @param   position  Relative position\n\t * @return            Value\n\t */\n\tpublic positionToValue(position: number): number {\n\t\tconst min = this.getPrivate(\"min\")!;\n\t\tconst max = this.getPrivate(\"max\")!;\n\n\t\tif (!this.get(\"logarithmic\")) {\n\t\t\treturn position * (max - min) + min;\n\t\t}\n\t\telse {\n\t\t\treturn Math.pow(Math.E, (position * ((Math.log(max) * Math.LOG10E - Math.log(min) * Math.LOG10E)) + Math.log(min) * Math.LOG10E) / Math.LOG10E);\n\t\t}\n\t}\n\n\t/**\n\t * Convers value to a relative position on axis.\n\t *\n\t * @param   value  Value\n\t * @return         Relative position\n\t */\n\tpublic valueToPosition(value: number): number {\n\n\t\tconst min = this.getPrivate(\"min\")!;\n\t\tconst max = this.getPrivate(\"max\")!;\n\n\t\tif (!this.get(\"logarithmic\")) {\n\t\t\treturn (value - min) / (max - min);\n\t\t}\n\t\telse {\n\t\t\tif (value <= 0) {\n\t\t\t\tlet treatZeroAs = this.get(\"treatZeroAs\");\n\t\t\t\tif ($type.isNumber(treatZeroAs)) {\n\t\t\t\t\tvalue = treatZeroAs;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn (Math.log(value) * Math.LOG10E - Math.log(min) * Math.LOG10E) / ((Math.log(max) * Math.LOG10E - Math.log(min) * Math.LOG10E));\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic valueToFinalPosition(value: number): number {\n\n\t\tconst min = this.getPrivate(\"minFinal\")!;\n\t\tconst max = this.getPrivate(\"maxFinal\")!;\n\n\t\tif (!this.get(\"logarithmic\")) {\n\t\t\treturn (value - min) / (max - min);\n\t\t}\n\t\telse {\n\t\t\tif (value <= 0) {\n\t\t\t\tlet treatZeroAs = this.get(\"treatZeroAs\");\n\t\t\t\tif ($type.isNumber(treatZeroAs)) {\n\t\t\t\t\tvalue = treatZeroAs;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn (Math.log(value) * Math.LOG10E - Math.log(min) * Math.LOG10E) / ((Math.log(max) * Math.LOG10E - Math.log(min) * Math.LOG10E));\n\t\t}\n\t}\n\n\t/**\n\t * Returns X coordinate in pixels corresponding to specific value.\n\t *\n\t * @param   value     Numeric value\n\t * @param   location  Location\n\t * @param   baseValue Base value\n\t * @return            X coordinate\n\t */\n\tpublic getX(value: number, location: number, baseValue: number) {\n\t\tvalue = baseValue + (value - baseValue) * location;\n\n\t\tconst position = this.valueToPosition(value);\n\t\treturn this._settings.renderer.positionToCoordinate(position);\n\t}\n\n\t/**\n\t * Returns X coordinate in pixels corresponding to specific value.\n\t *\n\t * @param   value     Numeric value\n\t * @param   location  Location\n\t * @param   baseValue Base value\n\t * @return            X coordinate\n\t */\n\tpublic getY(value: number, location: number, baseValue: number) {\n\t\tvalue = baseValue + (value - baseValue) * location;\n\n\t\tconst position = this.valueToPosition(value)\n\t\treturn this._settings.renderer.positionToCoordinate(position);\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getDataItemCoordinateX(dataItem: DataItem<IXYSeriesDataItem>, field: string, _cellLocation: number, axisLocation: number): number {\n\t\treturn this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(dataItem, field, _cellLocation, axisLocation));\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getDataItemPositionX(dataItem: DataItem<IXYSeriesDataItem>, field: string, _cellLocation: number, axisLocation: number) {\n\t\tlet value = dataItem.get(field as any);\n\n\t\tconst stackToItem = dataItem.get(\"stackToItemX\");\n\t\tif (stackToItem) {\n\t\t\tconst series = dataItem.component as XYSeries;\n\t\t\tvalue = value * axisLocation + series.getStackedXValueWorking(dataItem, field);\n\t\t}\n\t\telse {\n\t\t\tvalue = this._baseValue + (value - this._baseValue) * axisLocation;\n\t\t}\n\n\t\treturn this.valueToPosition(value);\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getDataItemCoordinateY(dataItem: DataItem<IXYSeriesDataItem>, field: string, _cellLocation: number, axisLocation: number): number {\n\t\treturn this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(dataItem, field, _cellLocation, axisLocation));\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getDataItemPositionY(dataItem: DataItem<IXYSeriesDataItem>, field: string, _cellLocation: number, axisLocation: number): number {\n\t\tlet value = dataItem.get(field as any);\n\n\t\tconst stackToItem = dataItem.get(\"stackToItemY\");\n\t\tif (stackToItem) {\n\t\t\tconst series = dataItem.component as XYSeries;\n\t\t\tvalue = value * axisLocation + series.getStackedYValueWorking(dataItem, field);\n\t\t}\n\t\telse {\n\t\t\tvalue = this._baseValue + (value - this._baseValue) * axisLocation;\n\t\t}\n\n\t\treturn this.valueToPosition(value);\n\t}\n\n\t/**\n\t * Returns relative position of axis' `baseValue`.\n\t *\n\t * @return  Base value position\n\t */\n\tpublic basePosition(): number {\n\t\treturn this.valueToPosition(this.baseValue());\n\t}\n\n\t/**\n\t * Base value of the [[ValueAxis]], which determines positive and negative\n\t * values.\n\t *\n\t * @return Base value\n\t */\n\tpublic baseValue(): number {\n\t\tconst min = Math.min(this.getPrivate(\"minFinal\", -Infinity), this.getPrivate(\"selectionMin\", -Infinity));\n\t\tconst max = Math.max(this.getPrivate(\"maxFinal\", Infinity), this.getPrivate(\"selectionMax\", Infinity));\n\t\tlet baseValue = this.get(\"baseValue\", 0);\n\n\t\tif (baseValue < min) {\n\t\t\tbaseValue = min;\n\t\t}\n\n\t\tif (baseValue > max) {\n\t\t\tbaseValue = max\n\t\t}\n\n\t\treturn baseValue;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic cellEndValue(value: number): number {\n\t\treturn value;\n\t}\n\n\tprotected fixSmallStep(step: number): number {\n\t\t// happens because of floating point error\n\t\tif (1 + step === 1) {\n\t\t\tstep *= 2;\n\t\t\treturn this.fixSmallStep(step);\n\t\t}\n\t\treturn step;\n\t}\n\n\tprotected _fixMin(min: number) {\n\t\treturn min;\n\t}\n\n\tprotected _fixMax(max: number) {\n\t\treturn max;\n\t}\n\n\tpublic _calculateTotals() {\n\t\tif (this.get(\"calculateTotals\")) {\n\t\t\tlet series = this.series[0];\n\t\t\tif (series) {\n\t\t\t\tlet startIndex = series.startIndex();\n\n\t\t\t\tif (series.dataItems.length > 0) {\n\n\t\t\t\t\tif (startIndex > 0) {\n\t\t\t\t\t\tstartIndex--;\n\t\t\t\t\t}\n\t\t\t\t\tlet endIndex = series.endIndex();\n\t\t\t\t\tif (endIndex < series.dataItems.length) {\n\t\t\t\t\t\tendIndex++;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet field: string | undefined;\n\t\t\t\t\tlet vc: string | undefined;\n\n\t\t\t\t\tif (series.get(\"yAxis\") == this) {\n\t\t\t\t\t\tfield = \"valueY\";\n\t\t\t\t\t\tvc = \"vcy\";\n\t\t\t\t\t}\n\t\t\t\t\telse if (series.get(\"xAxis\") == this) {\n\t\t\t\t\t\tfield = \"valueX\";\n\t\t\t\t\t\tvc = \"vcx\";\n\t\t\t\t\t}\n\n\t\t\t\t\tlet fieldWorking = field + \"Working\";\n\n\t\t\t\t\tif (field) {\n\t\t\t\t\t\tfor (let i = startIndex; i < endIndex; i++) {\n\t\t\t\t\t\t\tlet sum = 0;\n\t\t\t\t\t\t\tlet total = 0;\n\n\t\t\t\t\t\t\t$array.each(this.series, (series) => {\n\t\t\t\t\t\t\t\tif (!series.get(\"excludeFromTotal\")) {\n\t\t\t\t\t\t\t\t\tlet dataItem = series.dataItems[i];\n\t\t\t\t\t\t\t\t\tif (dataItem) {\n\t\t\t\t\t\t\t\t\t\tlet value = dataItem.get(fieldWorking as any) * series.get(vc as any);\n\n\t\t\t\t\t\t\t\t\t\tif (!$type.isNaN(value)) {\n\t\t\t\t\t\t\t\t\t\t\tsum += value;\n\t\t\t\t\t\t\t\t\t\t\ttotal += Math.abs(value);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t$array.each(this.series, (series) => {\n\t\t\t\t\t\t\t\tif (!series.get(\"excludeFromTotal\")) {\n\t\t\t\t\t\t\t\t\tlet dataItem = series.dataItems[i];\n\t\t\t\t\t\t\t\t\tif (dataItem) {\n\t\t\t\t\t\t\t\t\t\tlet value = dataItem.get(fieldWorking as any) * series.get(vc as any);\n\n\t\t\t\t\t\t\t\t\t\tif (!$type.isNaN(value)) {\n\t\t\t\t\t\t\t\t\t\t\tdataItem.set((field + \"Total\") as any, total);\n\t\t\t\t\t\t\t\t\t\t\tdataItem.set((field + \"Sum\") as any, sum);\n\t\t\t\t\t\t\t\t\t\t\tlet totalPercent = value / total * 100;\n\t\t\t\t\t\t\t\t\t\t\tif (total == 0) {\n\t\t\t\t\t\t\t\t\t\t\t\ttotalPercent = 0;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tdataItem.set((field + \"TotalPercent\") as any, totalPercent);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _getSelectionMinMax() {\n\t\tconst min = this.getPrivate(\"minFinal\");\n\t\tconst max = this.getPrivate(\"maxFinal\");\n\n\t\tconst minDefined = this.get(\"min\");\n\t\tconst maxDefined = this.get(\"max\");\n\n\t\tlet extraMin = this.get(\"extraMin\", 0);\n\t\tlet extraMax = this.get(\"extraMax\", 0);\n\n\t\tif (this.get(\"logarithmic\")) {\n\t\t\tif (this.get(\"extraMin\") == null) {\n\t\t\t\textraMin = 0.1;\n\t\t\t}\n\t\t\tif (this.get(\"extraMax\") == null) {\n\t\t\t\textraMax = 0.2;\n\t\t\t}\n\t\t}\n\n\t\tconst gridCount = this.get(\"renderer\").gridCount();\n\t\tconst selectionStrictMinMax = this.get(\"strictMinMaxSelection\");\n\t\tlet strictMinMax = this.get(\"strictMinMax\");\n\n\t\tif ($type.isNumber(min) && $type.isNumber(max)) {\n\t\t\tlet selectionMin = max;\n\t\t\tlet selectionMax = min;\n\n\t\t\t$array.each(this.series, (series) => {\n\t\t\t\tif (!series.get(\"ignoreMinMax\")) {\n\t\t\t\t\tlet seriesMin: number | undefined;\n\t\t\t\t\tlet seriesMax: number | undefined;\n\t\t\t\t\tconst outOfSelection = series.getPrivate(\"outOfSelection\");\n\n\t\t\t\t\tif (series.get(\"xAxis\") === this) {\n\t\t\t\t\t\tif (!outOfSelection) {\n\t\t\t\t\t\t\tlet minX = series.getPrivate(\"minX\");\n\t\t\t\t\t\t\tlet maxX = series.getPrivate(\"maxX\");\n\n\t\t\t\t\t\t\t// solves #90085\n\t\t\t\t\t\t\tif (series.startIndex() != 0 || series.endIndex() != series.dataItems.length) {\n\t\t\t\t\t\t\t\tminX = undefined;\n\t\t\t\t\t\t\t\tmaxX = undefined;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tseriesMin = series.getPrivate(\"selectionMinX\", minX);\n\t\t\t\t\t\t\tseriesMax = series.getPrivate(\"selectionMaxX\", maxX);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (series.get(\"yAxis\") === this) {\n\t\t\t\t\t\tif (!outOfSelection) {\n\n\t\t\t\t\t\t\tlet minY = series.getPrivate(\"minY\");\n\t\t\t\t\t\t\tlet maxY = series.getPrivate(\"maxY\");\n\n\t\t\t\t\t\t\t// solves #90085\n\t\t\t\t\t\t\tif (series.startIndex() != 0 || series.endIndex() != series.dataItems.length) {\n\t\t\t\t\t\t\t\tminY = undefined;\n\t\t\t\t\t\t\t\tmaxY = undefined;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tseriesMin = series.getPrivate(\"selectionMinY\", minY);\n\t\t\t\t\t\t\tseriesMax = series.getPrivate(\"selectionMaxY\", maxY);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!series.isHidden() && !series.isShowing()) {\n\t\t\t\t\t\tif ($type.isNumber(seriesMin)) {\n\t\t\t\t\t\t\tselectionMin = Math.min(selectionMin, seriesMin);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ($type.isNumber(seriesMax)) {\n\t\t\t\t\t\t\tselectionMax = Math.max(selectionMax, seriesMax);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tthis.axisRanges.each((range) => {\n\t\t\t\tif (range.get(\"affectsMinMax\")) {\n\t\t\t\t\tlet value = range.get(\"value\");\n\t\t\t\t\tif (value != null) {\n\t\t\t\t\t\tselectionMin = Math.min(selectionMin, value);\n\t\t\t\t\t\tselectionMax = Math.max(selectionMax, value);\n\t\t\t\t\t}\n\t\t\t\t\tvalue = range.get(\"endValue\");\n\t\t\t\t\tif (value != null) {\n\t\t\t\t\t\tselectionMin = Math.min(selectionMin, value);\n\t\t\t\t\t\tselectionMax = Math.max(selectionMax, value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tif (selectionMin > selectionMax) {\n\t\t\t\t[selectionMin, selectionMax] = [selectionMax, selectionMin]\n\t\t\t}\n\n\t\t\tif ($type.isNumber(minDefined)) {\n\t\t\t\tif (strictMinMax) {\n\t\t\t\t\tselectionMin = minDefined;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tselectionMin = min;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (strictMinMax) {\n\t\t\t\tif ($type.isNumber(this._minReal)) {\n\t\t\t\t\tselectionMin = this._minReal;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ($type.isNumber(maxDefined)) {\n\t\t\t\tif (strictMinMax) {\n\t\t\t\t\tselectionMax = maxDefined;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tselectionMax = max;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (strictMinMax) {\n\t\t\t\tif ($type.isNumber(this._maxReal)) {\n\t\t\t\t\tselectionMax = this._maxReal;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (selectionMin === selectionMax) {\n\t\t\t\tlet smin = selectionMin;\n\t\t\t\tselectionMin -= this._deltaMinMax;\n\t\t\t\tselectionMax += this._deltaMinMax;\n\n\t\t\t\tif (selectionMin < min) {\n\t\t\t\t\tlet d = smin - min;\n\t\t\t\t\tif (d == 0) {\n\t\t\t\t\t\td = this._deltaMinMax;\n\t\t\t\t\t}\n\n\t\t\t\t\tselectionMin = smin - d;\n\t\t\t\t\tselectionMax = smin + d;\n\n\t\t\t\t\tstrictMinMax = true;\n\t\t\t\t}\n\n\t\t\t\tlet minMaxStep2 = this._adjustMinMax(selectionMin, selectionMax, gridCount, strictMinMax);\n\t\t\t\tselectionMin = minMaxStep2.min;\n\t\t\t\tselectionMax = minMaxStep2.max;\n\t\t\t}\n\n\t\t\tlet selectionMinReal = selectionMin;\n\t\t\tlet selectionMaxReal = selectionMax;\n\n\t\t\tlet delta = selectionMax - selectionMin;\n\n\t\t\tselectionMin -= delta * extraMin;\n\t\t\tselectionMax += delta * extraMax;\n\n\t\t\tlet minMaxStep: IMinMaxStep = this._adjustMinMax(selectionMin, selectionMax, gridCount);\n\n\t\t\tselectionMin = minMaxStep.min;\n\t\t\tselectionMax = minMaxStep.max;\n\n\t\t\tselectionMin = $math.fitToRange(selectionMin, min, max);\n\t\t\tselectionMax = $math.fitToRange(selectionMax, min, max);\n\n\t\t\t// do it for the second time !important\t\t\t\n\t\t\tminMaxStep = this._adjustMinMax(selectionMin, selectionMax, gridCount, true);\n\n\t\t\tif (!strictMinMax) {\n\t\t\t\tselectionMin = minMaxStep.min;\n\t\t\t\tselectionMax = minMaxStep.max;\n\t\t\t}\n\n\t\t\tconst syncWithAxis = this.get(\"syncWithAxis\");\n\t\t\tif (syncWithAxis) {\n\t\t\t\tminMaxStep = this._syncAxes(selectionMin, selectionMax, minMaxStep.step, syncWithAxis.getPrivate(\"selectionMinFinal\", syncWithAxis.getPrivate(\"minFinal\", 0)), syncWithAxis.getPrivate(\"selectionMaxFinal\", syncWithAxis.getPrivate(\"maxFinal\", 1)), syncWithAxis.getPrivate(\"selectionStepFinal\", syncWithAxis.getPrivate(\"step\", 1)));\n\n\t\t\t\tif (minMaxStep.min < min) {\n\t\t\t\t\tminMaxStep.min = min;\n\t\t\t\t}\n\n\t\t\t\tif (minMaxStep.max > max) {\n\t\t\t\t\tminMaxStep.max = max;\n\t\t\t\t}\n\n\t\t\t\tselectionMin = minMaxStep.min;\n\t\t\t\tselectionMax = minMaxStep.max;\n\t\t\t}\n\n\t\t\tif (strictMinMax) {\n\t\t\t\tif ($type.isNumber(minDefined)) {\n\t\t\t\t\tselectionMin = Math.max(selectionMin, minDefined);\n\t\t\t\t}\n\n\t\t\t\tif ($type.isNumber(maxDefined)) {\n\t\t\t\t\tselectionMax = Math.min(selectionMax, maxDefined);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (selectionStrictMinMax) {\n\t\t\t\tselectionMin = selectionMinReal - (selectionMaxReal - selectionMinReal) * extraMin;\n\t\t\t\tselectionMax = selectionMaxReal + (selectionMaxReal - selectionMinReal) * extraMax;\n\t\t\t}\n\n\t\t\tif (strictMinMax) {\n\t\t\t\tif ($type.isNumber(minDefined)) {\n\t\t\t\t\tselectionMin = minDefined;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tselectionMin = selectionMinReal;\n\t\t\t\t}\n\n\t\t\t\tif ($type.isNumber(maxDefined)) {\n\t\t\t\t\tselectionMax = maxDefined;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tselectionMax = selectionMaxReal;\n\t\t\t\t}\n\n\t\t\t\tif (selectionMax - selectionMin <= 0.00000001) {\n\t\t\t\t\tselectionMin -= this._deltaMinMax;\n\t\t\t\t\tselectionMax += this._deltaMinMax;\n\t\t\t\t}\n\n\t\t\t\tlet delta = selectionMax - selectionMin;\n\n\t\t\t\tselectionMin -= delta * extraMin;\n\t\t\t\tselectionMax += delta * extraMax;\n\t\t\t}\n\n\t\t\tif (this.get(\"logarithmic\")) {\n\n\t\t\t\tif (selectionMin <= 0) {\n\t\t\t\t\tselectionMin = selectionMinReal * (1 - Math.min(extraMin, 0.99));\n\t\t\t\t}\n\n\t\t\t\tif (selectionMin < min) {\n\t\t\t\t\tselectionMin = min;\n\t\t\t\t}\n\t\t\t\tif (selectionMax > max) {\n\t\t\t\t\tselectionMax = max;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet len = Math.min(20, Math.ceil(Math.log(this.getPrivate(\"maxZoomFactor\", 100) + 1) / Math.LN10) + 2);\n\n\t\t\tlet start = $math.round(this.valueToFinalPosition(selectionMin), len);\n\t\t\tlet end = $math.round(this.valueToFinalPosition(selectionMax), len);\n\n\t\t\tthis.setPrivateRaw(\"selectionMinFinal\", selectionMin);\n\t\t\tthis.setPrivateRaw(\"selectionMaxFinal\", selectionMax);\n\t\t\tthis.setPrivateRaw(\"selectionStepFinal\", minMaxStep.step);\n\n\t\t\tthis.zoom(start, end);\n\t\t}\n\t}\n\n\n\tprotected _getMinMax() {\n\t\tlet minDefined = this.get(\"min\");\n\t\tlet maxDefined = this.get(\"max\");\n\n\t\tlet min = Infinity;\n\t\tlet max = -Infinity;\n\n\t\tlet extraMin = this.get(\"extraMin\", 0);\n\t\tlet extraMax = this.get(\"extraMax\", 0);\n\n\t\tif (this.get(\"logarithmic\")) {\n\t\t\tif (!this.get(\"strictMinMax\")) {\n\t\t\t\tif (this.get(\"extraMin\") == null) {\n\t\t\t\t\textraMin = 0.1;\n\t\t\t\t}\n\t\t\t\tif (this.get(\"extraMax\") == null) {\n\t\t\t\t\textraMax = 0.2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet minDiff = Infinity;\n\n\t\t$array.each(this.series, (series) => {\n\t\t\tif (!series.get(\"ignoreMinMax\")) {\n\t\t\t\tlet seriesMin: number | undefined;\n\t\t\t\tlet seriesMax: number | undefined;\n\t\t\t\tif (series.get(\"xAxis\") === this) {\n\t\t\t\t\tseriesMin = series.getPrivate(\"minX\");\n\t\t\t\t\tseriesMax = series.getPrivate(\"maxX\");\n\t\t\t\t}\n\t\t\t\telse if (series.get(\"yAxis\") === this) {\n\t\t\t\t\tseriesMin = series.getPrivate(\"minY\");\n\t\t\t\t\tseriesMax = series.getPrivate(\"maxY\");\n\t\t\t\t}\n\n\t\t\t\tif ($type.isNumber(seriesMin) && $type.isNumber(seriesMax)) {\n\t\t\t\t\tmin = Math.min(min, seriesMin);\n\t\t\t\t\tmax = Math.max(max, seriesMax);\n\n\t\t\t\t\tlet diff = seriesMax - seriesMin;\n\n\t\t\t\t\tif (diff <= 0) {\n\t\t\t\t\t\tdiff = Math.abs(seriesMax / 100);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (diff < minDiff) {\n\t\t\t\t\t\tminDiff = diff;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tthis.axisRanges.each((range) => {\n\t\t\tif (range.get(\"affectsMinMax\")) {\n\t\t\t\tlet value = range.get(\"value\");\n\t\t\t\tif (value != null) {\n\t\t\t\t\tmin = Math.min(min, value);\n\t\t\t\t\tmax = Math.max(max, value);\n\t\t\t\t}\n\t\t\t\tvalue = range.get(\"endValue\");\n\t\t\t\tif (value != null) {\n\t\t\t\t\tmin = Math.min(min, value);\n\t\t\t\t\tmax = Math.max(max, value);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tif (this.get(\"logarithmic\")) {\n\t\t\tlet treatZeroAs = this.get(\"treatZeroAs\");\n\t\t\tif ($type.isNumber(treatZeroAs)) {\n\t\t\t\tif (min <= 0) {\n\t\t\t\t\tmin = treatZeroAs;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (min <= 0) {\n\t\t\t\tnew Error(\"Logarithmic value axis can not have values <= 0.\");\n\t\t\t}\n\t\t}\n\n\t\tif (min === 0 && max === 0) {\n\t\t\tmax = 0.9;\n\t\t\tmin = -0.9;\n\t\t}\n\n\t\tif ($type.isNumber(minDefined)) {\n\t\t\tmin = minDefined;\n\t\t}\n\t\tif ($type.isNumber(maxDefined)) {\n\t\t\tmax = maxDefined;\n\t\t}\n\n\t\t// meaning no min/max found on series/ranges and no min/max was defined\n\t\tif (min === Infinity || max === -Infinity) {\n\t\t\tthis.setPrivate(\"minFinal\", undefined);\n\t\t\tthis.setPrivate(\"maxFinal\", undefined);\n\t\t\treturn;\n\t\t}\n\n\t\tif (min > max) {\n\t\t\t[min, max] = [max, min];\n\t\t}\n\n\t\tconst initialMin = min;\n\t\tconst initialMax = max;\n\n\t\t// adapter\n\t\tlet minAdapted = this.adapters.fold(\"min\", min);\n\t\tlet maxAdapted = this.adapters.fold(\"max\", max);\n\n\t\tthis._minRealLog = min;\n\n\t\tif ($type.isNumber(minAdapted)) {\n\t\t\tmin = minAdapted;\n\t\t}\n\n\t\tif ($type.isNumber(maxAdapted)) {\n\t\t\tmax = maxAdapted;\n\t\t}\n\n\t\t// DateAxis does some magic here\n\t\tmin = this._fixMin(min);\n\t\tmax = this._fixMax(max);\n\n\t\t// this happens if starLocation and endLocation are 0.5 and DateAxis has only one date\t\t\n\t\tif (max - min <= 1 / Math.pow(10, 15)) {\n\t\t\tif (max - min !== 0) {\n\t\t\t\tthis._deltaMinMax = (max - min) / 2;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._getDelta(max);\n\t\t\t}\n\n\t\t\tmin -= this._deltaMinMax;\n\t\t\tmax += this._deltaMinMax;\n\t\t}\n\n\t\t// add extras\n\t\tmin -= (max - min) * extraMin;\n\t\tmax += (max - min) * extraMax;\n\n\t\tif (this.get(\"logarithmic\")) {\n\t\t\t// don't let min go below 0 if real min is >= 0\n\t\t\tif (min < 0 && initialMin >= 0) {\n\t\t\t\tmin = 0;\n\t\t\t}\n\t\t\t// don't let max go above 0 if real max is <= 0\n\t\t\tif (max > 0 && initialMax <= 0) {\n\t\t\t\tmax = 0;\n\t\t\t}\n\t\t}\n\n\t\tthis._minReal = min;\n\t\tthis._maxReal = max;\n\n\t\tlet strictMinMax = this.get(\"strictMinMax\");\n\t\tlet strictMinMaxSelection = this.get(\"strictMinMaxSelection\", false);\n\t\tif (strictMinMaxSelection) {\n\t\t\tstrictMinMax = strictMinMaxSelection;\n\t\t}\n\n\t\tlet strict = strictMinMax;\n\t\tif ($type.isNumber(maxDefined)) {\n\t\t\tstrict = true;\n\t\t}\n\n\t\tlet gridCount = this.get(\"renderer\").gridCount();\n\n\t\tlet minMaxStep: IMinMaxStep = this._adjustMinMax(min, max, gridCount, strict);\n\n\t\tmin = minMaxStep.min;\n\t\tmax = minMaxStep.max;\n\n\t\t// do it for the second time with strict true (importat!)\n\t\tminMaxStep = this._adjustMinMax(min, max, gridCount, true);\n\n\t\tmin = minMaxStep.min;\n\t\tmax = minMaxStep.max;\n\n\t\t// return min max if strict\n\t\tif (strictMinMax) {\n\t\t\tif ($type.isNumber(minDefined)) {\n\t\t\t\tmin = minDefined;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmin = this._minReal;\n\t\t\t}\n\n\t\t\tif ($type.isNumber(maxDefined)) {\n\t\t\t\tmax = maxDefined;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmax = this._maxReal;\n\t\t\t}\n\n\t\t\tif (max - min <= 0.00000001) {\n\t\t\t\tmin -= this._deltaMinMax;\n\t\t\t\tmax += this._deltaMinMax;\n\t\t\t}\n\n\t\t\tlet delta = max - min;\n\t\t\tmin -= delta * extraMin;\n\t\t\tmax += delta * extraMax;\n\t\t}\n\n\t\tminAdapted = this.adapters.fold(\"min\", min);\n\t\tmaxAdapted = this.adapters.fold(\"max\", max);\n\n\t\tif ($type.isNumber(minAdapted)) {\n\t\t\tmin = minAdapted;\n\t\t}\n\n\t\tif ($type.isNumber(maxAdapted)) {\n\t\t\tmax = maxAdapted;\n\t\t}\n\n\t\tif (minDiff == Infinity) {\n\t\t\tminDiff = (max - min)\n\t\t}\n\n\t\t// this is to avoid floating point number error\n\t\tlet decCount = Math.round(Math.abs(Math.log(Math.abs(max - min)) * Math.LOG10E)) + 5;\n\n\t\tmin = $math.round(min, decCount);\n\t\tmax = $math.round(max, decCount);\n\n\n\n\t\tconst syncWithAxis = this.get(\"syncWithAxis\");\n\t\tif (syncWithAxis) {\n\t\t\tminMaxStep = this._syncAxes(min, max, minMaxStep.step, syncWithAxis.getPrivate(\"minFinal\", syncWithAxis.getPrivate(\"min\", 0)), syncWithAxis.getPrivate(\"maxFinal\", syncWithAxis.getPrivate(\"max\", 1)), syncWithAxis.getPrivate(\"step\", 1));\n\t\t\tmin = minMaxStep.min;\n\t\t\tmax = minMaxStep.max;\n\t\t}\n\n\n\t\tthis.setPrivateRaw(\"maxZoomFactor\", Math.max(1, Math.ceil((max - min) / minDiff * this.get(\"maxZoomFactor\", 100))));\n\t\tthis._fixZoomFactor();\n\n\t\tif (this.get(\"logarithmic\")) {\n\t\t\tthis._minLogAdjusted = min;\n\t\t\tmin = this._minReal;\n\t\t\tmax = this._maxReal;\n\n\t\t\tif (min <= 0) {\n\t\t\t\tmin = initialMin * (1 - Math.min(extraMin, 0.99));\n\t\t\t}\n\t\t}\n\n\n\n\t\tif ($type.isNumber(min) && $type.isNumber(max)) {\n\t\t\tif (this.getPrivate(\"minFinal\") !== min || this.getPrivate(\"maxFinal\") !== max) {\n\n\t\t\t\tthis.setPrivate(\"minFinal\", min);\n\t\t\t\tthis.setPrivate(\"maxFinal\", max);\n\t\t\t\tthis._saveMinMax(min, max);\n\n\t\t\t\tconst duration = this.get(\"interpolationDuration\", 0);\n\t\t\t\tconst easing = this.get(\"interpolationEasing\");\n\n\t\t\t\tthis.animatePrivate({ key: \"min\", to: min, duration, easing });\n\t\t\t\tthis.animatePrivate({ key: \"max\", to: max, duration, easing });\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _fixZoomFactor() {\n\t}\n\n\tprotected _getDelta(max: number) {\n\t\t// the number by which we need to raise 10 to get difference\n\t\tlet exponent: number = Math.log(Math.abs(max)) * Math.LOG10E;\n\n\t\t// here we find a number which is power of 10 and has the same count of numbers as difference has\n\t\tlet power = Math.pow(10, Math.floor(exponent));\n\n\t\t// reduce this number by 10 times\n\t\tpower = power / 10;\n\n\t\tthis._deltaMinMax = power;\n\t}\n\n\tprotected _saveMinMax(_min: number, _max: number) {\n\n\t}\n\n\n\tprotected _adjustMinMax(min: number, max: number, gridCount: number, strictMode?: boolean): IMinMaxStep {\n\t\t// will fail if 0\n\t\tif (gridCount <= 1) {\n\t\t\tgridCount = 1;\n\t\t}\n\n\t\tgridCount = Math.round(gridCount);\n\n\t\tlet initialMin: number = min;\n\t\tlet initialMax: number = max;\n\n\t\tlet difference = max - min;\n\n\t\t// in case min and max is the same, use max\n\t\tif (difference === 0) {\n\t\t\tdifference = Math.abs(max);\n\t\t}\n\n\t\t// the number by which we need to raise 10 to get difference\n\t\tlet exponent: number = Math.log(Math.abs(difference)) * Math.LOG10E;\n\n\t\t// here we find a number which is power of 10 and has the same count of numbers as difference has\n\t\tlet power = Math.pow(10, Math.floor(exponent));\n\n\t\t// reduce this number by 10 times\n\t\tpower = power / 10;\n\n\t\tlet extra: number = power;\n\t\tif (strictMode) {\n\t\t\textra = 0;\n\t\t}\n\n\t\t// round down min\n\t\tif (strictMode) {\n\t\t\tmin = Math.floor(min / power) * power;\n\t\t\t// round up max\n\t\t\tmax = Math.ceil(max / power) * power;\n\t\t}\n\t\telse {\n\t\t\tmin = Math.ceil(min / power) * power - extra;\n\t\t\t// round up max\n\t\t\tmax = Math.floor(max / power) * power + extra;\n\t\t}\n\n\t\t// don't let min go below 0 if real min is >= 0\n\t\tif (min < 0 && initialMin >= 0) {\n\t\t\tmin = 0;\n\t\t}\n\t\t// don't let max go above 0 if real max is <= 0\n\t\tif (max > 0 && initialMax <= 0) {\n\t\t\tmax = 0;\n\t\t}\n\n\t\texponent = Math.log(Math.abs(difference)) * Math.LOG10E;\n\t\tpower = Math.pow(10, Math.floor(exponent));\n\t\tpower = power / 100; // used to be 10 in v4, but this caused issue that there could be limited number of grids with even very small minGridDistance\n\n\t\t// approximate difference between two grid lines\n\t\tlet step = Math.ceil((difference / gridCount) / power) * power;\n\t\tlet stepPower = Math.pow(10, Math.floor(Math.log(Math.abs(step)) * Math.LOG10E));\n\n\t\t// the step should divide by  2, 5, and 10.\n\t\tlet stepDivisor: number = Math.ceil(step / stepPower); // number 0 - 10\n\n\n\t\tif (stepDivisor > 5) {\n\t\t\tstepDivisor = 10;\n\t\t}\n\t\telse if (stepDivisor <= 5 && stepDivisor > 2) {\n\t\t\tstepDivisor = 5;\n\t\t}\n\n\t\t// now get real step\n\t\tstep = Math.ceil(step / (stepPower * stepDivisor)) * stepPower * stepDivisor;\n\n\n\t\tlet maxPrecision = this.get(\"maxPrecision\");\n\t\tif ($type.isNumber(maxPrecision)) {\n\n\t\t\tlet ceiledStep = $math.ceil(step, maxPrecision);\n\t\t\tif (maxPrecision < Number.MAX_VALUE && step !== ceiledStep) {\n\t\t\t\tstep = ceiledStep;\n\t\t\t\tif (step == 0) {\n\t\t\t\t\tstep = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet decCount: number = 0;\n\t\t// in case numbers are smaller than 1\n\t\tif (stepPower < 1) {\n\t\t\t// exponent is less then 1 too. Count decimals of exponent\n\t\t\tdecCount = Math.round(Math.abs(Math.log(Math.abs(stepPower)) * Math.LOG10E)) + 1;\n\t\t\t// round step\n\t\t\tstep = $math.round(step, decCount);\n\t\t}\n\n\t\t// final min and max\n\t\tlet minCount = Math.floor(min / step);\n\n\t\tmin = $math.round(step * minCount, decCount);\n\n\t\tlet maxCount: number;\n\n\t\tif (!strictMode) {\n\t\t\tmaxCount = Math.ceil(max / step);\n\t\t}\n\t\telse {\n\t\t\tmaxCount = Math.floor(max / step);\n\t\t}\n\n\t\tif (maxCount === minCount) {\n\t\t\tmaxCount++;\n\t\t}\n\n\t\tmax = $math.round(step * maxCount, decCount);\n\n\t\tif (max < initialMax) {\n\t\t\tmax = max + step;\n\t\t}\n\n\t\tif (min > initialMin) {\n\t\t\tmin = min - step;\n\t\t}\n\n\n\t\tstep = this.fixSmallStep(step);\n\n\t\treturn { min: min, max: max, step: step };\n\t}\n\n\t/**\n\t * Returns text to be used in an axis tooltip for specific relative position.\n\t *\n\t * @param   position  Position\n\t * @return            Tooltip text\n\t */\n\tpublic getTooltipText(position: number, _adjustPosition?: boolean): string | undefined {\n\t\tconst numberFormat = this.get(\"tooltipNumberFormat\", this.get(\"numberFormat\"));\n\t\tconst formatter = this.getNumberFormatter();\n\t\tconst extraDecimals = this.get(\"extraTooltipPrecision\", 0);\n\t\tconst decimals = this.getPrivate(\"stepDecimalPlaces\", 0) + extraDecimals;\n\t\tconst value = $math.round(this.positionToValue(position), decimals);\n\n\t\tif (numberFormat) {\n\t\t\treturn formatter.format(value, numberFormat);\n\t\t}\n\t\telse {\n\t\t\treturn formatter.format(value, undefined, decimals);\n\t\t}\n\t}\n\n\t/**\n\t * Returns a data item from series that is closest to the `position`.\n\t *\n\t * @param   series    Series\n\t * @param   position  Relative position\n\t * @return            Data item\n\t */\n\tpublic getSeriesItem(series: XYSeries, position: number): DataItem<IXYSeriesDataItem> | undefined {\n\t\tlet fieldName = <any>(this.getPrivate(\"name\")! + this.get(\"renderer\").getPrivate(\"letter\")!);\n\t\tlet value = this.positionToValue(position);\n\n\t\tlet index: number | undefined = undefined;\n\t\tlet oldDiff: number;\n\t\t$array.each(series.dataItems, (dataItem, i) => {\n\t\t\tconst diff = Math.abs(dataItem.get(fieldName) - value);\n\t\t\tif (index === undefined || diff < oldDiff) {\n\t\t\t\tindex = i;\n\t\t\t\toldDiff = diff;\n\t\t\t}\n\t\t});\n\n\t\tif (index != null) {\n\t\t\treturn series.dataItems[index];\n\t\t}\n\t}\n\n\t/**\n\t * Zooms the axis to specific `start` and `end` values.\n\t *\n\t * Optional `duration` specifies duration of zoom animation in milliseconds.\n\t *\n\t * @param  start     Start value\n\t * @param  end       End value\n\t * @param  duration  Duration in milliseconds\n\t */\n\tpublic zoomToValues(start: number, end: number, duration?: number) {\n\t\tconst min = this.getPrivate(\"minFinal\", this.getPrivate(\"min\", 0));\n\t\tconst max = this.getPrivate(\"maxFinal\", this.getPrivate(\"max\", 1));\n\n\t\tif (this.getPrivate(\"min\") != null && this.getPrivate(\"max\") != null) {\n\t\t\tthis.zoom((start - min) / (max - min), (end - min) / (max - min), duration);\n\t\t}\n\t}\n\n\n\t/**\n\t * Syncs with a target axis.\n\t *\n\t * @param  min  Min\n\t * @param  max  Max\n\t * @param  step Step\n\t */\n\tprotected _syncAxes(min: number, max: number, step: number, syncMin: number, syncMax: number, syncStep: number) {\n\t\tlet axis = this.get(\"syncWithAxis\");\n\t\tif (axis) {\n\t\t\tlet count: number = Math.round(syncMax - syncMin) / syncStep;\n\t\t\tlet currentCount = Math.round((max - min) / step);\n\n\t\t\tlet gridCount = this.get(\"renderer\").gridCount();\n\n\t\t\tif ($type.isNumber(count) && $type.isNumber(currentCount)) {\n\t\t\t\tlet synced = false;\n\t\t\t\tlet c = 0\n\t\t\t\tlet diff = (max - min) * 0.01;\n\t\t\t\tlet omin = min;\n\t\t\t\tlet omax = max;\n\t\t\t\tlet ostep = step;\n\n\t\t\t\twhile (synced != true) {\n\t\t\t\t\tsynced = this._checkSync(omin, omax, ostep, count);\n\t\t\t\t\tc++;\n\t\t\t\t\tif (c > 500) {\n\t\t\t\t\t\tsynced = true;\n\t\t\t\t\t}\n\t\t\t\t\tif (!synced) {\n\t\t\t\t\t\tif (c / 3 == Math.round(c / 3)) {\n\t\t\t\t\t\t\tomin = min - diff * c;\n\t\t\t\t\t\t\tif (min >= 0 && omin < 0) {\n\t\t\t\t\t\t\t\tomin = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tomax = max + diff * c;\n\t\t\t\t\t\t\tif (omax <= 0 && omax > 0) {\n\t\t\t\t\t\t\t\tomax = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet minMaxStep = this._adjustMinMax(omin, omax, gridCount, true);\n\t\t\t\t\t\tomin = minMaxStep.min;\n\t\t\t\t\t\tomax = minMaxStep.max;\n\t\t\t\t\t\tostep = minMaxStep.step;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tmin = omin;\n\t\t\t\t\t\tmax = omax;\n\t\t\t\t\t\tstep = ostep;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn { min: min, max: max, step: step };\n\t}\n\n\t/**\n\t * Returns `true` if axis needs to be resunced with some other axis.\n\t */\n\tprotected _checkSync(min: number, max: number, step: number, count: number): boolean {\n\t\tlet currentCount = (max - min) / step;\n\t\tfor (let i = 1; i < count; i++) {\n\t\t\tif ($math.round(currentCount / i, 1) == count || currentCount * i == count) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Returns relative position between two grid lines of the axis.\n\t *\n\t * @return Position\n\t */\n\tpublic getCellWidthPosition(): number {\n\t\tlet max = this.getPrivate(\"selectionMax\", this.getPrivate(\"max\"));\n\t\tlet min = this.getPrivate(\"selectionMin\", this.getPrivate(\"min\"));\n\n\t\tif ($type.isNumber(max) && $type.isNumber(min)) {\n\t\t\treturn this.getPrivate(\"step\", 1) / (max - min);\n\t\t}\n\t\treturn 0.05;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic nextPosition(count?: number) {\n\t\tif (count == null) {\n\t\t\tcount = 1;\n\t\t}\n\n\t\tif (this.get(\"renderer\").getPrivate(\"letter\") == \"Y\") {\n\t\t\tcount *= -1;\n\t\t}\n\n\t\tlet value = this.positionToValue(this.getPrivate(\"tooltipPosition\", 0));\n\t\tvalue += this.getPrivate(\"step\", 1) * count;\n\t\tvalue = $math.fitToRange(value, this.getPrivate(\"selectionMin\", 0), this.getPrivate(\"selectionMax\", 1));\n\n\t\treturn this.toGlobalPosition(this.valueToPosition(value));\n\t}\n}\n","import type { DataItem } from \"../../../core/render/Component\";\nimport type { AxisRenderer } from \"./AxisRenderer\";\nimport type { Tooltip } from \"../../../core/render/Tooltip\";\nimport type { IXYSeriesDataItem, XYSeries } from \"../series/XYSeries\";\n\nimport { Axis, IAxisSettings, IAxisPrivate, IAxisDataItem, IAxisEvents } from \"./Axis\";\nimport { populateString } from \"../../../core/util/PopulateString\";\nimport { ValueAxis } from \"./ValueAxis\";\n\nimport * as $array from \"../../../core/util/Array\";\nimport * as $type from \"../../../core/util/Type\";\nimport * as $math from \"../../../core/util/Math\";\nimport * as $utils from \"../../../core/util/Utils\";\n\nexport interface ICategoryAxisSettings<R extends AxisRenderer> extends IAxisSettings<R> {\n\n\t/**\n\t * A function that can be used to specify how to configure axis fills.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Axis_fills} for more info\n\t */\n\tfillRule?: (dataItem: DataItem<ICategoryAxisDataItem>, index?: number) => void;\n\n\t/**\n\t * A field in data which holds categories.\n\t */\n\tcategoryField: string;\n\n\t/**\n\t * A key to look up in data for an id of the data item.\n\t */\n\tidField?: string;\n\n\t/**\n\t * A key to look up in data for a relative size value of the data item. \n\t */\n\tcellSizeField?: string;\n\n\t/**\n\t * Relative location of where axis cell starts: 0 - beginning, 1 - end.\n\t *\n\t * @default 0\n\t */\n\tstartLocation?: number;\n\n\t/**\n\t * Relative location of where axis cell ends: 0 - beginning, 1 - end.\n\t *\n\t * @default 1\n\t */\n\tendLocation?: number;\n}\n\nexport interface ICategoryAxisDataItem extends IAxisDataItem {\n\n\t/**\n\t * Named category.\n\t */\n\tcategory?: string;\n\n\t/**\n\t * Named end category (for axis items that span multiple categories, like\n\t * axis ranges).\n\t */\n\tendCategory?: string;\n\n\t/**\n\t * Index of the data item.\n\t */\n\tindex?: number;\n\n\t/**\n\t * Relative location of the category within cell: 0 - start, 1 - end.\n\t */\n\tcategoryLocation?: number;\n\n\t/**\n\t * Relative location of the end category within cell: 0 - start, 1 - end.\n\t */\n\tendCategoryLocation?: number;\n\n\t/**\n\t * A distance to shift data item relative to its original position.\n\t *\n\t * The value is 0 to 1, where 1 is full witdth of the axis.\n\t *\n\t * Can be used to sort data items without modifying order of the actual data.\n\t */\n\tdeltaPosition?: number;\n\n\t/**\n\t * A size of the category cell.\n\t *\n\t * NOTE: This value is used only if `cellSizeField` is set on the series.\n\t */\n\tcellSize?: number;\n\n\t/**\n\t * @ignore\n\t */\n\tfinalCellSize?: number;\n\n\t/**\n\t * A unique id of the data item.\n\t */\n\tid?: string;\n}\n\nexport interface ICategoryAxisPrivate extends IAxisPrivate {\n\n\t/**\n\t * Start index of the current zoom scope.\n\t */\n\tstartIndex?: number;\n\n\t/**\n\t * End index of the current zoom scope.\n\t */\n\tendIndex?: number;\n}\n\nexport interface ICategoryAxisEvents extends IAxisEvents {\n\n}\n\n/**\n * Creates a category axis.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/category-axis/} for more info\n * @important\n */\nexport class CategoryAxis<R extends AxisRenderer> extends Axis<R> {\n\tpublic static className: string = \"CategoryAxis\";\n\tpublic static classNames: Array<string> = Axis.classNames.concat([CategoryAxis.className]);\n\n\tdeclare public _settings: ICategoryAxisSettings<R>;\n\tdeclare public _privateSettings: ICategoryAxisPrivate;\n\tdeclare public _dataItemSettings: ICategoryAxisDataItem;\n\tdeclare public _events: ICategoryAxisEvents;\n\n\tprotected _frequency: number = 1;\n\n\tprotected _itemMap: { [index: string]: DataItem<ICategoryAxisDataItem> } = {};\n\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"axis\"]);\n\t\tthis.fields.push(\"category\", \"id\", \"cellSize\");\n\t\tthis.setPrivateRaw(\"name\", \"category\");\n\t\tthis.addTag(\"category\");\n\t\tsuper._afterNew();\n\t}\n\n\tpublic _afterDataChange(): void {\n\t\tsuper._afterDataChange();\n\t\tconst len = this.dataItems.length;\n\t\tif (len > 0) {\n\t\t\tthis.setPrivateRaw(\"maxZoomFactor\", len);\n\t\t}\n\n\t\t// fix final indexes\t\t\n\t\tthis.setPrivateRaw(\"startIndex\", Math.min(this.getPrivate(\"startIndex\", 0), len));\n\t\tthis.setPrivateRaw(\"endIndex\", Math.min(this.getPrivate(\"endIndex\", len), 1));\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tconst len = this.dataItems.length;\n\t\tlet i = 0;\n\t\tif (this._valuesDirty) {\n\t\t\tthis._itemMap = {};\n\t\t\t$array.each(this.dataItems, (dataItem) => {\n\t\t\t\tdataItem.setRaw(\"index\", i);\n\t\t\t\tthis._itemMap[dataItem.get(\"category\") as string] = dataItem;\n\t\t\t\ti++;\n\t\t\t})\n\n\t\t\tthis.setPrivateRaw(\"maxZoomFactor\", len);\n\t\t}\n\n\t\tlet start = this.get(\"start\", 0);\n\t\tlet end = this.get(\"end\", 1);\n\t\t\n\t\tlet indices = this._getIndices(start, end);\n\n\t\tthis.setPrivateRaw(\"startIndex\", indices.startIndex);\n\t\tthis.setPrivateRaw(\"endIndex\", indices.endIndex);\n\n\t\tif (this._sizeDirty || this._valuesDirty || (this.isDirty(\"start\") || this.isDirty(\"end\") || this.isPrivateDirty(\"endIndex\") || this.isPrivateDirty(\"startIndex\") || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\"))) {\n\t\t\tif (this.dataItems.length > 0) {\n\t\t\t\tthis._handleRangeChange();\n\t\t\t\tthis._prepareAxisItems();\n\t\t\t\tthis._updateAxisRanges();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic adjustZoom(): void {\n\t\tconst len = this.dataItems.length;\n\t\tif (len > 1) {\n\t\t\tlet maxZoomCount = this.get(\"maxZoomCount\", this.dataItems.length);\n\t\t\tlet minZoomCount = this.get(\"minZoomCount\", 1);\n\n\t\t\tlet count = 0;\n\t\t\tlet startIndex = this.getPrivate(\"startIndex\", 0);\n\t\t\tlet endIndex = this.getPrivate(\"endIndex\", 0);\n\n\t\t\tconst sAnimation = this._sAnimation;\n\t\t\tconst eAnimation = this._eAnimation;\n\n\t\t\tlet start = this.get(\"start\", 0);\n\t\t\tlet getIndices = false;\n\t\t\tif (sAnimation && !sAnimation.stopped) {\n\t\t\t\tstart = Number(sAnimation.to);\n\t\t\t\tgetIndices = true;\n\t\t\t}\n\t\t\tlet end = this.get(\"end\", 1);\n\t\t\tif (eAnimation && !eAnimation.stopped) {\n\t\t\t\tend = Number(eAnimation.to);\n\t\t\t\tgetIndices = true;\n\t\t\t}\n\n\t\t\tif (getIndices) {\n\t\t\t\tconst indices = this._getIndices(start, end);\n\t\t\t\tstartIndex = indices.startIndex;\n\t\t\t\tendIndex = indices.endIndex;\n\t\t\t}\n\n\t\t\tfor (let i = startIndex; i < endIndex; i++) {\n\t\t\t\tconst dataItem = this.dataItems[i];\n\t\t\t\tcount += dataItem.get(\"finalCellSize\", 1);\n\t\t\t};\n\n\t\t\tif (count <= minZoomCount) {\n\t\t\t\t// need to zoom out\n\t\t\t\tlet c = 0;\n\n\t\t\t\tfor (let i = startIndex; i < len; i++) {\n\t\t\t\t\tconst dataItem = this.dataItems[i];\n\t\t\t\t\tc += dataItem.get(\"finalCellSize\", 1);\n\n\t\t\t\t\tendIndex = i + 1;\n\t\t\t\t\tif (c >= minZoomCount) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (c < minZoomCount) {\n\t\t\t\t\t// still not enough, try to extend at the start\n\t\t\t\t\tfor (let i = startIndex - 1; i >= 0; i--) {\n\t\t\t\t\t\tconst dataItem = this.dataItems[i];\n\t\t\t\t\t\tc += dataItem.get(\"finalCellSize\", 1);\n\t\t\t\t\t\tstartIndex = i;\n\t\t\t\t\t\tif (c >= minZoomCount) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.zoomToIndexes(startIndex, endIndex);\n\t\t\t}\n\t\t\telse if (count >= maxZoomCount) {\n\t\t\t\tlet c = count;\n\t\t\t\tfor (let i = endIndex - 1; i >= startIndex; i--) {\n\t\t\t\t\tconst dataItem = this.dataItems[i];\n\t\t\t\t\tc -= dataItem.get(\"finalCellSize\", 1);\n\t\t\t\t\tif (c <= maxZoomCount) {\n\t\t\t\t\t\tendIndex = i + 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.zoomToIndexes(startIndex, endIndex);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _handleRangeChange() {\n\t\t$array.each(this.series, (series) => {\n\t\t\tlet startCategory = this.dataItems[this.startIndex()].get(\"category\")!;\n\t\t\tlet endCategory = this.dataItems[this.endIndex() - 1].get(\"category\")!;\n\n\t\t\tlet baseAxis = series.get(\"baseAxis\");\n\t\t\tlet xAxis = series.get(\"xAxis\");\n\t\t\tlet yAxis = series.get(\"yAxis\");\n\n\t\t\tif (xAxis instanceof CategoryAxis && yAxis instanceof CategoryAxis) {\n\t\t\t\tseries._markDirtyAxes();\n\t\t\t}\n\t\t\telse if (baseAxis === this) {\n\t\t\t\tlet key: string | undefined;\n\t\t\t\tlet openKey: string | undefined;\n\t\t\t\tlet otherAxis = yAxis;\n\t\t\t\tif (xAxis === baseAxis) {\n\t\t\t\t\tif (series.get(\"categoryXField\")) {\n\t\t\t\t\t\tkey = \"categoryX\";\n\t\t\t\t\t}\n\t\t\t\t\tif (series.get(\"openCategoryXField\")) {\n\t\t\t\t\t\topenKey = \"openCategoryX\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (yAxis === baseAxis) {\n\t\t\t\t\tif (series.get(\"categoryYField\")) {\n\t\t\t\t\t\tkey = \"categoryY\";\n\t\t\t\t\t}\n\t\t\t\t\tif (series.get(\"openCategoryYField\")) {\n\t\t\t\t\t\topenKey = \"openCategoryY\";\n\t\t\t\t\t}\n\t\t\t\t\totherAxis = xAxis;\n\t\t\t\t}\n\n\t\t\t\tif (otherAxis instanceof ValueAxis) {\n\n\t\t\t\t\tif (key || openKey) {\n\t\t\t\t\t\tlet startDataItem: DataItem<IXYSeriesDataItem> | undefined;\n\t\t\t\t\t\tlet endDataItem: DataItem<IXYSeriesDataItem> | undefined;\n\n\t\t\t\t\t\tfunction findDataItem(\n\t\t\t\t\t\t\tseries: XYSeries,\n\t\t\t\t\t\t\tcategoryAxis: CategoryAxis<any>,\n\t\t\t\t\t\t\tkey: string | undefined,\n\t\t\t\t\t\t\topenKey: string | undefined,\n\t\t\t\t\t\t\tcategory: string,\n\t\t\t\t\t\t\tdirection: \"previous\" | \"next\"\n\t\t\t\t\t\t): DataItem<IXYSeriesDataItem> | undefined {\n\t\t\t\t\t\t\tlet dataItem: DataItem<IXYSeriesDataItem> | undefined;\n\t\t\t\t\t\t\tlet idx = categoryAxis.categoryToIndex(category!);\n\n\t\t\t\t\t\t\twhile (!dataItem && idx >= 0 && idx < categoryAxis.dataItems.length) {\n\t\t\t\t\t\t\t\tlet searchCategory = categoryAxis.dataItems[idx].get(\"category\");\n\t\t\t\t\t\t\t\tif (direction == \"previous\") {\n\t\t\t\t\t\t\t\t\tfor (let i = series.dataItems.length - 1; i >= 0; i--) {\n\t\t\t\t\t\t\t\t\t\tlet item = series.dataItems[i];\n\t\t\t\t\t\t\t\t\t\tif (key && item.get(key as any) === searchCategory) {\n\t\t\t\t\t\t\t\t\t\t\tdataItem = item;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (openKey && item.get(openKey as any) === searchCategory) {\n\t\t\t\t\t\t\t\t\t\t\tdataItem = item;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tfor (let i = 0, len = series.dataItems.length; i < len; i++) {\n\t\t\t\t\t\t\t\t\t\tlet item = series.dataItems[i];\n\t\t\t\t\t\t\t\t\t\tif (key && item.get(key as any) === searchCategory) {\n\t\t\t\t\t\t\t\t\t\t\tdataItem = item;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (openKey && item.get(openKey as any) === searchCategory) {\n\t\t\t\t\t\t\t\t\t\t\tdataItem = item;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!dataItem) {\n\t\t\t\t\t\t\t\t\tidx += direction === \"previous\" ? -1 : 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn dataItem;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstartDataItem = findDataItem(series, this, key, openKey, startCategory, \"next\");\n\t\t\t\t\t\tendDataItem = findDataItem(series, this, key, openKey, endCategory, \"previous\");\n\n\t\t\t\t\t\tlet startIndex = 0;\n\t\t\t\t\t\tlet endIndex = series.dataItems.length;\n\n\t\t\t\t\t\tif (startDataItem) {\n\t\t\t\t\t\t\tstartIndex = series.dataItems.indexOf(startDataItem);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (endDataItem) {\n\t\t\t\t\t\t\tendIndex = series.dataItems.indexOf(endDataItem) + 1;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tseries.setPrivate(\"startIndex\", startIndex);\n\t\t\t\t\t\tseries.setPrivate(\"endIndex\", endIndex);\n\n\t\t\t\t\t\tlet hasValue = false;\n\t\t\t\t\t\tfor (let i = startIndex; i < endIndex; i++) {\n\t\t\t\t\t\t\tconst dataItem = series.dataItems[i];\n\n\t\t\t\t\t\t\t$array.each(series.__valueXShowFields, (key) => {\n\t\t\t\t\t\t\t\tlet value = dataItem.get(<any>key);\n\t\t\t\t\t\t\t\tif (value != null) {\n\t\t\t\t\t\t\t\t\thasValue = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t$array.each(series.__valueYShowFields, (key) => {\n\t\t\t\t\t\t\t\tlet value = dataItem.get(<any>key);\n\t\t\t\t\t\t\t\tif (value != null) {\n\t\t\t\t\t\t\t\t\thasValue = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\tif (hasValue) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tseries.setPrivate(\"outOfSelection\", !hasValue);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tseries._markDirtyAxes();\t// must be outside\n\t\t\t}\n\t\t})\n\t}\n\n\n\tprotected _prepareAxisItems() {\n\t\tconst renderer = this.get(\"renderer\");\n\t\tconst len = this.dataItems.length;\n\n\t\tlet startIndex = this.startIndex();\n\t\tif (startIndex > 0) {\n\t\t\tstartIndex--;\n\t\t}\n\n\t\tlet endIndex = this.endIndex();\n\t\tif (endIndex < len) {\n\t\t\tendIndex++;\n\t\t}\n\n\t\tconst minorLabelsEnabled = renderer.get(\"minorLabelsEnabled\");\n\t\tconst minorGridEnabled = renderer.get(\"minorGridEnabled\", minorLabelsEnabled);\n\n\t\tlet maxCount = renderer.axisLength() / Math.max(renderer.get(\"minGridDistance\")!, 1);\n\n\t\tlet frequency = Math.max(1, Math.min(len, Math.ceil((endIndex - startIndex) / maxCount)));\n\n\t\tstartIndex = Math.floor(startIndex / frequency) * frequency;\n\t\tthis._frequency = frequency;\n\n\t\tfor (let j = 0; j < len; j++) {\n\t\t\tthis._toggleDataItem(this.dataItems[j], false);\n\t\t}\n\n\t\tlet f = this.dataItems[startIndex].get(\"index\", 0);\n\n\t\tfor (let i = startIndex; i < endIndex; i = i + frequency) {\n\t\t\tlet dataItem = this.dataItems[i];\n\n\t\t\tthis._createAssets(dataItem, []);\n\t\t\tthis._toggleDataItem(dataItem, true);\n\n\t\t\tlet count = frequency;\n\t\t\tif (minorGridEnabled) {\n\t\t\t\tcount = 1;\n\t\t\t}\n\n\t\t\tthis._prepareDataItem(dataItem, f, count);\n\n\t\t\tf++;\n\t\t}\n\n\t\tif (renderer.get(\"minorGridEnabled\")) {\n\t\t\tfor (let i = startIndex; i < endIndex; i++) {\n\t\t\t\tlet dataItem = this.dataItems[i];\n\t\t\t\tif (i % frequency != 0) {\n\t\t\t\t\tthis._createAssets(dataItem, [\"minor\"], true);\n\t\t\t\t\tthis._toggleDataItem(dataItem, true);\n\t\t\t\t\tthis._prepareDataItem(dataItem, 0, 1);\n\n\t\t\t\t\tif (!minorLabelsEnabled) {\n\t\t\t\t\t\tdataItem.get(\"label\")?.setPrivate(\"visible\", false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._updateGhost();\n\t}\n\n\n\tpublic _prepareDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, fillIndex?: number, count?: number) {\n\t\tlet renderer = this.get(\"renderer\");\n\n\t\tlet categoryLocation = dataItem.get(\"categoryLocation\", 0);\n\t\tlet endCategoryLocation = dataItem.get(\"endCategoryLocation\", 1);\n\n\t\tlet index: number | undefined = dataItem.get(\"index\");\n\n\t\tif (!$type.isNumber(index)) {\n\t\t\tindex = this.categoryToIndex(dataItem.get(\"category\")!);\n\t\t}\n\n\t\tlet position = this.indexToPosition(index, categoryLocation);\n\n\t\tlet endCategory = dataItem.get(\"endCategory\")!;\n\t\tlet endIndex: number;\n\t\tif (endCategory) {\n\t\t\tendIndex = this.categoryToIndex(endCategory);\n\t\t\tif (!$type.isNumber(endIndex)) {\n\t\t\t\tendIndex = index;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tendIndex = index;\n\t\t}\n\n\t\tlet endPosition = this.indexToPosition(endIndex, endCategoryLocation);\n\n\t\tlet fillEndIndex: number;\n\t\tlet fillEndPosition: number;\n\n\t\tif (dataItem.get(\"isRange\")) {\n\t\t\tfillEndIndex = endIndex;\n\n\t\t\tif (!$type.isNumber(index)) {\n\t\t\t\tthis._toggleDataItem(dataItem, false);\n\t\t\t\treturn;\t\t\t\t\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tfillEndIndex = index + this._frequency - 1;\n\t\t}\n\n\t\tfillEndPosition = this.indexToPosition(fillEndIndex, endCategoryLocation);\n\n\t\trenderer.updateLabel(dataItem.get(\"label\"), position, endPosition, count);\n\t\trenderer.updateGrid(dataItem.get(\"grid\"), position, endPosition);\n\t\trenderer.updateTick(dataItem.get(\"tick\"), position, endPosition, count);\n\t\trenderer.updateFill(dataItem.get(\"axisFill\"), position, fillEndPosition);\n\n\t\tthis._processBullet(dataItem);\n\t\trenderer.updateBullet(dataItem.get(\"bullet\"), position, endPosition);\n\n\t\tconst fillRule = this.get(\"fillRule\");\n\t\tif (fillRule) {\n\t\t\tfillRule(dataItem, fillIndex)\n\t\t}\n\t}\n\n\tpublic startIndex() {\n\t\tlet len = this.dataItems.length;\n\t\treturn Math.min(Math.max(this.getPrivate(\"startIndex\", 0), 0), len - 1);\n\t}\n\n\tpublic endIndex() {\n\t\tlet len = this.dataItems.length;\n\t\treturn Math.max(1, Math.min(this.getPrivate(\"endIndex\", len), len));\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic baseValue(): any {\n\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic basePosition() {\n\t\treturn 0;\n\t}\n\n\t/**\n\t * Returns X coordinate in pixels corresponding to specific category index.\n\t *\n\t * @param   value  Index\n\t * @return         X coordinate\n\t */\n\tpublic getX(value: string): number {\n\t\tlet axisDataItem = this._itemMap[value];\n\t\tif (axisDataItem) {\n\t\t\treturn this._settings.renderer.positionToCoordinate(this.indexToPosition(axisDataItem.get(\"index\", 0)));\n\t\t}\n\t\treturn NaN;\n\t}\n\n\t/**\n\t * Returns Y coordinate in pixels corresponding to specific category index.\n\t *\n\t * @param   value  Index\n\t * @return         Y coordinate\n\t */\n\tpublic getY(value: string): number {\n\t\tlet axisDataItem = this._itemMap[value];\n\t\tif (axisDataItem) {\n\t\t\treturn this._settings.renderer.positionToCoordinate(this.indexToPosition(axisDataItem.get(\"index\", 0)));\n\t\t}\n\t\treturn NaN;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getDataItemPositionX(dataItem: DataItem<IXYSeriesDataItem>, field: string, cellLocation: number, _axisLocation?: number): number {\n\t\tconst category = dataItem.get(field as any);\n\t\tconst axisDataItem = this._itemMap[category];\n\n\t\tif (axisDataItem) {\n\t\t\treturn this.indexToPosition(axisDataItem.get(\"index\", 0), cellLocation);\n\t\t}\n\t\treturn NaN;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getDataItemCoordinateX(dataItem: DataItem<IXYSeriesDataItem>, field: string, cellLocation: number, _axisLocation?: number): number {\n\t\treturn this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(dataItem, field, cellLocation, _axisLocation));\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getDataItemPositionY(dataItem: DataItem<IXYSeriesDataItem>, field: string, cellLocation: number, _axisLocation?: number): number {\n\t\tconst category = dataItem.get(field as any);\n\t\tconst axisDataItem = this._itemMap[category];\n\t\tif (axisDataItem) {\n\t\t\treturn this.indexToPosition(axisDataItem.get(\"index\", 0), cellLocation);\n\t\t}\n\t\treturn NaN;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getDataItemCoordinateY(dataItem: DataItem<IXYSeriesDataItem>, field: string, cellLocation: number, _axisLocation?: number): number {\n\t\treturn this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(dataItem, field, cellLocation, _axisLocation));\n\t}\n\n\t/**\n\t * Converts category index to a relative position.\n\t *\n\t * `location` indicates relative position within category: 0 - start, 1 - end.\n\t *\n\t * If not set, will use middle (0.5) of the category.\n\t *\n\t * @param   index     Index\n\t * @param   location  Location\n\t * @return            Index\n\t */\n\tpublic indexToPosition(index: number, location?: number, final?: boolean): number {\n\t\tlet len = this.dataItems.length;\n\t\tlet position = 0;\n\n\t\tif (len == 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tif (index >= len) {\n\t\t\tindex = len - 1;\n\t\t\tlocation = 1;\n\t\t}\n\n\t\tif (!$type.isNumber(location)) {\n\t\t\tlocation = 0.5;\n\t\t}\n\n\t\tif (!$type.isNumber(index)) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet startLocation = this.get(\"startLocation\", 0);\n\t\tlet endLocation = this.get(\"endLocation\", 1);\n\n\t\tif (!this.get(\"cellSizeField\")) {\n\t\t\tlen -= startLocation;\n\t\t\tlen -= (1 - endLocation);\n\n\t\t\tposition = (index + location - startLocation) / len;\n\t\t}\n\t\telse {\n\t\t\tlet name: \"finalCellSize\" | \"cellSize\" = final ? \"finalCellSize\" : \"cellSize\";\n\n\t\t\tconst dataItems = this.dataItems;\n\n\t\t\t// Calculate total modified count (sum of cell sizes)\n\t\t\tlet modCount = 0;\n\t\t\t$array.each(this.dataItems, (dataItem) => {\n\t\t\t\tmodCount += dataItem.get(name, 1);\n\t\t\t});\n\n\t\t\tmodCount -= startLocation * dataItems[0].get(name, 1);\n\t\t\tmodCount -= (1 - endLocation) * dataItems[dataItems.length - 1].get(name, 1);\n\n\t\t\t// Calculate the position based on cell sizes\n\t\t\tlet acc = 0;\n\t\t\tfor (let i = 0; i < index; i++) {\n\t\t\t\tacc += dataItems[i].get(name, 1);\n\t\t\t}\n\t\t\tlet cellSizeAtIndex = dataItems[index].get(name, 1);\n\n\t\t\tposition = (acc + location * cellSizeAtIndex - startLocation * dataItems[0].get(name, 1)) / modCount;\n\t\t}\n\n\t\tif (!final) {\n\t\t\tlet dataItem = this.dataItems[index];\n\t\t\tif (dataItem) {\n\t\t\t\tposition += dataItem.get(\"deltaPosition\", 0);\n\t\t\t}\n\t\t}\n\n\t\treturn position;\n\t}\n\n\t/**\n\t * Returns a position of a category.\n\t *\n\t * @param   category  Category to look up\n\t * @return            Position\n\t */\n\tpublic categoryToPosition(category: string): number {\n\t\tlet dataItem = this._itemMap[category];\n\t\tif (dataItem) {\n\t\t\treturn this.indexToPosition(dataItem.get(\"index\")!);\n\t\t}\n\t\treturn NaN;\n\t}\n\n\n\t/**\n\t * Returns an index of a category.\n\t *\n\t * @param   category  Category to look up\n\t * @return            Index\n\t */\n\tpublic categoryToIndex(category: string): number {\n\t\tlet dataItem = this._itemMap[category];\n\t\tif (dataItem) {\n\t\t\treturn dataItem.get(\"index\")!;\n\t\t}\n\t\treturn NaN;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic dataItemToPosition(dataItem: DataItem<this[\"_dataItemSettings\"]>): number {\n\t\treturn this.indexToPosition(dataItem.get(\"index\")!);\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic roundAxisPosition(position: number, location: number): number {\n\t\tposition += (0.5 - location) / this.dataItems.length;\n\t\treturn this.indexToPosition(this.axisPositionToIndex(position), location);\n\t}\n\n\t/**\n\t * Returns an index of the category that corresponds to specific pixel\n\t * position within axis.\n\t *\n\t * @param position  Position (px)\n\t * @return Category index\n\t */\n\tpublic axisPositionToIndex(position: number): number {\n\t\tlet len = this.dataItems.length;\n\t\tif (len === 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\t// Calculate total modified length (sum of cell sizes)\n\t\tif (this.get(\"cellSizeField\")) {\n\t\t\tlet modifiedLen = 0;\n\t\t\tlet cellSizes: number[] = [];\n\t\t\t$array.each(this.dataItems, (dataItem) => {\n\t\t\t\tconst cellSize = dataItem.get(\"cellSize\", 1);\n\t\t\t\tcellSizes.push(cellSize);\n\t\t\t\tmodifiedLen += cellSize;\n\t\t\t});\n\t\t\t// Adjust for startLocation and endLocation\n\t\t\tlet startLocation = this.get(\"startLocation\", 0);\n\t\t\tlet endLocation = this.get(\"endLocation\", 1);\n\t\t\tmodifiedLen -= startLocation;\n\t\t\tmodifiedLen -= (1 - endLocation);\n\n\t\t\t// Find which cell the position falls into\n\t\t\tlet rel = position * modifiedLen + startLocation;\n\t\t\tlet acc = 0;\n\t\t\tfor (let i = 0; i < len; i++) {\n\t\t\t\tconst cellSize = cellSizes[i];\n\t\t\t\tif (rel < acc + cellSize) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t\tacc += cellSize;\n\t\t\t}\n\t\t\treturn len - 1;\n\t\t}\n\t\telse {\n\t\t\treturn $math.fitToRange(Math.floor(position * len), 0, len - 1);\n\t\t}\n\t}\n\n\t/**\n\t * Returns text to be used in an axis tooltip for specific relative position.\n\t *\n\t * @param   position  Position\n\t * @return            Tooltip text\n\t */\n\tpublic getTooltipText(position: number, _adjustPosition?: boolean): string | undefined {\n\t\t//@todo number formatter + tag\n\t\tconst dataItem = this.dataItems[this.axisPositionToIndex(position)];\n\t\tif (dataItem) {\n\t\t\tconst label = dataItem.get(\"label\")\n\t\t\tif (label) {\n\t\t\t\treturn populateString(label, this.get(\"tooltipText\", \"\"));\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _updateTooltipText(tooltip: Tooltip, position: number) {\n\t\ttooltip._setDataItem(this.dataItems[this.axisPositionToIndex(position)]);\n\t\ttooltip.label.text.markDirtyText();\n\t}\n\n\t/**\n\t * Returns a data item from series that is closest to the `position`.\n\t *\n\t * @param   series    Series\n\t * @param   position  Relative position\n\t * @return            Data item\n\t */\n\tpublic getSeriesItem(series: XYSeries, position: number): DataItem<IXYSeriesDataItem> | undefined {\n\t\tif (this.dataItems.length > 0) {\n\t\t\tlet fieldName = <any>(this.getPrivate(\"name\")! + this.get(\"renderer\").getPrivate(\"letter\")!);\n\t\t\tlet index = this.axisPositionToIndex(position);\n\t\t\t// try simple first\n\t\t\tlet seriesDataItem = series.dataItems[index];\n\t\t\tlet axisDataItem = this.dataItems[index];\n\t\t\tlet category = axisDataItem.get(\"category\");\n\n\t\t\tif (seriesDataItem && axisDataItem) {\n\t\t\t\tif (seriesDataItem.get(fieldName) === category) {\n\t\t\t\t\treturn seriesDataItem;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// if not found, try looking\n\t\t\tfor (let i = 0, len = series.dataItems.length; i < len; i++) {\n\t\t\t\tlet dataItem = series.dataItems[i];\n\t\t\t\tif (dataItem.get(fieldName) === category) {\n\t\t\t\t\treturn dataItem;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _getIndices(start: number, end: number): { startIndex: number, endIndex: number } {\n\t\tlet len = this.dataItems.length;\n\t\tlet startIndex = 0;\n\t\tlet endIndex = len;\n\t\tlet name: \"cellSize\" | \"finalCellSize\" = \"cellSize\";\n\n\t\tif (this.get(\"cellSizeField\")) {\n\t\t\tlet count = 0;\n\t\t\tconst dataItems = this.dataItems;\n\t\t\tif(dataItems.length == 0){\n\t\t\t\treturn { startIndex: 0, endIndex: 0 };\n\t\t\t}\n\n\t\t\t$array.each(dataItems, (dataItem) => {\n\t\t\t\tcount += dataItem.get(name, 1);\n\t\t\t});\n\n\t\t\tcount -= this.get(\"startLocation\", 0) * dataItems[0].get(name, 1);\n\t\t\tcount -= (1 - this.get(\"endLocation\", 1)) * dataItems[dataItems.length - 1].get(name, 1);\n\n\t\t\tlet c = 0;\n\t\t\tfor (let i = 0; i < len; i++) {\n\t\t\t\tc += this.dataItems[i].get(name, 1);\n\t\t\t\tif (Math.round(c) > Math.round(start * count)) {\n\t\t\t\t\tstartIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (let i = startIndex + 1; i < len; i++) {\n\t\t\t\tc += this.dataItems[i].get(name, 1);\n\t\t\t\tif (Math.round(c) >= Math.round(end * count)) {\n\t\t\t\t\tendIndex = i + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tstartIndex = Math.max(startIndex, 0);\n\t\t\tendIndex = Math.min(endIndex, len);\n\t\t}\n\t\telse {\n\t\t\tstartIndex = Math.max(Math.round(this.get(\"start\", 0) * len), 0);\n\t\t\tendIndex = Math.min(Math.round(this.get(\"end\", 1) * len), len);\n\t\t}\n\n\t\treturn { startIndex, endIndex };\n\t}\n\n\t/**\n\t * Zooms the axis to specific `start` and `end` indexes.\n\t *\n\t * Optional `duration` specifies duration of zoom animation in milliseconds.\n\t *\n\t * @param  start     Start index\n\t * @param  end       End index\n\t * @param  duration  Duration in milliseconds\n\t */\n\tpublic zoomToIndexes(start: number, end: number, duration?: number) {\n\t\tlet len = this.dataItems.length;\n\t\tif (this.get(\"cellSizeField\")) {\n\t\t\tstart = Math.min(Math.max(start, 0), len);\n\t\t\tend = Math.max(Math.min(end, len), 1);\n\t\t\tthis.setPrivateRaw(\"startIndex\", start);\n\t\t\tthis.setPrivateRaw(\"endIndex\", end);\n\t\t\tthis.zoom(this.indexToPosition(start, 0, true), this.indexToPosition(end, 0, true), duration);\n\t\t}\n\t\telse {\n\t\t\tthis.zoom(start / len, end / len, duration);\n\t\t}\n\t}\n\n\tpublic zoomToCategories(startCategory: string, endCategory: string, duration?: number) {\n\t\tthis.zoomToIndexes(this.categoryToIndex(startCategory), this.categoryToIndex(endCategory) + 1, duration);\n\t}\n\n\t/**\n\t * Returns position span between start and end of a single cell in axis.\n\t *\n\t * @since 5.2.30\n\t * @return Position\n\t */\n\tpublic getCellWidthPosition(): number {\n\t\treturn this._frequency / this.dataItems.length / (this.get(\"end\", 1) - this.get(\"start\", 0));\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic nextPosition(count?: number) {\n\t\tif (count == null) {\n\t\t\tcount = 1;\n\t\t}\n\n\t\tif (this.get(\"renderer\").getPrivate(\"letter\") == \"Y\") {\n\t\t\tcount *= -1;\n\t\t}\n\n\t\tconst position = this.getPrivate(\"tooltipPosition\", 0);\n\n\t\tconst index = $math.fitToRange(this.axisPositionToIndex(position) + count, 0, this.dataItems.length - 1);\n\t\treturn this.toGlobalPosition(this.indexToPosition(index));\n\t}\n}\n","import type { Axis, IAxisPrivate, IAxisDataItem } from \"../axes/Axis\";\nimport type { AxisRenderer } from \"../axes/AxisRenderer\";\nimport type { IPoint } from \"../../../core/util/IPoint\";\nimport type { Sprite } from \"../../../core/render/Sprite\";\nimport type { Bullet } from \"../../../core/render/Bullet\";\nimport type { XYChart } from \"../XYChart\";\n//import type { CategoryAxis } from \"../axes/CategoryAxis\";\nimport type { DateAxis } from \"../axes/DateAxis\";\nimport type { ITimeInterval } from \"../../../core/util/Time\";\nimport type { IDisposer } from \"../../../core/util/Disposer\";\n\nimport { DataItem } from \"../../../core/render/Component\";\nimport { Series, ISeriesSettings, ISeriesDataItem, ISeriesPrivate, ISeriesEvents } from \"../../../core/render/Series\";\nimport { List } from \"../../../core/util/List\";\nimport { Container } from \"../../../core/render/Container\";\nimport { Graphics } from \"../../../core/render/Graphics\";\n\n\nimport * as $type from \"../../../core/util/Type\";\nimport * as $object from \"../../../core/util/Object\";\nimport * as $array from \"../../../core/util/Array\";\nimport * as $utils from \"../../../core/util/Utils\";\n\n/**\n * @ignore\n */\nfunction min(left: number | undefined, right: number | undefined): number | undefined {\n\tif (left == null) return right;\n\tif (right == null) return left;\n\treturn (right < left) ? right : left;\n}\n\n/**\n * @ignore\n */\nfunction max(left: number | undefined, right: number | undefined): number | undefined {\n\tif (left == null) return right;\n\tif (right == null) return left;\n\treturn (left > right) ? left : right;\n}\n\n\n/**\n * Interface representing a series axis range.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-ranges/#Series_axis_ranges} for more info\n */\nexport interface IXYSeriesAxisRange {\n\n\t/**\n\t * Related axis data item.\n\t */\n\taxisDataItem: DataItem<IAxisDataItem>;\n\n\t/**\n\t * A [[Container]] element that range's elements are placed in.\n\t */\n\tcontainer?: Container;\n\n\t/**\n\t * Target series.\n\t */\n\tseries?: XYSeries;\n\n}\n\nexport interface IXYAxisPrivate extends IAxisPrivate {\n\tmin?: number;\n\tmax?: number;\n}\n\nexport interface IXYAxis extends Axis<AxisRenderer> {\n\t_privateSettings: IXYAxisPrivate;\n}\n\nexport interface IXYSeriesEvents extends ISeriesEvents {\n\n\t/**\n\t * Kicks in when axis starts using different data set, e.g. data\n\t * of different granularit on [[DateAxis]].\n\t *\n\t * @since 5.1.1\n\t */\n\tdatasetchanged: {\n\t\tid: string\n\t}\n}\n\n/**\n * XY chart series data item.\n */\nexport interface IXYSeriesDataItem extends ISeriesDataItem {\n\tvalueX?: number;\n\tvalueXWorking?: number;\n\tvalueXChange?: number;\n\tvalueXChangePercent?: number;\n\tvalueXChangeSelection?: number;\n\tvalueXChangeSelectionPercent?: number;\n\tvalueXChangePrevious?: number;\n\tvalueXChangePreviousPercent?: number;\n\tvalueXWorkingOpen?: number;\n\tvalueXWorkingClose?: number;\n\n\tvalueY?: number;\n\tvalueYChange?: number;\n\tvalueYWorking?: number;\n\tvalueYChangePercent?: number;\n\tvalueYChangeSelection?: number;\n\tvalueYChangeSelectionPercent?: number;\n\tvalueYChangePrevious?: number;\n\tvalueYChangePreviousPercent?: number;\n\tvalueYWorkingOpen?: number;\n\tvalueYWorkingClose?: number;\n\n\topenValueX?: number;\n\topenValueXWorking?: number;\n\topenValueXChange?: number;\n\topenValueXChangePercent?: number;\n\topenValueXChangeSelection?: number;\n\topenValueXChangeSelectionPercent?: number;\n\topenValueXChangePrevious?: number;\n\topenValueXChangePreviousPercent?: number;\n\topenValueXWorkingOpen?: number;\n\topenValueXWorkingClose?: number;\n\topenValueY?: number;\n\topenValueYWorking?: number;\n\topenValueYChange?: number;\n\topenValueYChangePercent?: number;\n\topenValueYChangeSelection?: number;\n\topenValueYChangeSelectionPercent?: number;\n\topenValueYChangePrevious?: number;\n\topenValueYChangePreviousPercent?: number;\n\topenValueYWorkingOpen?: number;\n\topenValueYWorkingClose?: number;\n\n\tlowValueX?: number;\n\tlowValueXWorking?: number;\n\tlowValueXChange?: number;\n\tlowValueXChangePercent?: number;\n\tlowValueXChangeSelection?: number;\n\tlowValueXChangeSelectionPercent?: number;\n\tlowValueXChangePrevious?: number;\n\tlowValueXChangePreviousPercent?: number;\n\tlowValueXWorkingOpen?: number;\n\tlowValueXWorkingClose?: number;\n\n\thighValueX?: number;\n\thighValueXWorking?: number;\n\thighValueXChange?: number;\n\thighValueXChangePercent?: number;\n\thighValueXChangeSelection?: number;\n\thighValueXChangeSelectionPercent?: number;\n\thighValueXChangePrevious?: number;\n\thighValueXChangePreviousPercent?: number;\n\thighValueXWorkingOpen?: number;\n\thighValueXWorkingClose?: number;\n\n\tlowValueY?: number;\n\tlowValueYWorking?: number;\n\tlowValueYChange?: number;\n\tlowValueYChangePercent?: number;\n\tlowValueYChangeSelection?: number;\n\tlowValueYChangeSelectionPercent?: number;\n\tlowValueYChangePrevious?: number;\n\tlowValueYChangePreviousPercent?: number;\n\tlowValueYWorkingOpen?: number;\n\tlowValueYWorkingClose?: number;\n\n\thighValueY?: number;\n\thighValueYWorking?: number;\n\thighValueYChange?: number;\n\thighValueYChangePercent?: number;\n\thighValueYChangeSelection?: number;\n\thighValueYChangeSelectionPercent?: number;\n\thighValueYChangePrevious?: number;\n\thighValueYChangePreviousPercent?: number;\n\thighValueYWorkingOpen?: number;\n\thighValueYWorkingClose?: number;\n\n\tcategoryX?: string;\n\tcategoryY?: string;\n\n\topenCategoryX?: string;\n\topenCategoryY?: string;\n\n\tlocationX?: number;\n\tlocationY?: number;\n\n\topenLocationX?: number;\n\topenLocationY?: number;\n\n\tstackToItemX?: DataItem<IXYSeriesDataItem>;\n\tstackToItemY?: DataItem<IXYSeriesDataItem>;\n\n\tleft?: number;\n\tright?: number;\n\ttop?: number;\n\tbottom?: number;\n\n\tpoint?: IPoint;\n\n\toriginals?: Array<DataItem<IXYSeriesDataItem>>;\n}\n\nexport interface IXYSeriesSettings extends ISeriesSettings {\n\n\t/**\n\t * If this is set to `true`, data items will ignore `locationX` setting\n\t * but will place the data point at exact X value.\n\t * \n\t * This works with [[DateAxis]] only.\n\t * \n\t * On a `ColumnSeries`/`CandlestickSeries` this setting will affect bullets\n\t * only.\n\t *\n\t * @default false\n\t * @since 5.13.0\n\t */\n\texactLocationX?: boolean;\n\n\t/**\n\t * If this is set to `true`, data items will ignore `locationX` setting\n\t * but will place the data point at exact Y value.\n\t * \n\t * This works with [[DateAxis]] only.\n\t * \n\t * On a `ColumnSeries`/`CandlestickSeries` this setting will affect bullets\n\t * only.\n\t *\n\t * @default false\n\t * @since 5.13.0\n\t */\n\texactLocationY?: boolean;\n\n\t/**\n\t * If set to `true` series will use selection extremes when calculating\n\t * their min and max values of the axis. Useful for stacked series.\n\t *\n\t * @since 5.10.11\n\t */\n\tuseSelectionExtremes?: boolean;\n\n\t/**\n\t * Minimal distance between data items in pixels.\n\t *\n\t * If data items are closer than this, bullets are turned off to avoid\n\t * overcrowding.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/#Bullets} for more info\n\t */\n\tminBulletDistance?: number;\n\n\t/**\n\t * X axis series uses.\n\t *\n\t * **IMPORTANT:** `xAxis` needs to be set when creating the series. Updating\n\t * this setting on previously created series object will not work.\n\t */\n\txAxis: IXYAxis;\n\n\t/**\n\t * Y axis series uses.\n\t *\n\t * **IMPORTANT:** `yAxis` needs to be set when creating the series. Updating\n\t * this setting on previously created series object will not work.\n\t */\n\tyAxis: IXYAxis;\n\n\t/**\n\t * If set to `true` series will be stacked to other series that also have\n\t * this setting set to `true`.\n\t *\n\t * NOTE: for series stack properly, all stacked series must have same number\n\t * of data items with the same timestamp/category.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/#Stacked_series} for more info\n\t */\n\tstacked?: boolean;\n\n\t/**\n\t * Whether to stack negative values from zero (`true`) or from whatever\n\t * previous series value is (`false`).\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/#Negative_value_stacking} for more info\n\t */\n\tstackToNegative?: boolean;\n\n\t/**\n\t * Base axis for the series.\n\t *\n\t * A base axis will dictate direction series plot.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/#Base_axis} for more info\n\t */\n\tbaseAxis?: IXYAxis;\n\n\t/**\n\t * Input data field for X value.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/#Data_fields} for more info\n\t */\n\tvalueXField?: string;\n\n\t/**\n\t * Input data field for Y value.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/#Data_fields} for more info\n\t */\n\tvalueYField?: string;\n\n\t/**\n\t * Exclude series values when calculating totals for category/interval.\n\t *\n\t * @default false\n\t */\n\texcludeFromTotal?: boolean;\n\n\t/**\n\t * Display data field for X value.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/#Data_fields} for more info\n\t */\n\tvalueXShow?: \"valueXWorking\" | \"valueXChange\" | \"valueXChangePercent\" | \"valueXChangeSelection\" | \"valueXChangeSelectionPercent\" | \"valueXChangePrevious\" | \"valueXChangePreviousPercent\" | \"valueXTotal\" | \"valueXTotalPercent\" | \"valueXSum\";\n\n\t/**\n\t * Display data field for Y value.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/#Data_fields} for more info\n\t */\n\tvalueYShow?: \"valueYWorking\" | \"valueYChange\" | \"valueYChangePercent\" | \"valueYChangeSelection\" | \"valueYChangeSelectionPercent\" | \"valueYChangePrevious\" | \"valueYChangePreviousPercent\" | \"valueYTotal\" | \"valueYTotalPercent\" | \"valueYSum\";\n\n\t/**\n\t * Indicates what aggregate value to use for collective data item, when\n\t * aggregating X values from several data items.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/date-axis/#Dynamic_data_item_grouping} for more info\n\t */\n\tvalueXGrouped?: \"open\" | \"close\" | \"low\" | \"high\" | \"average\" | \"sum\" | \"extreme\";\n\n\t/**\n\t * Indicates what aggregate value to use for collective data item, when\n\t * aggregating X values from several data items.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/date-axis/#Dynamic_data_item_grouping} for more info\n\t */\n\tvalueYGrouped?: \"open\" | \"close\" | \"low\" | \"high\" | \"average\" | \"sum\" | \"extreme\";\n\n\t/**\n\t * Input data field for X open value.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/#Data_fields} for more info\n\t */\n\topenValueXField?: string;\n\n\t/**\n\t * Input data field for X open value.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/#Data_fields} for more info\n\t */\n\topenValueYField?: string;\n\n\t/**\n\t * Display data field for X open value.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/#Data_fields} for more info\n\t */\n\topenValueXShow?: \"openValueXWorking\" | \"openValueXChange\" | \"openValueXChangePercent\" | \"openValueXChangeSelection\" | \"openValueXChangeSelectionPercent\" | \"openValueXChangePrevious\" | \"openValueXChangePreviousPercent\";\n\n\t/**\n\t * Display data field for Y open value.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/#Data_fields} for more info\n\t */\n\topenValueYShow?: \"openValueYWorking\" | \"openValueYChange\" | \"openValueYChangePercent\" | \"openValueYChangeSelection\" | \"openValueYChangeSelectionPercent\" | \"openValueYChangePrevious\" | \"openValueYChangePreviousPercent\";\n\n\t/**\n\t * Display data field for Y open value.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/date-axis/#Dynamic_data_item_grouping} for more info\n\t */\n\topenValueXGrouped?: \"open\" | \"close\" | \"low\" | \"high\" | \"average\" | \"sum\" | \"extreme\";\n\n\t/**\n\t * Display data field for Y open value.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/date-axis/#Dynamic_data_item_grouping} for more info\n\t */\n\topenValueYGrouped?: \"open\" | \"close\" | \"low\" | \"high\" | \"average\" | \"sum\" | \"extreme\";\n\n\n\n\t/**\n\t * Input data field for X low value.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/candlestick-series/} for more info\n\t */\n\tlowValueXField?: string;\n\n\t/**\n\t * Input data field for Y low value.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/candlestick-series/} for more info\n\t */\n\tlowValueYField?: string;\n\n\t/**\n\t * Input data field for X high value.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/candlestick-series/} for more info\n\t */\n\thighValueXField?: string;\n\n\t/**\n\t * Input data field for Y high value.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/candlestick-series/} for more info\n\t */\n\thighValueYField?: string;\n\n\t/**\n\t * Display data field for X low value.\n\t */\n\tlowValueXShow?: \"lowValueXWorking\" | \"lowValueXChange\" | \"lowValueXChangePercent\" | \"lowValueXChangeSelection\" | \"lowValueXChangeSelectionPercent\" | \"lowValueXChangePrevious\" | \"lowValueXChangePreviousPercent\";\n\n\t/**\n\t * Display data field for Y low value.\n\t */\n\tlowValueYShow?: \"lowValueYWorking\" | \"lowValueYChange\" | \"lowValueYChangePercent\" | \"lowValueYChangeSelection\" | \"lowValueYChangeSelectionPercent\" | \"lowValueYChangePrevious\" | \"lowValueYChangePreviousPercent\";\n\n\t/**\n\t * Indicates what aggregate value to use for collective data item, when\n\t * aggregating X low values from several data items.\n\t */\n\tlowValueXGrouped?: \"open\" | \"close\" | \"low\" | \"high\" | \"average\" | \"sum\" | \"extreme\";\n\n\t/**\n\t * Indicates what aggregate value to use for collective data item, when\n\t * aggregating Y low values from several data items.\n\t */\n\tlowValueYGrouped?: \"open\" | \"close\" | \"low\" | \"high\" | \"average\" | \"sum\" | \"extreme\";\n\n\t/**\n\t * Display data field for X high value.\n\t */\n\thighValueXShow?: \"highValueXWorking\" | \"highValueXChange\" | \"highValueXChangePercent\" | \"highValueXChangeSelection\" | \"highValueXChangeSelectionPercent\" | \"highValueXChangePrevious\" | \"highValueXChangePreviousPercent\";\n\n\t/**\n\t * Display data field for Y low value.\n\t */\n\thighValueYShow?: \"highValueYWorking\" | \"highValueYChange\" | \"highValueYChangePercent\" | \"highValueYChangeSelection\" | \"highValueYChangeSelectionPercent\" | \"highValueYChangePrevious\" | \"highValueYChangePreviousPercent\";\n\n\t/**\n\t * Indicates what aggregate value to use for collective data item, when\n\t * aggregating X high values from several data items.\n\t */\n\thighValueXGrouped?: \"open\" | \"close\" | \"high\" | \"high\" | \"average\" | \"sum\" | \"extreme\";\n\n\t/**\n\t * Indicates what aggregate value to use for collective data item, when\n\t * aggregating X high values from several data items.\n\t */\n\thighValueYGrouped?: \"open\" | \"close\" | \"high\" | \"high\" | \"average\" | \"sum\" | \"extreme\";\n\n\t/**\n\t * Horizontal location of the low data point relative to its cell.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @default 0.5\n\t */\n\tlowLocationX?: number;\n\n\t/**\n\t * Vertical location of the low data point relative to its cell.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @default 0.5\n\t */\n\tlowLocationY?: number;\n\n\t/**\n\t * Horizontal location of the high data point relative to its cell.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @default 0.5\n\t */\n\thighLocationX?: number;\n\n\t/**\n\t * Vertical location of the high data point relative to its cell.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @default 0.5\n\t */\n\thighLocationY?: number;\n\n\n\t/**\n\t * Input data field for X category.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/#Data_fields} for more info\n\t */\n\tcategoryXField?: string;\n\n\t/**\n\t * Input data field for Y category.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/#Data_fields} for more info\n\t */\n\tcategoryYField?: string;\n\n\t/**\n\t * Display data field for X category.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/#Data_fields} for more info\n\t */\n\topenCategoryXField?: string;\n\n\t/**\n\t * Display data field for Y category.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/#Data_fields} for more info\n\t */\n\topenCategoryYField?: string;\n\n\t/**\n\t * If set to `true` this series will be ignored when calculating scale of the\n\t * related axes.\n\t *\n\t * @default false\n\t */\n\tignoreMinMax?: boolean;\n\n\t/**\n\t * @ignore\n\t */\n\tvcx?: number;\n\n\t/**\n\t * @ignore\n\t */\n\tvcy?: number;\n\n\t/**\n\t * Horizontal location of the data point relative to its cell.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/line-series/#Data_item_location} for more info\n\t * @default 0.5\n\t */\n\tlocationX?: number;\n\n\t/**\n\t * Vertical location of the data point relative to its cell.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/line-series/#Data_item_location} for more info\n\t * @default 0.5\n\t */\n\tlocationY?: number;\n\n\t/**\n\t * Horizontal location of the open data point relative to its cell.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @default 0.5\n\t */\n\topenLocationX?: number;\n\n\t/**\n\t * Vertical location of the open data point relative to its cell.\n\t *\n\t * `0` - beginning, `0.5` - middle, `1` - end.\n\t *\n\t * @default 0.5\n\t */\n\topenLocationY?: number;\n\n\t/**\n\t * If set to `true` [[XYCursor]] will show closest data item from series\n\t * even if it is outside currently hovered date axis interval.\n\t *\n\t * This setting is relevant only if `baseAxis` is a date axis.\n\t */\n\tsnapTooltip?: boolean;\n\n\t/**\n\t * Text to use for series legend label when no particular category/interval\n\t * is selected.\n\t */\n\tlegendRangeLabelText?: string;\n\n\t/**\n\t * Text to use for series legend value label when no particular\n\t * category/interval is selected.\n\t */\n\tlegendRangeValueText?: string;\n\n\n\t/**\n\t * If set to `true`, series bullets will be masked by plot area.\n\t */\n\tmaskBullets?: boolean;\n\n\t/**\n\t * Whether series' tooltip should inherit its color from series or its first\n\t * bullet.\n\t *\n\t * @default \"series\"\n\t */\n\tseriesTooltipTarget?: \"series\" | \"bullet\";\n\n\t/**\n\t * Indicates horizontal position at which to show series' tooltip at.\n\t *\n\t * @default \"value\"\n\t * @since 5.0.16\n\t */\n\ttooltipPositionX?: \"open\" | \"value\" | \"low\" | \"high\";\n\n\t/**\n\t * Indicates vertical position at which to show series' tooltip at.\n\t *\n\t * @default \"value\"\n\t * @since 5.0.16\n\t */\n\ttooltipPositionY?: \"open\" | \"value\" | \"low\" | \"high\";\n\n\n\t/**\n\t * If set to `true` data items for this series won't be grouped even if\n\t * the `groupData: true` is set on a related [[DateAxis]].\n\t * \n\t * @since 5.0.19\n\t */\n\tgroupDataDisabled?: boolean;\n\n\t/**\n\t * A [[DataItem]] that is being used for current tooltip, e.g. by a chart\n\t * cursor.\n\t *\n\t * @since 5.1.2\n\t */\n\ttooltipDataItem?: DataItem<IXYSeriesDataItem>\n\n\t/**\n\t * If set to `true`, when data is grouped, the `originals` setting of the\n\t * group data items will be populated by the original (source) data items\n\t * that fall into the group.\n\t *\n\t * Please note that if `groupDataCallback` is set, this setting is ignored\n\t * as originals will always be included, regardless of the value.\n\t *\n\t * @since 5.1.11\n\t * @default false\n\t */\n\tgroupDataWithOriginals?: boolean;\n\n\t/**\n\t * A custom function to call when grouping data items.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/date-axis/#Custom_aggregation_functions} for more info\n\t * @since 5.1.11\n\t */\n\tgroupDataCallback?: (dataItem: DataItem<IXYSeriesDataItem>, interval: ITimeInterval) => void;\n\n}\n\nexport interface IXYSeriesPrivate extends ISeriesPrivate {\n\n\tminX?: number;\n\tmaxX?: number;\n\n\tminY?: number;\n\tmaxY?: number;\n\n\tselectionMinX?: number;\n\tselectionMaxX?: number;\n\n\tselectionMinY?: number;\n\tselectionMaxY?: number;\n\n\tvalueXAverage?: number;\n\tvalueXCount?: number;\n\tvalueXSum?: number;\n\tvalueXAbsoluteSum?: number;\n\tvalueXLow?: number;\n\tvalueXHigh?: number;\n\tvalueXOpen?: number;\n\tvalueXClose?: number;\n\n\tvalueYAverage?: number;\n\tvalueYCount?: number;\n\tvalueYSum?: number;\n\tvalueYAbsoluteSum?: number;\n\tvalueYLow?: number;\n\tvalueYHigh?: number;\n\tvalueYOpen?: number;\n\tvalueYClose?: number;\n\n\tvalueXAverageSelection?: number;\n\tvalueXCountSelection?: number;\n\tvalueXSumSelection?: number;\n\tvalueXAbsoluteSumSelection?: number;\n\tvalueXLowSelection?: number;\n\tvalueXHighSelection?: number;\n\tvalueXOpenSelection?: number;\n\tvalueXCloseSelection?: number;\n\n\tvalueYAverageSelection?: number;\n\tvalueYCountSelection?: number;\n\tvalueYSumSelection?: number;\n\tvalueYAbsoluteSumSelection?: number;\n\tvalueYLowSelection?: number;\n\tvalueYHighSelection?: number;\n\tvalueYOpenSelection?: number;\n\tvalueYCloseSelection?: number;\n\n\topenValueXAverage?: number;\n\topenValueXCount?: number;\n\topenValueXSum?: number;\n\topenValueXAbsoluteSum?: number;\n\topenValueXLow?: number;\n\topenValueXHigh?: number;\n\topenValueXOpen?: number;\n\topenValueXClose?: number;\n\n\topenValueYAverage?: number;\n\topenValueYCount?: number;\n\topenValueYSum?: number;\n\topenValueYAbsoluteSum?: number;\n\topenValueYLow?: number;\n\topenValueYHigh?: number;\n\topenValueYOpen?: number;\n\topenValueYClose?: number;\n\n\topenValueXAverageSelection?: number;\n\topenValueXCountSelection?: number;\n\topenValueXSumSelection?: number;\n\topenValueXAbsoluteSumSelection?: number;\n\topenValueXLowSelection?: number;\n\topenValueXHighSelection?: number;\n\topenValueXOpenSelection?: number;\n\topenValueXCloseSelection?: number;\n\n\topenValueYAverageSelection?: number;\n\topenValueYCountSelection?: number;\n\topenValueYSumSelection?: number;\n\topenValueYAbsoluteSumSelection?: number;\n\topenValueYLowSelection?: number;\n\topenValueYHighSelection?: number;\n\topenValueYOpenSelection?: number;\n\topenValueYCloseSelection?: number;\n\n\tlowValueXAverage?: number;\n\tlowValueXCount?: number;\n\tlowValueXSum?: number;\n\tlowValueXAbsoluteSum?: number;\n\tlowValueXLow?: number;\n\tlowValueXHigh?: number;\n\tlowValueXlow?: number;\n\tlowValueXClose?: number;\n\n\tlowValueYAverage?: number;\n\tlowValueYCount?: number;\n\tlowValueYSum?: number;\n\tlowValueYAbsoluteSum?: number;\n\tlowValueYLow?: number;\n\tlowValueYHigh?: number;\n\tlowValueYlow?: number;\n\tlowValueYClose?: number;\n\n\tlowValueXAverageSelection?: number;\n\tlowValueXCountSelection?: number;\n\tlowValueXSumSelection?: number;\n\tlowValueXAbsoluteSumSelection?: number;\n\tlowValueXLowSelection?: number;\n\tlowValueXHighSelection?: number;\n\tlowValueXlowSelection?: number;\n\tlowValueXCloseSelection?: number;\n\n\tlowValueYAverageSelection?: number;\n\tlowValueYCountSelection?: number;\n\tlowValueYSumSelection?: number;\n\tlowValueYAbsoluteSumSelection?: number;\n\tlowValueYLowSelection?: number;\n\tlowValueYHighSelection?: number;\n\tlowValueYlowSelection?: number;\n\tlowValueYCloseSelection?: number;\n\n\thighValueXAverage?: number;\n\thighValueXCount?: number;\n\thighValueXSum?: number;\n\thighValueXAbsoluteSum?: number;\n\thighValueXLow?: number;\n\thighValueXHigh?: number;\n\thighValueXhigh?: number;\n\thighValueXClose?: number;\n\n\thighValueYAverage?: number;\n\thighValueYCount?: number;\n\thighValueYSum?: number;\n\thighValueYAbsoluteSum?: number;\n\thighValueYLow?: number;\n\thighValueYHigh?: number;\n\thighValueYhigh?: number;\n\thighValueYClose?: number;\n\n\thighValueXAverageSelection?: number;\n\thighValueXCountSelection?: number;\n\thighValueXSumSelection?: number;\n\thighValueXAbsoluteSumSelection?: number;\n\thighValueXLowSelection?: number;\n\thighValueXHighSelection?: number;\n\thighValueXhighSelection?: number;\n\thighValueXCloseSelection?: number;\n\n\thighValueYAverageSelection?: number;\n\thighValueYCountSelection?: number;\n\thighValueYSumSelection?: number;\n\thighValueYAbsoluteSumSelection?: number;\n\thighValueYLowSelection?: number;\n\thighValueYHighSelection?: number;\n\thighValueYhighSelection?: number;\n\thighValueYCloseSelection?: number;\n\n\toutOfSelection?: boolean;\n\n\tdoNotUpdateLegend?: boolean;\n}\n\n\n/**\n * A base class for all XY chart series.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/} for more info\n */\nexport abstract class XYSeries extends Series {\n\tpublic static className: string = \"XYSeries\";\n\tpublic static classNames: Array<string> = Series.classNames.concat([XYSeries.className]);\n\n\tdeclare public _settings: IXYSeriesSettings;\n\tdeclare public _privateSettings: IXYSeriesPrivate;\n\tdeclare public _dataItemSettings: IXYSeriesDataItem;\n\tdeclare public _axisRangeType: IXYSeriesAxisRange;\n\tdeclare public _events: IXYSeriesEvents;\n\n\tprotected _xField!: string;\n\tprotected _yField!: string;\n\tprotected _xOpenField!: string;\n\tprotected _yOpenField!: string;\n\n\tprotected _xLowField!: string;\n\tprotected _xHighField!: string;\n\tprotected _yLowField!: string;\n\tprotected _yHighField!: string;\n\n\tprotected _axesDirty: boolean = false;\n\tpublic _stackDirty: boolean = false;\n\n\tprotected _selectionProcessed = false;\n\n\tdeclare public chart: XYChart | undefined;\n\n\tpublic _dataSets: { [index: string]: Array<DataItem<IXYSeriesDataItem>> } = {};\n\n\tpublic _mainContainerMask: Graphics | undefined;\n\n\tprotected _x: number = 0;\n\tprotected _y: number = 0;\n\n\tpublic _bullets: { [index: string]: Sprite } = {};\n\n\t/**\n\t * A [[Container]] that us used to put series' elements in.\n\t *\n\t * @default Container.new()\n\t */\n\tpublic readonly mainContainer: Container = this.children.push(Container.new(this._root, {}));\n\n\t/**\n\t * A list of axis ranges that affect the series.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-ranges/} for more info\n\t */\n\tpublic readonly axisRanges: List<this[\"_axisRangeType\"]> = new List();\n\n\tprotected _skipped: boolean = false;\n\n\tprotected _couldStackTo: Array<XYSeries> = [];\n\n\tprotected _reallyStackedTo: { [index: number]: XYSeries } = {};\n\n\tpublic _stackedSeries: { [index: number]: XYSeries } = {};\n\n\tprotected _aLocationX0: number = 0;\n\tprotected _aLocationX1: number = 1;\n\tprotected _aLocationY0: number = 0;\n\tprotected _aLocationY1: number = 1;\n\n\tprotected _showBullets: boolean = true;\n\n\tprotected valueXFields = [\n\t\t\"valueX\",\n\t\t\"openValueX\",\n\t\t\"lowValueX\",\n\t\t\"highValueX\"\n\t];\n\n\tprotected valueYFields = [\n\t\t\"valueY\",\n\t\t\"openValueY\",\n\t\t\"lowValueY\",\n\t\t\"highValueY\"\n\t];\n\n\tpublic _valueXFields!: Array<string>;\n\tpublic _valueYFields!: Array<string>;\n\n\t// used for full min/max\n\tprotected _valueXShowFields!: Array<string>;\n\tprotected _valueYShowFields!: Array<string>;\n\n\t// used for selection (uses working)\n\tpublic __valueXShowFields!: Array<string>;\n\tpublic __valueYShowFields!: Array<string>;\n\n\tprotected _emptyDataItem = new DataItem(this, undefined, {});\n\n\tpublic _dataSetId?: string;\n\n\tprotected _tooltipFieldX?: string;\n\tprotected _tooltipFieldY?: string;\n\n\tpublic _posXDp?: IDisposer;\n\tpublic _posYDp?: IDisposer;\n\n\tprotected _afterNew() {\n\t\tthis.fields.push(\"categoryX\", \"categoryY\", \"openCategoryX\", \"openCategoryY\");\n\t\tthis.valueFields.push(\"valueX\", \"valueY\", \"openValueX\", \"openValueY\", \"lowValueX\", \"lowValueY\", \"highValueX\", \"highValueY\");\n\n\t\tthis._setRawDefault(\"vcx\", 1);\n\t\tthis._setRawDefault(\"vcy\", 1);\n\t\t// this can't go to themes, as data might be parsed before theme\n\t\tthis._setRawDefault(\"valueXShow\", \"valueXWorking\");\n\t\tthis._setRawDefault(\"valueYShow\", \"valueYWorking\");\n\n\t\tthis._setRawDefault(\"openValueXShow\", \"openValueXWorking\");\n\t\tthis._setRawDefault(\"openValueYShow\", \"openValueYWorking\");\n\n\t\tthis._setRawDefault(\"lowValueXShow\", \"lowValueXWorking\");\n\t\tthis._setRawDefault(\"lowValueYShow\", \"lowValueYWorking\");\n\n\t\tthis._setRawDefault(\"highValueXShow\", \"highValueXWorking\");\n\t\tthis._setRawDefault(\"highValueYShow\", \"highValueYWorking\");\n\n\t\tthis._setRawDefault(\"lowValueXGrouped\", \"low\");\n\t\tthis._setRawDefault(\"lowValueYGrouped\", \"low\");\n\n\t\tthis._setRawDefault(\"highValueXGrouped\", \"high\");\n\t\tthis._setRawDefault(\"highValueYGrouped\", \"high\");\n\n\n\n\t\tsuper._afterNew();\n\n\t\tthis.set(\"maskContent\", true);\n\n\t\tthis._disposers.push(this.axisRanges.events.onAll((change) => {\n\t\t\tif (change.type === \"clear\") {\n\t\t\t\t$array.each(change.oldValues, (axisRange) => {\n\t\t\t\t\tthis._removeAxisRange(axisRange);\n\t\t\t\t});\n\t\t\t} else if (change.type === \"push\") {\n\t\t\t\tthis._processAxisRange(change.newValue);\n\t\t\t} else if (change.type === \"setIndex\") {\n\t\t\t\tthis._processAxisRange(change.newValue);\n\t\t\t} else if (change.type === \"insertIndex\") {\n\t\t\t\tthis._processAxisRange(change.newValue);\n\t\t\t} else if (change.type === \"removeIndex\") {\n\t\t\t\tthis._removeAxisRange(change.oldValue);\n\t\t\t} else if (change.type === \"moveIndex\") {\n\t\t\t\tthis._processAxisRange(change.value);\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"Unknown IStreamEvent type\");\n\t\t\t}\n\t\t}))\n\n\t\tthis.states.create(\"hidden\", <any>{ opacity: 1, visible: false });\n\n\t\tthis.onPrivate(\"startIndex\", () => {\n\t\t\tthis.root.events.once(\"frameended\", () => {\n\t\t\t\tthis.updateLegendValue();\n\t\t\t})\n\t\t})\n\n\t\tthis.onPrivate(\"endIndex\", () => {\n\t\t\tthis.root.events.once(\"frameended\", () => {\n\t\t\t\tthis.updateLegendValue();\n\t\t\t})\n\t\t})\n\n\t\tthis._makeFieldNames();\n\t}\n\n\tprotected _processAxisRange(axisRange: this[\"_axisRangeType\"]) {\n\t\tconst container = Container.new(this._root, {});\n\t\taxisRange.container = container;\n\t\tthis.children.push(container);\n\n\t\taxisRange.series = this;\n\n\t\tconst axisDataItem = axisRange.axisDataItem;\n\t\taxisDataItem.setRaw(\"isRange\", true);\n\n\t\tconst axis = <Axis<AxisRenderer>>axisDataItem.component;\n\t\tif (axis) {\n\t\t\taxis._processAxisRange(axisDataItem, [\"range\", \"series\"]);\n\n\t\t\tconst bullet = axisDataItem.get(\"bullet\");\n\t\t\tif (bullet) {\n\t\t\t\tconst sprite = bullet.get(\"sprite\");\n\t\t\t\tif (sprite) {\n\t\t\t\t\tsprite.setPrivate(\"visible\", false);\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst axisFill = axisDataItem.get(\"axisFill\");\n\t\t\tif (axisFill) {\n\t\t\t\tcontainer.set(\"mask\", axisFill);\n\t\t\t}\n\t\t\taxis._seriesAxisRanges.push(axisDataItem);\n\t\t}\n\t}\n\n\tprotected _onDataClear(): void {\n\t\tsuper._onDataClear();\n\t\t$object.each(this._dataSets, (_key, dataItems) => {\n\t\t\t$array.each(dataItems, (dataItem) => {\n\t\t\t\tdataItem.dispose();\n\t\t\t});\n\t\t\tdataItems.length = 0;\n\t\t});\n\t}\n\n\tprotected _removeAxisRange(axisRange: this[\"_axisRangeType\"]) {\n\t\tconst axisDataItem = axisRange.axisDataItem;\n\t\tconst axis = <Axis<AxisRenderer>>axisDataItem.component;\n\t\taxisDataItem.dispose();\n\n\t\t$array.remove(axis._seriesAxisRanges, axisDataItem);\n\n\t\tconst container = axisRange.container;\n\t\tif (container) {\n\t\t\tcontainer.dispose();\n\t\t}\n\t}\n\n\tprotected _updateFields() {\n\t\tsuper._updateFields();\n\n\t\tthis._valueXFields = [];\n\t\tthis._valueYFields = [];\n\t\tthis._valueXShowFields = [];\n\t\tthis._valueYShowFields = [];\n\n\t\tthis.__valueXShowFields = [];\n\t\tthis.__valueYShowFields = [];\n\n\t\tif (this.valueXFields) {\n\t\t\t$array.each(this.valueXFields as Array<keyof this[\"_settings\"]>, (key) => {\n\t\t\t\tconst field = this.get(<any>(key + \"Field\"));\n\t\t\t\tif (field) {\n\t\t\t\t\tthis._valueXFields.push(<any>key);\n\t\t\t\t\tlet field = this.get(<any>(key + \"Show\"));\n\t\t\t\t\tthis.__valueXShowFields.push(field);\n\n\t\t\t\t\tif (field.indexOf(\"Working\") != -1) {\n\t\t\t\t\t\tthis._valueXShowFields.push(field.split(\"Working\")[0]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis._valueXShowFields.push(field);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.valueYFields) {\n\t\t\t$array.each(this.valueYFields as Array<keyof this[\"_settings\"]>, (key) => {\n\t\t\t\tconst field = this.get(<any>(key + \"Field\"));\n\n\t\t\t\tif (field) {\n\t\t\t\t\tthis._valueYFields.push(<any>key);\n\t\t\t\t\tlet field = this.get(<any>(key + \"Show\"));\n\t\t\t\t\tthis.__valueYShowFields.push(field);\n\n\t\t\t\t\tif (field.indexOf(\"Working\") != -1) {\n\t\t\t\t\t\tthis._valueYShowFields.push(field.split(\"Working\")[0]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis._valueYShowFields.push(field);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected _dispose() {\n\t\tsuper._dispose();\n\n\t\tthis._bullets = {};\n\t\tconst chart = this.chart;\n\t\tif (chart) {\n\t\t\tchart.series.removeValue(this);\n\t\t}\n\n\t\t$array.removeFirst(this.get(\"xAxis\").series, this);\n\t\t$array.removeFirst(this.get(\"yAxis\").series, this);\n\t}\n\n\t// TODO use  SelectKeys<this[\"_privateSettings\"], number | undefined>\n\tprotected _min<Key extends keyof this[\"_privateSettings\"]>(key: Key, value: number | undefined) {\n\t\tlet newValue = min(this.getPrivate(key) as any, value);\t\t\n\t\tthis.setPrivate(key, newValue as any);\n\t}\n\n\t// TODO use  SelectKeys<this[\"_privateSettings\"], number | undefined>\n\tprotected _max<Key extends keyof this[\"_privateSettings\"]>(key: Key, value: number | undefined) {\n\t\tlet newValue = max(this.getPrivate(key) as any, value);\n\t\tthis.setPrivate(key, newValue as any);\n\t}\n\n\tprotected _shouldMakeBullet(dataItem: DataItem<this[\"_dataItemSettings\"]>): boolean {\n\n\t\tconst xAxis = this.get(\"xAxis\");\n\t\tconst yAxis = this.get(\"yAxis\");\n\t\tconst baseAxis = this.get(\"baseAxis\");\n\n\t\tif (!xAxis.inited || !yAxis.inited) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst minBulletDistance = this.get(\"minBulletDistance\", 0);\n\t\tif (minBulletDistance > 0) {\n\t\t\tlet startIndex = this.startIndex();\n\t\t\tlet endIndex = this.endIndex();\n\n\t\t\tlet count = endIndex - startIndex;\n\n\t\t\tif (xAxis == baseAxis) {\n\t\t\t\tif (xAxis.get(\"renderer\").axisLength() / count < minBulletDistance / 5) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (yAxis == baseAxis) {\n\t\t\t\tif (yAxis.get(\"renderer\").axisLength() / count < minBulletDistance / 5) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (dataItem.get(this._xField as any) != null && dataItem.get(this._yField as any) != null) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected _makeFieldNames() {\n\t\tconst xAxis = this.get(\"xAxis\");\n\t\tconst yAxis = this.get(\"yAxis\");\n\t\tconst xName = xAxis.getPrivate(\"name\")!;\n\t\tconst xCapName = $utils.capitalizeFirst(xName);\n\n\t\tconst yName = yAxis.getPrivate(\"name\")!;\n\t\tconst yCapName = $utils.capitalizeFirst(yName);\n\n\t\tconst xLetter = xAxis.get(\"renderer\").getPrivate(\"letter\")!\n\t\tconst yLetter = yAxis.get(\"renderer\").getPrivate(\"letter\")!\n\n\t\tconst open = \"open\";\n\t\tconst low = \"low\";\n\t\tconst high = \"high\";\n\t\tconst show = \"Show\";\n\n\t\tif (xAxis.className === \"ValueAxis\") {\n\t\t\tthis._xField = this.get(<any>(xName + xLetter! + show));\n\t\t\tthis._xOpenField = this.get(<any>(open + xCapName + xLetter! + show));\n\t\t\tthis._xLowField = this.get(<any>(low + xCapName + xLetter! + show));\n\t\t\tthis._xHighField = this.get(<any>(high + xCapName + xLetter! + show));\n\t\t}\n\t\telse {\n\t\t\tthis._xField = <any>(xName + xLetter!);\n\t\t\tthis._xOpenField = <any>(open + xCapName + xLetter!);\n\t\t\tthis._xLowField = <any>(low + xCapName + xLetter!);\n\t\t\tthis._xHighField = <any>(high + xCapName + xLetter!);\n\t\t}\n\n\t\tif (yAxis.className === \"ValueAxis\") {\n\t\t\tthis._yField = this.get(<any>(yName + yLetter! + show));\n\t\t\tthis._yOpenField = this.get(<any>(open + yCapName + yLetter! + show));\n\t\t\tthis._yLowField = this.get(<any>(low + yCapName + yLetter! + show));\n\t\t\tthis._yHighField = this.get(<any>(high + yCapName + yLetter! + show));\n\t\t}\n\t\telse {\n\t\t\tthis._yField = <any>(yName + yLetter!);\n\t\t\tthis._yOpenField = <any>(open + yCapName + yLetter!);\n\t\t\tthis._yLowField = <any>(low + yCapName + yLetter!);\n\t\t\tthis._yHighField = <any>(high + yCapName + yLetter!);\n\t\t}\n\t}\n\n\tprotected _fixVC() {\n\t\tconst xAxis = this.get(\"xAxis\");\n\t\tconst yAxis = this.get(\"yAxis\");\n\t\tconst baseAxis = this.get(\"baseAxis\");\n\t\tconst hiddenState = this.states.lookup(\"hidden\");\n\t\tconst sequencedInterpolation = this.get(\"sequencedInterpolation\");\n\n\t\tif (hiddenState) {\n\t\t\tlet value = 0;\n\t\t\tif (sequencedInterpolation) {\n\t\t\t\tvalue = 0.999999999999; // makes animate, good for stacked\n\t\t\t}\n\n\t\t\tif (xAxis === baseAxis) {\n\t\t\t\thiddenState.set(\"vcy\", value);\n\t\t\t}\n\t\t\telse if (yAxis === baseAxis) {\n\t\t\t\thiddenState.set(\"vcx\", value);\n\t\t\t}\n\t\t\telse {\n\t\t\t\thiddenState.set(\"vcy\", value);\n\t\t\t\thiddenState.set(\"vcx\", value);\n\t\t\t}\n\t\t}\n\t}\n\n\n\tprotected _handleMaskBullets() {\n\t\tif (this.isDirty(\"maskBullets\")) {\n\t\t\tthis.bulletsContainer.set(\"maskContent\", this.get(\"maskBullets\"));\n\t\t}\n\t}\n\n\tpublic _fixPosition() {\n\t\tconst xAxis = this.get(\"xAxis\");\n\t\tconst yAxis = this.get(\"yAxis\");\n\n\t\tthis.set(\"x\", xAxis.x() - $utils.relativeToValue(xAxis.get(\"centerX\", 0), xAxis.width()) - xAxis.parent!.get(\"paddingLeft\", 0));\n\t\tthis.set(\"y\", yAxis.y() - $utils.relativeToValue(yAxis.get(\"centerY\", 0), yAxis.height()) - yAxis.parent!.get(\"paddingTop\", 0));\n\n\t\tthis.bulletsContainer.set(\"y\", this.y());\n\t\tthis.bulletsContainer.set(\"x\", this.x());\n\t}\n\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tthis._bullets = {};\n\n\t\tif (this.isDirty(\"valueYShow\") || this.isDirty(\"valueXShow\") || this.isDirty(\"openValueYShow\") || this.isDirty(\"openValueXShow\") || this.isDirty(\"lowValueYShow\") || this.isDirty(\"lowValueXShow\") || this.isDirty(\"highValueYShow\") || this.isDirty(\"highValueXShow\")) {\n\t\t\tthis._updateFields();\n\t\t\tthis._makeFieldNames();\n\t\t\tthis._valuesDirty = true;\n\t\t}\n\n\t\tif (this.isDirty(\"xAxis\") || this.isDirty(\"yAxis\")) {\n\t\t\tthis._valuesDirty = true;\n\t\t}\n\n\t\tthis.set(\"width\", this.get(\"xAxis\").width());\n\t\tthis.set(\"height\", this.get(\"yAxis\").height());\n\n\t\tthis._handleMaskBullets();\n\n\t\tconst xAxis = this.get(\"xAxis\");\n\t\tconst yAxis = this.get(\"yAxis\");\n\t\tconst baseAxis = this.get(\"baseAxis\");\n\n\t\tconst tooltipPositionX = this.get(\"tooltipPositionX\");\n\t\tlet tooltipFieldX: string;\n\n\t\tswitch (tooltipPositionX) {\n\t\t\tcase \"open\":\n\t\t\t\ttooltipFieldX = this._xOpenField;\n\t\t\t\tbreak;\n\t\t\tcase \"low\":\n\t\t\t\ttooltipFieldX = this._xLowField;\n\t\t\t\tbreak;\n\t\t\tcase \"high\":\n\t\t\t\ttooltipFieldX = this._xHighField;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ttooltipFieldX = this._xField;\n\t\t}\n\t\tthis._tooltipFieldX = tooltipFieldX;\n\n\t\tconst tooltipPositionY = this.get(\"tooltipPositionY\");\n\t\tlet tooltipFieldY: string;\n\t\tswitch (tooltipPositionY) {\n\t\t\tcase \"open\":\n\t\t\t\ttooltipFieldY = this._yOpenField;\n\t\t\t\tbreak;\n\t\t\tcase \"low\":\n\t\t\t\ttooltipFieldY = this._yLowField;\n\t\t\t\tbreak;\n\t\t\tcase \"high\":\n\t\t\t\ttooltipFieldY = this._yHighField;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ttooltipFieldY = this._yField;\n\t\t}\n\t\tthis._tooltipFieldY = tooltipFieldY;\n\n\t\tif (this.isDirty(\"baseAxis\")) {\n\t\t\tthis._fixVC();\n\t\t}\n\n\n\t\tthis._fixPosition();\n\n\t\tconst stacked = this.get(\"stacked\");\n\n\t\tif (this.isDirty(\"stacked\")) {\n\t\t\tif (stacked) {\n\t\t\t\tif (this._valuesDirty && !this._dataProcessed) {\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis._stack();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._unstack();\n\t\t\t}\n\t\t}\n\n\t\tif (this._valuesDirty && !this._dataProcessed) {\n\t\t\tthis._dataProcessed = true;\n\n\t\t\tif (stacked) {\n\t\t\t\tthis._stack();\n\t\t\t}\n\n\t\t\t$array.each(this.dataItems, (dataItem) => {\n\t\t\t\t$array.each(this._valueXShowFields, (key) => {\n\t\t\t\t\tlet value = dataItem.get(<any>key);\n\t\t\t\t\tif (value != null) {\n\t\t\t\t\t\tif (stacked) {\n\t\t\t\t\t\t\tvalue += this.getStackedXValue(dataItem, key);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._min(\"minX\", value);\n\t\t\t\t\t\tthis._max(\"maxX\", value);\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\t$array.each(this._valueYShowFields, (key) => {\n\t\t\t\t\tlet value = dataItem.get(<any>key);\n\t\t\t\t\tif (value != null) {\n\t\t\t\t\t\tif (stacked) {\n\t\t\t\t\t\t\tvalue += this.getStackedYValue(dataItem, key);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._min(\"minY\", value);\n\t\t\t\t\t\tthis._max(\"maxY\", value);\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\txAxis.processSeriesDataItem(dataItem, this._valueXFields);\n\t\t\t\tyAxis.processSeriesDataItem(dataItem, this._valueYFields);\n\t\t\t})\n\n\t\t\txAxis._seriesValuesDirty = true;\n\t\t\tyAxis._seriesValuesDirty = true;\n\n\t\t\tif (!this.get(\"ignoreMinMax\")) {\n\t\t\t\tif (this.isPrivateDirty(\"minX\") || this.isPrivateDirty(\"maxX\")) {\n\t\t\t\t\txAxis.markDirtyExtremes();\n\t\t\t\t}\n\t\t\t\tif (this.isPrivateDirty(\"minY\") || this.isPrivateDirty(\"maxY\")) {\n\t\t\t\t\tyAxis.markDirtyExtremes();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._markStakedDirtyStack();\n\n\t\t\t//this.updateLegendMarker(undefined); // causes legend marker to change color instantly when on\n\t\t\tif (!this.get(\"tooltipDataItem\")) {\n\t\t\t\tthis.updateLegendValue(undefined);\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"vcx\") || this.isDirty(\"vcy\")) {\n\t\t\tthis._markStakedDirtyStack();\n\t\t}\n\n\t\tif (!this._dataGrouped) {\n\t\t\txAxis._groupSeriesData(this);\n\t\t\tyAxis._groupSeriesData(this);\n\t\t\tthis._dataGrouped = true;\n\t\t}\n\n\t\tif (this._valuesDirty || this.isPrivateDirty(\"startIndex\") || this.isPrivateDirty(\"adjustedStartIndex\") || this.isPrivateDirty(\"endIndex\") || this.isDirty(\"vcx\") || this.isDirty(\"vcy\") || this._stackDirty || this._sizeDirty) {\n\t\t\tlet startIndex = this.startIndex();\n\t\t\tlet endIndex = this.endIndex();\n\t\t\tlet minBulletDistance = this.get(\"minBulletDistance\", 0);\n\t\t\tif (minBulletDistance > 0 && baseAxis) {\n\t\t\t\tif (baseAxis.get(\"renderer\").axisLength() / (endIndex - startIndex) > minBulletDistance) {\n\t\t\t\t\tthis._showBullets = true;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis._showBullets = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ((this._psi != startIndex || this._pei != endIndex || this.isDirty(\"vcx\") || this.isDirty(\"vcy\") || this.isPrivateDirty(\"adjustedStartIndex\") || this._stackDirty || this._valuesDirty) && !this._selectionProcessed) {\n\t\t\t\tthis._selectionProcessed = true;\n\n\t\t\t\tconst vcx = this.get(\"vcx\", 1);\n\t\t\t\tconst vcy = this.get(\"vcy\", 1);\n\t\t\t\tconst stacked = this.get(\"stacked\", false);\n\t\t\t\tconst outOfSelection = this.getPrivate(\"outOfSelection\");\n\n\t\t\t\tif (baseAxis === xAxis || !baseAxis) {\n\t\t\t\t\tyAxis._calculateTotals();\n\t\t\t\t\tthis.setPrivateRaw(\"selectionMinY\", undefined);\n\t\t\t\t\tthis.setPrivateRaw(\"selectionMaxY\", undefined);\n\t\t\t\t\tif (!outOfSelection) {\n\t\t\t\t\t\tfor (let i = startIndex; i < endIndex; i++) {\n\t\t\t\t\t\t\tthis.processYSelectionDataItem(this.dataItems[i], vcy, stacked);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tyAxis.markDirtySelectionExtremes();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (baseAxis === yAxis || !baseAxis) {\n\t\t\t\t\txAxis._calculateTotals();\n\t\t\t\t\tthis.setPrivateRaw(\"selectionMinX\", undefined);\n\t\t\t\t\tthis.setPrivateRaw(\"selectionMaxX\", undefined);\n\t\t\t\t\tif (!outOfSelection) {\n\t\t\t\t\t\tfor (let i = startIndex; i < endIndex; i++) {\n\t\t\t\t\t\t\tthis.processXSelectionDataItem(this.dataItems[i], vcx, stacked);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tyAxis.markDirtySelectionExtremes();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (baseAxis === xAxis || !baseAxis) {\n\t\t\t\t\tif (this.get(\"valueYShow\") !== \"valueYWorking\" || this.get(\"useSelectionExtremes\")) {\n\t\t\t\t\t\tconst selectionMinY = this.getPrivate(\"selectionMinY\");\n\t\t\t\t\t\tif (selectionMinY != null) {\n\t\t\t\t\t\t\tthis.setPrivateRaw(\"minY\", selectionMinY);\n\t\t\t\t\t\t\tyAxis.markDirtyExtremes();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst selectionMaxY = this.getPrivate(\"selectionMaxY\");\n\t\t\t\t\t\tif (selectionMaxY != null) {\n\t\t\t\t\t\t\tthis.setPrivateRaw(\"maxY\", selectionMaxY);\n\t\t\t\t\t\t\tyAxis.markDirtyExtremes();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (baseAxis === yAxis || !baseAxis) {\n\t\t\t\t\tif (this.get(\"valueXShow\") !== \"valueXWorking\" || this.get(\"useSelectionExtremes\")) {\n\t\t\t\t\t\tconst selectionMinX = this.getPrivate(\"selectionMinX\");\n\t\t\t\t\t\tif (selectionMinX != null) {\n\t\t\t\t\t\t\tthis.setPrivateRaw(\"minX\", selectionMinX);\n\t\t\t\t\t\t\tyAxis.markDirtyExtremes();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst selectionMaxX = this.getPrivate(\"selectionMaxX\")\n\t\t\t\t\t\tif (selectionMaxX != null) {\n\t\t\t\t\t\t\tthis.setPrivateRaw(\"maxX\", selectionMaxX);\n\t\t\t\t\t\t\txAxis.markDirtyExtremes();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.isPrivateDirty(\"selectionMinX\") || this.isPrivateDirty(\"selectionMaxX\")) {\n\t\t\t\t\txAxis.markDirtySelectionExtremes();\n\t\t\t\t}\n\n\t\t\t\tif (this.isPrivateDirty(\"selectionMinY\") || this.isPrivateDirty(\"selectionMaxY\")) {\n\t\t\t\t\tyAxis.markDirtySelectionExtremes();\n\t\t\t\t}\n\t\t\t\t// this.updateLegendValue(undefined); flickers while panning\n\t\t\t}\n\t\t}\n\t}\n\n\n\tprotected _makeRangeMask() {\n\t\tif (this.axisRanges.length > 0) {\n\t\t\tlet mainContainerMask = this._mainContainerMask;\n\t\t\tif (mainContainerMask == null) {\n\t\t\t\tmainContainerMask = this.children.push(Graphics.new(this._root, {}));\n\t\t\t\tthis._mainContainerMask = mainContainerMask;\n\n\t\t\t\tmainContainerMask.set(\"draw\", (display, target) => {\n\t\t\t\t\tconst parent = this.parent;\n\t\t\t\t\tif (parent) {\n\t\t\t\t\t\tconst w = this._root.container.width();\n\t\t\t\t\t\tconst h = this._root.container.height();\n\t\t\t\t\t\tdisplay.moveTo(-w, -h);\n\t\t\t\t\t\tdisplay.lineTo(-w, h * 2);\n\t\t\t\t\t\tdisplay.lineTo(w * 2, h * 2);\n\t\t\t\t\t\tdisplay.lineTo(w * 2, -h);\n\t\t\t\t\t\tdisplay.lineTo(-w, -h);\n\n\n\t\t\t\t\t\tthis.axisRanges.each((axisRange) => {\n\t\t\t\t\t\t\tconst fill = axisRange.axisDataItem.get(\"axisFill\");\n\n\t\t\t\t\t\t\tif (parent) {\n\t\t\t\t\t\t\t\tif (fill) {\n\t\t\t\t\t\t\t\t\tlet draw = fill.get(\"draw\");\n\t\t\t\t\t\t\t\t\tif (draw) {\n\t\t\t\t\t\t\t\t\t\tdraw(display, target);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tthis.mainContainer._display.mask = mainContainerMask!._display;\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tmainContainerMask.markDirty();\n\t\t\tmainContainerMask._markDirtyKey(\"fill\");\n\t\t}\n\t\telse {\n\t\t\tthis.mainContainer._display.mask = null;\n\t\t}\n\t}\n\n\n\tpublic _updateChildren() {\n\t\tsuper._updateChildren();\n\n\t\t// save for performance\n\t\tthis._x = this.x();\n\t\tthis._y = this.y();\n\t\tthis._makeRangeMask();\n\t}\n\n\tprotected _stack() {\n\t\tconst chart = this.chart;\n\t\tif (chart) {\n\t\t\tconst seriesIndex = chart.series.indexOf(this);\n\n\t\t\tthis._couldStackTo = [];\n\n\t\t\tif (seriesIndex > 0) {\n\t\t\t\tlet series: XYSeries;\n\n\t\t\t\tfor (let i = seriesIndex - 1; i >= 0; i--) {\n\t\t\t\t\tseries = chart.series.getIndex(i)!;\n\t\t\t\t\tif (series.get(\"xAxis\") === this.get(\"xAxis\") && series.get(\"yAxis\") === this.get(\"yAxis\") && series.className === this.className) {\n\t\t\t\t\t\tthis._couldStackTo.push(series);\n\t\t\t\t\t\tif (!series.get(\"stacked\")) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._stackDataItems();\n\t\t}\n\t}\n\n\tpublic _unstack() {\n\n\t\t$object.each(this._reallyStackedTo, (_key, value) => {\n\t\t\tdelete (value._stackedSeries[this.uid]);\n\t\t})\n\n\t\tthis._reallyStackedTo = {};\n\t\t$array.each(this.dataItems, (dataItem) => {\n\t\t\tdataItem.setRaw(\"stackToItemY\", undefined);\n\t\t\tdataItem.setRaw(\"stackToItemX\", undefined);\n\t\t})\n\t}\n\n\tpublic _handleRemoved(): void {\n\t\tconst xAxis = this.get(\"xAxis\");\n\t\tif (xAxis) {\n\t\t\txAxis._handleSeriesRemoved();\n\t\t}\n\t\tconst yAxis = this.get(\"yAxis\");\n\t\tif (yAxis) {\n\t\t\tyAxis._handleSeriesRemoved();\n\t\t}\n\t}\n\n\tprotected _stackDataItems() {\n\t\t// this works only with the same number of data @todo: search by date/category?\n\t\tconst baseAxis = this.get(\"baseAxis\");\n\t\tconst xAxis = this.get(\"xAxis\");\n\t\tconst yAxis = this.get(\"yAxis\");\n\n\t\tlet field: \"valueX\" | \"valueY\";\n\t\tlet stackToItemKey: \"stackToItemX\" | \"stackToItemY\";\n\t\tif (baseAxis === xAxis) {\n\t\t\tfield = \"valueY\";\n\t\t\tstackToItemKey = \"stackToItemY\";\n\t\t}\n\t\telse if (baseAxis === yAxis) {\n\t\t\tfield = \"valueX\";\n\t\t\tstackToItemKey = \"stackToItemX\";\n\t\t}\n\n\t\tlet len = this._couldStackTo.length;\n\t\tlet index = 0;\n\t\tconst stackToNegative = this.get(\"stackToNegative\");\n\n\t\tthis._reallyStackedTo = {};\n\n\t\t$array.each(this.dataItems, (dataItem) => {\n\t\t\tfor (let s = 0; s < len; s++) {\n\t\t\t\tlet stackToSeries = this._couldStackTo[s];\n\t\t\t\tlet stackToItem = stackToSeries.dataItems[index];\n\t\t\t\tlet value = dataItem.get(field);\n\n\t\t\t\tif (stackToItem) {\n\t\t\t\t\tlet stackValue = stackToItem.get(field);\n\t\t\t\t\tif (stackToNegative) {\n\t\t\t\t\t\tif ($type.isNumber(value)) {\n\t\t\t\t\t\t\tif ($type.isNumber(stackValue)) {\n\n\t\t\t\t\t\t\t\tif (s == len - 1) {\n\t\t\t\t\t\t\t\t\tdataItem.setRaw(stackToItemKey, undefined);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (value >= 0 && stackValue >= 0) {\n\t\t\t\t\t\t\t\t\tdataItem.setRaw(stackToItemKey, stackToItem);\n\t\t\t\t\t\t\t\t\tthis._reallyStackedTo[stackToSeries.uid] = stackToSeries;\n\t\t\t\t\t\t\t\t\tstackToSeries._stackedSeries[this.uid] = this;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (value < 0 && stackValue < 0) {\n\t\t\t\t\t\t\t\t\tdataItem.setRaw(stackToItemKey, stackToItem);\n\t\t\t\t\t\t\t\t\tthis._reallyStackedTo[stackToSeries.uid] = stackToSeries;\n\t\t\t\t\t\t\t\t\tstackToSeries._stackedSeries[this.uid] = this;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif ($type.isNumber(value) && $type.isNumber(stackValue)) {\n\t\t\t\t\t\t\tdataItem.setRaw(stackToItemKey, stackToItem);\n\t\t\t\t\t\t\tthis._reallyStackedTo[stackToSeries.uid] = stackToSeries;\n\t\t\t\t\t\t\tstackToSeries._stackedSeries[this.uid] = this;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tindex++;\n\t\t})\n\t}\n\n\tprotected processXSelectionDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, vcx: number, stacked: boolean) {\n\t\t$array.each(this.__valueXShowFields, (key) => {\n\t\t\tlet value = dataItem.get(<any>key);\n\t\t\tif (value != null) {\n\t\t\t\tif (stacked) {\n\t\t\t\t\tvalue += this.getStackedXValueWorking(dataItem, key);\n\t\t\t\t}\n\n\t\t\t\tthis._min(\"selectionMinX\", value);\n\t\t\t\tthis._max(\"selectionMaxX\", value * vcx);\n\t\t\t}\n\t\t})\n\t}\n\n\tprotected processYSelectionDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, vcy: number, stacked: boolean) {\n\t\t$array.each(this.__valueYShowFields, (key) => {\n\n\t\t\tlet value = dataItem.get(<any>key);\n\t\t\tif (value != null) {\n\t\t\t\tif (stacked) {\n\t\t\t\t\tvalue += this.getStackedYValueWorking(dataItem, key);\n\t\t\t\t}\n\n\t\t\t\tthis._min(\"selectionMinY\", value);\n\t\t\t\tthis._max(\"selectionMaxY\", value * vcy);\n\t\t\t}\n\t\t})\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getStackedYValueWorking(dataItem: DataItem<IXYSeriesDataItem>, key: string): number {\n\t\tconst stackToItem = dataItem.get(\"stackToItemY\");\n\n\t\tif (stackToItem) {\n\t\t\tconst stackedToSeries = stackToItem.component as XYSeries;\n\n\t\t\treturn stackToItem.get(key as any, 0) * stackedToSeries.get(\"vcy\", 1) + this.getStackedYValueWorking(stackToItem, key);\n\t\t}\n\t\treturn 0;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getStackedXValueWorking(dataItem: DataItem<IXYSeriesDataItem>, key: string): number {\n\t\tconst stackToItem = dataItem.get(\"stackToItemX\");\n\n\t\tif (stackToItem) {\n\t\t\tconst stackedToSeries = stackToItem.component as XYSeries;\n\t\t\treturn stackToItem.get(key as any, 0) * stackedToSeries.get(\"vcx\", 1) + this.getStackedXValueWorking(stackToItem, key);\n\t\t}\n\t\treturn 0;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getStackedYValue(dataItem: DataItem<IXYSeriesDataItem>, key: string): number {\n\t\tconst stackToItem = dataItem.get(\"stackToItemY\");\n\n\t\tif (stackToItem) {\n\t\t\treturn stackToItem.get(key as any, 0) + this.getStackedYValue(stackToItem, key);\n\t\t}\n\t\treturn 0;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getStackedXValue(dataItem: DataItem<IXYSeriesDataItem>, key: string): number {\n\t\tconst stackToItem = dataItem.get(\"stackToItemX\");\n\n\t\tif (stackToItem) {\n\t\t\treturn stackToItem.get(key as any, 0) + this.getStackedXValue(stackToItem, key);\n\t\t}\n\t\treturn 0;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic createLegendMarker(_dataItem?: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tthis.updateLegendMarker();\n\t}\n\n\tpublic _markDirtyAxes() {\n\t\tthis._axesDirty = true;\n\t\tthis.markDirty();\n\t}\n\n\tpublic _markDataSetDirty() {\n\t\tthis._afterDataChange();\n\t\tthis._valuesDirty = true;\n\t\tthis._dataProcessed = false;\n\t\tthis._aggregatesCalculated = false;\n\t\tthis.markDirty();\n\t}\n\n\tpublic _clearDirty() {\n\t\tsuper._clearDirty();\n\t\tthis._axesDirty = false;\n\t\tthis._selectionProcessed = false;\n\t\tthis._stackDirty = false;\n\t\tthis._dataProcessed = false;\n\t}\n\n\tpublic _positionBullet(bullet: Bullet) {\n\t\tlet sprite = bullet.get(\"sprite\");\n\t\tif (sprite) {\n\t\t\tlet dataItem = sprite.dataItem as DataItem<this[\"_dataItemSettings\"]>;\n\n\t\t\tlet locationX = bullet.get(\"locationX\", dataItem.get(\"locationX\", 0.5));\n\t\t\tlet locationY = bullet.get(\"locationY\", dataItem.get(\"locationY\", 0.5));\n\n\t\t\tlet xAxis = this.get(\"xAxis\");\n\t\t\tlet yAxis = this.get(\"yAxis\");\n\n\t\t\tlet exactLocationX = this.get(\"exactLocationX\", false);\n\t\t\tlet exactLocationY = this.get(\"exactLocationY\", false);\n\n\t\t\tlet positionX = xAxis.getDataItemPositionX(dataItem, this._xField, locationX, this.get(\"vcx\", 1), exactLocationX);\n\t\t\tlet positionY = yAxis.getDataItemPositionY(dataItem, this._yField, locationY, this.get(\"vcy\", 1), exactLocationY);\n\n\t\t\tlet point = this.getPoint(positionX, positionY);\n\n\t\t\tlet left = dataItem.get(\"left\", point.x);\n\t\t\tlet right = dataItem.get(\"right\", point.x);\n\t\t\tlet top = dataItem.get(\"top\", point.y);\n\t\t\tlet bottom = dataItem.get(\"bottom\", point.y);\n\n\t\t\tlet x = 0;\n\t\t\tlet y = 0;\n\n\t\t\tlet w = right - left;\n\t\t\tlet h = bottom - top;\n\n\t\t\tif (this._shouldShowBullet(positionX, positionY)) {\n\t\t\t\tsprite.setPrivate(\"visible\", !bullet.getPrivate(\"hidden\"));\n\n\t\t\t\tlet field = bullet.get(\"field\");\n\n\t\t\t\tconst baseAxis = this.get(\"baseAxis\");\n\t\t\t\tconst xAxis = this.get(\"xAxis\");\n\t\t\t\tconst yAxis = this.get(\"yAxis\");\n\n\t\t\t\tif (field != undefined) {\n\t\t\t\t\tlet realField: string | undefined;\n\n\t\t\t\t\tif (baseAxis == xAxis) {\n\t\t\t\t\t\tif (field == \"value\") {\n\t\t\t\t\t\t\trealField = this._yField;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (field == \"open\") {\n\t\t\t\t\t\t\trealField = this._yOpenField;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (field == \"high\") {\n\t\t\t\t\t\t\trealField = this._yHighField;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (field == \"low\") {\n\t\t\t\t\t\t\trealField = this._yLowField;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (realField) {\n\t\t\t\t\t\t\tpositionY = yAxis.getDataItemPositionY(dataItem, realField as any, 0, this.get(\"vcy\", 1), exactLocationY)\n\n\t\t\t\t\t\t\tpoint = yAxis.get(\"renderer\").positionToPoint(positionY);\n\n\t\t\t\t\t\t\ty = point.y;\n\t\t\t\t\t\t\tx = left + w * locationX;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (field == \"value\") {\n\t\t\t\t\t\t\trealField = this._xField;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (field == \"open\") {\n\t\t\t\t\t\t\trealField = this._xOpenField;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (field == \"high\") {\n\t\t\t\t\t\t\trealField = this._xHighField;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (field == \"low\") {\n\t\t\t\t\t\t\trealField = this._xLowField;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (realField) {\n\t\t\t\t\t\t\tpositionX = xAxis.getDataItemPositionX(dataItem, realField as any, 0, this.get(\"vcx\", 1), exactLocationX);\n\n\t\t\t\t\t\t\tpoint = xAxis.get(\"renderer\").positionToPoint(positionX);\n\n\t\t\t\t\t\t\tx = point.x;\n\t\t\t\t\t\t\ty = bottom - h * locationY;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tx = left + w * locationX;\n\t\t\t\t\ty = bottom - h * locationY;\n\t\t\t\t}\n\n\t\t\t\tconst stacked = bullet.get(\"stacked\");\n\t\t\t\tif (stacked) {\n\t\t\t\t\tconst chart = this.chart;\n\t\t\t\t\tif (baseAxis == xAxis) {\n\t\t\t\t\t\tlet previousBullet = this._bullets[positionX + \"_\" + positionY];\n\t\t\t\t\t\tif (previousBullet) {\n\t\t\t\t\t\t\tlet previousBounds = previousBullet.bounds();\n\t\t\t\t\t\t\tlet bounds = sprite.localBounds();\n\t\t\t\t\t\t\tlet yo = y;\n\t\t\t\t\t\t\ty = previousBounds.top;\n\n\t\t\t\t\t\t\tif (stacked == \"down\") {\n\t\t\t\t\t\t\t\ty = previousBounds.bottom - bounds.top;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (stacked == \"auto\") {\n\t\t\t\t\t\t\t\tif (chart) {\n\t\t\t\t\t\t\t\t\tif (yo < chart.plotContainer.height() / 2) {\n\t\t\t\t\t\t\t\t\t\ty = previousBounds.bottom - bounds.top;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\ty += bounds.bottom;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\ty += bounds.bottom;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._bullets[positionX + \"_\" + positionY] = sprite;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tlet previousBullet = this._bullets[positionX + \"_\" + positionY];\n\t\t\t\t\t\tif (previousBullet) {\n\t\t\t\t\t\t\tlet previousBounds = previousBullet.bounds();\n\t\t\t\t\t\t\tlet bounds = sprite.localBounds();\n\t\t\t\t\t\t\tlet xo = x;\n\t\t\t\t\t\t\tx = previousBounds.right;\n\n\t\t\t\t\t\t\tif (stacked == \"down\") {\n\t\t\t\t\t\t\t\tx = previousBounds.left - bounds.right;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (stacked == \"auto\") {\n\t\t\t\t\t\t\t\tif (chart) {\n\t\t\t\t\t\t\t\t\tif (xo < chart.plotContainer.width() / 2) {\n\t\t\t\t\t\t\t\t\t\tx = previousBounds.left - bounds.right;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tx -= bounds.left;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tx -= bounds.left;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._bullets[positionX + \"_\" + positionY] = sprite;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (sprite.isType(\"Label\")) {\n\t\t\t\t\tsprite.setPrivate(\"maxWidth\", Math.abs(w));\n\t\t\t\t\tsprite.setPrivate(\"maxHeight\", Math.abs(h));\n\t\t\t\t}\n\n\t\t\t\tsprite.setAll({ x, y });\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsprite.setPrivate(\"visible\", false);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _shouldShowBullet(_positionX: number, _positionY: number): boolean {\n\t\treturn this._showBullets;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic setDataSet(id: string) {\n\t\tif (this._dataSets[id]) {\n\t\t\tthis._handleDataSetChange();\n\t\t\tthis._dataItems = this._dataSets[id];\n\t\t\tthis._markDataSetDirty();\n\t\t\tthis._dataSetId = id;\n\n\t\t\tconst type = \"datasetchanged\";\n\t\t\tif (this.events.isEnabled(type)) {\n\t\t\t\tthis.events.dispatch(type, { type: type, target: this, id: id });\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic resetGrouping() {\n\t\t$object.each(this._dataSets, (_key, dataSet) => {\n\t\t\tif (dataSet != this._mainDataItems) {\n\t\t\t\t$array.each(dataSet, (dataItem) => {\n\t\t\t\t\tdataItem.dispose();\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t\tthis._dataSets = {};\n\t\tthis._dataItems = this.mainDataItems;\n\t}\n\n\tprotected _handleDataSetChange() {\n\t\t$array.each(this._dataItems, (dataItem) => {\n\t\t\tlet bullets = dataItem.bullets;\n\t\t\tif (bullets) {\n\t\t\t\t$array.each(bullets, (bullet) => {\n\t\t\t\t\tif (bullet) {\n\t\t\t\t\t\tlet sprite = bullet.get(\"sprite\");\n\t\t\t\t\t\tif (sprite) {\n\t\t\t\t\t\t\tsprite.setPrivate(\"visible\", false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\n\t\tthis._selectionProcessed = false; // for totals to be calculated\n\t}\n\n\t/**\n\t * Shows hidden series.\n\t *\n\t * @param   duration  Duration of animation in milliseconds\n\t * @return            Animation promise\n\t */\n\tpublic async show(duration?: number): Promise<void> {\n\t\tthis._fixVC();\n\t\tlet promises: Array<Promise<any>> = [];\n\t\tpromises.push(super.show(duration).then(() => {\n\t\t\tthis._isShowing = false;\n\t\t\tlet xAxis = this.get(\"xAxis\");\n\t\t\tlet yAxis = this.get(\"yAxis\");\n\t\t\tlet baseAxis = this.get(\"baseAxis\");\n\t\t\tif (yAxis !== baseAxis) {\n\t\t\t\tyAxis.markDirtySelectionExtremes();\n\t\t\t}\n\t\t\tif (xAxis !== baseAxis) {\n\t\t\t\txAxis.markDirtySelectionExtremes();\n\t\t\t}\n\t\t}));\n\t\tpromises.push(this.bulletsContainer.show(duration));\n\t\tpromises.push(this._sequencedShowHide(true, duration));\n\t\tawait Promise.all(promises);\n\t}\n\n\t/**\n\t * Hides series.\n\t *\n\t * @param   duration  Duration of animation in milliseconds\n\t * @return            Animation promise\n\t */\n\tpublic async hide(duration?: number): Promise<void> {\n\t\tthis._fixVC();\n\t\tlet promises: Promise<any>[] = [];\n\t\tpromises.push(super.hide(duration).then(() => {\n\t\t\tthis._isHiding = false;\n\t\t}));\n\t\tpromises.push(this.bulletsContainer.hide(duration));\n\t\tpromises.push(this._sequencedShowHide(false, duration));\n\t\tawait Promise.all(promises);\n\t}\n\n\t/**\n\t * Shows series's data item.\n\t *\n\t * @param   dataItem  Data item\n\t * @param   duration  Animation duration in milliseconds\n\t * @return            Promise\n\t */\n\tpublic async showDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, duration?: number): Promise<void> {\n\t\tconst promises = [super.showDataItem(dataItem, duration)];\n\n\t\tif (!$type.isNumber(duration)) {\n\t\t\tduration = this.get(\"stateAnimationDuration\", 0);\n\t\t}\n\n\t\tconst easing = this.get(\"stateAnimationEasing\");\n\n\t\t$array.each(this._valueFields, (key) => {\n\t\t\tpromises.push(dataItem.animate({ key: key + \"Working\" as any, to: dataItem.get(key as any), duration: duration!, easing: easing }).waitForStop());\n\t\t})\n\n\t\tawait Promise.all(promises);\n\t}\n\n\t/**\n\t * Hides series's data item.\n\t *\n\t * @param   dataItem  Data item\n\t * @param   duration  Animation duration in milliseconds\n\t * @return            Promise\n\t */\n\tpublic async hideDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, duration?: number): Promise<void> {\n\t\tconst promises = [super.hideDataItem(dataItem, duration)];\n\n\t\tlet hiddenState = this.states.lookup(\"hidden\");\n\t\tif (!hiddenState) {\n\t\t\thiddenState = this.states.create(\"hidden\", {});\n\t\t}\n\n\t\tif (!$type.isNumber(duration)) {\n\t\t\tduration = hiddenState.get(\"stateAnimationDuration\", this.get(\"stateAnimationDuration\", 0));\n\t\t}\n\n\t\tconst easing = hiddenState.get(\"stateAnimationEasing\", this.get(\"stateAnimationEasing\"));\n\n\t\tconst xAxis = this.get(\"xAxis\");\n\t\tconst yAxis = this.get(\"yAxis\");\n\t\tconst baseAxis = this.get(\"baseAxis\");\n\t\tconst stacked = this.get(\"stacked\");\n\n\t\tif (baseAxis === xAxis || !baseAxis) {\n\n\t\t\t$array.each(this._valueYFields, (key) => {\n\t\t\t\tlet min = yAxis.getPrivate(\"min\");\n\t\t\t\tlet baseValue = yAxis.baseValue();\n\n\t\t\t\tif ($type.isNumber(min) && min > baseValue) {\n\t\t\t\t\tbaseValue = min;\n\t\t\t\t}\n\t\t\t\tif (stacked) {\n\t\t\t\t\tbaseValue = 0;\n\t\t\t\t}\n\n\t\t\t\tlet value = dataItem.get(key as any);\n\t\t\t\tif (value != null) {\n\t\t\t\t\tpromises.push(dataItem.animate({ key: key + \"Working\" as any, to: baseValue, duration: duration!, easing: easing }).waitForStop());\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\tif (baseAxis === yAxis || !baseAxis) {\n\n\t\t\tlet min = xAxis.getPrivate(\"min\");\n\t\t\tlet baseValue = xAxis.baseValue();\n\t\t\tif ($type.isNumber(min) && min > baseValue) {\n\t\t\t\tbaseValue = min;\n\t\t\t}\n\t\t\tif (stacked) {\n\t\t\t\tbaseValue = 0;\n\t\t\t}\n\n\t\t\t$array.each(this._valueXFields, (key) => {\n\t\t\t\tlet value = dataItem.get(key as any);\n\t\t\t\tif (value != null) {\n\t\t\t\t\tpromises.push(dataItem.animate({ key: key + \"Working\" as any, to: baseValue, duration: duration!, easing: easing }).waitForStop());\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tawait Promise.all(promises);\n\t}\n\n\tpublic _markDirtyStack() {\n\t\tthis._stackDirty = true;\n\t\tthis.markDirty();\n\t\tthis._markStakedDirtyStack();\n\t}\n\n\tprotected _markStakedDirtyStack() {\n\t\tconst stackedSeries = this._stackedSeries;\n\t\tif (stackedSeries) {\n\n\t\t\t$object.each(stackedSeries, (_key, value) => {\n\t\t\t\tif (!value._stackDirty) {\n\t\t\t\t\tvalue._markDirtyStack();\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tpublic _afterChanged() {\n\t\tsuper._afterChanged();\n\t\tif (this._skipped) {\n\t\t\tthis._markDirtyAxes();\n\t\t\tthis._skipped = false;\n\t\t}\n\t}\n\n\t/**\n\t * Shows a tooltip for specific data item.\n\t *\n\t * @param  dataItem  Data item\n\t */\n\tpublic showDataItemTooltip(dataItem: DataItem<this[\"_dataItemSettings\"]> | undefined) {\n\t\tif (!this.getPrivate(\"doNotUpdateLegend\")) {\n\t\t\tthis.updateLegendMarker(dataItem);\n\t\t\tthis.updateLegendValue(dataItem);\n\t\t}\n\n\t\tconst tooltip = this.get(\"tooltip\");\n\n\t\tconst exactLocationX = this.get(\"exactLocationX\", false);\n\t\tconst exactLocationY = this.get(\"exactLocationY\", false);\n\n\t\tif (tooltip) {\n\t\t\tif (!this.isHidden() && this.get(\"visible\")) {\n\t\t\t\ttooltip._setDataItem(dataItem);\n\n\t\t\t\tif (dataItem) {\n\t\t\t\t\tlet locationX = this.get(\"locationX\", 0);\n\t\t\t\t\tlet locationY = this.get(\"locationY\", 1);\n\n\t\t\t\t\tlet itemLocationX = dataItem.get(\"locationX\", locationX);\n\t\t\t\t\tlet itemLocationY = dataItem.get(\"locationY\", locationY);\n\n\t\t\t\t\tconst xAxis = this.get(\"xAxis\");\n\t\t\t\t\tconst yAxis = this.get(\"yAxis\");\n\n\t\t\t\t\tconst vcx = this.get(\"vcx\", 1);\n\t\t\t\t\tconst vcy = this.get(\"vcy\", 1);\n\n\t\t\t\t\tconst xPos = xAxis.getDataItemPositionX(dataItem, this._tooltipFieldX!, this._aLocationX0 + (this._aLocationX1 - this._aLocationX0) * itemLocationX, vcx, exactLocationX);\n\t\t\t\t\tconst yPos = yAxis.getDataItemPositionY(dataItem, this._tooltipFieldY!, this._aLocationY0 + (this._aLocationY1 - this._aLocationY0) * itemLocationY, vcy, exactLocationY);\n\n\t\t\t\t\tconst point = this.getPoint(xPos, yPos);\n\n\t\t\t\t\tlet show = true;\n\t\t\t\t\t$array.each(this._valueFields, (field) => {\n\t\t\t\t\t\tif (dataItem.get(field as any) == null) {\n\t\t\t\t\t\t\tshow = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t\tif (show) {\n\t\t\t\t\t\tconst chart = this.chart;\n\t\t\t\t\t\tif (chart && chart.inPlot(point)) {\n\t\t\t\t\t\t\ttooltip.label.text.markDirtyText();\n\t\t\t\t\t\t\ttooltip.set(\"tooltipTarget\", this._getTooltipTarget(dataItem));\n\t\t\t\t\t\t\ttooltip.set(\"pointTo\", this._display.toGlobal({ x: point.x, y: point.y }));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\ttooltip._setDataItem(undefined);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\ttooltip._setDataItem(undefined);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.hideTooltip();\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic hideTooltip(): Promise<void> | undefined {\n\t\tconst tooltip = this.get(\"tooltip\");\n\t\tif (tooltip) {\n\t\t\ttooltip.set(\"tooltipTarget\", this);\n\t\t}\n\t\treturn super.hideTooltip();\n\t}\n\n\tprotected _getTooltipTarget(dataItem: DataItem<this[\"_dataItemSettings\"]>): Sprite {\n\t\tif (this.get(\"seriesTooltipTarget\") == \"bullet\") {\n\t\t\tconst bullets = dataItem.bullets;\n\t\t\tif (bullets && bullets.length > 0) {\n\t\t\t\tconst bullet = bullets[0];\n\t\t\t\tconst sprite = bullet.get(\"sprite\");\n\t\t\t\tif (sprite) {\n\t\t\t\t\treturn sprite;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateLegendValue(dataItem?: DataItem<this[\"_dataItemSettings\"]> | undefined) {\n\t\tconst legendDataItem = this.get(\"legendDataItem\");\n\n\t\tif (legendDataItem) {\n\n\t\t\tconst label = legendDataItem.get(\"label\");\n\t\t\tif (label) {\n\t\t\t\tlet txt = \"\";\n\t\t\t\tif (dataItem) {\n\t\t\t\t\tlabel._setDataItem(dataItem);\n\t\t\t\t\ttxt = this.get(\"legendLabelText\", label.get(\"text\", this.get(\"name\", \"\")));\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlabel._setDataItem(this._emptyDataItem);\n\t\t\t\t\ttxt = this.get(\"legendRangeLabelText\", this.get(\"legendLabelText\", label.get(\"text\", this.get(\"name\", \"\"))));\n\t\t\t\t}\n\n\t\t\t\tlabel.set(\"text\", txt);\n\t\t\t}\n\n\t\t\tconst valueLabel = legendDataItem.get(\"valueLabel\");\n\t\t\tif (valueLabel) {\n\t\t\t\tlet txt = \"\";\n\t\t\t\tif (dataItem) {\n\t\t\t\t\tvalueLabel._setDataItem(dataItem);\n\t\t\t\t\ttxt = this.get(\"legendValueText\", valueLabel.get(\"text\", \"\"));\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvalueLabel._setDataItem(this._emptyDataItem);\n\t\t\t\t\ttxt = this.get(\"legendRangeValueText\", valueLabel.get(\"text\", \"\"));\n\t\t\t\t}\n\n\t\t\t\tvalueLabel.set(\"text\", txt);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _getItemReaderLabel(): string {\n\t\tlet text = \"X: {\" + this._xField;\n\t\tif (this.get(\"xAxis\").isType<DateAxis<any>>(\"DateAxis\")) {\n\t\t\ttext += \".formatDate()\";\n\t\t}\n\t\ttext += \"}; Y: {\" + this._yField;\n\t\tif (this.get(\"yAxis\").isType<DateAxis<any>>(\"DateAxis\")) {\n\t\t\ttext += \".formatDate()\";\n\t\t}\n\t\ttext += \"}\";\n\t\treturn text;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getPoint(positionX: number, positionY: number): IPoint {\n\t\tlet x = this.get(\"xAxis\").get(\"renderer\").positionToCoordinate(positionX);\n\t\tlet y = this.get(\"yAxis\").get(\"renderer\").positionToCoordinate(positionY);\n\n\t\t// if coordinate is super big, canvas fails to draw line, capping to some big number (won't make any visual difference)\n\t\tlet max = 999999999;\n\t\tif (y < -max) {\n\t\t\ty = -max;\n\t\t}\n\t\tif (y > max) {\n\t\t\ty = max;\n\t\t}\n\n\t\tif (x < -max) {\n\t\t\tx = -max;\n\t\t}\n\t\tif (x > max) {\n\t\t\tx = max;\n\t\t}\n\n\t\treturn { x: x, y: y };\n\t}\n\n\tprotected _shouldInclude(_position: number): boolean {\n\t\treturn true;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic handleCursorHide() {\n\t\tthis.hideTooltip();\n\t\tthis.updateLegendValue(undefined);\n\t\tthis.updateLegendMarker(undefined);\n\t}\n\n\tprotected _afterDataChange() {\n\t\tsuper._afterDataChange();\n\t\tthis.get(\"xAxis\")._markDirtyKey(\"start\");\n\t\tthis.get(\"yAxis\")._markDirtyKey(\"start\");\n\t\tthis.resetExtremes();\n\t}\n\n\n\t/**\n\t * Resets cached axis scale values.\n\t */\n\tpublic resetExtremes() {\n\t\tthis.setPrivate(\"selectionMinX\", undefined);\n\t\tthis.setPrivate(\"selectionMaxX\", undefined);\n\t\tthis.setPrivate(\"selectionMinY\", undefined);\n\t\tthis.setPrivate(\"selectionMaxY\", undefined);\n\n\t\tthis.setPrivate(\"minX\", undefined);\n\t\tthis.setPrivate(\"minY\", undefined);\n\t\tthis.setPrivate(\"maxX\", undefined);\n\t\tthis.setPrivate(\"maxY\", undefined);\n\t}\n\n\t/**\n\t * Creates and returns an axis range object.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-ranges/} for more info\n\t * @param   axisDataItem  Axis data item\n\t * @return                Axis range\n\t */\n\tpublic createAxisRange(axisDataItem: DataItem<IAxisDataItem>): this[\"_axisRangeType\"] {\n\t\treturn this.axisRanges.push({\n\t\t\taxisDataItem: axisDataItem\n\t\t})\n\t}\n\n\t/**\n\t * A list of series's main (ungrouped) data items.\n\t *\n\t * @return  Data items\n\t */\n\tpublic get mainDataItems(): Array<DataItem<this[\"_dataItemSettings\"]>> {\n\t\treturn this._mainDataItems;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic _adjustStartIndex(index: number): number {\n\t\tconst xAxis = this.get(\"xAxis\");\n\t\tconst baseAxis = this.get(\"baseAxis\");\n\n\t\tif (baseAxis == xAxis && xAxis.isType<DateAxis<any>>(\"DateAxis\")) {\n\t\t\tconst baseDuration = xAxis.baseDuration();\n\t\t\tconst minSelection = xAxis.getPrivate(\"selectionMin\", xAxis.getPrivate(\"min\", 0));\n\t\t\tconst dl = baseDuration * this.get(\"locationX\", 0.5);\n\n\t\t\tlet value = -Infinity;\n\n\t\t\twhile (value < minSelection) {\n\t\t\t\tconst dataItem = this.dataItems[index];\n\t\t\t\tif (dataItem) {\n\t\t\t\t\tconst open = dataItem.open;\n\t\t\t\t\tif (open) {\n\t\t\t\t\t\tvalue = open[\"valueX\"];\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvalue = dataItem.get(\"valueX\", 0);\n\t\t\t\t\t}\n\t\t\t\t\tvalue += dl;\n\n\t\t\t\t\tif (value < minSelection) {\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t}\n}\n","import type { DataItem } from \"../../../core/render/Component\";\nimport type { Graphics } from \"../../../core/render/Graphics\";\nimport type { Template } from \"../../../core/util/Template\";\nimport type { ListTemplate } from \"../../../core/util/List\";\nimport type { CategoryAxis } from \"../axes/CategoryAxis\";\nimport type { DateAxis } from \"../axes/DateAxis\";\nimport type { ValueAxis } from \"../axes/ValueAxis\";\nimport type { IAxisDataItem } from \"../axes/Axis\";\nimport type { ILegendDataItem } from \"../../../core/render/Legend\";\nimport type { Sprite } from \"../../../core/render/Sprite\";\n\nimport { XYSeries, IXYSeriesPrivate, IXYSeriesSettings, IXYSeriesDataItem, IXYSeriesAxisRange } from \"./XYSeries\";\nimport { Percent } from \"../../../core/util/Percent\";\nimport { visualSettings } from \"../../../core/render/Graphics\";\n\nimport * as $array from \"../../../core/util/Array\";\nimport * as $type from \"../../../core/util/Type\";\n\nexport interface IBaseColumnSeriesDataItem extends IXYSeriesDataItem {\n\n\t/**\n\t * An actual [[Graphics]] element (Column/Slice/Candlestick/OHLC).\n\t */\n\tgraphics?: Graphics;\n\n\t/**\n\t * In case axis ranges are added to the series, it creates a separate\n\t * element ([[Graphics]]) for each axis range. This array holds them all.\n\t */\n\trangeGraphics?: Array<Graphics>;\n\n\t/**\n\t * If data items from this series are used to feed a [[Legend]], this\n\t * will hold a reference to the equivalent Legend data item.\n\t * \n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/legend/#Data_item_list} for more info\n\t */\n\tlegendDataItem?: DataItem<ILegendDataItem>;\n}\n\nexport interface IBaseColumnSeriesSettings extends IXYSeriesSettings {\n\n\t/**\n\t * Indicates if series must divvy up available space with other column\n\t * series (`true`; default) or take up the whole available space (`false`).\n\t *\n\t * @default true\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/column-series/#Clustering} for more info\n\t */\n\tclustered?: boolean;\n\n\t/**\n\t * Whether positions of bullets should be calculated based on portion of\n\t * column currently visual (`true`) or the whole length/height of the\n\t * column (`false`).\n\t *\n\t * @default true\n\t */\n\tadjustBulletPosition?: boolean;\n\n\t/**\n\t * If set to `true` will use color of the last visible column for legend\n\t * marker. Otherwise, series `fill`/`stroke` will be used.\n\t *\n\t * @since 5.1.13\n\t */\n\tuseLastColorForLegendMarker?: boolean\n\n}\n\nexport interface IBaseColumnSeriesPrivate extends IXYSeriesPrivate { }\n\nexport interface IBaseColumnSeriesAxisRange extends IXYSeriesAxisRange {\n\n\t/**\n\t * A list of actual [[Graphics]] elements for an axis range.\n\t *\n\t * Can be used to ajust the look of the axis range columns.\n\t */\n\tcolumns: ListTemplate<Graphics>;\n\n}\n\n/**\n * Base class for all \"column-based\" series\n */\nexport abstract class BaseColumnSeries extends XYSeries {\n\n\tdeclare public _settings: IBaseColumnSeriesSettings;\n\tdeclare public _privateSettings: IBaseColumnSeriesPrivate;\n\tdeclare public _dataItemSettings: IBaseColumnSeriesDataItem;\n\tdeclare public _axisRangeType: IBaseColumnSeriesAxisRange;\n\n\tpublic static className: string = \"BaseColumnSeries\";\n\tpublic static classNames: Array<string> = XYSeries.classNames.concat([BaseColumnSeries.className]);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract makeColumn(dataItem: DataItem<this[\"_dataItemSettings\"]>, listTemplate: ListTemplate<Graphics>): Graphics\n\n\t/**\n\t * ListTemplate of columns in series.\n\t */\n\tpublic abstract columns: ListTemplate<Graphics>;\n\n\tprotected _makeGraphics(listTemplate: ListTemplate<Graphics>, dataItem: DataItem<this[\"_dataItemSettings\"]>): Graphics {\n\t\treturn this.makeColumn(dataItem, listTemplate);\n\t}\n\n\tprotected _ph: number = 0;\n\tprotected _pw: number = 0;\n\n\tprotected _columnsUpdated: boolean = false;\n\n\tpublic _makeFieldNames() {\n\t\tsuper._makeFieldNames();\n\n\t\tconst xAxis = this.get(\"xAxis\");\n\t\tconst yAxis = this.get(\"yAxis\");\n\n\t\tconst categoryAxis = \"CategoryAxis\";\n\t\tconst valueAxis = \"ValueAxis\";\n\n\t\tif (xAxis.isType<CategoryAxis<any>>(categoryAxis)) {\n\t\t\tif (!this.get(\"openCategoryXField\")) {\n\t\t\t\tthis._xOpenField = this._xField;\n\t\t\t}\n\t\t}\n\n\t\tif (xAxis.isType<DateAxis<any>>(valueAxis)) {\n\t\t\tif (!this.get(\"openValueXField\")) {\n\t\t\t\tthis._xOpenField = this._xField;\n\t\t\t}\n\t\t}\n\n\t\tif (yAxis.isType<CategoryAxis<any>>(categoryAxis)) {\n\t\t\tif (!this.get(\"openCategoryYField\")) {\n\t\t\t\tthis._yOpenField = this._yField;\n\t\t\t}\n\t\t}\n\n\t\tif (yAxis.isType<DateAxis<any>>(valueAxis)) {\n\t\t\tif (!this.get(\"openValueYField\")) {\n\t\t\t\tthis._yOpenField = this._yField;\n\t\t\t}\n\t\t}\n\t}\n\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tconst xAxis = this.get(\"xAxis\");\n\t\tconst yAxis = this.get(\"yAxis\");\n\n\t\tconst len = this.dataItems.length;\n\t\tconst startIndex = Math.max(0, this.startIndex() - 2);\n\t\tconst endIndex = Math.min(this.endIndex() + 2, len - 1);\n\n\t\tif (xAxis.inited && yAxis.inited) {\n\t\t\tfor (let i = startIndex; i <= endIndex; i++) {\n\t\t\t\tlet dataItem = this.dataItems[i];\n\t\t\t\tthis._createGraphics(dataItem);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _updateChildren() {\n\t\tconst chart = this.chart;\n\t\tif (chart) {\n\t\t\tthis._ph = chart.plotContainer.height();\n\t\t\tthis._pw = chart.plotContainer.width();\n\t\t}\n\n\t\tconst xAxis = this.get(\"xAxis\");\n\t\tconst yAxis = this.get(\"yAxis\");\n\t\tconst baseAxis = this.get(\"baseAxis\")!;\n\n\t\tconst columnsTemplate = this.columns.template;\n\t\tif (this.isDirty(\"fill\")) {\n\t\t\tif (columnsTemplate.get(\"fill\") == null) {\n\t\t\t\tcolumnsTemplate.set(\"fill\", this.get(\"fill\"));\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"fillPattern\")) {\n\t\t\tif (columnsTemplate.get(\"fillPattern\") == null) {\n\t\t\t\tcolumnsTemplate.set(\"fillPattern\", this.get(\"fillPattern\"));\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"stroke\")) {\n\t\t\tif (columnsTemplate.get(\"stroke\") == null) {\n\t\t\t\tcolumnsTemplate.set(\"stroke\", this.get(\"stroke\"));\n\t\t\t}\n\t\t}\n\n\t\tlet index = 0;\n\t\tlet clusterCount = 0;\n\t\tlet i = 0;\n\n\t\t$array.each(baseAxis.series, (series) => {\n\t\t\tif (series instanceof BaseColumnSeries) {\n\t\t\t\tconst stacked = series.get(\"stacked\");\n\n\t\t\t\tif (stacked && i == 0) {\n\t\t\t\t\tclusterCount++;\n\t\t\t\t}\n\n\t\t\t\tif (!stacked && series.get(\"clustered\")) {\n\t\t\t\t\tclusterCount++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (series === this) {\n\t\t\t\tindex = clusterCount - 1;\n\t\t\t}\n\t\t\ti++;\n\t\t})\n\n\t\tif (!this.get(\"clustered\")) {\n\t\t\tindex = 0;\n\t\t\tclusterCount = 1;\n\t\t}\n\n\t\tif (clusterCount === 0) {\n\t\t\tclusterCount = 1;\n\t\t\tindex = 0;\n\t\t}\n\n\t\tconst xRenderer = xAxis.get(\"renderer\");\n\t\tconst yRenderer = yAxis.get(\"renderer\");\n\n\t\tconst cellStartLocation = \"cellStartLocation\";\n\t\tconst cellEndLocation = \"cellEndLocation\";\n\n\t\tconst cellLocationX0 = xRenderer.get(cellStartLocation, 0);\n\t\tconst cellLocationX1 = xRenderer.get(cellEndLocation, 1);\n\n\t\tconst cellLocationY0 = yRenderer.get(cellStartLocation, 0);\n\t\tconst cellLocationY1 = yRenderer.get(cellEndLocation, 1);\n\n\t\tthis._aLocationX0 = cellLocationX0 + (index / clusterCount) * (cellLocationX1 - cellLocationX0);\n\t\tthis._aLocationX1 = cellLocationX0 + (index + 1) / clusterCount * (cellLocationX1 - cellLocationX0);;\n\n\t\tthis._aLocationY0 = cellLocationY0 + (index / clusterCount) * (cellLocationY1 - cellLocationY0);\n\t\tthis._aLocationY1 = cellLocationY0 + (index + 1) / clusterCount * (cellLocationY1 - cellLocationY0);\n\n\t\tif (xAxis.inited && yAxis.inited) {\n\t\t\tif (this._axesDirty || this._valuesDirty || this._stackDirty || this.isDirty(\"vcx\") || this.isDirty(\"vcy\") || this._sizeDirty) {\n\t\t\t\tconst len = this.dataItems.length;\n\n\t\t\t\tlet startIndex = Math.max(0, this.startIndex() - 2);\n\t\t\t\tlet endIndex = Math.min(this.endIndex() + 2, len - 1);\n\n\t\t\t\tfor (let i = 0; i < startIndex; i++) {\n\t\t\t\t\tthis._toggleColumn(this.dataItems[i], false);\n\t\t\t\t}\n\t\t\t\tlet previous = this.dataItems[startIndex];\n\n\t\t\t\tfor (let i = startIndex; i <= endIndex; i++) {\n\t\t\t\t\tlet dataItem = this.dataItems[i];\n\t\t\t\t\tif (dataItem.get(\"valueX\") != null && dataItem.get(\"valueY\") != null) {\n\t\t\t\t\t\tprevious = dataItem;\n\t\t\t\t\t\tif (i > 0 && startIndex > 0) {\n\t\t\t\t\t\t\tfor (let j = i - 1; j >= 0; j--) {\n\t\t\t\t\t\t\t\tlet dataItem = this.dataItems[j];\n\t\t\t\t\t\t\t\tif (dataItem.get(\"valueX\") != null && dataItem.get(\"valueY\") != null) {\n\t\t\t\t\t\t\t\t\tprevious = dataItem;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis._toggleColumn(dataItem, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis._beforeColumnsDraw();\n\n\t\t\t\tlet axisCase: 0 | 1 | 2 = 0;\n\n\t\t\t\tif (yAxis.isType<CategoryAxis<any>>(\"CategoryAxis\") && xAxis.isType<CategoryAxis<any>>(\"CategoryAxis\")) {\n\t\t\t\t\taxisCase = 2;\n\t\t\t\t}\n\t\t\t\telse if (xAxis === baseAxis) {\n\t\t\t\t\taxisCase = 0;\n\t\t\t\t}\n\t\t\t\telse if (yAxis === baseAxis) {\n\t\t\t\t\taxisCase = 1;\n\t\t\t\t}\n\n\t\t\t\tfor (let i = startIndex; i <= endIndex; i++) {\n\t\t\t\t\tlet dataItem = this.dataItems[i];\n\t\t\t\t\tthis._updateGraphics(dataItem, previous, axisCase);\n\t\t\t\t\tif (dataItem.get(\"valueX\") != null && dataItem.get(\"valueY\") != null) {\n\t\t\t\t\t\tprevious = dataItem;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis._afterColumnsDraw();\n\n\t\t\t\tfor (let i = endIndex + 1; i < len; i++) {\n\t\t\t\t\tthis._toggleColumn(this.dataItems[i], false);\n\t\t\t\t}\n\t\t\t\tthis._columnsUpdated = true;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis._skipped = true;\n\t\t}\n\t\tif (!this.getPrivate(\"doNotUpdateLegend\")) {\n\t\t\tthis.updateLegendMarker(this.get(\"tooltipDataItem\"));\n\t\t}\n\t\tsuper._updateChildren();\n\t}\n\n\tpublic _afterChanged(): void {\n\t\tsuper._afterChanged();\n\t\tthis._columnsUpdated = false;\n\t}\n\tprotected _beforeColumnsDraw() {\n\n\t}\n\n\tprotected _afterColumnsDraw() {\n\n\t}\n\n\n\tprotected _createGraphics(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tlet graphics = dataItem.get(\"graphics\");\n\t\tif (!graphics) {\n\n\t\t\tgraphics = this._makeGraphics(this.columns, dataItem);\n\t\t\tdataItem.set(\"graphics\", graphics);\n\t\t\tgraphics._setDataItem(dataItem);\n\n\t\t\tconst legendDataItem = dataItem.get(\"legendDataItem\");\n\t\t\tif (legendDataItem) {\n\t\t\t\tconst markerRectangle = legendDataItem.get(\"markerRectangle\");\n\t\t\t\tif (markerRectangle) {\n\t\t\t\t\tconst ds = markerRectangle.states.lookup(\"default\")!;\n\t\t\t\t\t$array.each(visualSettings, (setting: any) => {\n\t\t\t\t\t\tconst value = graphics!.get(setting, this.get(setting));\n\t\t\t\t\t\tmarkerRectangle.set(setting, value);\n\t\t\t\t\t\tds.set(setting, value);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet graphicsArray: Array<Graphics> | undefined = dataItem.get(\"rangeGraphics\");\n\t\t\tif (graphicsArray) {\n\t\t\t\t$array.each(graphicsArray, (graphics) => {\n\t\t\t\t\tgraphics.dispose();\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tgraphicsArray = [];\n\t\t\tdataItem.setRaw(\"rangeGraphics\", graphicsArray);\n\n\t\t\tthis.axisRanges.each((axisRange) => {\n\t\t\t\tconst container = axisRange.container!;\n\t\t\t\tconst rangeGraphics = this._makeGraphics(axisRange.columns, dataItem);\n\t\t\t\tif (graphicsArray) {\n\t\t\t\t\tgraphicsArray.push(rangeGraphics);\n\t\t\t\t}\n\t\t\t\trangeGraphics.setPrivate(\"list\", axisRange.columns);\n\t\t\t\tcontainer.children.push(rangeGraphics);\n\t\t\t})\n\t\t}\n\t}\n\n\tpublic createAxisRange(axisDataItem: DataItem<IAxisDataItem>): this[\"_axisRangeType\"] {\n\t\t$array.each(this.dataItems, (dataItem) => {\n\t\t\tconst graphics = dataItem.get(\"graphics\");\n\t\t\tif (graphics) {\n\t\t\t\tgraphics.dispose();\n\t\t\t\tdataItem.set(\"graphics\", undefined);\n\t\t\t}\n\t\t})\n\n\t\treturn super.createAxisRange(axisDataItem);\n\t}\n\n\tprotected _updateGraphics(dataItem: DataItem<this[\"_dataItemSettings\"]>, previousDataItem: DataItem<this[\"_dataItemSettings\"]>, axisCase: 0 | 1 | 2) {\n\t\tlet graphics = dataItem.get(\"graphics\")!;\n\n\t\t//if (!graphics) {\n\t\t//\tthis._createGraphics(dataItem);\n\t\t//\tgraphics = dataItem.get(\"graphics\")!;\n\t\t//}\n\n\t\tconst xField = this._xField;\n\t\tconst yField = this._yField;\n\n\t\tconst valueX = dataItem.get(xField as any);\n\t\tconst valueY = dataItem.get(yField as any);\n\n\t\tconst exactLocationX = this.get(\"exactLocationX\", false);\n\t\t//const exactLocationY = this.get(\"exactLocationY\", false);\t\t\n\n\t\tif (valueX != null && valueY != null) {\n\t\t\tconst xOpenField = this._xOpenField;\n\t\t\tconst yOpenField = this._yOpenField;\n\n\t\t\tconst locationX = this.get(\"locationX\", dataItem.get(\"locationX\", 0.5));\n\t\t\tconst locationY = this.get(\"locationY\", dataItem.get(\"locationY\", 0.5));\n\n\t\t\tconst openLocationX = this.get(\"openLocationX\", dataItem.get(\"openLocationX\", locationX));\n\t\t\tconst openLocationY = this.get(\"openLocationY\", dataItem.get(\"openLocationY\", locationY));\n\n\t\t\tconst width = graphics.get(\"width\");\n\t\t\tconst height = graphics.get(\"height\");\n\n\t\t\tconst stacked = this.get(\"stacked\");\n\n\t\t\tconst xAxis = this.get(\"xAxis\");\n\t\t\tconst yAxis = this.get(\"yAxis\");\n\n\t\t\tconst xStart = xAxis.get(\"start\");\n\t\t\tconst xEnd = xAxis.get(\"end\");\n\n\t\t\tconst yStart = yAxis.get(\"start\");\n\t\t\tconst yEnd = yAxis.get(\"end\");\n\n\t\t\tlet l!: number;\n\t\t\tlet r!: number;\n\t\t\tlet t!: number;\n\t\t\tlet b!: number;\n\n\t\t\tlet vcy = this.get(\"vcy\", 1);\n\t\t\tlet vcx = this.get(\"vcx\", 1);\n\n\t\t\tlet fitW = false;\n\t\t\tlet fitH = false;\n\n\n\t\t\tif (axisCase == 0) {\n\t\t\t\tlet startLocation = this._aLocationX0 + openLocationX - 0.5;\n\t\t\t\tlet endLocation = this._aLocationX1 + locationX - 0.5;\n\n\t\t\t\tif (width instanceof Percent) {\n\t\t\t\t\tlet offset: number = (endLocation - startLocation) * (1 - width.value) / 2;\n\t\t\t\t\tstartLocation += offset;\n\t\t\t\t\tendLocation -= offset;\n\t\t\t\t}\n\n\t\t\t\tl = xAxis.getDataItemPositionX(dataItem, xOpenField, startLocation, vcx, exactLocationX);\n\t\t\t\tr = xAxis.getDataItemPositionX(dataItem, xField, endLocation, vcx, exactLocationX);\n\t\t\t\tt = yAxis.getDataItemPositionY(dataItem, yField, locationY, vcy);\n\n\t\t\t\tif (this._yOpenField !== this._yField) {\n\t\t\t\t\tb = yAxis.getDataItemPositionY(dataItem, yOpenField, openLocationY, vcy);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (stacked) {\n\t\t\t\t\t\tlet stackToItemY = dataItem.get(\"stackToItemY\")!;\n\t\t\t\t\t\tif (stackToItemY) {\n\t\t\t\t\t\t\tb = yAxis.getDataItemPositionY(stackToItemY, yField, openLocationY, (stackToItemY.component as XYSeries).get(\"vcy\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tb = yAxis.basePosition();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tb = yAxis.basePosition();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdataItem.setRaw(\"point\", { x: l + (r - l) / 2, y: t });\n\n\t\t\t\tfitH = true;\n\t\t\t}\n\t\t\telse if (axisCase == 1) {\n\t\t\t\tlet startLocation = this._aLocationY0 + openLocationY - 0.5;\n\t\t\t\tlet endLocation = this._aLocationY1 + locationY - 0.5;\n\n\t\t\t\tif (height instanceof Percent) {\n\t\t\t\t\tlet offset: number = (endLocation - startLocation) * (1 - height.value) / 2;\n\t\t\t\t\tstartLocation += offset;\n\t\t\t\t\tendLocation -= offset;\n\t\t\t\t}\n\n\t\t\t\tt = yAxis.getDataItemPositionY(dataItem, yOpenField, startLocation, vcy);\n\t\t\t\tb = yAxis.getDataItemPositionY(dataItem, yField, endLocation, vcy);\n\t\t\t\tr = xAxis.getDataItemPositionX(dataItem, xField, locationX, vcx, exactLocationX);\n\n\t\t\t\tif (this._xOpenField !== this._xField) {\n\t\t\t\t\tl = xAxis.getDataItemPositionX(dataItem, xOpenField, openLocationX, vcx, exactLocationX);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (stacked) {\n\t\t\t\t\t\tlet stackToItemX = dataItem.get(\"stackToItemX\")!;\n\t\t\t\t\t\tif (stackToItemX) {\n\t\t\t\t\t\t\tl = xAxis.getDataItemPositionX(stackToItemX, xField, openLocationX, (stackToItemX.component as XYSeries).get(\"vcx\"), exactLocationX);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tl = xAxis.basePosition();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tl = xAxis.basePosition();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfitW = true;\n\n\t\t\t\tdataItem.setRaw(\"point\", { x: r, y: t + (b - t) / 2 });\n\t\t\t}\n\t\t\telse if (axisCase == 2) {\n\t\t\t\tlet startLocation = this._aLocationX0 + openLocationX - 0.5;\n\t\t\t\tlet endLocation = this._aLocationX1 + locationX - 0.5;\n\n\t\t\t\tif (width instanceof Percent) {\n\t\t\t\t\tlet offset: number = (endLocation - startLocation) * (1 - width.value) / 2;\n\t\t\t\t\tstartLocation += offset;\n\t\t\t\t\tendLocation -= offset;\n\t\t\t\t}\n\n\t\t\t\tl = xAxis.getDataItemPositionX(dataItem, xOpenField, startLocation, vcx);\n\t\t\t\tr = xAxis.getDataItemPositionX(dataItem, xField, endLocation, vcx);\n\n\t\t\t\tstartLocation = this._aLocationY0 + openLocationY - 0.5;\n\t\t\t\tendLocation = this._aLocationY1 + locationY - 0.5;\n\n\t\t\t\tif (height instanceof Percent) {\n\t\t\t\t\tlet offset: number = (endLocation - startLocation) * (1 - height.value) / 2;\n\t\t\t\t\tstartLocation += offset;\n\t\t\t\t\tendLocation -= offset;\n\t\t\t\t}\n\n\t\t\t\tt = yAxis.getDataItemPositionY(dataItem, yOpenField, startLocation, vcy);\n\t\t\t\tb = yAxis.getDataItemPositionY(dataItem, yField, endLocation, vcy);\n\n\t\t\t\tdataItem.setRaw(\"point\", { x: l + (r - l) / 2, y: t + (b - t) / 2 });\n\t\t\t}\n\n\t\t\tthis._applyGraphicsStates(dataItem, previousDataItem);\n\t\t\tthis._updateSeriesGraphics(dataItem, graphics!, l, r, t, b, fitW, fitH);\n\n\t\t\tif ((l < xStart && r < xStart) || (l > xEnd && r > xEnd) || (t < yStart && b <= yStart) || (t >= yEnd && b > yEnd) || $type.isNaN(l) || $type.isNaN(t)) {\n\t\t\t\tthis._toggleColumn(dataItem, false);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._toggleColumn(dataItem, true);\n\t\t\t}\n\n\t\t\tlet rangeGraphics = dataItem.get(\"rangeGraphics\")!;\n\t\t\tif (rangeGraphics) {\n\t\t\t\t$array.each(rangeGraphics, (graphics) => {\n\t\t\t\t\tthis._updateSeriesGraphics(dataItem, graphics, l, r, t, b, fitW, fitH);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis._toggleColumn(dataItem, false);\n\t\t}\n\t}\n\n\tprotected _updateSeriesGraphics(dataItem: DataItem<this[\"_dataItemSettings\"]>, graphics: Graphics, l: number, r: number, t: number, b: number, fitW: boolean, fitH: boolean) {\n\t\tconst width = graphics.get(\"width\");\n\t\tconst height = graphics.get(\"height\");\n\t\tconst maxWidth = graphics.get(\"maxWidth\");\n\t\tconst maxHeight = graphics.get(\"maxHeight\");\n\n\t\tconst ptl = this.getPoint(l, t);\n\t\tconst pbr = this.getPoint(r, b);\n\n\t\tconst tooltipPoint = dataItem.get(\"point\");\n\n\t\tif (tooltipPoint) {\n\t\t\tconst point = this.getPoint(tooltipPoint.x, tooltipPoint.y);\n\t\t\ttooltipPoint.x = point.x + this._x;\n\t\t\ttooltipPoint.y = point.y + this._y;\n\t\t}\n\n\t\tl = ptl.x;\n\t\tr = pbr.x;\n\n\t\tt = ptl.y;\n\t\tb = pbr.y;\n\n\t\tif ($type.isNumber(width)) {\n\t\t\tconst offset: number = ((r - l) - width) / 2;\n\t\t\tl += offset;\n\t\t\tr -= offset;\n\t\t}\n\n\t\tif ($type.isNumber(maxWidth) && maxWidth < Math.abs(r - l)) {\n\t\t\tconst offset: number = ((r - l) - maxWidth) / 2;\n\t\t\tl += offset;\n\t\t\tr -= offset;\n\t\t}\n\n\t\tif ($type.isNumber(height)) {\n\t\t\tconst offset: number = ((b - t) - height) / 2;\n\t\t\tt += offset;\n\t\t\tb -= offset;\n\t\t}\n\n\t\tif ($type.isNumber(maxHeight) && maxHeight < Math.abs(b - t)) {\n\t\t\tconst offset: number = ((b - t) - maxHeight) / 2;\n\t\t\tt += offset;\n\t\t\tb -= offset;\n\t\t}\n\n\t\tif (this.get(\"adjustBulletPosition\")) {\n\t\t\tif (fitW) {\n\t\t\t\tr = Math.min(Math.max(0, r), this._pw);\n\t\t\t\tl = Math.min(Math.max(0, l), this._pw);\n\t\t\t}\n\n\t\t\tif (fitH) {\n\t\t\t\tt = Math.min(Math.max(0, t), this._ph);\n\t\t\t\tb = Math.min(Math.max(0, b), this._ph);\n\t\t\t}\n\t\t}\n\n\t\tdataItem.setRaw(\"left\", l);\n\t\tdataItem.setRaw(\"right\", r);\n\t\tdataItem.setRaw(\"top\", t);\n\t\tdataItem.setRaw(\"bottom\", b);\n\n\t\tgraphics.setPrivate(\"width\", r - l);\n\t\tgraphics.setPrivate(\"height\", b - t);\n\t\tgraphics.set(\"x\", l);\n\t\tgraphics.set(\"y\", b - (b - t));\n\t}\n\n\tprotected _handleDataSetChange() {\n\t\tsuper._handleDataSetChange();\n\t\t$array.each(this._dataItems, (dataItem) => {\n\t\t\tthis._toggleColumn(dataItem, false);\n\t\t})\n\t}\n\n\tpublic _applyGraphicsStates(dataItem: DataItem<this[\"_dataItemSettings\"]>, previousDataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\n\t\tconst graphics = dataItem.get(\"graphics\")!;\n\n\t\tconst dropFromOpen = graphics.states.lookup(\"dropFromOpen\");\n\t\tconst riseFromOpen = graphics.states.lookup(\"riseFromOpen\");\n\n\t\tconst dropFromPrevious = graphics.states.lookup(\"dropFromPrevious\");\n\t\tconst riseFromPrevious = graphics.states.lookup(\"riseFromPrevious\");\n\n\t\tif (dropFromOpen || dropFromPrevious || riseFromOpen || riseFromPrevious) {\n\t\t\tconst xAxis = this.get(\"xAxis\");\n\t\t\tconst yAxis = this.get(\"yAxis\");\n\t\t\tconst baseAxis = this.get(\"baseAxis\");\n\n\t\t\tlet open: number | undefined;\n\t\t\tlet close: number | undefined;\n\t\t\tlet previousClose: number | undefined;\n\n\t\t\tif (baseAxis === xAxis && yAxis.isType<ValueAxis<any>>(\"ValueAxis\")) {\n\t\t\t\topen = dataItem.get(this._yOpenField as any);\n\t\t\t\tclose = dataItem.get(this._yField as any);\n\n\t\t\t\tpreviousClose = previousDataItem.get(this._yField as any);\n\t\t\t}\n\t\t\telse if (baseAxis === yAxis && xAxis.isType<ValueAxis<any>>(\"ValueAxis\")) {\n\t\t\t\topen = dataItem.get(this._xOpenField as any);\n\t\t\t\tclose = dataItem.get(this._xField as any);\n\n\t\t\t\tpreviousClose = previousDataItem.get(this._xField as any);\n\t\t\t}\n\n\t\t\tif ($type.isNumber(open) && $type.isNumber(close)) {\n\t\t\t\tif (close < open) {\n\t\t\t\t\tif (dropFromOpen) {\n\t\t\t\t\t\tdropFromOpen.apply();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (riseFromOpen) {\n\t\t\t\t\t\triseFromOpen.apply();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ($type.isNumber(previousClose)) {\n\t\t\t\t\tif (close < previousClose) {\n\t\t\t\t\t\tif (dropFromPrevious) {\n\t\t\t\t\t\t\tdropFromPrevious.apply();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (riseFromPrevious) {\n\t\t\t\t\t\t\triseFromPrevious.apply();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic disposeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.disposeDataItem(dataItem);\n\t\tconst graphics = dataItem.get(\"graphics\");\n\t\tif (graphics) {\n\t\t\tthis.columns.removeValue(graphics);\n\t\t\tgraphics.dispose();\n\t\t}\n\n\t\tconst rangeGraphics = dataItem.get(\"rangeGraphics\")!;\n\t\tif (rangeGraphics) {\n\t\t\t$array.each(rangeGraphics, (graphics) => {\n\t\t\t\tconst list = graphics.getPrivate(\"list\");\n\t\t\t\tif (list) {\n\t\t\t\t\tlist.removeValue(graphics);\n\t\t\t\t}\n\t\t\t\tgraphics.dispose();\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * Hides series's data item.\n\t * \n\t * @param   dataItem  Data item\n\t * @param   duration  Animation duration in milliseconds\n\t * @return            Promise\n\t */\n\tpublic async hideDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, duration?: number): Promise<void> {\n\t\tconst promises = [super.hideDataItem(dataItem, duration)];\n\t\tconst graphics = dataItem.get(\"graphics\");\n\t\tif (graphics) {\n\t\t\tpromises.push(graphics.hide(duration));\n\t\t}\n\n\t\tconst rangeGraphics = dataItem.get(\"rangeGraphics\")!;\n\t\tif (rangeGraphics) {\n\t\t\t$array.each(rangeGraphics, (graphics) => {\n\t\t\t\tpromises.push(graphics.hide(duration));\n\t\t\t})\n\t\t}\n\n\t\tawait Promise.all(promises);\n\t}\n\n\tprotected _toggleColumn(dataItem: DataItem<this[\"_dataItemSettings\"]>, visible: boolean) {\n\t\tconst graphics = dataItem.get(\"graphics\");\n\t\tif (graphics) {\n\t\t\tgraphics.setPrivate(\"visible\", visible);\n\t\t}\n\n\t\tconst rangeGraphics = dataItem.get(\"rangeGraphics\")!;\n\t\tif (rangeGraphics) {\n\t\t\t$array.each(rangeGraphics, (graphics) => {\n\t\t\t\tgraphics.setPrivate(\"visible\", visible);\n\t\t\t})\n\t\t}\n\n\t\tconst bullets = dataItem.bullets;\n\t\tif (bullets) {\n\t\t\t$array.each(bullets, (bullet) => {\n\t\t\t\tbullet.setPrivate(\"hidden\", !visible);\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * Shows series's data item.\n\t * \n\t * @param   dataItem  Data item\n\t * @param   duration  Animation duration in milliseconds\n\t * @return            Promise\n\t */\n\tpublic async showDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, duration?: number): Promise<void> {\n\t\tconst promises = [super.showDataItem(dataItem, duration)];\n\t\tconst graphics = dataItem.get(\"graphics\");\n\t\tif (graphics) {\n\t\t\tpromises.push(graphics.show(duration));\n\t\t}\n\n\t\tconst rangeGraphics = dataItem.get(\"rangeGraphics\")!;\n\t\tif (rangeGraphics) {\n\t\t\t$array.each(rangeGraphics, (graphics) => {\n\t\t\t\tpromises.push(graphics.show(duration));\n\t\t\t})\n\t\t}\n\n\t\tawait Promise.all(promises);\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateLegendMarker(dataItem?: DataItem<IBaseColumnSeriesDataItem>) {\n\t\tlet legendDataItem = this.get(\"legendDataItem\");\n\n\t\tif (this.get(\"useLastColorForLegendMarker\")) {\n\t\t\tif (!dataItem) {\n\t\t\t\tconst lastDataItem = this.dataItems[this.endIndex() - 1];\n\t\t\t\tif (lastDataItem) {\n\t\t\t\t\tdataItem = lastDataItem;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (legendDataItem) {\n\n\t\t\tlet graphics: Template<Graphics> | Graphics = this.columns.template;\n\t\t\tif (dataItem) {\n\t\t\t\tlet column = dataItem.get(\"graphics\");\n\t\t\t\tif (column) {\n\t\t\t\t\tgraphics = column;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst markerRectangle = legendDataItem.get(\"markerRectangle\");\n\n\t\t\tif (markerRectangle) {\n\t\t\t\tif (!legendDataItem.get(\"itemContainer\").get(\"disabled\")) {\n\t\t\t\t\tconst ds = markerRectangle.states.lookup(\"default\")!;\n\t\t\t\t\t$array.each(visualSettings, (setting: any) => {\n\t\t\t\t\t\tconst value = graphics.get(setting, this.get(setting));\n\t\t\t\t\t\tmarkerRectangle.set(setting, value);\n\t\t\t\t\t\tds.set(setting, value);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _getTooltipTarget(dataItem: DataItem<this[\"_dataItemSettings\"]>): Sprite {\n\t\tif (this.get(\"seriesTooltipTarget\") == \"bullet\") {\n\t\t\treturn super._getTooltipTarget(dataItem);\n\t\t}\n\n\t\tlet column = dataItem.get(\"graphics\");\n\t\tif (column) {\n\t\t\treturn column;\n\t\t}\n\t\treturn this;\n\t}\n}\n","import type { DataItem } from \"../../../core/render/Component\";\r\nimport type { Color } from \"../../../core/util/Color\";\r\n\r\nimport { BaseColumnSeries, IBaseColumnSeriesPrivate, IBaseColumnSeriesSettings, IBaseColumnSeriesDataItem, IBaseColumnSeriesAxisRange } from \"./BaseColumnSeries\";\r\nimport { Template } from \"../../../core/util/Template\";\r\nimport { ListTemplate } from \"../../../core/util/List\";\r\nimport { RoundedRectangle } from \"../../../core/render/RoundedRectangle\";\r\nimport { Graphics } from \"../../../core/render/Graphics\";\r\n\r\nimport * as $utils from \"../../../core/util/Utils\";\r\nimport * as $array from \"../../../core/util/Array\";\r\n\r\nexport interface IColumnSeriesDataItem extends IBaseColumnSeriesDataItem { }\r\n\r\nexport interface IColumnSeriesSettings extends IBaseColumnSeriesSettings {\r\n\r\n\t/**\r\n\t * Enables \"turbo mode\" of rendering.\r\n\t * \r\n\t * If enabled, the columsn will be drawn directly on canvas, rather than\r\n\t * each individually, significantly speeding up the rendering. Especially\r\n\t * on column-heavy charts.\r\n\t *\r\n\t * NOTE: this is an experimental feature and may not work in all setups. Some\r\n\t * features might be disabled, too, e.g. pointer events and rounded corners.\r\n\t *\r\n\t * @since 5.14.0\r\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/column-series/#Turbo_mode} for more info\r\n\t */\r\n\tturboMode?: boolean;\r\n\r\n}\r\n\r\nexport interface IColumnSeriesPrivate extends IBaseColumnSeriesPrivate { }\r\n\r\nexport interface IColumnSeriesAxisRange extends IBaseColumnSeriesAxisRange {\r\n\t/**\r\n\t * A list of actual columns in a range.\r\n\t */\r\n\tcolumns: ListTemplate<RoundedRectangle>\r\n}\r\n\r\nexport class ColumnSeries extends BaseColumnSeries {\r\n\r\n\tdeclare public _settings: IColumnSeriesSettings;\r\n\tdeclare public _privateSettings: IColumnSeriesPrivate;\r\n\tdeclare public _dataItemSettings: IColumnSeriesDataItem;\r\n\tdeclare public _axisRangeType: IColumnSeriesAxisRange;\r\n\r\n\tpublic allColumns: Graphics = this.children.push(Graphics.new(this._root, {}));\r\n\tpublic allColumnsData: Array<{ width: number, height: number, x: number, y: number, lowX0?: number, lowY0?: number, lowX1?: number, lowY1?: number, highX0?: number, highY0?: number, highX1?: number, highY1?: number, stroke?: Color, fill?: Color, strokeWidth: number, strokeOpacity: number, fillOpacity: number }> = [];\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tpublic makeColumn(dataItem: DataItem<this[\"_dataItemSettings\"]>, listTemplate: ListTemplate<RoundedRectangle>): RoundedRectangle {\r\n\t\tconst column = listTemplate.make();\r\n\t\tif (!this.get(\"turboMode\")) {\r\n\t\t\tthis.mainContainer.children.push(column);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcolumn.virtualParent = this.chart;\r\n\t\t}\r\n\r\n\t\tcolumn._setDataItem(dataItem);\r\n\t\tlistTemplate.push(column);\r\n\t\treturn column;\r\n\t}\r\n\r\n\t/**\r\n\t * A [[TemplateList]] of all columns in series.\r\n\t *\r\n\t * `columns.template` can be used to set default settings for all columns,\r\n\t * or to change on existing ones.\r\n\t */\r\n\tpublic readonly columns: ListTemplate<RoundedRectangle> = this.addDisposer(new ListTemplate(\r\n\t\tTemplate.new({}),\r\n\t\t() => RoundedRectangle._new(this._root, {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tthemeTags: $utils.mergeTags(this.columns.template.get(\"themeTags\", []), [\"series\", \"column\"])\r\n\t\t}, [this.columns.template])\r\n\t));\r\n\r\n\tpublic static className: string = \"ColumnSeries\";\r\n\tpublic static classNames: Array<string> = BaseColumnSeries.classNames.concat([ColumnSeries.className]);\r\n\r\n\r\n\tprotected _processAxisRange(axisRange: this[\"_axisRangeType\"]) {\r\n\t\tsuper._processAxisRange(axisRange);\r\n\t\taxisRange.columns = new ListTemplate(\r\n\t\t\tTemplate.new({}),\r\n\t\t\t() => RoundedRectangle._new(this._root, {\r\n\t\t\t\tposition: \"absolute\",\r\n\t\t\t\tthemeTags: $utils.mergeTags(axisRange.columns.template.get(\"themeTags\", []), [\"series\", \"column\"]),\r\n\t\t\t}, [this.columns.template, axisRange.columns.template])\r\n\t\t);\r\n\t}\r\n\r\n\tprotected _beforeColumnsDraw() {\r\n\t\tthis.allColumnsData = [];\r\n\t}\r\n\r\n\tprotected _afterColumnsDraw() {\r\n\t\tif (this.get(\"turboMode\")) {\r\n\r\n\t\t\tthis.allColumns.set(\"draw\", (display) => {\r\n\t\t\t\tdisplay.clear();\r\n\r\n\t\t\t\t$array.each(this.allColumnsData, (column) => {\r\n\t\t\t\t\tconst w = column.width;\r\n\t\t\t\t\tconst h = column.height;\r\n\t\t\t\t\tconst x = column.x;\r\n\t\t\t\t\tconst y = column.y;\r\n\t\t\t\t\tconst stroke = column.stroke;\r\n\t\t\t\t\tconst fill = column.fill;\r\n\t\t\t\t\tconst strokeWidth = column.strokeWidth;\r\n\t\t\t\t\tconst strokeOpacity = column.strokeOpacity;\r\n\t\t\t\t\tconst fillOpacity = column.fillOpacity;\r\n\r\n\t\t\t\t\tdisplay.beginFill(fill, fillOpacity);\r\n\t\t\t\t\tdisplay.beginPath();\r\n\t\t\t\t\tdisplay.lineStyle(strokeWidth, stroke, strokeOpacity);\r\n\t\t\t\t\tdisplay.drawRect(x, y, w, h);\r\n\t\t\t\t\tdisplay.endStroke();\r\n\t\t\t\t\tdisplay.endFill();\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tprotected _updateSeriesGraphics(dataItem: DataItem<this[\"_dataItemSettings\"]>, graphics: Graphics, l: number, r: number, t: number, b: number, fitW: boolean, fitH: boolean) {\r\n\t\tif (this.get(\"turboMode\")) {\r\n\t\t\tconst stroke = graphics.get(\"stroke\");\r\n\t\t\tconst fillOpacity = graphics.get(\"fillOpacity\", 1);\r\n\t\t\tconst strokeOpacity = graphics.get(\"strokeOpacity\", 1);\r\n\t\t\tconst strokWidth = graphics.get(\"strokeWidth\", 1);\r\n\t\t\tconst fill = graphics.get(\"fill\");\r\n\r\n\t\t\tconst ptl = this.getPoint(l, t);\r\n\t\t\tconst pbr = this.getPoint(r, b);\r\n\r\n\t\t\tconst tooltipPoint = dataItem.get(\"point\");\r\n\r\n\t\t\tif (tooltipPoint) {\r\n\t\t\t\tconst point = this.getPoint(tooltipPoint.x, tooltipPoint.y);\r\n\t\t\t\ttooltipPoint.x = point.x + this._x;\r\n\t\t\t\ttooltipPoint.y = point.y + this._y;\r\n\t\t\t}\r\n\r\n\t\t\tl = ptl.x;\r\n\t\t\tr = pbr.x;\r\n\r\n\t\t\tt = ptl.y;\r\n\t\t\tb = pbr.y;\r\n\r\n\t\t\tdataItem.setRaw(\"left\", l);\r\n\t\t\tdataItem.setRaw(\"right\", r);\r\n\t\t\tdataItem.setRaw(\"top\", t);\r\n\t\t\tdataItem.setRaw(\"bottom\", b);\r\n\r\n\t\t\tthis.allColumnsData.push({ width: r - l, height: b - t, x: l, y: t, stroke: stroke, fill: fill, strokeWidth: strokWidth, strokeOpacity: strokeOpacity, fillOpacity: fillOpacity });\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsuper._updateSeriesGraphics(dataItem, graphics, l, r, t, b, fitW, fitH);\r\n\t\t}\r\n\t}\r\n}\r\n","export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x, y) {\n  var defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(line);\n\n  x = typeof x === \"function\" ? x : (x === undefined) ? pointX : constant(x);\n  y = typeof y === \"function\" ? y : (y === undefined) ? pointY : constant(y);\n\n  function line(data) {\n    var i,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x0, y0, y1) {\n  var x1 = null,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(area);\n\n  x0 = typeof x0 === \"function\" ? x0 : (x0 === undefined) ? pointX : constant(+x0);\n  y0 = typeof y0 === \"function\" ? y0 : (y0 === undefined) ? constant(0) : constant(+y0);\n  y1 = typeof y1 === \"function\" ? y1 : (y1 === undefined) ? pointY : constant(+y1);\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n","import type { Axis } from \"../axes/Axis\";\nimport type { AxisRenderer } from \"../axes/AxisRenderer\";\n\nimport { XYSeries, IXYSeriesPrivate, IXYSeriesSettings, IXYSeriesDataItem, IXYSeriesAxisRange } from \"./XYSeries\";\nimport { Graphics } from \"../../../core/render/Graphics\";\nimport { CurveFactory, line, area } from \"d3-shape\";\nimport { Template } from \"../../../core/util/Template\";\nimport { ListTemplate } from \"../../../core/util/List\";\nimport { color } from \"../../../core/util/Color\";\nimport { DataItem } from \"../../../core/render/Component\";\nimport { Rectangle } from \"../../../core/render/Rectangle\";\n\nimport * as $type from \"../../../core/util/Type\";\nimport * as $array from \"../../../core/util/Array\";\nimport * as $utils from \"../../../core/util/Utils\";\n\nexport interface IPointOptions {\n}\n\nexport interface ILineSeriesDataItem extends IXYSeriesDataItem {\n}\n\nexport interface ILineSeriesSettings extends IXYSeriesSettings {\n\n\t/**\n\t * If set to `true` the line will connect over \"gaps\" - categories or time\n\t * intervals with no data.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/line-series/#Gaps} for more info\n\t * @default true\n\t */\n\tconnect?: boolean;\n\n\t/**\n\t * If there are more than `autoGapCount` base time intervals (e.g. days) with\n\t * no data, the line will break and will display gap.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/line-series/#Auto_gaps_with_dates} for more info\n\t * @default 1.1\n\t */\n\tautoGapCount?: number;\n\n\t/**\n\t * @ignore\n\t */\n\tcurveFactory?: CurveFactory;\n\n\t/**\n\t * Allows simplifying the line with many points.\n\t *\n\t * If set, the series will skip points that are closer than X pixels to each\n\t * other.\n\t *\n\t * With many data points, this allows having smoother, less cluttered lines.\n\t *\n\t * @default 0\n\t * @since 5.2.7\n\t */\n\tminDistance?: number;\n\n\n}\n\nexport interface ILineSeriesPrivate extends IXYSeriesPrivate {\n}\n\n/**\n * Interface representing a [[LineSeries]] axis range.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-ranges/#Series_axis_ranges} for more info\n */\nexport interface ILineSeriesAxisRange extends IXYSeriesAxisRange {\n\n\t/**\n\t * A list template to use when applying line settings to the line segments covered\n\t * by an axis range.\n\t */\n\tstrokes?: ListTemplate<Graphics>;\n\n\t/**\n\t * A list template to use when applying fill settings to the fill segments covered\n\t * by an axis range.\n\t */\n\tfills?: ListTemplate<Graphics>;\n}\n\n/**\n * Used to plot line and/or area series.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/line-series/} for more info\n * @important\n */\nexport class LineSeries extends XYSeries {\n\n\tdeclare public _settings: ILineSeriesSettings;\n\tdeclare public _privateSettings: ILineSeriesPrivate;\n\tdeclare public _dataItemSettings: ILineSeriesDataItem;\n\tdeclare public _axisRangeType: ILineSeriesAxisRange;\n\n\tpublic static className: string = \"LineSeries\";\n\tpublic static classNames: Array<string> = XYSeries.classNames.concat([LineSeries.className]);\n\n\tprotected _endIndex!: number;\n\n\tprotected _strokeGenerator = line();\n\tprotected _fillGenerator = area();\n\n\tprotected _legendStroke?: Graphics;\n\tprotected _legendFill?: Graphics;\n\n\tprotected _afterNew() {\n\t\tthis._fillGenerator.y0(function(p: number[]) {\n\t\t\treturn p[3];\n\t\t});\n\n\t\tthis._fillGenerator.x0(function(p: number[]) {\n\t\t\treturn p[2];\n\t\t});\n\n\t\tthis._fillGenerator.y1(function(p: number[]) {\n\t\t\treturn p[1];\n\t\t});\n\n\t\tthis._fillGenerator.x1(function(p: number[]) {\n\t\t\treturn p[0];\n\t\t});\n\n\t\tsuper._afterNew();\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeStroke(strokes: ListTemplate<Graphics>): Graphics {\n\t\tconst stroke = this.mainContainer.children.push(strokes.make());\n\t\tstrokes.push(stroke);\n\t\treturn stroke;\n\t}\n\n\t/**\n\t * A [[TemplateList]] of all line segments in series.\n\t *\n\t * `strokes.template` can be used to set default settings for all line\n\t * segments, or to change on existing ones.\n\t *\n\t * @default new ListTemplate<Graphics>\n\t */\n\tpublic readonly strokes: ListTemplate<Graphics> = this.addDisposer(new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Graphics._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.strokes.template.get(\"themeTags\", []), [\"line\", \"series\", \"stroke\"])\n\t\t}, [this.strokes.template]),\n\t));\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeFill(fills: ListTemplate<Graphics>): Graphics {\n\t\tconst fill = this.mainContainer.children.push(fills.make());\n\t\tfills.push(fill);\n\t\treturn fill;\n\t}\n\n\t/**\n\t * A [[TemplateList]] of all segment fills in series.\n\t *\n\t * `fills.template` can be used to set default settings for all segment\n\t * fills, or to change on existing ones.\n\t *\n\t * @default new ListTemplate<Graphics>\n\t */\n\tpublic readonly fills: ListTemplate<Graphics> = this.addDisposer(new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Graphics._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.strokes.template.get(\"themeTags\", []), [\"line\", \"series\", \"fill\"])\n\t\t}, [this.fills.template]),\n\t));\n\n\t// custom set from data\n\tprotected _fillTemplate: Template<Graphics> | undefined;\n\tprotected _strokeTemplate: Template<Graphics> | undefined;\n\n\tprotected _previousPoint: Array<number> = [0, 0, 0, 0];\n\n\tprotected _dindex = 0;\n\tprotected _sindex = 0;\n\n\tpublic _updateChildren() {\n\n\t\tthis._strokeTemplate = undefined;\n\t\tthis._fillTemplate = undefined;\n\n\t\tlet xAxis = this.get(\"xAxis\");\n\t\tlet yAxis = this.get(\"yAxis\");\n\n\t\tif (this.isDirty(\"stroke\")) {\n\t\t\tconst stroke = this.get(\"stroke\");\n\t\t\tthis.strokes.template.set(\"stroke\", stroke);\n\t\t\tconst legendStroke = this._legendStroke;\n\t\t\tif (legendStroke) {\n\t\t\t\tlegendStroke.states.lookup(\"default\")!.set(\"stroke\", stroke);\n\t\t\t}\n\t\t}\n\t\tif (this.isDirty(\"fill\")) {\n\t\t\tconst fill = this.get(\"fill\");\n\t\t\tthis.fills.template.set(\"fill\", fill);\n\t\t\tconst legendFill = this._legendFill;\n\t\t\tif (legendFill) {\n\t\t\t\tlegendFill.states.lookup(\"default\")!.set(\"fill\", fill);\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"fillPattern\")) {\n\t\t\tconst fillPattern = this.get(\"fillPattern\");\n\t\t\tthis.fills.template.set(\"fillPattern\", fillPattern);\n\t\t\tconst legendFill = this._legendFill;\n\t\t\tif (legendFill) {\n\t\t\t\tlegendFill.states.lookup(\"default\")!.set(\"fillPattern\", fillPattern);\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"curveFactory\")) {\n\t\t\tconst curveFactory = this.get(\"curveFactory\")!;\n\t\t\tif (curveFactory) {\n\t\t\t\tthis._strokeGenerator.curve(curveFactory);\n\t\t\t\tthis._fillGenerator.curve(curveFactory);\n\t\t\t}\n\t\t}\n\n\t\tif (xAxis.inited && yAxis.inited) {\n\t\t\tif (this._axesDirty || this._valuesDirty || this._stackDirty || this.isDirty(\"vcx\") || this.isDirty(\"vcy\") || this._sizeDirty || this.isDirty(\"connect\") || this.isDirty(\"curveFactory\")) {\n\n\t\t\t\tthis.fills.each((fill) => {\n\t\t\t\t\tfill.setPrivate(\"visible\", false);\n\t\t\t\t})\n\n\t\t\t\tthis.strokes.each((stroke) => {\n\t\t\t\t\tstroke.setPrivate(\"visible\", false);\n\t\t\t\t})\n\n\t\t\t\tthis.axisRanges.each((axisRange) => {\n\t\t\t\t\tlet fills = axisRange.fills;\n\t\t\t\t\tif (fills) {\n\t\t\t\t\t\tfills.each((fill) => {\n\t\t\t\t\t\t\tfill.setPrivate(\"visible\", false);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\tlet strokes = axisRange.strokes;\n\t\t\t\t\tif (strokes) {\n\t\t\t\t\t\tstrokes.each((stroke) => {\n\t\t\t\t\t\t\tstroke.setPrivate(\"visible\", false);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\tlet startIndex = this.startIndex();\n\n\t\t\t\tlet strokeTemplateField = this.strokes.template.get(\"templateField\");\n\t\t\t\tlet fillTemplateField = this.fills.template.get(\"templateField\");\n\n\t\t\t\tlet strokeTemplateFound = true;\n\t\t\t\tlet fillTemplateFound = true;\n\n\t\t\t\tif (strokeTemplateField) {\n\t\t\t\t\tstrokeTemplateFound = false;\n\t\t\t\t}\n\t\t\t\tif (fillTemplateField) {\n\t\t\t\t\tfillTemplateFound = false;\n\t\t\t\t}\n\n\t\t\t\tfor (let i = startIndex - 1; i >= 0; i--) {\n\t\t\t\t\tlet dataItem = this.dataItems[i];\n\t\t\t\t\tlet hasValues = true;\n\t\t\t\t\tlet dataContext = dataItem.dataContext as any;\n\t\t\t\t\tif (strokeTemplateField) {\n\t\t\t\t\t\tif (dataContext[strokeTemplateField]) {\n\t\t\t\t\t\t\tstrokeTemplateFound = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (fillTemplateField) {\n\t\t\t\t\t\tif (dataContext[fillTemplateField]) {\n\t\t\t\t\t\t\tfillTemplateFound = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t$array.each(this._valueFields, (field) => {\n\t\t\t\t\t\tif (!$type.isNumber(dataItem.get(field as any))) {\n\t\t\t\t\t\t\thasValues = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tif (hasValues && strokeTemplateFound && fillTemplateFound) {\n\t\t\t\t\t\tstartIndex = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\tlet len = this.dataItems.length;\n\t\t\t\tlet endIndex = this.endIndex();\n\n\t\t\t\tif (endIndex < len) {\n\t\t\t\t\tendIndex++;\n\t\t\t\t\tfor (let i = endIndex; i < len; i++) {\n\t\t\t\t\t\tlet dataItem = this.dataItems[i];\n\t\t\t\t\t\tlet hasValues = true;\n\t\t\t\t\t\t$array.each(this._valueFields, (field) => {\n\t\t\t\t\t\t\tif (!$type.isNumber(dataItem.get(field as any))) {\n\t\t\t\t\t\t\t\thasValues = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tif (hasValues) {\n\t\t\t\t\t\t\tendIndex = i + 1;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (startIndex > 0) {\n\t\t\t\t\tstartIndex--;\n\t\t\t\t}\n\n\t\t\t\tthis._endIndex = endIndex;\n\n\t\t\t\tthis._clearGraphics();\n\t\t\t\tthis._sindex = 0;\n\t\t\t\tthis._dindex = startIndex;\n\t\t\t\tif (this.dataItems.length == 1) {\n\t\t\t\t\tthis._startSegment(0);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// this is done to avoid recursion with a lot of segments\n\t\t\t\t\twhile (this._dindex < endIndex - 1) {\n\t\t\t\t\t\tthis._startSegment(this._dindex);\n\t\t\t\t\t\tthis._sindex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis._skipped = true;\n\t\t}\n\n\t\tsuper._updateChildren();\n\t}\n\n\tprotected _clearGraphics() {\n\t\tthis.strokes.clear();\n\t\tthis.fills.clear();\n\n\t\tthis.axisRanges.each((axisRange) => {\n\t\t\taxisRange.fills!.clear();\n\t\t\taxisRange.strokes!.clear();\n\t\t})\n\t}\n\n\tprotected _startSegment(dataItemIndex: number) {\n\t\tlet endIndex = this._endIndex;\n\t\tlet currentEndIndex = endIndex;\n\n\t\tconst autoGapCount = this.get(\"autoGapCount\")!;\n\t\tconst connect = this.get(\"connect\");\n\n\t\tconst fill = this.makeFill(this.fills);\n\n\t\tconst fillTemplate = this._fillTemplate;\n\t\tconst originalTemplate = this.fills.template;\n\t\tif (fillTemplate && fillTemplate != originalTemplate) {\n\t\t\tfill.template = fillTemplate;\n\t\t}\n\n\t\tfill.setPrivate(\"visible\", true);\n\n\t\tconst stroke = this.makeStroke(this.strokes);\n\n\t\tconst strokeTemplate = this._strokeTemplate;\n\t\tif (strokeTemplate && strokeTemplate != this.strokes.template) {\n\t\t\tstroke.template = strokeTemplate;\n\t\t}\n\n\t\tstroke.setPrivate(\"visible\", true);\n\n\t\tlet xAxis = this.get(\"xAxis\");\n\t\tlet yAxis = this.get(\"yAxis\");\n\t\tlet baseAxis = this.get(\"baseAxis\")!;\n\n\t\tlet vcx = this.get(\"vcx\", 1);\n\t\tlet vcy = this.get(\"vcy\", 1);\n\n\t\tlet xField = this._xField;\n\t\tlet yField = this._yField;\n\n\t\tlet xOpenField = this._xOpenField;\n\t\tlet yOpenField = this._yOpenField;\n\n\t\tconst xOpenFieldValue = this.get(\"openValueXField\");\n\t\tconst yOpenFieldValue = this.get(\"openValueYField\");\n\n\t\tif (!xOpenFieldValue) {\n\t\t\txOpenField = this._xField;\n\t\t}\n\n\t\tif (!yOpenFieldValue) {\n\t\t\tyOpenField = this._yField;\n\t\t}\n\n\t\tconst stacked = this.get(\"stacked\");\n\n\t\tconst basePosX = xAxis.basePosition();\n\t\tconst basePosY = yAxis.basePosition();\n\n\t\tlet baseField: string;\n\t\tif (baseAxis === yAxis) {\n\t\t\tbaseField = this._yField;\n\t\t}\n\t\telse {\n\t\t\tbaseField = this._xField;\n\t\t}\n\n\t\tconst segments: Array<Array<Array<number>>> = [];\n\t\tlet points: Array<Array<number>> = [];\n\t\tsegments.push(points);\n\n\t\tconst strokeTemplateField = this.strokes.template.get(\"templateField\");\n\t\tconst fillTemplateField = this.fills.template.get(\"templateField\");\n\n\t\tlet locationX = this.get(\"locationX\", 0.5);\n\t\tlet locationY = this.get(\"locationY\", 0.5);\n\n\t\tlet openLocationX = this.get(\"openLocationX\", locationX);\n\t\tlet openLocationY = this.get(\"openLocationY\", locationY);\n\n\t\tconst minDistance = this.get(\"minDistance\", 0);\n\n\t\tlet i: number;\n\n\t\tlet fillVisible = this.fills.template.get(\"visible\");\n\t\tif (this.axisRanges.length > 0) {\n\t\t\tfillVisible = true;\n\t\t}\n\n\t\tlet getOpen = false;\n\t\tif (stacked || xOpenFieldValue || yOpenFieldValue) {\n\t\t\tgetOpen = true;\n\t\t}\n\n\t\tconst o = {\n\t\t\tpoints, segments, stacked, getOpen, basePosX, basePosY, fillVisible, xField, yField, xOpenField, yOpenField, vcx, vcy, baseAxis, xAxis, yAxis, locationX, locationY, openLocationX, openLocationY, minDistance\n\t\t}\n\n\n\t\tlet rangeStrokeTemplate = this._strokeTemplate;\n\t\tlet rangeFillTemplate = this._fillTemplate;\n\n\t\tfor (i = dataItemIndex; i < currentEndIndex; i++) {\n\t\t\tthis._dindex = i;\n\t\t\tconst dataItem = this._dataItems[i];\n\n\t\t\tlet valueX = dataItem.get(xField as any);\n\t\t\tlet valueY = dataItem.get(yField as any);\n\n\t\t\tif (valueX == null || valueY == null) {\n\t\t\t\tif (!connect) {\n\t\t\t\t\tpoints = [];\n\t\t\t\t\tsegments.push(points);\n\t\t\t\t\to.points = points;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._getPoints(dataItem, o);\n\t\t\t}\n\n\t\t\tif (strokeTemplateField) {\n\t\t\t\tlet strokeTemplate = (dataItem.dataContext as any)[strokeTemplateField]\n\t\t\t\tif (strokeTemplate) {\n\t\t\t\t\tif (!(strokeTemplate instanceof Template)) {\n\t\t\t\t\t\tstrokeTemplate = Template.new(strokeTemplate);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._strokeTemplate = strokeTemplate;\n\t\t\t\t\tif (i > dataItemIndex) {\n\t\t\t\t\t\tcurrentEndIndex = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\trangeStrokeTemplate = strokeTemplate;\n\t\t\t\t\t\tstroke.template = strokeTemplate;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (fillTemplateField) {\n\t\t\t\tlet fillTemplate = (dataItem.dataContext as any)[fillTemplateField]\n\t\t\t\tif (fillTemplate) {\n\t\t\t\t\tif (!(fillTemplate instanceof Template)) {\n\t\t\t\t\t\tfillTemplate = Template.new(fillTemplate);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._fillTemplate = fillTemplate;\n\t\t\t\t\tif (i > dataItemIndex) {\n\t\t\t\t\t\tcurrentEndIndex = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\trangeFillTemplate = fillTemplate;\n\t\t\t\t\t\tfill.template = fillTemplate;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!connect) {\n\t\t\t\tlet nextItem = this.dataItems[i + 1];\n\t\t\t\tif (nextItem) {\n\t\t\t\t\tif (baseAxis.shouldGap(dataItem, nextItem, autoGapCount, baseField)) {\n\t\t\t\t\t\tpoints = [];\n\t\t\t\t\t\tsegments.push(points);\n\t\t\t\t\t\to.points = points;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfill.setRaw(\"userData\", [dataItemIndex, i]);\n\t\tstroke.setRaw(\"userData\", [dataItemIndex, i]);\n\n\t\tif (i === endIndex) {\n\t\t\tthis._endLine(points, segments[0][0]);\n\t\t}\n\n\t\tif (stroke) {\n\t\t\tthis._drawStroke(stroke, segments);\n\t\t}\n\n\t\tif (fill) {\n\t\t\tthis._drawFill(fill, segments);\n\t\t}\n\n\t\tthis.axisRanges.each((axisRange) => {\n\t\t\tconst container = axisRange.container;\n\t\t\tconst fills = axisRange.fills!;\n\t\t\tconst fill = this.makeFill(fills);\n\t\t\tif (container) {\n\t\t\t\tcontainer.children.push(fill);\n\t\t\t}\n\n\t\t\tfill.setPrivate(\"visible\", true);\n\t\t\tthis._drawFill(fill, segments);\n\n\t\t\tconst strokes = axisRange.strokes!;\n\t\t\tconst stroke = this.makeStroke(strokes);\n\t\t\tif (container) {\n\t\t\t\tcontainer.children.push(stroke);\n\t\t\t}\n\n\t\t\tif (rangeStrokeTemplate && rangeStrokeTemplate != this.strokes.template) {\n\t\t\t\tstroke.template = rangeStrokeTemplate;\n\t\t\t}\n\n\t\t\tif (rangeFillTemplate && rangeFillTemplate != this.fills.template) {\n\t\t\t\tfill.template = rangeFillTemplate;\n\t\t\t}\n\n\t\t\tstroke.setPrivate(\"visible\", true);\n\t\t\tthis._drawStroke(stroke, segments);\n\n\t\t\tfill.setRaw(\"userData\", [dataItemIndex, i]);\n\t\t\tstroke.setRaw(\"userData\", [dataItemIndex, i]);\n\t\t})\n\t}\n\n\tprotected _getPoints(dataItem: DataItem<this[\"_dataItemSettings\"]>, o: { points: Array<Array<number>>, segments: number[][][], stacked: boolean | undefined, getOpen: boolean, basePosX: number, basePosY: number, fillVisible: boolean | undefined, xField: string, yField: string, xOpenField: string, yOpenField: string, vcx: number, vcy: number, baseAxis: Axis<AxisRenderer>, xAxis: Axis<AxisRenderer>, yAxis: Axis<AxisRenderer>, locationX: number, locationY: number, openLocationX: number, openLocationY: number, minDistance: number }) {\n\t\tlet points = o.points;\n\n\t\tlet itemLocationX = dataItem.get(\"locationX\", o.locationX);\n\t\tlet itemLocationY = dataItem.get(\"locationY\", o.locationY);\n\n\t\tconst exactLocationX = this.get(\"exactLocationX\", false);\n\t\tconst exactLocationY = this.get(\"exactLocationY\", false);\n\n\t\tlet xPos = o.xAxis.getDataItemPositionX(dataItem, o.xField, itemLocationX, o.vcx, exactLocationX);\n\t\tlet yPos = o.yAxis.getDataItemPositionY(dataItem, o.yField, itemLocationY, o.vcy, exactLocationY);\n\n\t\tif (this._shouldInclude(xPos)) {\n\n\t\t\tconst iPoint = this.getPoint(xPos, yPos);\n\t\t\tconst point = [iPoint.x, iPoint.y];\n\n\t\t\tiPoint.x += this._x;\n\t\t\tiPoint.y += this._y;\n\n\t\t\tdataItem.set(\"point\", iPoint);\n\n\t\t\tif (o.fillVisible) {\n\t\t\t\tlet xPos0: number = xPos;\n\t\t\t\tlet yPos0: number = yPos;\n\n\t\t\t\tif (o.baseAxis === o.xAxis) {\n\t\t\t\t\tyPos0 = o.basePosY;\n\t\t\t\t}\n\t\t\t\telse if (o.baseAxis === o.yAxis) {\n\t\t\t\t\txPos0 = o.basePosX;\n\t\t\t\t}\n\n\t\t\t\tif (o.getOpen) {\n\t\t\t\t\tlet valueX = dataItem.get(o.xOpenField as any);\n\t\t\t\t\tlet valueY = dataItem.get(o.yOpenField as any);\n\n\t\t\t\t\tif (valueX != null && valueY != null) {\n\t\t\t\t\t\tlet itemLocationX = dataItem.get(\"openLocationX\", o.openLocationX);\n\t\t\t\t\t\tlet itemLocationY = dataItem.get(\"openLocationY\", o.openLocationY);\n\n\t\t\t\t\t\tif (o.stacked) {\n\t\t\t\t\t\t\tlet stackToItemX = dataItem.get(\"stackToItemX\")!;\n\t\t\t\t\t\t\tlet stackToItemY = dataItem.get(\"stackToItemY\")!;\n\n\t\t\t\t\t\t\tif (stackToItemX) {\n\t\t\t\t\t\t\t\txPos0 = o.xAxis.getDataItemPositionX(stackToItemX, o.xField, itemLocationX, (stackToItemX.component as XYSeries).get(\"vcx\"), exactLocationX);\n\t\t\t\t\t\t\t\tif ($type.isNaN(xPos0)) {\n\t\t\t\t\t\t\t\t\txPos0 = o.basePosX;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tif (o.yAxis === o.baseAxis) {\n\t\t\t\t\t\t\t\t\txPos0 = o.basePosX;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\txPos0 = o.xAxis.getDataItemPositionX(dataItem, o.xOpenField, itemLocationX, o.vcx, exactLocationX);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (stackToItemY) {\n\t\t\t\t\t\t\t\tyPos0 = o.yAxis.getDataItemPositionY(stackToItemY, o.yField, itemLocationY, (stackToItemY.component as XYSeries).get(\"vcy\"), exactLocationY);\n\t\t\t\t\t\t\t\tif ($type.isNaN(yPos0)) {\n\t\t\t\t\t\t\t\t\tyPos0 = o.basePosY;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tif (o.xAxis === o.baseAxis) {\n\t\t\t\t\t\t\t\t\tyPos0 = o.basePosY;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tyPos0 = o.yAxis.getDataItemPositionY(dataItem, o.yOpenField, itemLocationY, o.vcy, exactLocationY);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\txPos0 = o.xAxis.getDataItemPositionX(dataItem, o.xOpenField, itemLocationX, o.vcx, exactLocationX);\n\t\t\t\t\t\t\tyPos0 = o.yAxis.getDataItemPositionY(dataItem, o.yOpenField, itemLocationY, o.vcy, exactLocationY);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet closeIPoint = this.getPoint(xPos0, yPos0);\n\n\t\t\t\tpoint[2] = closeIPoint.x;\n\t\t\t\tpoint[3] = closeIPoint.y;\n\t\t\t}\n\n\t\t\tif (o.minDistance > 0) {\n\t\t\t\tconst p0 = point[0];\n\t\t\t\tconst p1 = point[1];\n\t\t\t\tconst p2 = point[2];\n\t\t\t\tconst p3 = point[3];\n\n\t\t\t\tconst prev = this._previousPoint;\n\n\t\t\t\tconst pp0 = prev[0];\n\t\t\t\tconst pp1 = prev[1];\n\t\t\t\tconst pp2 = prev[2];\n\t\t\t\tconst pp3 = prev[3];\n\n\t\t\t\tif (Math.hypot(p0 - pp0, p1 - pp1) > o.minDistance || (p2 && p3 && Math.hypot(p2 - pp2, p3 - pp3) > o.minDistance)) {\n\t\t\t\t\tpoints.push(point);\n\t\t\t\t\tthis._previousPoint = point;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpoints.push(point);\n\t\t\t}\n\t\t}\n\t}\n\n\n\tprotected _endLine(_points: Array<Array<number>>, _firstPoint: Array<number>) {\n\n\t}\n\n\tprotected _drawStroke(graphics: Graphics, segments: number[][][]) {\n\t\tif (graphics.get(\"visible\") && !graphics.get(\"forceHidden\")) {\n\t\t\tgraphics.set(\"draw\", (display) => {\n\t\t\t\t$array.each(segments, (segment) => {\n\t\t\t\t\tthis._strokeGenerator.context(display as any);\n\t\t\t\t\tthis._strokeGenerator(segment as [number, number][]);\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t}\n\n\tprotected _drawFill(graphics: Graphics, segments: number[][][]) {\n\t\tif (graphics.get(\"visible\") && !graphics.get(\"forceHidden\")) {\n\t\t\tgraphics.set(\"draw\", (display) => {\n\t\t\t\t$array.each(segments, (segment) => {\n\t\t\t\t\tthis._fillGenerator.context(display as any);\n\t\t\t\t\tthis._fillGenerator(segment as [number, number][]);\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t}\n\n\tprotected _processAxisRange(axisRange: this[\"_axisRangeType\"]) {\n\t\tsuper._processAxisRange(axisRange);\n\t\taxisRange.fills = new ListTemplate(\n\t\t\tTemplate.new({}),\n\t\t\t() => Graphics._new(this._root, {\n\t\t\t\tthemeTags: $utils.mergeTags(axisRange.fills!.template.get(\"themeTags\", []), [\"line\", \"series\", \"fill\"]),\n\t\t\t}, [this.fills.template, axisRange.fills!.template]),\n\t\t);\n\n\t\taxisRange.strokes = new ListTemplate(\n\t\t\tTemplate.new({}),\n\t\t\t() => Graphics._new(this._root, {\n\t\t\t\tthemeTags: $utils.mergeTags(axisRange.strokes!.template.get(\"themeTags\", []), [\"line\", \"series\", \"stroke\"]),\n\t\t\t}, [this.strokes.template, axisRange.strokes!.template])\n\t\t);\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic createLegendMarker(_dataItem?: DataItem<this[\"_dataItemSettings\"]>) {\n\n\t\tconst legendDataItem = this.get(\"legendDataItem\");\n\n\t\tif (legendDataItem) {\n\t\t\tconst marker = legendDataItem.get(\"marker\");\n\n\t\t\tconst markerRectangle = legendDataItem.get(\"markerRectangle\");\n\t\t\tif (markerRectangle) {\n\t\t\t\tmarkerRectangle.setPrivate(\"visible\", false);\n\t\t\t}\n\n\t\t\tmarker.set(\"background\", Rectangle.new(marker._root, { fillOpacity: 0, fill: color(0x000000) }))\n\n\t\t\tconst legendStroke = marker.children.push(Graphics._new(marker._root, {\n\t\t\t\tthemeTags: [\"line\", \"series\", \"legend\", \"marker\", \"stroke\"], interactive: false\n\t\t\t}, [this.strokes.template]));\n\n\t\t\tthis._legendStroke = legendStroke;\n\n\t\t\tconst legendFill = marker.children.push(Graphics._new(marker._root, {\n\t\t\t\tthemeTags: [\"line\", \"series\", \"legend\", \"marker\", \"fill\"]\n\t\t\t}, [this.fills.template]));\n\n\t\t\tthis._legendFill = legendFill;\n\n\t\t\tconst disabledColor = this._root.interfaceColors.get(\"disabled\");\n\n\t\t\tlegendStroke.states.create(\"disabled\", { fill: disabledColor, stroke: disabledColor });\n\t\t\tlegendFill.states.create(\"disabled\", { fill: disabledColor, stroke: disabledColor });\n\n\t\t\tif (this.bullets.length > 0) {\n\t\t\t\tconst bulletFunction = this.bullets.getIndex(0);\n\t\t\t\tif (bulletFunction) {\n\t\t\t\t\tconst bullet = bulletFunction(marker._root, this, new DataItem(this, { legend: true }, {}));\n\t\t\t\t\tif (bullet) {\n\t\t\t\t\t\tconst sprite = bullet.get(\"sprite\");\n\t\t\t\t\t\tif (sprite instanceof Graphics) {\n\t\t\t\t\t\t\tsprite.states.create(\"disabled\", { fill: disabledColor, stroke: disabledColor });\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (sprite) {\n\n\t\t\t\t\t\t\tsprite.setAll({\n\t\t\t\t\t\t\t\ttooltipText: undefined,\n\t\t\t\t\t\t\t\ttooltipHTML: undefined,\n\t\t\t\t\t\t\t\tfocusable: undefined,\n\t\t\t\t\t\t\t\tfocusableGroup: undefined,\n\t\t\t\t\t\t\t\tariaLabel: undefined\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tmarker.children.push(sprite);\n\t\t\t\t\t\t\tsprite.setAll({ x: marker.width() / 2, y: marker.height() / 2 });\n\n\t\t\t\t\t\t\tmarker.events.on(\"boundschanged\", () => {\n\t\t\t\t\t\t\t\tsprite.setAll({ x: marker.width() / 2, y: marker.height() / 2 });\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","import type { ITimeInterval } from \"../../core/util/Time\";\r\nimport type { DataItem } from \"../../core/render/Component\";\r\nimport type { IValueAxisDataItem, ValueAxis } from \"./axes/ValueAxis\";\r\nimport type { AxisRenderer } from \"./axes/AxisRenderer\";\r\nimport type { DateAxis } from \"./axes/DateAxis\";\r\nimport type { ICategoryAxisDataItem } from \"./axes/CategoryAxis\";\r\nimport type { IGaplessDateAxisDataItem } from \"./axes/GaplessDateAxis\";\r\n\r\nimport { Theme } from \"../../core/Theme\";\r\nimport { percent, p50, p100 } from \"../../core/util/Percent\";\r\nimport { Color } from \"../../core/util/Color\";\r\nimport { ColorSet } from \"../../core/util/ColorSet\";\r\nimport { setColor } from \"../../themes/DefaultTheme\";\r\n\r\nimport * as $time from \"../../core/util/Time\";\r\nimport * as $type from \"../../core/util/Type\";\r\nimport * as $math from \"../../core/util/Math\";\r\nimport * as $object from \"../../core/util/Object\";\r\nimport * as $array from \"../../core/util/Array\";\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport class XYChartDefaultTheme extends Theme {\r\n\tprotected setupDefaultRules() {\r\n\t\tsuper.setupDefaultRules();\r\n\r\n\t\tconst ic = this._root.interfaceColors;\r\n\t\tconst language = this._root.language;\r\n\t\tconst r = this.rule.bind(this);\r\n\r\n\t\t/**\r\n\t\t * ========================================================================\r\n\t\t * charts/xy\r\n\t\t * ========================================================================\r\n\t\t */\r\n\r\n\t\tr(\"XYChart\").setAll({\r\n\t\t\tcolors: ColorSet.new(this._root, {}),\r\n\t\t\tpaddingLeft: 20,\r\n\t\t\tpaddingRight: 20,\r\n\t\t\tpaddingTop: 16,\r\n\t\t\tpaddingBottom: 16,\r\n\t\t\tpanX: false,\r\n\t\t\tpanY: false,\r\n\t\t\twheelStep: 0.25,\r\n\t\t\tarrangeTooltips: true,\r\n\t\t\tpinchZoomX: false,\r\n\t\t\tpinchZoomY: false\r\n\t\t});\r\n\r\n\r\n\t\tr(\"XYSeries\").setAll({\r\n\t\t\tlegendLabelText: \"{name}\"\r\n\t\t})\r\n\r\n\t\tr(\"Rectangle\", [\"plotbackground\", \"xy\", \"background\"]).setAll({\r\n\t\t\tfill: Color.fromHex(0x000000),\r\n\t\t\tfillOpacity: 0\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t * charts/xy: XYChartScrollbar\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t */\r\n\r\n\t\tr(\"XYChart\", [\"scrollbar\", \"chart\"]).setAll({\r\n\t\t\tpaddingBottom: 0,\r\n\t\t\tpaddingLeft: 0,\r\n\t\t\tpaddingTop: 0,\r\n\t\t\tpaddingRight: 0,\r\n\t\t\tcolors: ColorSet.new(this._root, {\r\n\t\t\t\tsaturation: 0\r\n\t\t\t})\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Graphics\", [\"scrollbar\", \"overlay\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tfillOpacity: 0.5\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"fill\", ic, \"background\");\r\n\t\t}\r\n\r\n\t\t// Class: RoundedRectangle\r\n\t\tr(\"RoundedRectangle\", [\"xy\", \"scrollbar\", \"thumb\"]).setAll({\r\n\t\t\tcornerRadiusTR: 0,\r\n\t\t\tcornerRadiusTL: 0,\r\n\t\t\tcornerRadiusBR: 0,\r\n\t\t\tcornerRadiusBL: 0,\r\n\t\t\tfillOpacity: 0,\r\n\t\t\tfocusable: true\r\n\t\t});\r\n\r\n\t\tr(\"RoundedRectangle\", [\"xy\", \"scrollbar\", \"thumb\"]).states.create(\"hover\", { fillOpacity: 0.4 });\r\n\r\n\t\tr(\"RoundedRectangle\", [\"xy\", \"scrollbar\", \"chart\", \"background\"]).setAll({\r\n\t\t\tcornerRadiusTL: 0,\r\n\t\t\tcornerRadiusBL: 0,\r\n\t\t\tcornerRadiusTR: 0,\r\n\t\t\tcornerRadiusBR: 0\r\n\t\t});\r\n\r\n\t\tr(\"RoundedRectangle\", [\"xy\", \"scrollbar\", \"chart\", \"background\", \"resize\", \"button\"]).setAll({\r\n\t\t\tcornerRadiusBL: 40,\r\n\t\t\tcornerRadiusBR: 40,\r\n\t\t\tcornerRadiusTL: 40,\r\n\t\t\tcornerRadiusTR: 40\r\n\t\t});\r\n\r\n\t\tr(\"AxisRendererX\", [\"xy\", \"chart\", \"scrollbar\"]).setAll({\r\n\t\t\tstrokeOpacity: 0,\r\n\t\t\tinside: true\r\n\t\t});\r\n\r\n\t\tr(\"AxisRendererY\", [\"xy\", \"chart\", \"scrollbar\"]).setAll({\r\n\t\t\tstrokeOpacity: 0,\r\n\t\t\tinside: true,\r\n\t\t\tminGridDistance: 5\r\n\t\t});\r\n\r\n\t\tr(\"AxisLabel\", [\"xy\", \"scrollbar\", \"x\"]).setAll({\r\n\t\t\topacity: 0.5,\r\n\t\t\tcenterY: p100,\r\n\t\t\tminPosition: 0.01,\r\n\t\t\tmaxPosition: 0.99,\r\n\t\t\tfontSize: \"0.8em\"\r\n\t\t});\r\n\r\n\t\tr(\"AxisLabel\", [\"category\"]).setAll({\r\n\t\t\ttext: \"{category}\",\r\n\t\t\tpopulateText: true\r\n\t\t});\r\n\r\n\t\tr(\"AxisLabel\", [\"x\"]).setAll({\r\n\t\t\tcenterY: 0\r\n\t\t});\r\n\r\n\t\tr(\"AxisLabel\", [\"x\", \"inside\"]).setAll({\r\n\t\t\tcenterY: p100\r\n\t\t});\r\n\r\n\t\tr(\"AxisLabel\", [\"x\", \"inside\", \"opposite\"]).setAll({\r\n\t\t\tcenterY: 0\r\n\t\t});\r\n\r\n\t\tr(\"AxisLabel\", [\"x\", \"opposite\"]).setAll({\r\n\t\t\tcenterY: p100\r\n\t\t});\r\n\r\n\r\n\t\tr(\"AxisLabel\", [\"y\"]).setAll({\r\n\t\t\tcenterX: p100\r\n\t\t});\r\n\r\n\t\tr(\"AxisLabel\", [\"y\", \"inside\"]).setAll({\r\n\t\t\tcenterX: 0\r\n\t\t});\r\n\r\n\t\tr(\"AxisLabel\", [\"y\", \"inside\", \"opposite\"]).setAll({\r\n\t\t\tcenterX: p100\r\n\t\t});\r\n\r\n\t\tr(\"AxisLabel\", [\"y\", \"opposite\"]).setAll({\r\n\t\t\tcenterX: 0\r\n\t\t});\r\n\r\n\t\tr(\"AxisLabel\", [\"minor\"]).setAll({\r\n\t\t\tfontSize: \"0.6em\"\r\n\t\t});\r\n\r\n\t\tr(\"AxisLabel\", [\"xy\", \"scrollbar\", \"y\"]).setAll({\r\n\t\t\tvisible: false\r\n\t\t});\r\n\r\n\t\t// Class: Grid\r\n\t\tr(\"Grid\", [\"xy\", \"scrollbar\", \"y\"]).setAll({\r\n\t\t\tvisible: false\r\n\t\t});\r\n\r\n\t\t// Class: Grid\r\n\t\tr(\"Grid\", [\"xy\", \"scrollbar\", \"x\"]).setAll({\r\n\t\t\topacity: 0.5\r\n\t\t});\r\n\r\n\r\n\r\n\r\n\t\t/**\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t * charts/xy: Cursor\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t */\r\n\r\n\t\tr(\"XYCursor\").setAll({\r\n\t\t\tbehavior: \"none\",\r\n\t\t\tlayer: 30,\r\n\t\t\texportable: false,\r\n\t\t\tsnapToSeriesBy: \"xy\",\r\n\t\t\tmoveThreshold: 1\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Grid\", [\"cursor\", \"x\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tforceInactive: true,\r\n\t\t\t\tstrokeOpacity: 0.8,\r\n\t\t\t\tstrokeDasharray: [2, 2],\r\n\t\t\t\trole: \"slider\",\r\n\t\t\t\tariaLabel: language.translate(\"Use left and right arrows to move selection\")\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"alternativeBackground\");\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Grid\", [\"cursor\", \"y\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tforceInactive: true,\r\n\t\t\t\tstrokeOpacity: 0.8,\r\n\t\t\t\tstrokeDasharray: [2, 2],\r\n\t\t\t\trole: \"slider\",\r\n\t\t\t\tariaLabel: language.translate(\"Use up and down arrows to move selection\")\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"alternativeBackground\");\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Graphics\", [\"cursor\", \"selection\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tfillOpacity: 0.15,\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t * charts/xy: Axes\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t */\r\n\r\n\t\tr(\"Axis\").setAll({\r\n\t\t\tzoomOut: true,\r\n\t\t\tstart: 0,\r\n\t\t\tend: 1,\r\n\t\t\tminZoomCount: 1,\r\n\t\t\tmaxZoomCount: Infinity,\r\n\t\t\tmaxZoomFactor: 1000,\r\n\t\t\tmaxDeviation: 0.1,\r\n\t\t\tsnapTooltip: true,\r\n\t\t\ttooltipLocation: 0.5,\r\n\t\t\tpanX: true,\r\n\t\t\tpanY: true,\r\n\t\t\tzoomX: true,\r\n\t\t\tzoomY: true,\r\n\t\t\tfixAxisSize: true\r\n\t\t});\r\n\r\n\t\tr(\"AxisLabel\").setAll({\r\n\t\t\tlocation: 0.5,\r\n\t\t\tmultiLocation: 0,\r\n\t\t\tcenterX: p50,\r\n\t\t\tcenterY: p50,\r\n\t\t\tpaddingTop: 3,\r\n\t\t\tpaddingBottom: 3,\r\n\t\t\tpaddingLeft: 5,\r\n\t\t\tpaddingRight: 5\r\n\t\t});\r\n\r\n\t\t// The following is deprecated following text measuring updates in 5.0.5\r\n\t\t// r(\"AxisLabel\", [\"y\"]).setAll({\r\n\t\t// \ttextAlign: \"right\"\r\n\t\t// });\r\n\r\n\t\t// r(\"AxisLabel\", [\"y\", \"opposite\"]).setAll({\r\n\t\t// \ttextAlign: \"left\"\r\n\t\t// });\r\n\r\n\t\tr(\"Container\", [\"axis\", \"header\"]).setAll({\r\n\t\t\tlayer: 30\r\n\t\t});\r\n\r\n\t\tr(\"Rectangle\", [\"axis\", \"header\", \"background\"]).setAll({\r\n\t\t\tcrisp: true\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"AxisRenderer\");\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tcrisp: true,\r\n\t\t\t\tstrokeOpacity: 0\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"grid\");\r\n\t\t}\r\n\r\n\t\tr(\"AxisRendererX\").setAll({\r\n\t\t\tminGridDistance: 120,\r\n\t\t\topposite: false,\r\n\t\t\tinversed: false,\r\n\t\t\tcellStartLocation: 0,\r\n\t\t\tcellEndLocation: 1,\r\n\t\t\twidth: p100\r\n\t\t});\r\n\r\n\t\tr(\"AxisRendererY\").setAll({\r\n\t\t\tminGridDistance: 40,\r\n\t\t\topposite: false,\r\n\t\t\tinversed: false,\r\n\t\t\tcellStartLocation: 0,\r\n\t\t\tcellEndLocation: 1,\r\n\t\t\theight: p100\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Rectangle\", [\"axis\", \"thumb\", \"zoomgrip\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tfillOpacity: 0\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n\r\n\t\t\trule.states.create(\"hover\", { fillOpacity: 0.1 })\r\n\t\t}\r\n\r\n\t\tr(\"Rectangle\", [\"axis\", \"thumb\", \"x\", \"zoomgrip\"]).setAll({\r\n\t\t\tcursorOverStyle: \"ew-resize\"\r\n\t\t});\r\n\r\n\t\tr(\"Rectangle\", [\"axis\", \"thumb\", \"y\", \"zoomgrip\"]).setAll({\r\n\t\t\tcursorOverStyle: \"ns-resize\"\r\n\t\t});\r\n\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Grid\");\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tlocation: 0,\r\n\t\t\t\tstrokeOpacity: 0.15,\r\n\t\t\t\tcrisp: true\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"grid\");\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Grid\", [\"minor\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tlocation: 0,\r\n\t\t\t\tstrokeOpacity: 0.07,\r\n\t\t\t\tcrisp: true\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"grid\");\r\n\t\t}\r\n\r\n\r\n\t\tr(\"Grid\", [\"base\"]).setAll({\r\n\t\t\tstrokeOpacity: 0.3\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Graphics\", [\"axis\", \"fill\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tvisible: false,\r\n\t\t\t\tisMeasured: false,\r\n\t\t\t\tposition: \"absolute\",\r\n\t\t\t\tfillOpacity: 0.05,\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n\t\t}\r\n\r\n\t\tr(\"Graphics\", [\"axis\", \"fill\", \"range\"]).setAll({\r\n\t\t\tisMeasured: true\r\n\t\t});\r\n\r\n\t\t// hides all elements of series axis range\r\n\t\tr(\"Graphics\", [\"series\", \"fill\", \"range\"]).setAll({\r\n\t\t\tvisible: false,\r\n\t\t\tisMeasured: true\r\n\t\t});\r\n\r\n\t\tr(\"Grid\", [\"series\", \"range\"]).setAll({\r\n\t\t\tvisible: false\r\n\t\t});\r\n\r\n\t\tr(\"AxisTick\", [\"series\", \"range\"]).setAll({\r\n\t\t\tvisible: false\r\n\t\t});\r\n\r\n\t\tr(\"AxisLabel\", [\"series\", \"range\"]).setAll({\r\n\t\t\tvisible: false\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"AxisTick\");\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tlocation: 0.5,\r\n\t\t\t\tmultiLocation: 0,\r\n\t\t\t\tstrokeOpacity: 1,\r\n\t\t\t\tisMeasured: false,\r\n\t\t\t\tposition: \"absolute\",\r\n\t\t\t\tvisible: false\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"grid\");\r\n\t\t}\r\n\r\n\t\tr(\"CategoryAxis\").setAll({\r\n\t\t\tstartLocation: 0,\r\n\t\t\tendLocation: 1,\r\n\t\t\tfillRule: (dataItem: DataItem<ICategoryAxisDataItem>, index?: number) => {\r\n\t\t\t\tconst axisFill = dataItem.get(\"axisFill\");\r\n\t\t\t\tif (axisFill) {\r\n\t\t\t\t\tif (!$type.isNumber(index) || index % 2 == 0) {\r\n\t\t\t\t\t\taxisFill.setPrivate(\"visible\", true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\taxisFill.setPrivate(\"visible\", false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst gridIntervals: Array<ITimeInterval> = [\r\n\t\t\t{ timeUnit: \"millisecond\", count: 1 },\r\n\t\t\t{ timeUnit: \"millisecond\", count: 5 },\r\n\t\t\t{ timeUnit: \"millisecond\", count: 10 },\r\n\t\t\t{ timeUnit: \"millisecond\", count: 50 },\r\n\t\t\t{ timeUnit: \"millisecond\", count: 100 },\r\n\t\t\t{ timeUnit: \"millisecond\", count: 500 },\r\n\t\t\t{ timeUnit: \"second\", count: 1 },\r\n\t\t\t{ timeUnit: \"second\", count: 5 },\r\n\t\t\t{ timeUnit: \"second\", count: 10 },\r\n\t\t\t{ timeUnit: \"second\", count: 30 },\r\n\t\t\t{ timeUnit: \"minute\", count: 1 },\r\n\t\t\t{ timeUnit: \"minute\", count: 5 },\r\n\t\t\t{ timeUnit: \"minute\", count: 10 },\r\n\t\t\t{ timeUnit: \"minute\", count: 15 },\r\n\t\t\t{ timeUnit: \"minute\", count: 30 },\r\n\t\t\t{ timeUnit: \"hour\", count: 1 },\r\n\t\t\t{ timeUnit: \"hour\", count: 3 },\r\n\t\t\t{ timeUnit: \"hour\", count: 6 },\r\n\t\t\t{ timeUnit: \"hour\", count: 12 },\r\n\t\t\t{ timeUnit: \"day\", count: 1 },\r\n\t\t\t{ timeUnit: \"day\", count: 2 },\r\n\t\t\t{ timeUnit: \"day\", count: 3 },\r\n\t\t\t{ timeUnit: \"day\", count: 4 },\r\n\t\t\t{ timeUnit: \"day\", count: 5 },\r\n\t\t\t{ timeUnit: \"week\", count: 1 },\r\n\t\t\t{ timeUnit: \"month\", count: 1 },\r\n\t\t\t{ timeUnit: \"month\", count: 2 },\r\n\t\t\t{ timeUnit: \"month\", count: 3 },\r\n\t\t\t{ timeUnit: \"month\", count: 6 },\r\n\t\t\t{ timeUnit: \"year\", count: 1 },\r\n\t\t\t{ timeUnit: \"year\", count: 2 },\r\n\t\t\t{ timeUnit: \"year\", count: 5 },\r\n\t\t\t{ timeUnit: \"year\", count: 10 },\r\n\t\t\t{ timeUnit: \"year\", count: 50 },\r\n\t\t\t{ timeUnit: \"year\", count: 100 },\r\n\t\t\t{ timeUnit: \"year\", count: 200 },\r\n\t\t\t{ timeUnit: \"year\", count: 500 },\r\n\t\t\t{ timeUnit: \"year\", count: 1000 },\r\n\t\t\t{ timeUnit: \"year\", count: 2000 },\r\n\t\t\t{ timeUnit: \"year\", count: 5000 },\r\n\t\t\t{ timeUnit: \"year\", count: 10000 },\r\n\t\t\t{ timeUnit: \"year\", count: 100000 }\r\n\t\t];\r\n\r\n\t\tconst dateFormats = {\r\n\t\t\t\"millisecond\": language.translate(\"_date_millisecond\"),\r\n\t\t\t\"second\": language.translate(\"_date_second\"),\r\n\t\t\t\"minute\": language.translate(\"_date_minute\"),\r\n\t\t\t\"hour\": language.translate(\"_date_hour\"),\r\n\t\t\t\"day\": language.translate(\"_date_day\"),\r\n\t\t\t\"week\": language.translate(\"_date_day\"),\r\n\t\t\t\"month\": language.translate(\"_date_month\"),\r\n\t\t\t\"year\": language.translate(\"_date_year\")\r\n\t\t};\r\n\r\n\t\tconst periodChangeDateFormats = {\r\n\t\t\t\"millisecond\": language.translate(\"_date_millisecond\"),\r\n\t\t\t\"second\": language.translate(\"_date_second\"),\r\n\t\t\t\"minute\": language.translate(\"_date_minute\"),\r\n\t\t\t\"hour\": language.translate(\"_date_day\"),\r\n\t\t\t\"day\": language.translate(\"_date_day\"),\r\n\t\t\t\"week\": language.translate(\"_date_day\"),\r\n\t\t\t\"month\": language.translate(\"_date_month\") + \" \" + language.translate(\"_date_year\"),\r\n\t\t\t\"year\": language.translate(\"_date_year\")\r\n\t\t};\r\n\r\n\t\tconst tooltipDateFormats = {\r\n\t\t\t\"millisecond\": language.translate(\"_date_millisecond_full\"),\r\n\t\t\t\"second\": language.translate(\"_date_second_full\"),\r\n\t\t\t\"minute\": language.translate(\"_date_minute_full\"),\r\n\t\t\t\"hour\": language.translate(\"_date_hour_full\"),\r\n\t\t\t\"day\": language.translate(\"_date_day_full\"),\r\n\t\t\t\"week\": language.translate(\"_date_week_full\"),\r\n\t\t\t\"month\": language.translate(\"_date_month_full\"),\r\n\t\t\t\"year\": language.translate(\"_date_year\")\r\n\t\t};\r\n\r\n\t\tr(\"CategoryDateAxis\").setAll({\r\n\t\t\tmarkUnitChange: true,\r\n\t\t\tgridIntervals: $array.copy(gridIntervals),\r\n\t\t\tdateFormats: $object.copy(dateFormats),\r\n\t\t\tperiodChangeDateFormats: $object.copy(periodChangeDateFormats)\r\n\t\t});\r\n\r\n\t\tr(\"DateAxis\").setAll({\r\n\t\t\tmaxZoomFactor: null,\r\n\t\t\tstrictMinMax: true,\r\n\t\t\tstartLocation: 0,\r\n\t\t\tendLocation: 1,\r\n\t\t\tmarkUnitChange: true,\r\n\t\t\tgroupData: false,\r\n\t\t\tgroupCount: 500,\r\n\t\t\tskipFirstMinor: true,\r\n\t\t\tweekLabelLocation: 0,\r\n\t\t\tgridIntervals: $array.copy(gridIntervals),\r\n\t\t\tdateFormats: $object.copy(dateFormats),\r\n\t\t\tperiodChangeDateFormats: $object.copy(periodChangeDateFormats),\r\n\t\t\ttooltipDateFormats: tooltipDateFormats,\r\n\r\n\t\t\tgroupIntervals: [\r\n\t\t\t\t{ timeUnit: \"millisecond\", count: 1 },\r\n\t\t\t\t{ timeUnit: \"millisecond\", count: 10 },\r\n\t\t\t\t{ timeUnit: \"millisecond\", count: 100 },\r\n\t\t\t\t{ timeUnit: \"second\", count: 1 },\r\n\t\t\t\t{ timeUnit: \"second\", count: 10 },\r\n\t\t\t\t{ timeUnit: \"minute\", count: 1 },\r\n\t\t\t\t{ timeUnit: \"minute\", count: 10 },\r\n\t\t\t\t{ timeUnit: \"hour\", count: 1 },\r\n\t\t\t\t{ timeUnit: \"day\", count: 1 },\r\n\t\t\t\t{ timeUnit: \"week\", count: 1 },\r\n\t\t\t\t{ timeUnit: \"month\", count: 1 },\r\n\t\t\t\t{ timeUnit: \"year\", count: 1 }\r\n\t\t\t],\r\n\r\n\t\t\tfillRule: (dataItem: DataItem<IValueAxisDataItem>) => {\r\n\t\t\t\tconst axisFill = dataItem.get(\"axisFill\");\r\n\t\t\t\tif (axisFill) {\r\n\t\t\t\t\tconst axis = <DateAxis<AxisRenderer>>dataItem.component;\r\n\t\t\t\t\tconst value = dataItem.get(\"value\");\r\n\t\t\t\t\tconst endValue = dataItem.get(\"endValue\");\r\n\t\t\t\t\tconst intervalDuration = axis.intervalDuration();\r\n\t\t\t\t\tconst baseInterval = axis.getPrivate(\"baseInterval\");\r\n\t\t\t\t\tconst gridInterval = axis.getPrivate(\"gridInterval\", baseInterval);\r\n\r\n\r\n\t\t\t\t\tlet min = axis.getPrivate(\"min\", 0);\r\n\t\t\t\t\tmin = $time.round(new Date(min), gridInterval.timeUnit, gridInterval.count, this._root.locale.firstDayOfWeek, this._root.utc, undefined, this._root.timezone).getTime();\r\n\r\n\t\t\t\t\tif (value != null && endValue != null) {\r\n\t\t\t\t\t\tconst val = Math.round(Math.round((value - min) / intervalDuration)) / 2;\r\n\r\n\t\t\t\t\t\tif (val == Math.round(val)) {\r\n\t\t\t\t\t\t\taxisFill.setPrivate(\"visible\", true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\taxisFill.setPrivate(\"visible\", false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tr(\"GaplessDateAxis\").setAll({\r\n\t\t\tfillRule: (dataItem: DataItem<IGaplessDateAxisDataItem>) => {\r\n\t\t\t\tconst axisFill = dataItem.get(\"axisFill\");\r\n\t\t\t\tif (axisFill) {\r\n\r\n\t\t\t\t\tconst index = dataItem.get(\"index\")\r\n\t\t\t\t\tlet visible = false;\r\n\t\t\t\t\tif (!$type.isNumber(index) || index % 2 == 0) {\r\n\t\t\t\t\t\tvisible = true\r\n\t\t\t\t\t}\r\n\t\t\t\t\taxisFill.setPrivate(\"visible\", visible);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tr(\"ValueAxis\").setAll({\r\n\r\n\t\t\tbaseValue: 0,\r\n\t\t\tlogarithmic: false,\r\n\t\t\tstrictMinMax: false,\r\n\t\t\tautoZoom: true,\r\n\r\n\t\t\tfillRule: (dataItem: DataItem<IValueAxisDataItem>) => {\r\n\t\t\t\tconst axisFill = dataItem.get(\"axisFill\");\r\n\t\t\t\tif (axisFill) {\r\n\t\t\t\t\tconst axis = <ValueAxis<AxisRenderer>>dataItem.component;\r\n\t\t\t\t\tconst value = dataItem.get(\"value\");\r\n\t\t\t\t\tconst step = axis.getPrivate(\"step\");\r\n\r\n\t\t\t\t\tif ($type.isNumber(value) && $type.isNumber(step)) {\r\n\t\t\t\t\t\tif ($math.round(value / step / 2, 5) == Math.round(value / step / 2)) {\r\n\t\t\t\t\t\t\taxisFill.setPrivate(\"visible\", false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\taxisFill.setPrivate(\"visible\", true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tr(\"DurationAxis\").setAll({\r\n\t\t\tbaseUnit: \"second\"\r\n\t\t})\r\n\r\n\r\n\t\t/**\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t * charts/xy: Series\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t */\r\n\r\n\t\tr(\"XYSeries\").setAll({\r\n\t\t\tmaskBullets: true,\r\n\t\t\tstackToNegative: true,\r\n\r\n\t\t\tlocationX: 0.5,\r\n\t\t\tlocationY: 0.5,\r\n\r\n\t\t\tsnapTooltip: false,\r\n\r\n\t\t\topenValueXGrouped: \"open\",\r\n\t\t\topenValueYGrouped: \"open\",\r\n\t\t\tvalueXGrouped: \"close\",\r\n\t\t\tvalueYGrouped: \"close\",\r\n\r\n\t\t\tseriesTooltipTarget: \"series\"\r\n\t\t});\r\n\r\n\t\tr(\"BaseColumnSeries\").setAll({\r\n\t\t\tadjustBulletPosition: true\r\n\t\t});\r\n\r\n\t\tr(\"ColumnSeries\").setAll({\r\n\t\t\tclustered: true\r\n\t\t});\r\n\r\n\t\tr(\"RoundedRectangle\", [\"series\", \"column\"]).setAll({\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tisMeasured: false,\r\n\t\t\twidth: percent(70),\r\n\t\t\theight: percent(70),\r\n\t\t\tstrokeWidth: 1,\r\n\t\t\tstrokeOpacity: 1,\r\n\t\t\tcornerRadiusBL: 0,\r\n\t\t\tcornerRadiusTL: 0,\r\n\t\t\tcornerRadiusBR: 0,\r\n\t\t\tcornerRadiusTR: 0,\r\n\t\t\tfillOpacity: 1,\r\n\t\t\trole: \"figure\"\r\n\t\t});\r\n\r\n\t\tr(\"LineSeries\").setAll({\r\n\t\t\tconnect: true,\r\n\t\t\tautoGapCount: 1.1,\r\n\t\t\tstackToNegative: false\r\n\t\t});\r\n\r\n\t\tr(\"Graphics\", [\"series\", \"stroke\"]).setAll({\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tstrokeWidth: 1,\r\n\t\t\tstrokeOpacity: 1,\r\n\t\t\tisMeasured: false\r\n\t\t});\r\n\r\n\t\tr(\"Graphics\", [\"series\", \"fill\"]).setAll({\r\n\t\t\tvisible: false,\r\n\t\t\tfillOpacity: 0,\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tstrokeWidth: 0,\r\n\t\t\tstrokeOpacity: 0,\r\n\t\t\tisMeasured: false\r\n\t\t});\r\n\r\n\t\tr(\"Graphics\", [\"line\", \"series\", \"legend\", \"marker\", \"stroke\"]).setAll({\r\n\t\t\tdraw: (display: any, sprite: any) => {\r\n\t\t\t\tconst parent = sprite.parent;\r\n\t\t\t\tif (parent) {\r\n\t\t\t\t\tconst h = parent.height();\r\n\t\t\t\t\tconst w = parent.width();\r\n\t\t\t\t\tdisplay.moveTo(0, h / 2);\r\n\t\t\t\t\tdisplay.lineTo(w, h / 2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Graphics\", [\"line\", \"series\", \"legend\", \"marker\", \"stroke\"]).states.create(\"disabled\", {});\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"disabled\");\r\n\t\t}\r\n\r\n\t\tr(\"Graphics\", [\"line\", \"series\", \"legend\", \"marker\", \"fill\"]).setAll({\r\n\t\t\tdraw: (display: any, sprite: any) => {\r\n\t\t\t\tconst parent = sprite.parent;\r\n\t\t\t\tif (parent) {\r\n\t\t\t\t\tconst h = parent.height();\r\n\t\t\t\t\tconst w = parent.width();\r\n\t\t\t\t\tdisplay.moveTo(0, 0);\r\n\t\t\t\t\tdisplay.lineTo(w, 0);\r\n\t\t\t\t\tdisplay.lineTo(w, h);\r\n\t\t\t\t\tdisplay.lineTo(0, h);\r\n\t\t\t\t\tdisplay.lineTo(0, 0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Graphics\", [\"line\", \"series\", \"legend\", \"marker\", \"fill\"]).states.create(\"disabled\", {});\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"disabled\");\r\n\t\t}\r\n\r\n\t\tr(\"SmoothedXYLineSeries\").setAll({\r\n\t\t\ttension: 0.5\r\n\t\t});\r\n\r\n\t\tr(\"SmoothedXLineSeries\").setAll({\r\n\t\t\ttension: 0.5\r\n\t\t});\r\n\r\n\t\tr(\"SmoothedYLineSeries\").setAll({\r\n\t\t\ttension: 0.5\r\n\t\t});\r\n\r\n\t\tr(\"Candlestick\").setAll({\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tisMeasured: false,\r\n\t\t\twidth: percent(50),\r\n\t\t\theight: percent(50),\r\n\t\t\tstrokeWidth: 1,\r\n\t\t\tstrokeOpacity: 1,\r\n\t\t\tcornerRadiusBL: 0,\r\n\t\t\tcornerRadiusTL: 0,\r\n\t\t\tcornerRadiusBR: 0,\r\n\t\t\tcornerRadiusTR: 0,\r\n\t\t\tfillOpacity: 1,\r\n\t\t\trole: \"figure\"\r\n\t\t});\r\n\r\n\t\tr(\"OHLC\").setAll({\r\n\t\t\twidth: percent(80),\r\n\t\t\theight: percent(80)\r\n\t\t});\r\n\r\n\t\tr(\"CandlestickSeries\").setAll({\r\n\t\t\tlowValueXGrouped: \"low\",\r\n\t\t\tlowValueYGrouped: \"low\",\r\n\t\t\thighValueXGrouped: \"high\",\r\n\t\t\thighValueYGrouped: \"high\",\r\n\t\t\topenValueXGrouped: \"open\",\r\n\t\t\topenValueYGrouped: \"open\",\r\n\t\t\tvalueXGrouped: \"close\",\r\n\t\t\tvalueYGrouped: \"close\"\r\n\t\t})\r\n\r\n\t\t// These rules can be used for regular columns, too\r\n\t\t{\r\n\t\t\tconst rule = r(\"Rectangle\", [\"column\", \"autocolor\"]).states.create(\"riseFromOpen\", {});\r\n\t\t\tsetColor(rule, \"fill\", ic, \"positive\");\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"positive\");\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Rectangle\", [\"column\", \"autocolor\"]).states.create(\"dropFromOpen\", {});\r\n\t\t\tsetColor(rule, \"fill\", ic, \"negative\");\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"negative\");\r\n\t\t}\r\n\r\n\t\t// Hollow\r\n\t\tr(\"Rectangle\", [\"column\", \"autocolor\", \"pro\"]).states.create(\"riseFromOpen\", { fillOpacity: 0 });\r\n\t\tr(\"Rectangle\", [\"column\", \"autocolor\", \"pro\"]).states.create(\"dropFromOpen\", { fillOpacity: 1 });\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Rectangle\", [\"column\", \"autocolor\", \"pro\"]).states.create(\"riseFromPrevious\", {});\r\n\t\t\tsetColor(rule, \"fill\", ic, \"positive\");\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"positive\");\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Rectangle\", [\"column\", \"autocolor\", \"pro\"]).states.create(\"dropFromPrevious\", {});\r\n\t\t\tsetColor(rule, \"fill\", ic, \"negative\");\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"negative\");\r\n\t\t}\r\n\r\n\r\n\t\t// AXIS RANGE GRIP\r\n\t\t{\r\n\t\t\tconst rule = r(\"RoundedRectangle\", [\"rangegrip\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tstrokeOpacity: 0,\r\n\t\t\t\tfillOpacity: 0,\r\n\t\t\t\tstrokeWidth: 1,\r\n\t\t\t\twidth: 12,\r\n\t\t\t\theight: 12\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Graphics\", [\"rangegrip\", \"button\", \"icon\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tinteractive: false,\r\n\t\t\t\tcrisp: true,\r\n\t\t\t\tstrokeOpacity: 0.5,\r\n\t\t\t\tdraw: (display: any) => {\r\n\t\t\t\t\tdisplay.moveTo(0, 0.5);\r\n\t\t\t\t\tdisplay.lineTo(0, 12.5);\r\n\r\n\t\t\t\t\tdisplay.moveTo(2, 0.5);\r\n\t\t\t\t\tdisplay.lineTo(2, 12.5);\r\n\r\n\t\t\t\t\tdisplay.moveTo(4, 0.5);\r\n\t\t\t\t\tdisplay.lineTo(4, 12.5);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"secondaryButtonText\");\r\n\t\t}\r\n\r\n\t\tr(\"Button\", [\"rangegrip\"]).setAll({\r\n\t\t\tdraggable: true,\r\n\t\t\tpaddingTop: 0,\r\n\t\t\tpaddingBottom: 0\r\n\t\t})\r\n\r\n\t\tr(\"Button\", [\"rangegrip\", \"vertical\"]).setAll({\r\n\t\t\trotation: 90,\r\n\t\t\tcursorOverStyle: \"ns-resize\",\r\n\t\t\tcenterX: p50\r\n\t\t});\r\n\r\n\t\tr(\"Button\", [\"rangegrip\", \"horizontal\"]).setAll({\r\n\t\t\tcursorOverStyle: \"ew-resize\",\r\n\t\t\tcenterX: p50\r\n\t\t});\r\n\r\n\t\tr(\"Button\", [\"rangegrip\", \"vertical\", \"left\"]).setAll({\r\n\t\t\tcenterY: p100\r\n\t\t});\r\n\r\n\t\tr(\"Button\", [\"rangegrip\", \"vertical\", \"right\"]).setAll({\r\n\t\t\tcenterY: 0\r\n\t\t});\r\n\r\n\t\tr(\"Button\", [\"rangegrip\", \"horizontal\", \"top\"]).setAll({\r\n\t\t\tcenterY: 0\r\n\t\t});\r\n\r\n\t\tr(\"Button\", [\"rangegrip\", \"horizontal\", \"bottom\"]).setAll({\r\n\t\t\tcenterY: p100\r\n\t\t});\r\n\r\n\t}\r\n}\r\n","import type { Axis } from \"./axes/Axis\";\nimport type { XYCursor } from \"./XYCursor\";\nimport type { AxisRenderer } from \"./axes/AxisRenderer\";\nimport type { DataItem } from \"../../core/render/Component\";\nimport type { IDisposer } from \"../../core/util/Disposer\";\nimport type { XYSeries, IXYSeriesDataItem } from \"./series/XYSeries\";\nimport type { IPointerEvent } from \"../../core/render/backend/Renderer\";;\nimport type { Scrollbar } from \"../../core/render/Scrollbar\";\nimport type { Tooltip } from \"../../core/render/Tooltip\";\nimport type { IPoint } from \"../../core/util/IPoint\";\nimport type { ISpritePointerEvent } from \"../../core/render/Sprite\";\nimport type { Animation } from \"../../core/util/Entity\";\nimport type { CategoryAxis } from \"./axes/CategoryAxis\";\nimport type { DateAxis } from \"./axes/DateAxis\";\n\nimport { XYChartDefaultTheme } from \"./XYChartDefaultTheme\";\nimport { Container } from \"../../core/render/Container\";\nimport { Rectangle } from \"../../core/render/Rectangle\";\nimport { SerialChart, ISerialChartPrivate, ISerialChartSettings, ISerialChartEvents } from \"../../core/render/SerialChart\";\nimport { ListAutoDispose } from \"../../core/util/List\";\nimport { p100 } from \"../../core/util/Percent\";\nimport { Button } from \"../../core/render/Button\";\nimport { Graphics } from \"../../core/render/Graphics\";\nimport { Percent } from \"../../core/util/Percent\";\n\nimport * as $array from \"../../core/util/Array\";\nimport * as $type from \"../../core/util/Type\";\nimport * as $order from \"../../core/util/Order\";\nimport * as $object from \"../../core/util/Object\";\nimport * as $utils from \"../../core/util/Utils\";\nimport * as $math from \"../../core/util/Math\";\n\nexport interface IXYChartSettings extends ISerialChartSettings {\n\n\t/**\n\t * horizontal scrollbar.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/scrollbars/} for more info\n\t */\n\tscrollbarX?: Scrollbar;\n\n\t/**\n\t * Vertical scrollbar.\n\t *\n\t */\n\tscrollbarY?: Scrollbar;\n\n\t/**\n\t * If this is set to `true`, users will be able to pan the chart horizontally\n\t * by dragging plot area.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Panning} for more info\n\t */\n\tpanX?: boolean;\n\n\t/**\n\t * If this is set to `true`, users will be able to pan the chart vertically\n\t * by dragging plot area.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Panning} for more info\n\t */\n\tpanY?: boolean;\n\n\t/**\n\t * Indicates what happens when mouse wheel is spinned horizontally while over\n\t * plot area.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Mouse_wheel_behavior} for more info\n\t */\n\twheelX?: \"zoomX\" | \"zoomY\" | \"zoomXY\" | \"panX\" | \"panY\" | \"panXY\" | \"none\";\n\n\t/**\n\t * Indicates what happens when mouse wheel is spinned vertically while over\n\t * plot area.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Mouse_wheel_behavior} for more info\n\t */\n\twheelY?: \"zoomX\" | \"zoomY\" | \"zoomXY\" | \"panX\" | \"panY\" | \"panXY\" | \"none\";\n\n\t/**\n\t * Indicates the relative \"speed\" of the mouse wheel.\n\t *\n\t * @default 0.25\n\t */\n\twheelStep?: number;\n\n\t/**\n\t * Chart's cursor.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/} for more info\n\t */\n\tcursor?: XYCursor;\n\n\t/**\n\t * If not set (default), cursor will show tooltips for all data items in the\n\t * same category/date.\n\t *\n\t * If set, cursor will select closest data item to pointer (mouse or touch) and\n\t * show tooltip for it.\n\t *\n\t * It will also show tooltips for all data items that are within X pixels\n\t * range (as set in `maxTooltipDistance`).\n\t *\n\t * Tooltips for data items farther then X pixels, will not be shown.\n\t *\n\t * NOTE: set it to `-1` to ensure only one tooltip is displayed, even if there\n\t * are multiple data items in the same place.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/#tooltips} for more info\n\t */\n\tmaxTooltipDistance?: number;\n\n\t/**\n\t * Indicates how the distance should be measured when assessing distance\n\t * between tooltips as set in `maxTooltipDistance`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/#tooltips} for more info\n\t * @since 5.2.6\n\t */\n\tmaxTooltipDistanceBy?: \"xy\" | \"x\" | \"y\";\n\n\t/**\n\t * If set to `false` the chart will not check for overlapping of multiple\n\t * tooltips, and will not arrange them to not overlap.\n\t *\n\t * Will work only if chart has an `XYCursor` enabled.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/#ooltips} for more info\n\t * @default true\n\t */\n\tarrangeTooltips?: boolean\n\n\t/**\n\t * If set to `true`, using pinch gesture on the chart's plot area will zoom\n\t * chart horizontally.\n\t *\n\t * NOTE: this setting is not supported in a [[RadarChart]].\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Pinch_zoom} for more info\n\t * @since 5.1.8\n\t * @default false\n\t */\n\tpinchZoomX?: boolean;\n\n\t/**\n\t * If set to `true`, using pinch gesture on the chart's plot area will zoom\n\t * chart vertically.\n\t *\n\t * NOTE: this setting is not supported in a [[RadarChart]].\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Pinch_zoom} for more info\n\t * @since 5.1.8\n\t * @default false\n\t */\n\tpinchZoomY?: boolean;\n\n\t/**\n\t * If set, will use this relative position as a \"center\" for mouse wheel\n\t * horizontal zooming instead of actual cursor position.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Mouse_wheel_behavior} for more info\n\t * @since 5.2.11\n\t */\n\twheelZoomPositionX?: number;\n\n\t/**\n\t * If set, will use this relative position as a \"center\" for mouse wheel\n\t * vertical zooming instead of actual cursor position.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Mouse_wheel_behavior} for more info\n\t * @since 5.2.11\n\t */\n\twheelZoomPositionY?: number;\n\n}\n\nexport interface IXYChartPrivate extends ISerialChartPrivate {\n\n\t/**\n\t * A list of [[Series]] that currently have their tooltip being displayed.\n\t */\n\ttooltipSeries?: Array<XYSeries>\n\n\t/**\n\t * Array of other [[XYChart]] objects that cursors should be synced with.\n\t *\n\t * Note: cursors will be synced across the vertically stacked charts only.\n\t */\n\totherCharts?: Array<XYChart>\n\n}\n\n\nexport interface IXYChartEvents extends ISerialChartEvents {\n\n\t/**\n\t * Invoked when panning starts.\n\t *\n\t * @since 5.0.4\n\t */\n\tpanstarted: {\n\t\toriginalEvent: IPointerEvent\n\t};\n\n\t/**\n\t * Invoked when panning ends.\n\t *\n\t * @since 5.0.4\n\t */\n\tpanended: {\n\t\toriginalEvent: IPointerEvent\n\t};\n\n\t/**\n\t * Invoked if pointer is pressed down on a chart and released without moving.\n\t *\n\t * `panended` event will still kick in after that.\n\t *\n\t * @since 5.2.19\n\t */\n\tpancancelled: {\n\t\toriginalEvent: IPointerEvent\n\t};\n\n\t/**\n\t * Invoked when wheel caused zoom ends.\n\t *\n\t * @since 5.0.4\n\t */\n\twheelended: {};\n\n}\n\n/**\n * Creates an XY chart.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/} for more info\n * @important\n */\nexport class XYChart extends SerialChart {\n\n\tpublic static className: string = \"XYChart\";\n\tpublic static classNames: Array<string> = SerialChart.classNames.concat([XYChart.className]);\n\n\tdeclare public _settings: IXYChartSettings;\n\tdeclare public _privateSettings: IXYChartPrivate;\n\tdeclare public _seriesType: XYSeries;\n\tdeclare public _events: IXYChartEvents;\n\n\t/**\n\t * A list of horizontal axes.\n\t */\n\tpublic readonly xAxes: ListAutoDispose<Axis<AxisRenderer>> = new ListAutoDispose();\n\n\t/**\n\t * A list of vertical axes.\n\t */\n\tpublic readonly yAxes: ListAutoDispose<Axis<AxisRenderer>> = new ListAutoDispose();\n\n\t/**\n\t * A [[Container]] located on top of the chart, used to store top horizontal\n\t * axes.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly topAxesContainer: Container = this.chartContainer.children.push(Container.new(this._root, { width: p100, layout: this._root.verticalLayout }));\n\n\t/**\n\t * A [[Container]] located in the middle the chart, used to store vertical axes\n\t * and plot area container.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly yAxesAndPlotContainer: Container = this.chartContainer.children.push(Container.new(this._root, { width: p100, height: p100, layout: this._root.horizontalLayout }));\n\n\t/**\n\t * A [[Container]] located on bottom of the chart, used to store bottom\n\t * horizontal axes.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly bottomAxesContainer: Container = this.chartContainer.children.push(Container.new(this._root, { width: p100, layout: this._root.verticalLayout }));\n\n\t/**\n\t * A [[Container]] located on left of the chart, used to store left-hand\n\t * vertical axes.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly leftAxesContainer: Container = this.yAxesAndPlotContainer.children.push(Container.new(this._root, { height: p100, layout: this._root.horizontalLayout }));\n\n\t/**\n\t * A [[Container]] located in the middle of the chart, used to store plotContainer and topPlotContainer\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly plotsContainer: Container = this.yAxesAndPlotContainer.children.push(Container.new(this._root, { width: p100, height: p100, maskContent: false }));\n\n\t/**\n\t * A [[Container]] located in the middle of the chart, used to store actual\n\t * plots (series).\n\t *\n\t * NOTE: `plotContainer` will automatically have its `background` preset. If\n\t * you need to modify background or outline for chart's plot area, you can\n\t * use `plotContainer.get(\"background\")` for that.*\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly plotContainer: Container = this.plotsContainer.children.push(Container.new(this._root, { width: p100, height: p100 }));\n\n\t/**\n\t * A [[Container]] used for any elements that need to be displayed over\n\t * regular `plotContainer`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly topPlotContainer: Container = this.plotsContainer.children.push(Container.new(this._root, { width: p100, height: p100 }));\n\n\t/**\n\t * A [[Container]] axis grid elements are stored in.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly gridContainer: Container = this.plotContainer.children.push(Container.new(this._root, { width: p100, height: p100, isMeasured: false }));\n\n\t/**\n\t * A [[Container]] axis background grid elements are stored in.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly topGridContainer: Container = Container.new(this._root, { width: p100, height: p100, isMeasured: false });\n\n\t/**\n\t * A [[Container]] located on right of the chart, used to store right-hand\n\t * vertical axes.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly rightAxesContainer: Container = this.yAxesAndPlotContainer.children.push(Container.new(this._root, { height: p100, layout: this._root.horizontalLayout }));\n\n\t/**\n\t * A [[Container]] axis headers are stored in.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-headers/} for more info\n\t * @default Container.new()\n\t */\n\tpublic readonly axisHeadersContainer: Container = this.plotContainer.children.push(Container.new(this._root, {}));\n\n\t/**\n\t * A button that is shown when chart is not fully zoomed out.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Zoom_out_button} for more info\n\t * @default Button.new()\n\t */\n\tpublic readonly zoomOutButton: Button = this.topPlotContainer.children.push(Button.new(this._root, {\n\t\tthemeTags: [\"zoom\"],\n\t\ticon: Graphics.new(this._root, {\n\t\t\tthemeTags: [\"button\", \"icon\"]\n\t\t})\n\t}));\n\n\tpublic _movePoint: IPoint = { x: 0, y: 0 };\n\n\tprotected _wheelDp: IDisposer | undefined;\n\n\tpublic _otherCharts?: Array<XYChart>;\n\n\tprotected _movePoints: { [index: number]: IPoint } = {};\n\n\tprotected _downStartX?: number;\n\tprotected _downEndX?: number;\n\n\tprotected _downStartY?: number;\n\tprotected _downEndY?: number;\n\n\tprotected _afterNew() {\n\t\tthis._defaultThemes.push(XYChartDefaultTheme.new(this._root));\n\n\t\tsuper._afterNew();\n\n\t\tthis._disposers.push(this.xAxes);\n\t\tthis._disposers.push(this.yAxes);\n\n\t\tconst root = this._root;\n\n\t\tlet verticalLayout = this._root.verticalLayout;\n\n\t\tconst zoomOutButton = this.zoomOutButton;\n\t\tzoomOutButton.events.on(\"click\", () => {\n\t\t\tthis.zoomOut();\n\t\t})\n\t\tzoomOutButton.hide(0);\n\t\tzoomOutButton.states.lookup(\"default\")!.set(\"opacity\", 1);\n\n\t\tthis.chartContainer.set(\"layout\", verticalLayout);\n\n\t\tconst plotContainer = this.plotContainer;\n\t\tplotContainer.children.push(this.seriesContainer);\n\n\t\tthis._disposers.push(this._processAxis(this.xAxes, this.bottomAxesContainer));\n\t\tthis._disposers.push(this._processAxis(this.yAxes, this.leftAxesContainer));\n\n\n\t\tplotContainer.children.push(this.topGridContainer);\n\t\tplotContainer.children.push(this.bulletsContainer);\n\n\t\t// Setting trasnparent background so that full body of the plot container\n\t\t// is interactive\n\t\tplotContainer.set(\"interactive\", true);\n\t\tplotContainer.set(\"interactiveChildren\", false);\n\t\tplotContainer.set(\"background\", Rectangle.new(root, {\n\t\t\tthemeTags: [\"plotbackground\", \"xy\", \"background\"]\n\t\t}));\n\n\t\tthis._disposers.push(plotContainer.events.on(\"pointerdown\", (event) => {\n\t\t\tthis._handlePlotDown(event);\n\t\t}));\n\n\t\tthis._disposers.push(plotContainer.events.on(\"globalpointerup\", (event) => {\n\t\t\tthis._handlePlotUp(event);\n\t\t}));\n\n\t\tthis._disposers.push(plotContainer.events.on(\"globalpointermove\", (event) => {\n\t\t\tthis._handlePlotMove(event);\n\t\t}));\n\n\t\tthis._maskGrid();\n\t\tthis._setUpTouch();\n\t}\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"pinchZoomX\") || this.isDirty(\"pinchZoomY\") || this.get(\"panX\") || this.get(\"panY\")) {\n\t\t\tthis._setUpTouch();\n\t\t}\n\n\t}\n\n\tprotected _setUpTouch(): void {\n\t\tif (!this.plotContainer._display.cancelTouch) {\n\t\t\tthis.plotContainer._display.cancelTouch = (this.get(\"pinchZoomX\") || this.get(\"pinchZoomY\") || this.get(\"panX\") || this.get(\"panY\")) ? true : false;\n\t\t}\n\t}\n\n\tprotected _maskGrid() {\n\t\tthis.gridContainer.set(\"maskContent\", true);\n\t\tthis.topGridContainer.set(\"maskContent\", true);\n\t}\n\n\tprotected _removeSeries(series: this[\"_seriesType\"]) {\n\t\tseries._unstack();\n\n\t\tif (series._posXDp) {\n\t\t\tseries._posXDp.dispose();\n\t\t}\n\n\t\tif (series._posYDp) {\n\t\t\tseries._posYDp.dispose();\n\t\t}\n\n\t\tseries.set(\"baseAxis\", undefined);\n\n\t\tconst xAxis = series.get(\"xAxis\");\n\t\tif (xAxis) {\n\t\t\t$array.remove(xAxis.series, series);\n\t\t\txAxis.markDirtyExtremes();\n\t\t}\n\t\tconst yAxis = series.get(\"yAxis\");\n\t\tif (yAxis) {\n\t\t\t$array.remove(yAxis.series, series);\n\t\t\tyAxis.markDirtyExtremes();\n\t\t}\n\n\t\tconst cursor = this.get(\"cursor\");\n\t\tif (cursor) {\n\t\t\tconst snapToSeries = cursor.get(\"snapToSeries\");\n\t\t\tif (snapToSeries) {\n\t\t\t\t$array.remove(snapToSeries, series);\n\t\t\t}\n\t\t}\n\n\t\tsuper._removeSeries(series);\n\t}\n\n\t/**\n\t * This method is invoked when mouse wheel is used over chart's plot\n\t * container, and handles zooming/pan.\n\t *\n\t * You can invoke this method manually, if you need to mimic chart's wheel\n\t * behavior over other elements of the chart.\n\t */\n\tpublic handleWheel(event: { originalEvent: WheelEvent, point: IPoint, target: Container }) {\n\t\tconst wheelX = this.get(\"wheelX\");\n\t\tconst wheelY = this.get(\"wheelY\");\n\t\tconst plotContainer = this.plotContainer;\n\n\t\tconst wheelEvent = event.originalEvent;\n\n\t\t// Ignore wheel event if it is happening on a non-chart element, e.g. if\n\t\t// some page element is over the chart.\n\t\tlet prevent = false;\n\t\tif ($utils.isLocalEvent(wheelEvent, this)) {\n\t\t\tprevent = true;\n\t\t}\n\t\telse {\n\t\t\treturn;\n\t\t}\n\n\t\tconst plotPoint = plotContainer.toLocal(event.point);\n\t\tconst wheelStep = this.get(\"wheelStep\", 0.2);\n\n\t\tconst shiftY = wheelEvent.deltaY / 100;\n\t\tconst shiftX = wheelEvent.deltaX / 100;\n\n\t\tconst wheelZoomPositionX = this.get(\"wheelZoomPositionX\");\n\t\tconst wheelZoomPositionY = this.get(\"wheelZoomPositionY\");\n\n\n\t\tif ((wheelX === \"zoomX\" || wheelX === \"zoomXY\") && shiftX != 0) {\n\t\t\tthis.xAxes.each((axis) => {\n\t\t\t\tif (axis.get(\"zoomX\")) {\n\t\t\t\t\tlet start = axis.get(\"start\")!;\n\t\t\t\t\tlet end = axis.get(\"end\")!;\n\n\t\t\t\t\tlet position = axis.fixPosition(plotPoint.x / plotContainer.width());\n\n\t\t\t\t\tif (wheelZoomPositionX != null) {\n\t\t\t\t\t\tposition = wheelZoomPositionX;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet maxDeviation = axis.get(\"maxDeviation\", 0);\n\n\t\t\t\t\tlet newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftX * position));\n\t\t\t\t\tlet newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftX * (1 - position)));\n\n\t\t\t\t\tif (newStart == start && newEnd == end) {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\n\t\t\t\t\t\tthis._handleWheelAnimation(axis.zoom(newStart, newEnd));\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tif ((wheelY === \"zoomX\" || wheelY === \"zoomXY\") && shiftY != 0) {\n\t\t\tthis.xAxes.each((axis) => {\n\t\t\t\tif (axis.get(\"zoomX\")) {\n\t\t\t\t\tlet start = axis.get(\"start\")!;\n\t\t\t\t\tlet end = axis.get(\"end\")!;\n\n\t\t\t\t\tlet position = axis.fixPosition(plotPoint.x / plotContainer.width());\n\n\t\t\t\t\tif (wheelZoomPositionX != null) {\n\t\t\t\t\t\tposition = wheelZoomPositionX;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet maxDeviation = axis.get(\"maxDeviation\", 0);\n\n\t\t\t\t\tlet newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftY * position));\n\t\t\t\t\tlet newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftY * (1 - position)));\n\n\t\t\t\t\tif (newStart == start && newEnd == end) {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\n\t\t\t\t\t\tthis._handleWheelAnimation(axis.zoom(newStart, newEnd));\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\n\t\tif ((wheelX === \"zoomY\" || wheelX === \"zoomXY\") && shiftX != 0) {\n\t\t\tthis.yAxes.each((axis) => {\n\t\t\t\tif (axis.get(\"zoomY\")) {\n\t\t\t\t\tlet start = axis.get(\"start\")!;\n\t\t\t\t\tlet end = axis.get(\"end\")!;\n\n\t\t\t\t\tlet position = axis.fixPosition(plotPoint.y / plotContainer.height());\n\n\t\t\t\t\tif (wheelZoomPositionY != null) {\n\t\t\t\t\t\tposition = wheelZoomPositionY;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet maxDeviation = axis.get(\"maxDeviation\", 0);\n\n\t\t\t\t\tlet newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftX * position));\n\t\t\t\t\tlet newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftX * (1 - position)));\n\n\t\t\t\t\tif (newStart == start && newEnd == end) {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\n\t\t\t\t\t\tthis._handleWheelAnimation(axis.zoom(newStart, newEnd));\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tif ((wheelY === \"zoomY\" || wheelY === \"zoomXY\") && shiftY != 0) {\n\t\t\tthis.yAxes.each((axis) => {\n\t\t\t\tif (axis.get(\"zoomY\")) {\n\t\t\t\t\tlet start = axis.get(\"start\")!;\n\t\t\t\t\tlet end = axis.get(\"end\")!;\n\n\t\t\t\t\tlet position = axis.fixPosition(plotPoint.y / plotContainer.height());\n\n\t\t\t\t\tif (wheelZoomPositionY != null) {\n\t\t\t\t\t\tposition = wheelZoomPositionY;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet maxDeviation = axis.get(\"maxDeviation\", 0);\n\n\t\t\t\t\tlet newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftY * position));\n\t\t\t\t\tlet newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftY * (1 - position)));\n\n\t\t\t\t\tif (newStart == start && newEnd == end) {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\n\t\t\t\t\t\tthis._handleWheelAnimation(axis.zoom(newStart, newEnd));\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\n\t\tif ((wheelX === \"panX\" || wheelX === \"panXY\") && shiftX != 0) {\n\t\t\tthis.xAxes.each((axis) => {\n\t\t\t\tif (axis.get(\"panX\")) {\n\t\t\t\t\tlet start = axis.get(\"start\")!;\n\t\t\t\t\tlet end = axis.get(\"end\")!;\n\n\t\t\t\t\tlet delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftX;\n\t\t\t\t\tlet newStart = start + delta;\n\t\t\t\t\tlet newEnd = end + delta;\n\n\t\t\t\t\tlet se = this._fixWheel(newStart, newEnd);\n\t\t\t\t\tnewStart = se[0];\n\t\t\t\t\tnewEnd = se[1];\n\n\t\t\t\t\tif (newStart == start && newEnd == end) {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._handleWheelAnimation(axis.zoom(newStart, newEnd));\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tif ((wheelY === \"panX\" || wheelY === \"panXY\") && shiftY != 0) {\n\t\t\tthis.xAxes.each((axis) => {\n\t\t\t\tif (axis.get(\"panX\")) {\n\t\t\t\t\tlet start = axis.get(\"start\")!;\n\t\t\t\t\tlet end = axis.get(\"end\")!;\n\n\t\t\t\t\tlet delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftY;\n\t\t\t\t\tlet newStart = start + delta;\n\t\t\t\t\tlet newEnd = end + delta;\n\n\t\t\t\t\tlet se = this._fixWheel(newStart, newEnd);\n\t\t\t\t\tnewStart = se[0];\n\t\t\t\t\tnewEnd = se[1];\n\n\t\t\t\t\tif (newStart == start && newEnd == end) {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._handleWheelAnimation(axis.zoom(newStart, newEnd));\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tif ((wheelX === \"panY\" || wheelX === \"panXY\") && shiftX != 0) {\n\t\t\tthis.yAxes.each((axis) => {\n\t\t\t\tif (axis.get(\"panY\")) {\n\t\t\t\t\tlet start = axis.get(\"start\")!;\n\t\t\t\t\tlet end = axis.get(\"end\")!;\n\n\t\t\t\t\tlet delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftX;\n\t\t\t\t\tlet newStart = start + delta;\n\t\t\t\t\tlet newEnd = end + delta;\n\n\t\t\t\t\tlet se = this._fixWheel(newStart, newEnd);\n\t\t\t\t\tnewStart = se[0];\n\t\t\t\t\tnewEnd = se[1];\n\n\t\t\t\t\tif (newStart == start && newEnd == end) {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._handleWheelAnimation(axis.zoom(newStart, newEnd));\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tif ((wheelY === \"panY\" || wheelY === \"panXY\") && shiftY != 0) {\n\t\t\tthis.yAxes.each((axis) => {\n\t\t\t\tif (axis.get(\"panY\")) {\n\t\t\t\t\tlet start = axis.get(\"start\")!;\n\t\t\t\t\tlet end = axis.get(\"end\")!;\n\n\t\t\t\t\tlet delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftY;\n\t\t\t\t\tlet newStart = start - delta;\n\t\t\t\t\tlet newEnd = end - delta;\n\n\t\t\t\t\tlet se = this._fixWheel(newStart, newEnd);\n\t\t\t\t\tnewStart = se[0];\n\t\t\t\t\tnewEnd = se[1];\n\n\t\t\t\t\tif (newStart == start && newEnd == end) {\n\t\t\t\t\t\tprevent = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._handleWheelAnimation(axis.zoom(newStart, newEnd));\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tif (prevent) {\n\t\t\twheelEvent.preventDefault();\n\t\t}\n\t}\n\n\tprotected _handleSetWheel() {\n\t\tconst wheelX = this.get(\"wheelX\");\n\t\tconst wheelY = this.get(\"wheelY\");\n\t\tconst plotContainer = this.plotContainer;\n\n\t\tif (wheelX !== \"none\" || wheelY !== \"none\") {\n\t\t\tthis._wheelDp = plotContainer.events.on(\"wheel\", (event) => {\n\t\t\t\tconst wheelEvent = event.originalEvent;\n\t\t\t\tif ((wheelX !== \"none\" && Math.abs(wheelEvent.deltaX) != 0) || (wheelY !== \"none\" && Math.abs(wheelEvent.deltaY) != 0)) {\n\t\t\t\t\tthis.handleWheel(event);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis._disposers.push(this._wheelDp);\n\t\t}\n\t\telse {\n\t\t\tif (this._wheelDp) {\n\t\t\t\tthis._wheelDp.dispose();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _getWheelSign(axis: Axis<AxisRenderer>) {\n\t\tlet sign = 1;\n\t\tif (axis.get(\"renderer\").get(\"inversed\")) {\n\t\t\tsign = -1;\n\t\t}\n\n\t\treturn sign\n\t}\n\n\tprotected _fixWheel(start: number, end: number): [number, number] {\n\t\tconst diff = end - start;\n\t\tif (start < 0) {\n\t\t\tstart = 0;\n\t\t\tend = start + diff;\n\t\t}\n\t\tif (end > 1) {\n\t\t\tend = 1;\n\t\t\tstart = end - diff;\n\t\t}\n\n\t\treturn [start, end];\n\t}\n\n\tprotected _handlePlotDown(event: ISpritePointerEvent) {\n\t\tconst originalEvent = event.originalEvent as any;\n\n\t\tif (originalEvent.button == 2) {\n\t\t\treturn;\n\t\t}\n\t\tconst plotContainer = this.plotContainer;\n\t\tlet local = plotContainer.toLocal(event.point);\n\n\t\tif (this.get(\"pinchZoomX\") || this.get(\"pinchZoomY\")) {\n\t\t\tconst pointerId = originalEvent.pointerId;\n\n\t\t\tif (pointerId) {\n\n\t\t\t\tif ($object.keys(plotContainer._downPoints).length > 0) {\n\t\t\t\t\tconst xAxis = this.xAxes.getIndex(0);\n\t\t\t\t\tconst yAxis = this.yAxes.getIndex(0);\n\n\n\t\t\t\t\tif (xAxis) {\n\t\t\t\t\t\tthis._downStartX = xAxis.get(\"start\", 0);\n\t\t\t\t\t\tthis._downEndX = xAxis.get(\"end\", 1);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (yAxis) {\n\t\t\t\t\t\tthis._downStartY = yAxis.get(\"start\", 0);\n\t\t\t\t\t\tthis._downEndY = yAxis.get(\"end\", 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.get(\"panX\") || this.get(\"panY\")) {\n\n\t\t\tif (local.x >= 0 && local.y >= 0 && local.x <= plotContainer.width() && local.y <= this.height()) {\n\t\t\t\t//this._downPoint = local;\n\t\t\t\tthis._downPoint = { x: originalEvent.clientX, y: originalEvent.clientY };\n\n\t\t\t\tconst panX = this.get(\"panX\");\n\t\t\t\tconst panY = this.get(\"panY\");\n\n\t\t\t\tif (panX) {\n\t\t\t\t\tthis.xAxes.each((axis) => {\n\t\t\t\t\t\taxis._panStart = axis.get(\"start\")!;\n\t\t\t\t\t\taxis._panEnd = axis.get(\"end\")!;\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif (panY) {\n\t\t\t\t\tthis.yAxes.each((axis) => {\n\t\t\t\t\t\taxis._panStart = axis.get(\"start\")!;\n\t\t\t\t\t\taxis._panEnd = axis.get(\"end\")!;\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tconst eventType = \"panstarted\";\n\t\t\t\tif (this.events.isEnabled(eventType)) {\n\t\t\t\t\tthis.events.dispatch(eventType, { type: eventType, target: this, originalEvent: event.originalEvent });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _handleWheelAnimation(animation?: Animation<any>) {\n\t\tif (animation) {\n\t\t\tanimation.events.on(\"stopped\", () => {\n\t\t\t\tthis._dispatchWheelAnimation();\n\t\t\t})\n\t\t}\n\t\telse {\n\t\t\tthis._dispatchWheelAnimation();\n\t\t}\n\t}\n\n\tprotected _dispatchWheelAnimation() {\n\t\tconst eventType = \"wheelended\";\n\t\tif (this.events.isEnabled(eventType)) {\n\t\t\tthis.events.dispatch(eventType, { type: eventType, target: this });\n\t\t}\n\t}\n\n\tprotected _handlePlotUp(event: ISpritePointerEvent) {\n\t\tconst downPoint = this._downPoint;\n\t\tif (downPoint) {\n\t\t\tif (this.get(\"panX\") || this.get(\"panY\")) {\n\t\t\t\tif (event.originalEvent.clientX == downPoint.x && event.originalEvent.clientY == downPoint.y) {\n\t\t\t\t\tconst eventType = \"pancancelled\";\n\t\t\t\t\tif (this.events.isEnabled(eventType)) {\n\t\t\t\t\t\tthis.events.dispatch(eventType, { type: eventType, target: this, originalEvent: event.originalEvent });\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst eventType = \"panended\";\n\t\t\t\tif (this.events.isEnabled(eventType)) {\n\t\t\t\t\tthis.events.dispatch(eventType, { type: eventType, target: this, originalEvent: event.originalEvent });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// TODO: handle multitouch\n\t\tthis._downPoint = undefined;\n\t\tthis.xAxes.each((xAxis) => {\n\t\t\txAxis._isPanning = false;\n\t\t})\n\t\tthis.yAxes.each((yAxis) => {\n\t\t\tyAxis._isPanning = false;\n\t\t})\n\t}\n\n\tprotected _handlePlotMove(event: ISpritePointerEvent) {\n\t\tconst plotContainer = this.plotContainer;\n\n\t\tif (this.get(\"pinchZoomX\") || this.get(\"pinchZoomY\")) {\n\t\t\tconst touchEvent = event.originalEvent as any;\n\t\t\tconst pointerId = touchEvent.pointerId;\n\n\t\t\tif (pointerId) {\n\t\t\t\tthis._movePoints[pointerId] = event.point;\n\n\t\t\t\tif ($object.keys(plotContainer._downPoints).length > 1) {\n\t\t\t\t\tthis._handlePinch();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet downPoint = this._downPoint!;\n\n\t\tif (downPoint) {\n\n\t\t\tdownPoint = plotContainer.toLocal(this._root.documentPointToRoot(downPoint));\n\t\t\tlet local = plotContainer.toLocal(event.point);\n\n\t\t\tconst panX = this.get(\"panX\");\n\t\t\tconst panY = this.get(\"panY\");\n\n\t\t\tif (panX) {\n\n\t\t\t\tlet scrollbarX = this.get(\"scrollbarX\");\n\t\t\t\tif (scrollbarX) {\n\t\t\t\t\tscrollbarX.events.disableType(\"rangechanged\");\n\t\t\t\t}\n\n\t\t\t\tthis.xAxes.each((axis) => {\n\t\t\t\t\tif (axis.get(\"panX\")) {\n\t\t\t\t\t\taxis._isPanning = true;\n\t\t\t\t\t\t//const maxDeviation = axis.get(\"maxDeviation\", 0);\n\t\t\t\t\t\tlet panStart = axis._panStart;\n\t\t\t\t\t\tlet panEnd = axis._panEnd;\n\t\t\t\t\t\tlet difference = (panEnd - panStart);\n\t\t\t\t\t\tlet deltaX = difference * (downPoint.x - local.x) / plotContainer.width();\n\n\t\t\t\t\t\tif (axis.get(\"renderer\").get(\"inversed\")) {\n\t\t\t\t\t\t\tdeltaX *= -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet start = panStart + deltaX;\n\t\t\t\t\t\tlet end = panEnd + deltaX;\n\n\t\t\t\t\t\tif (end - start < 1 + axis.get(\"maxDeviation\", 1) * 2) {\n\t\t\t\t\t\t\taxis.set(\"start\", start);\n\t\t\t\t\t\t\taxis.set(\"end\", end);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tif (scrollbarX) {\n\t\t\t\t\tscrollbarX.events.enableType(\"rangechanged\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (panY) {\n\n\t\t\t\tlet scrollbarY = this.get(\"scrollbarY\");\n\t\t\t\tif (scrollbarY) {\n\t\t\t\t\tscrollbarY.events.disableType(\"rangechanged\");\n\t\t\t\t}\n\n\t\t\t\tthis.yAxes.each((axis) => {\n\t\t\t\t\tif (axis.get(\"panY\")) {\n\t\t\t\t\t\taxis._isPanning = true;\n\t\t\t\t\t\t//const maxDeviation = axis.get(\"maxDeviation\", 0);\n\n\t\t\t\t\t\tlet panStart = axis._panStart;\n\t\t\t\t\t\tlet panEnd = axis._panEnd;\n\t\t\t\t\t\tlet difference = (panEnd - panStart);\n\t\t\t\t\t\tlet deltaY = difference * (downPoint.y - local.y) / plotContainer.height();\n\t\t\t\t\t\tif (axis.get(\"renderer\").get(\"inversed\")) {\n\t\t\t\t\t\t\tdeltaY *= -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet start = panStart - deltaY;\n\t\t\t\t\t\tlet end = panEnd - deltaY;\n\n\t\t\t\t\t\tif (end - start < 1 + axis.get(\"maxDeviation\", 1) * 2) {\n\t\t\t\t\t\t\taxis.set(\"start\", start);\n\t\t\t\t\t\t\taxis.set(\"end\", end);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\tif (scrollbarY) {\n\t\t\t\t\tscrollbarY.events.enableType(\"rangechanged\");\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t}\n\t}\n\n\tprotected _handlePinch() {\n\t\tconst plotContainer = this.plotContainer;\n\t\tlet i = 0;\n\t\tlet downPoints: Array<IPoint> = [];\n\t\tlet movePoints: Array<IPoint> = [];\n\n\t\t$object.each(plotContainer._downPoints, (k, point) => {\n\t\t\tdownPoints[i] = point;\n\t\t\tlet movePoint = this._movePoints[k];\n\t\t\tif (movePoint) {\n\t\t\t\tmovePoints[i] = movePoint;\n\t\t\t}\n\t\t\ti++;\n\t\t});\n\n\t\tif (downPoints.length > 1 && movePoints.length > 1) {\n\t\t\tconst w = plotContainer.width();\n\t\t\tconst h = plotContainer.height();\n\n\t\t\tlet downPoint0 = downPoints[0];\n\t\t\tlet downPoint1 = downPoints[1];\n\n\t\t\tlet movePoint0 = movePoints[0];\n\t\t\tlet movePoint1 = movePoints[1];\n\n\t\t\tif (downPoint0 && downPoint1 && movePoint0 && movePoint1) {\n\n\t\t\t\tmovePoint0 = plotContainer.toLocal(movePoint0)\n\t\t\t\tmovePoint1 = plotContainer.toLocal(movePoint1)\n\n\t\t\t\tdownPoint0 = plotContainer.toLocal(downPoint0)\n\t\t\t\tdownPoint1 = plotContainer.toLocal(downPoint1)\n\n\t\t\t\tif (this.get(\"pinchZoomX\")) {\n\t\t\t\t\tconst downStartX = this._downStartX;\n\t\t\t\t\tconst downEndX = this._downEndX;\n\n\t\t\t\t\tif (downStartX != null && downEndX != null) {\n\n\t\t\t\t\t\tif (downPoint0.x > downPoint1.x) {\n\t\t\t\t\t\t\t[downPoint0, downPoint1] = [downPoint1, downPoint0];\n\t\t\t\t\t\t\t[movePoint0, movePoint1] = [movePoint1, movePoint0];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet downPos0 = downStartX + (downPoint0.x / w) * (downEndX - downStartX);\n\t\t\t\t\t\tlet downPos1 = downStartX + (downPoint1.x / w) * (downEndX - downStartX);\n\n\t\t\t\t\t\tlet movePos0 = downStartX + (movePoint0.x / w) * (downEndX - downStartX);\n\t\t\t\t\t\tlet movePos1 = downStartX + (movePoint1.x / w) * (downEndX - downStartX);\n\n\t\t\t\t\t\tlet initialDistance = Math.max(0.001, downPos1 - downPos0);\n\t\t\t\t\t\tlet currentDistance = Math.max(0.001, movePos1 - movePos0);\n\n\n\t\t\t\t\t\tlet d = initialDistance / currentDistance;\n\n\t\t\t\t\t\tlet s = downStartX * d + downPos0 - movePos0 * d;\n\t\t\t\t\t\tlet e = downEndX * d + downPos1 - movePos1 * d;\n\n\t\t\t\t\t\tthis.xAxes.each((xAxis) => {\n\t\t\t\t\t\t\tlet sa = xAxis.fixPosition(s);\n\t\t\t\t\t\t\tlet ea = xAxis.fixPosition(e);\n\n\t\t\t\t\t\t\txAxis.zoom(sa, ea, 0);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.get(\"pinchZoomY\")) {\n\t\t\t\t\tconst downStartY = this._downStartY;\n\t\t\t\t\tconst downEndY = this._downEndY;\n\n\t\t\t\t\tif (downStartY != null && downEndY != null) {\n\n\t\t\t\t\t\tif (downPoint0.y < downPoint1.y) {\n\t\t\t\t\t\t\t[downPoint0, downPoint1] = [downPoint1, downPoint0];\n\t\t\t\t\t\t\t[movePoint0, movePoint1] = [movePoint1, movePoint0];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet downPos0 = downStartY + (1 - downPoint0.y / h) * (downEndY - downStartY);\n\t\t\t\t\t\tlet downPos1 = downStartY + (1 - downPoint1.y / h) * (downEndY - downStartY);\n\n\t\t\t\t\t\tlet movePos0 = downStartY + (1 - movePoint0.y / h) * (downEndY - downStartY);\n\t\t\t\t\t\tlet movePos1 = downStartY + (1 - movePoint1.y / h) * (downEndY - downStartY);\n\n\t\t\t\t\t\tlet initialDistance = Math.max(0.001, downPos1 - downPos0);\n\t\t\t\t\t\tlet currentDistance = Math.max(0.001, movePos1 - movePos0);\n\n\t\t\t\t\t\tlet d = initialDistance / currentDistance;\n\n\t\t\t\t\t\tlet s = downStartY * d + downPos0 - movePos0 * d;\n\t\t\t\t\t\tlet e = downEndY * d + downPos1 - movePos1 * d;\n\n\t\t\t\t\t\tthis.yAxes.each((yAxis) => {\n\n\t\t\t\t\t\t\tlet sa = yAxis.fixPosition(s);\n\t\t\t\t\t\t\tlet ea = yAxis.fixPosition(e);\n\n\t\t\t\t\t\t\tyAxis.zoom(sa, ea, 0);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _handleCursorPosition() {\n\t\tconst cursor = this.get(\"cursor\");\n\t\tif (cursor) {\n\t\t\tconst cursorPoint = cursor.getPrivate(\"point\");\n\n\t\t\tlet snapToSeries = cursor.get(\"snapToSeries\");\n\n\t\t\tif (cursor._downPoint) {\n\t\t\t\tsnapToSeries = undefined;\n\t\t\t}\n\n\t\t\tif (snapToSeries && cursorPoint) {\n\t\t\t\tconst snapToSeriesBy = cursor.get(\"snapToSeriesBy\");\n\t\t\t\tconst dataItems: Array<DataItem<IXYSeriesDataItem>> = [];\n\t\t\t\t$array.each(snapToSeries, (series) => {\n\t\t\t\t\tif (!series.isHidden() && !series.isHiding()) {\n\t\t\t\t\t\tif (snapToSeriesBy != \"x!\" && snapToSeriesBy != \"y!\") {\n\t\t\t\t\t\t\tconst startIndex = series.startIndex();\n\t\t\t\t\t\t\tconst endIndex = series.endIndex();\n\t\t\t\t\t\t\tfor (let i = startIndex; i < endIndex; i++) {\n\t\t\t\t\t\t\t\tconst dataItem = series.dataItems[i];\n\t\t\t\t\t\t\t\tif (dataItem && !dataItem.isHidden()) {\n\t\t\t\t\t\t\t\t\tdataItems.push(dataItem);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconst tooltipDataItem = series.get(\"tooltipDataItem\");\n\t\t\t\t\t\t\tif (tooltipDataItem) {\n\t\t\t\t\t\t\t\tdataItems.push(tooltipDataItem);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\tlet minDistance = Infinity;\n\t\t\t\tlet closestItem: DataItem<IXYSeriesDataItem> | undefined;\n\n\t\t\t\t$array.each(dataItems, (dataItem) => {\n\t\t\t\t\tconst point = dataItem.get(\"point\");\n\n\t\t\t\t\tif (point) {\n\t\t\t\t\t\tlet distance = 0;\n\t\t\t\t\t\tif (snapToSeriesBy == \"x\" || snapToSeriesBy == \"x!\") {\n\t\t\t\t\t\t\tdistance = Math.abs(cursorPoint.x - point.x);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (snapToSeriesBy == \"y\" || snapToSeriesBy == \"y!\") {\n\t\t\t\t\t\t\tdistance = Math.abs(cursorPoint.y - point.y);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tdistance = Math.hypot(cursorPoint.x - point.x, cursorPoint.y - point.y);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (distance < minDistance) {\n\t\t\t\t\t\t\tminDistance = distance;\n\t\t\t\t\t\t\tclosestItem = dataItem;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\t$array.each(snapToSeries, (series) => {\n\t\t\t\t\tconst tooltip = series.get(\"tooltip\");\n\t\t\t\t\tif (tooltip) {\n\t\t\t\t\t\ttooltip._setDataItem(undefined);\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\tif (closestItem) {\n\t\t\t\t\tlet series = closestItem.component as XYSeries;\n\t\t\t\t\tseries.showDataItemTooltip(closestItem);\n\t\t\t\t\tseries.setRaw(\"tooltipDataItem\", closestItem);\n\n\t\t\t\t\tconst point = closestItem.get(\"point\");\n\t\t\t\t\tif (point) {\n\n\t\t\t\t\t\t// removing x and y to solve #72225\n\t\t\t\t\t\tcursor.handleMove(series.toGlobal({ x: point.x - series.x(), y: point.y - series.y() }), true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _updateCursor() {\n\t\tlet cursor = this.get(\"cursor\");\n\t\tif (cursor) {\n\t\t\tcursor.updateCursor();\n\t\t}\n\t}\n\n\tprotected _addCursor(cursor: XYCursor) {\n\t\tthis.plotContainer.children.push(cursor);\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tthis.series.each((series) => {\n\t\t\tthis._colorize(series);\n\t\t})\n\n\t\tif (this.isDirty(\"wheelX\") || this.isDirty(\"wheelY\")) {\n\t\t\tthis._handleSetWheel();\n\t\t}\n\n\t\tif (this.isDirty(\"cursor\")) {\n\t\t\tconst previous = this._prevSettings.cursor;\n\t\t\tconst cursor = this.get(\"cursor\")!;\n\t\t\tif (cursor !== previous) {\n\t\t\t\tthis._disposeProperty(\"cursor\");\n\t\t\t\tif (previous) {\n\t\t\t\t\tprevious.dispose();\n\t\t\t\t}\n\t\t\t\tif (cursor) {\n\t\t\t\t\tcursor._setChart(this);\n\t\t\t\t\tthis._addCursor(cursor);\n\n\t\t\t\t\tthis._pushPropertyDisposer(\"cursor\", cursor.events.on(\"selectended\", () => {\n\t\t\t\t\t\tthis._handleCursorSelectEnd();\n\t\t\t\t\t}))\n\t\t\t\t}\n\n\t\t\t\t//this.setRaw(\"cursor\", cursor) // to reset previous value\n\t\t\t\tthis._prevSettings.cursor = cursor;\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"scrollbarX\")) {\n\t\t\tconst previous = this._prevSettings.scrollbarX;\n\t\t\tconst scrollbarX = this.get(\"scrollbarX\")!;\n\t\t\tif (scrollbarX !== previous) {\n\t\t\t\tthis._disposeProperty(\"scrollbarX\");\n\t\t\t\tif (previous) {\n\t\t\t\t\tprevious.dispose();\n\t\t\t\t}\n\t\t\t\tif (scrollbarX) {\n\t\t\t\t\tif (!scrollbarX.parent) {\n\t\t\t\t\t\tthis.topAxesContainer.children.push(scrollbarX);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._pushPropertyDisposer(\"scrollbarX\", scrollbarX.events.on(\"rangechanged\", (e) => {\n\t\t\t\t\t\tthis._handleScrollbar(this.xAxes, e.start, e.end, e.grip);\n\t\t\t\t\t}))\n\n\t\t\t\t\tthis._pushPropertyDisposer(\"scrollbarX\", scrollbarX.events.on(\"released\", () => {\n\t\t\t\t\t\tthis.xAxes.each((axis) => {\n\t\t\t\t\t\t\tif (axis.get(\"zoomable\")) {\n\t\t\t\t\t\t\t\tthis._handleAxisSelection(axis);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}))\n\n\t\t\t\t\t// Used to populate `ariaLabel` with meaningful values\n\t\t\t\t\tscrollbarX.setPrivate(\"positionTextFunction\", (position: number) => {\n\t\t\t\t\t\tconst axis = this.xAxes.getIndex(0);\n\t\t\t\t\t\treturn axis ? axis.getTooltipText(position, false) || \"\" : \"\";\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t\tthis._prevSettings.scrollbarX = scrollbarX;\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"scrollbarY\")) {\n\t\t\tconst previous = this._prevSettings.scrollbarY;\n\t\t\tconst scrollbarY = this.get(\"scrollbarY\")!;\n\t\t\tif (scrollbarY !== previous) {\n\t\t\t\tthis._disposeProperty(\"scrollbarY\");\n\t\t\t\tif (previous) {\n\t\t\t\t\tprevious.dispose();\n\t\t\t\t}\n\t\t\t\tif (scrollbarY) {\n\t\t\t\t\tif (!scrollbarY.parent) {\n\t\t\t\t\t\tthis.rightAxesContainer.children.push(scrollbarY);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._pushPropertyDisposer(\"scrollbarY\", scrollbarY.events.on(\"rangechanged\", (e) => {\n\t\t\t\t\t\tthis._handleScrollbar(this.yAxes, e.start, e.end, e.grip);\n\t\t\t\t\t}))\n\n\t\t\t\t\tthis._pushPropertyDisposer(\"scrollbarY\", scrollbarY.events.on(\"released\", () => {\n\t\t\t\t\t\tthis.yAxes.each((axis) => {\n\t\t\t\t\t\t\tif (axis.get(\"zoomable\")) {\n\t\t\t\t\t\t\t\tthis._handleAxisSelection(axis);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}))\n\n\t\t\t\t\t// Used to populate `ariaLabel` with meaningful values\n\t\t\t\t\tscrollbarY.setPrivate(\"positionTextFunction\", (position: number) => {\n\t\t\t\t\t\tconst axis = this.yAxes.getIndex(0);\n\t\t\t\t\t\treturn axis ? axis.getTooltipText(position, false) || \"\" : \"\";\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\tthis._prevSettings.scrollbarY = scrollbarY;\n\t\t\t}\n\t\t}\n\n\t\tthis._handleZoomOut();\n\t}\n\n\tprotected _processSeries(series: this[\"_seriesType\"]) {\n\t\tsuper._processSeries(series);\n\n\t\tconst xAxis = series.get(\"xAxis\");\n\t\tconst yAxis = series.get(\"yAxis\");\n\n\t\t$array.move(xAxis.series, series);\n\t\t$array.move(yAxis.series, series);\n\n\t\tseries._posXDp = series.addDisposer(xAxis.events.on(\"positionchanged\", () => {\n\t\t\tseries._fixPosition();\n\t\t}))\n\n\t\tseries._posXDp = series.addDisposer(yAxis.events.on(\"positionchanged\", () => {\n\t\t\tseries._fixPosition();\n\t\t}))\n\n\t\tif (!series.get(\"baseAxis\")) {\n\t\t\tif (yAxis.isType<CategoryAxis<any>>(\"CategoryAxis\") || yAxis.isType<DateAxis<any>>(\"DateAxis\")) {\n\t\t\t\tseries.set(\"baseAxis\", yAxis);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tseries.set(\"baseAxis\", xAxis);\n\t\t\t}\n\t\t}\n\n\t\tif (series.get(\"stacked\")) {\n\t\t\tseries._markDirtyKey(\"stacked\");\n\t\t\t$array.each(series.dataItems, (dataItem) => {\n\t\t\t\tdataItem.set(\"stackToItemY\", undefined);\n\t\t\t\tdataItem.set(\"stackToItemX\", undefined);\n\t\t\t})\n\t\t}\n\t\tseries._markDirtyAxes();\n\t\tyAxis.markDirtyExtremes();\n\t\txAxis.markDirtyExtremes();\n\t\txAxis._seriesAdded = true;\n\t\tyAxis._seriesAdded = true;\n\n\t\tthis._colorize(series);\n\t}\n\n\tprotected _colorize(series: this[\"_seriesType\"]) {\n\t\tconst colorSet = this.get(\"colors\")!;\n\t\tif (colorSet) {\n\t\t\tif (series.get(\"fill\") == null) {\n\t\t\t\tconst color = colorSet.next();\n\n\t\t\t\tseries._setSoft(\"stroke\", color);\n\t\t\t\tseries._setSoft(\"fill\", color);\n\t\t\t}\n\t\t}\n\t\tconst patternSet = this.get(\"patterns\")!;\n\t\tif (patternSet) {\n\t\t\tif (series.get(\"fillPattern\") == null) {\n\t\t\t\tconst pattern = patternSet.next();\n\n\t\t\t\tseries._setSoft(\"fillPattern\", pattern);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _handleCursorSelectEnd() {\n\t\tconst cursor = this.get(\"cursor\")!;\n\t\tconst behavior = cursor.get(\"behavior\");\n\n\t\tconst downPositionX = cursor.getPrivate(\"downPositionX\", 0);\n\t\tconst downPositionY = cursor.getPrivate(\"downPositionY\", 0);\n\n\t\tconst positionX = Math.min(1, Math.max(0, cursor.getPrivate(\"positionX\", 0.5)));\n\t\tconst positionY = Math.min(1, Math.max(0, cursor.getPrivate(\"positionY\", 0.5)));\n\n\t\tthis.xAxes.each((axis) => {\n\t\t\tif (behavior === \"zoomX\" || behavior === \"zoomXY\") {\n\t\t\t\tlet position0 = axis.toAxisPosition(downPositionX);\n\t\t\t\tlet position1 = axis.toAxisPosition(positionX);\n\n\t\t\t\taxis.zoom(position0, position1);\n\t\t\t}\n\t\t\taxis.setPrivate(\"updateScrollbar\", true);\n\t\t})\n\n\t\tthis.yAxes.each((axis) => {\n\t\t\tif (behavior === \"zoomY\" || behavior === \"zoomXY\") {\n\t\t\t\tlet position0 = axis.toAxisPosition(downPositionY);\n\t\t\t\tlet position1 = axis.toAxisPosition(positionY);\n\t\t\t\taxis.zoom(position0, position1);\n\t\t\t}\n\t\t\taxis.setPrivate(\"updateScrollbar\", true);\n\t\t})\n\t}\n\n\tprotected _handleScrollbar(axes: ListAutoDispose<Axis<any>>, start: number, end: number, priority?: \"start\" | \"end\") {\n\n\t\taxes.each((axis) => {\n\n\t\t\tlet axisStart = axis.fixPosition(start);\n\t\t\tlet axisEnd = axis.fixPosition(end);\n\n\t\t\tlet zoomAnimation = axis.zoom(axisStart, axisEnd, undefined, priority);\n\n\t\t\tconst updateScrollbar = \"updateScrollbar\";\n\t\t\taxis.setPrivateRaw(updateScrollbar, false);\n\n\t\t\tif (zoomAnimation) {\n\t\t\t\tzoomAnimation.events.on(\"stopped\", () => {\n\t\t\t\t\taxis.setPrivateRaw(updateScrollbar, true);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\taxis.setPrivateRaw(updateScrollbar, true);\n\t\t\t}\n\t\t})\n\t}\n\n\n\tprotected _processAxis<R extends AxisRenderer>(axes: ListAutoDispose<Axis<R>>, container: Container): IDisposer {\n\t\treturn axes.events.onAll((change) => {\n\t\t\tif (change.type === \"clear\") {\n\t\t\t\t$array.each(change.oldValues, (axis) => {\n\t\t\t\t\tthis._removeAxis(axis);\n\t\t\t\t})\n\t\t\t} else if (change.type === \"push\") {\n\t\t\t\tcontainer.children.push(change.newValue);\n\t\t\t\tchange.newValue.processChart(this);\n\t\t\t} else if (change.type === \"setIndex\") {\n\t\t\t\tcontainer.children.setIndex(change.index, change.newValue);\n\t\t\t\tchange.newValue.processChart(this);\n\t\t\t} else if (change.type === \"insertIndex\") {\n\t\t\t\tcontainer.children.insertIndex(change.index, change.newValue);\n\t\t\t\tchange.newValue.processChart(this);\n\t\t\t} else if (change.type === \"removeIndex\") {\n\t\t\t\tthis._removeAxis(change.oldValue);\n\t\t\t} else if (change.type === \"moveIndex\") {\n\t\t\t\tcontainer.children.moveValue(change.value, change.newIndex);\n\t\t\t\tchange.value.processChart(this);\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"Unknown IListEvent type\");\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected _removeAxis(axis: Axis<AxisRenderer>) {\n\t\tif (!axis.isDisposed()) {\n\t\t\tconst axisParent = axis.parent\n\t\t\tif (axisParent) {\n\t\t\t\taxisParent.children.removeValue(axis);\n\t\t\t}\n\n\t\t\tconst gridContainer = axis.gridContainer;\n\t\t\tconst gridParent = gridContainer.parent;\n\t\t\tif (gridParent) {\n\t\t\t\tgridParent.children.removeValue(gridContainer);\n\t\t\t}\n\n\t\t\tconst topGridContainer = axis.topGridContainer;\n\t\t\tconst topGridParent = topGridContainer.parent;\n\t\t\tif (topGridParent) {\n\t\t\t\ttopGridParent.children.removeValue(topGridContainer);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _updateChartLayout() {\n\t\tconst left = this.leftAxesContainer.width();\n\t\tconst right = this.rightAxesContainer.width();\n\n\t\tconst bottomAxesContainer = this.bottomAxesContainer;\n\t\tbottomAxesContainer.set(\"paddingLeft\", left);\n\t\tbottomAxesContainer.set(\"paddingRight\", right);\n\n\t\tconst topAxesContainer = this.topAxesContainer;\n\t\ttopAxesContainer.set(\"paddingLeft\", left);\n\t\ttopAxesContainer.set(\"paddingRight\", right);\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic processAxis(axis: Axis<AxisRenderer>) {\n\t\tvar cursor = this.get(\"cursor\");\n\t\tif (cursor) {\n\t\t\tthis.addDisposer(axis.on(\"start\", () => {\n\t\t\t\tthis._updateCursor();\n\t\t\t}))\n\n\t\t\tthis.addDisposer(axis.on(\"end\", () => {\n\t\t\t\tthis._updateCursor();\n\t\t\t}))\n\t\t}\n\t}\n\n\n\tpublic _handleAxisSelection(axis: Axis<any>, force?: boolean) {\n\n\t\tlet start = axis.fixPosition(axis.get(\"start\", 0));\n\t\tlet end = axis.fixPosition(axis.get(\"end\", 1));\n\n\t\tif (start > end) {\n\t\t\t[start, end] = [end, start];\n\t\t}\n\n\t\tif (this.xAxes.indexOf(axis) != -1) {\n\t\t\tif (force || axis.getPrivate(\"updateScrollbar\")) {\n\t\t\t\tlet scrollbarX = this.get(\"scrollbarX\");\n\n\t\t\t\tif (scrollbarX && (!scrollbarX.getPrivate(\"isBusy\") || force)) {\n\t\t\t\t\tscrollbarX.setRaw(\"start\", start);\n\t\t\t\t\tscrollbarX.setRaw(\"end\", end);\n\t\t\t\t\tscrollbarX.updateGrips();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (this.yAxes.indexOf(axis) != -1) {\n\t\t\tif (force || axis.getPrivate(\"updateScrollbar\")) {\n\t\t\t\tlet scrollbarY = this.get(\"scrollbarY\");\n\n\t\t\t\tif (scrollbarY && (!scrollbarY.getPrivate(\"isBusy\") || force)) {\n\t\t\t\t\tscrollbarY.setRaw(\"start\", start);\n\t\t\t\t\tscrollbarY.setRaw(\"end\", end);\n\t\t\t\t\tscrollbarY.updateGrips();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._handleZoomOut();\n\t}\n\n\tprotected _handleZoomOut() {\n\t\tlet zoomOutButton = this.zoomOutButton;\n\t\tif (zoomOutButton && zoomOutButton.parent) {\n\t\t\tlet visible = false;\n\t\t\tthis.xAxes.each((axis) => {\n\t\t\t\tif (axis.get(\"zoomOut\", true)) {\n\t\t\t\t\tif ($math.round(axis.get(\"start\", 0), 5) != 0 || $math.round(axis.get(\"end\", 1), 5) != 1) {\n\t\t\t\t\t\tvisible = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\tthis.yAxes.each((axis) => {\n\t\t\t\tif (axis.get(\"zoomOut\", true)) {\n\t\t\t\t\tif ($math.round(axis.get(\"start\", 0), 5) != 0 || $math.round(axis.get(\"end\", 1), 5) != 1) {\n\t\t\t\t\t\tvisible = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tif (visible) {\n\t\t\t\tif (zoomOutButton.isHidden()) {\n\t\t\t\t\tzoomOutButton.show();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tzoomOutButton.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks if point is within plot area.\n\t *\n\t * @param   point  Reference point\n\t * @return         Is within plot area?\n\t */\n\tpublic inPlot(point: IPoint): boolean {\n\t\tconst plotContainer = this.plotContainer;\n\t\tconst otherCharts = this.getPrivate(\"otherCharts\", this._otherCharts);\n\t\tconst global = plotContainer.toGlobal(point);\n\n\t\tif (point.x >= -0.5 && point.y >= -0.5 && point.x <= plotContainer.width() + 0.5 && point.y <= plotContainer.height() + 0.5) {\n\t\t\treturn true;\n\t\t}\n\t\tif (otherCharts) {\n\n\t\t\tfor (let i = otherCharts.length - 1; i >= 0; i--) {\n\t\t\t\tconst chart = otherCharts[i];\n\n\t\t\t\tif (chart != this) {\n\t\t\t\t\tconst chartPlotContainer = chart.plotContainer;\n\t\t\t\t\tconst documentPoint = this._root.rootPointToDocument(global);\n\t\t\t\t\tconst chartRoot = chart._root.documentPointToRoot(documentPoint);\n\t\t\t\t\tconst local = chartPlotContainer.toLocal(chartRoot);\n\t\t\t\t\tif (local.x >= -0.1 && local.y >= -0.1 && local.x <= chartPlotContainer.width() + 0.1 && local.y <= chartPlotContainer.height() + 0.1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic arrangeTooltips() {\n\t\tconst plotContainer = this.plotContainer;\n\n\t\tconst w = plotContainer.width();\n\t\tconst h = plotContainer.height();\n\n\t\tlet hh = this.height();\n\n\t\tconst bounds = this._root.tooltipContainer.get(\"layerMargin\");\n\n\t\tif (bounds) {\n\t\t\tif (bounds.bottom > hh) {\n\t\t\t\thh = bounds.bottom;\n\t\t\t}\n\t\t}\n\n\t\tlet plotT = plotContainer._display.toGlobal({ x: 0, y: 0 });\n\t\tlet plotB = plotContainer._display.toGlobal({ x: w, y: h });\n\n\t\tconst tooltips: Array<Tooltip> = [];\n\t\tlet sum = 0;\n\n\t\tlet minDistance = Infinity;\n\t\tlet movePoint = this._movePoint;\n\t\tlet maxTooltipDistance = this.get(\"maxTooltipDistance\");\n\t\tlet maxTooltipDistanceBy = this.get(\"maxTooltipDistanceBy\", \"xy\");\n\t\tlet closest: XYSeries;\n\t\tlet closestPoint: IPoint;\n\n\t\tif ($type.isNumber(maxTooltipDistance)) {\n\t\t\tthis.series.each((series) => {\n\t\t\t\tif (!series.isHidden()) {\n\t\t\t\t\tconst tooltip = series.get(\"tooltip\");\n\t\t\t\t\tif (tooltip) {\n\t\t\t\t\t\tlet point = tooltip.get(\"pointTo\")!;\n\t\t\t\t\t\tif (point) {\n\t\t\t\t\t\t\tlet distance = Math.hypot(movePoint.x - point.x, movePoint.y - point.y);\n\t\t\t\t\t\t\tif (maxTooltipDistanceBy == \"x\") {\n\t\t\t\t\t\t\t\tdistance = Math.abs(movePoint.x - point.x);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (maxTooltipDistanceBy == \"y\") {\n\t\t\t\t\t\t\t\tdistance = Math.abs(movePoint.y - point.y);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (distance < minDistance) {\n\t\t\t\t\t\t\t\tminDistance = distance;\n\t\t\t\t\t\t\t\tclosest = series;\n\t\t\t\t\t\t\t\tclosestPoint = point;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\tconst tooltipSeries: Array<XYSeries> = [];\n\n\t\tthis.series.each((series) => {\n\t\t\tconst tooltip = series.get(\"tooltip\")!;\n\n\t\t\tif (tooltip && !tooltip.get(\"forceHidden\")) {\n\t\t\t\tlet hidden = false;\n\t\t\t\tlet point = tooltip.get(\"pointTo\")!;\n\t\t\t\tif (point) {\n\t\t\t\t\tif (maxTooltipDistance >= 0) {\n\t\t\t\t\t\tlet point = tooltip.get(\"pointTo\")!;\n\t\t\t\t\t\tif (point && closestPoint) {\n\t\t\t\t\t\t\tif (series != closest) {\n\t\t\t\t\t\t\t\tlet distance = Math.hypot(closestPoint.x - point.x, closestPoint.y - point.y);\n\t\t\t\t\t\t\t\tif (maxTooltipDistanceBy == \"x\") {\n\t\t\t\t\t\t\t\t\tdistance = Math.abs(closestPoint.x - point.x);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if (maxTooltipDistanceBy == \"y\") {\n\t\t\t\t\t\t\t\t\tdistance = Math.abs(closestPoint.y - point.y);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (distance > maxTooltipDistance) {\n\t\t\t\t\t\t\t\t\thidden = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (maxTooltipDistance == -1) {\n\t\t\t\t\t\tif (series != closest) {\n\t\t\t\t\t\t\thidden = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.inPlot(this._tooltipToLocal(point)) || !tooltip.dataItem) {\n\t\t\t\t\t\thidden = true;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (!hidden) {\n\t\t\t\t\t\t\tsum += point.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (hidden || series.isHidden() || series.isHiding()) {\n\t\t\t\t\t\ttooltip.hide(0);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\ttooltip.show();\n\t\t\t\t\t\ttooltips.push(tooltip);\n\n\t\t\t\t\t\ttooltipSeries.push(series);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tthis.setPrivate(\"tooltipSeries\", tooltipSeries);\n\n\t\tif (this.get(\"arrangeTooltips\")) {\n\n\t\t\tlet totalTooltipH = 0;\n\t\t\tlet tooltipCount = 0;\n\n\t\t\tconst tooltipContainer = this._root.tooltipContainer;\n\n\t\t\tconst count = tooltips.length;\n\t\t\tconst average = sum / count;\n\n\t\t\tif (average > h / 2 + plotT.y) {\n\t\t\t\ttooltips.sort((a, b) => $order.compareNumber(b.get(\"pointTo\")!.y, a.get(\"pointTo\")!.y));\n\n\t\t\t\tlet prevY = plotB.y;\n\n\t\t\t\t$array.each(tooltips, (tooltip) => {\n\t\t\t\t\tlet height = tooltip.height();\n\t\t\t\t\ttooltipCount++;\n\t\t\t\t\ttotalTooltipH += height;\n\t\t\t\t\tlet centerY = tooltip.get(\"centerY\");\n\t\t\t\t\tif (centerY instanceof Percent) {\n\t\t\t\t\t\theight *= centerY.value;\n\t\t\t\t\t}\n\t\t\t\t\theight += tooltip.get(\"marginBottom\", 0);\n\n\t\t\t\t\ttooltip.set(\"bounds\", { left: plotT.x, top: plotT.y, right: plotB.x, bottom: prevY })\n\t\t\t\t\ttooltip.setPrivate(\"customData\", { left: plotT.x, top: plotT.y, right: plotB.x, bottom: prevY })\n\t\t\t\t\tprevY = Math.min(prevY - height, tooltip._fy - height);\n\t\t\t\t\tif (tooltip.parent == tooltipContainer) {\n\t\t\t\t\t\ttooltipContainer.children.moveValue(tooltip, 0);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tif (prevY < 0) {\n\t\t\t\t\ttooltips.reverse();\n\t\t\t\t\tlet prevBottom = prevY;\n\n\t\t\t\t\t$array.each(tooltips, (tooltip) => {\n\t\t\t\t\t\ttooltipCount++;\n\t\t\t\t\t\tlet bounds = tooltip.get(\"bounds\");\n\t\t\t\t\t\tif (bounds) {\n\t\t\t\t\t\t\tlet top = bounds.top - prevY;\n\t\t\t\t\t\t\tlet bottom = bounds.bottom - prevY;\n\t\t\t\t\t\t\tif (top < prevBottom) {\n\t\t\t\t\t\t\t\ttop = prevBottom;\n\t\t\t\t\t\t\t\tbottom = top + tooltip.height();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttooltip.set(\"bounds\", { left: bounds.left, top: top, right: bounds.right, bottom: bottom })\n\t\t\t\t\t\t\tprevBottom = bounds.bottom - prevY + tooltip.get(\"marginBottom\", 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttooltips.reverse();\n\t\t\t\ttooltips.sort((a, b) => $order.compareNumber(a.get(\"pointTo\")!.y, b.get(\"pointTo\")!.y));\n\n\t\t\t\tlet prevY = 0;\n\t\t\t\t$array.each(tooltips, (tooltip) => {\n\t\t\t\t\ttooltipCount++;\n\t\t\t\t\tlet height = tooltip.height();\n\t\t\t\t\ttotalTooltipH += height;\n\t\t\t\t\tlet centerY = tooltip.get(\"centerY\");\n\t\t\t\t\tif (centerY instanceof Percent) {\n\t\t\t\t\t\theight *= centerY.value;\n\t\t\t\t\t}\n\t\t\t\t\theight += tooltip.get(\"marginBottom\", 0);\n\n\t\t\t\t\ttooltip.set(\"bounds\", { left: plotT.x, top: prevY, right: plotB.x, bottom: Math.max(plotT.y + hh, prevY + height) })\n\t\t\t\t\tif (tooltip.parent == tooltipContainer) {\n\t\t\t\t\t\ttooltipContainer.children.moveValue(tooltip, 0);\n\t\t\t\t\t}\n\t\t\t\t\tprevY = Math.max(prevY + height, tooltip._fy + height);\n\t\t\t\t})\n\n\t\t\t\tif (prevY > hh) {\n\t\t\t\t\ttooltips.reverse();\n\t\t\t\t\tlet prevBottom = hh;\n\n\t\t\t\t\t$array.each(tooltips, (tooltip) => {\n\t\t\t\t\t\ttooltipCount++;\n\t\t\t\t\t\tlet bounds = tooltip.get(\"bounds\");\n\t\t\t\t\t\tif (bounds) {\n\t\t\t\t\t\t\tlet top = bounds.top - (hh - prevY);\n\t\t\t\t\t\t\tlet bottom = bounds.bottom - (hh - prevY);\n\t\t\t\t\t\t\tif (bottom > prevBottom) {\n\t\t\t\t\t\t\t\tbottom = prevBottom\n\t\t\t\t\t\t\t\ttop = bottom - tooltip.height();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttooltip.set(\"bounds\", { left: bounds.left, top: top, right: bounds.right, bottom: bottom })\n\t\t\t\t\t\t\tprevBottom = bottom - tooltip.height() - tooltip.get(\"marginBottom\", 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (totalTooltipH == 0 && tooltipCount > 0) {\n\t\t\t\tthis._disposers.push(this.root.events.once(\"frameended\", () => {\n\t\t\t\t\tthis.arrangeTooltips();\n\t\t\t\t}))\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _tooltipToLocal(point: IPoint): IPoint {\n\t\treturn this.plotContainer.toLocal(point);\n\t}\n\n\t/**\n\t * Fully zooms out the chart.\n\t */\n\tpublic zoomOut() {\n\t\tthis.xAxes.each((axis) => {\n\t\t\tif (axis.get(\"zoomOut\", true)) {\n\t\t\t\taxis.setPrivate(\"updateScrollbar\", true);\n\t\t\t\taxis.zoom(0, 1);\n\t\t\t}\n\t\t})\n\n\t\tthis.yAxes.each((axis) => {\n\t\t\tif (axis.get(\"zoomOut\", true)) {\n\t\t\t\taxis.setPrivate(\"updateScrollbar\", true);\n\t\t\t\taxis.zoom(0, 1);\n\t\t\t}\n\t\t})\n\t}\n\n\tprotected _dispose() {\n\t\tsuper._dispose();\n\n\t\t// Explicitly disposing cursor to avoid memory leak of cursor adding\n\t\t// keyboard events after parent chart has been disposed\n\t\tconst cursor = this.get(\"cursor\");\n\t\tif (cursor) {\n\t\t\tcursor.dispose();\n\t\t}\n\t}\n\n}\n","import type { IPoint } from \"../../core/util/IPoint\";\nimport type { XYChart } from \"./XYChart\"\nimport type { XYSeries } from \"./series/XYSeries\";\nimport type { ISpritePointerEvent } from \"../../core/render/Sprite\";\nimport type { Axis } from \"./axes/Axis\";\nimport type { AxisRenderer } from \"./axes/AxisRenderer\";\nimport type { Tooltip } from \"../../core/render/Tooltip\";\n\nimport { Container, IContainerSettings, IContainerPrivate, IContainerEvents } from \"../../core/render/Container\";\nimport { p100 } from \"../../core/util/Percent\";\nimport { Graphics } from \"../../core/render/Graphics\";\nimport { Grid } from \"./axes/Grid\";\n//import { Animations } from \"../core/util/Animation\";\n\nimport * as $type from \"../../core/util/Type\";\nimport * as $utils from \"../../core/util/Utils\";\nimport * as $math from \"../../core/util/Math\";\nimport * as $array from \"../../core/util/Array\";\nimport * as $object from \"../../core/util/Object\";\nimport type { IPointerEvent } from \"../../core/render/backend/Renderer\";\n\nexport interface IXYCursorSettings extends IContainerSettings {\n\n\t/**\n\t * Cursor's X axis.\n\t *\n\t * If set, cursor will snap to that axis' cells.\n\t */\n\txAxis?: Axis<AxisRenderer>;\n\n\t/**\n\t * Cursor's Y axis.\n\t *\n\t * If set, cursor will snap to that axis' cells.\n\t */\n\tyAxis?: Axis<AxisRenderer>;\n\n\t/**\n\t * What should cursor do when dragged across plot area.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/#Behavior} for more info\n\t * @default \"none\"\n\t */\n\tbehavior?: \"zoomX\" | \"zoomY\" | \"zoomXY\" | \"selectX\" | \"selectY\" | \"selectXY\" | \"none\";\n\n\t/**\n\t * Cursor's horizontal position relative to plot area.\n\t *\n\t * If this setting is set, cursor will not react to mouse/touch and will just\n\t * sit at specified position until `positionX` is reset to `undefined`.\n\t *\n\t * `0` - left, `1` - right.\n\t */\n\tpositionX?: number;\n\n\t/**\n\t * Cursor's vertical position relative to plot area.\n\t *\n\t * If this setting is set, cursor will not react to mouse/touch and will just\n\t * sit at specified position until `positionY` is reset to `undefined`.\n\t *\n\t * `0` - left, `1` - right.\n\t */\n\tpositionY?: number;\n\n\t/**\n\t * If set to `true`, cursor will not be hidden when mouse cursor moves out\n\t * of the plot area.\n\t *\n\t * @default false\n\t */\n\talwaysShow?: boolean;\n\n\t/**\n\t * A list of series to snap cursor to.\n\t *\n\t * If set, the cursor will always snap to the closest data item of listed\n\t * series.\n\t */\n\tsnapToSeries?: Array<XYSeries>;\n\n\t/**\n\t * Defines in which direction to look when searching for the nearest data\n\t * item to snap to.\n\t *\n\t * Possible values: `\"xy\"` (default), `\"x\"`, `\"y\"`, `\"x!\"`, `\"y!\"`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/#snapping-to-series} for more info\n\t * @since 5.0.6\n\t * @default \"xy\"\n\t */\n\tsnapToSeriesBy?: \"xy\" | \"x\" | \"y\" | \"x!\" | \"y!\";\n\n\t/**\n\t * An array of other [[XYCursor]] objects to sync this cursor with.\n\t *\n\t * If set will automatically move synced cursors to the same position within\n\t * their respective axes as the this cursor assumin same XY coordinates of\n\t * the pointer.\n\t *\n\t * NOTE: Syncing is performed using actual X/Y coordinates of the point of\n\t * mouse cursor's position or touch. It means that they will not sync by axis\n\t * positions, but rather by screen coordinates. For example vertical lines\n\t * will not sync across horizontally laid out charts, and vice versa.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/#syncing-cursors} for more info\n\t * @since 5.1.4\n\t */\n\tsyncWith?: Array<XYCursor>;\n\n\t/**\n\t * Minimum distance in pixels between down and up points.\n\t *\n\t * If a distance is less than the value of `moveThreshold`, the zoom or\n\t * selection won't happen.\n\t *\n\t * @since 5.2.20\n\t * @default 1\n\t */\n\tmoveThreshold?: number\n\n}\n\n\nexport interface IXYCursorPrivate extends IContainerPrivate {\n\n\t/**\n\t * Current X/Y coordinates of the cursor.\n\t */\n\tpoint?: IPoint;\n\n\t/**\n\t * Current horizontal position relative to the plot area (0-1).\n\t */\n\tpositionX?: number;\n\n\t/**\n\t * Current vertical position relative to the plot area (0-1).\n\t */\n\tpositionY?: number;\n\n\t/**\n\t * Horizontal cursor position on the moment when selection started.\n\t */\n\tdownPositionX?: number;\n\n\t/**\n\t * Vertical cursor position on the moment when selection started.\n\t */\n\tdownPositionY?: number;\n\n\t/**\n\t * Last global point to which cursor moved\n\t */\n\tlastPoint?: IPoint;\n}\n\nexport interface IXYCursorEvents extends IContainerEvents {\n\n\t/**\n\t * Kicks in when cursor selection ends.\n\t *\n\t * Only when `behavior` is set.\n\t */\n\tselectended: {\n\t\toriginalEvent: IPointerEvent,\n\t\ttarget: XYCursor\n\t};\n\n\t/**\n\t * Kicks in when cursor selection starts.\n\t *\n\t * Only when `behavior` is set.\n\t */\n\tselectstarted: {\n\t\toriginalEvent: IPointerEvent,\n\t\ttarget: XYCursor\n\t};\n\n\t/**\n\t * Kicks in when cursor's position over plot area changes.\n\t */\n\tcursormoved: {\n\t\tpoint: IPoint,\n\t\ttarget: XYCursor,\n\t\toriginalEvent?: IPointerEvent\n\t};\n\n\t/**\n\t * Kicks in when cursor's is hidden when user rolls-out of the plot area\n\t */\n\tcursorhidden: {\n\t\ttarget: XYCursor\n\t};\n\n\t/**\n\t * Invoked if pointer is pressed down on a plot area and released without\n\t * moving (only when behavior is `\"selectX\"`).\n\t *\n\t * @since 5.4.7\n\t */\n\tselectcancelled: {\n\t\toriginalEvent: IPointerEvent,\n\t\ttarget: XYCursor\n\t};\n\n}\n\n/**\n * Creates a chart cursor for an [[XYChart]].\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/} for more info\n * @important\n */\nexport class XYCursor extends Container {\n\tpublic static className: string = \"XYCursor\";\n\tpublic static classNames: Array<string> = Container.classNames.concat([XYCursor.className]);\n\n\tdeclare public _settings: IXYCursorSettings;\n\tdeclare public _privateSettings: IXYCursorPrivate;\n\tdeclare public _events: IXYCursorEvents;\n\n\tprotected _alwaysShow: boolean = false;\n\n\t/**\n\t * A [[Grid]] elment that used for horizontal line of the cursor crosshair.\n\t *\n\t * @default Grid.new()\n\t */\n\tpublic readonly lineX: Grid = this.children.push(Grid.new(this._root, {\n\t\tthemeTags: [\"x\"]\n\t}));\n\n\t/**\n\t * A [[Grid]] elment that used for horizontal line of the cursor crosshair.\n\t *\n\t * @default Grid.new()\n\t */\n\tpublic readonly lineY: Grid = this.children.push(Grid.new(this._root, {\n\t\tthemeTags: [\"y\"]\n\t}));\n\n\t/**\n\t * An element that represents current selection.\n\t *\n\t * @default Graphics.new()\n\t */\n\tpublic readonly selection: Graphics = this.children.push(Graphics.new(this._root, {\n\t\tthemeTags: [\"selection\", \"cursor\"], layer: 30\n\t}));\n\n\tprotected _movePoint: IPoint | undefined;\n\tprotected _lastPoint: IPoint = { x: 0, y: 0 };\n\tprotected _lastPoint2: IPoint = { x: 0, y: 0 };\n\n\tprotected _tooltipX: boolean = false;\n\tprotected _tooltipY: boolean = false;\n\n\t/**\n\t * A chart cursor is attached to.\n\t */\n\tpublic chart: XYChart | undefined;\n\n\tprotected _toX?: number;\n\tprotected _toY?: number;\n\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"xy\", \"cursor\"]);\n\t\tsuper._afterNew();\n\t\tthis.setAll({ \"width\": p100, height: p100, isMeasured: true, position: \"absolute\" });\n\t\tthis.states.create(\"hidden\", { visible: true, opacity: 0 });\n\t\tthis._drawLines();\n\t\tthis.setPrivateRaw(\"visible\", false);\n\n\t\tthis._disposers.push(this.setTimeout(() => {\n\t\t\tthis.setPrivate(\"visible\", true)\n\t\t}, 500));\n\n\t\tthis._disposers.push(this.lineX.events.on(\"positionchanged\", () => {\n\t\t\tthis._handleXLine();\n\t\t}));\n\n\t\tthis._disposers.push(this.lineY.events.on(\"positionchanged\", () => {\n\t\t\tthis._handleYLine();\n\t\t}));\n\n\t\tthis._disposers.push(this.lineX.events.on(\"focus\", () => this._handleLineFocus()));\n\t\tthis._disposers.push(this.lineX.events.on(\"blur\", () => this._handleLineBlur()));\n\n\t\tthis._disposers.push(this.lineY.events.on(\"focus\", () => this._handleLineFocus()));\n\t\tthis._disposers.push(this.lineY.events.on(\"blur\", () => this._handleLineBlur()));\n\n\t\tif ($utils.supports(\"keyboardevents\")) {\n\t\t\tthis._disposers.push($utils.addEventListener(document, \"keydown\", (ev: KeyboardEvent) => {\n\t\t\t\tthis._handleLineMove($utils.getEventKey(ev), ev.ctrlKey);\n\t\t\t}));\n\t\t}\n\t}\n\n\tprotected _setUpTouch(): void {\n\t\tconst chart = this.chart;\n\t\tif (chart) {\n\t\t\tchart.plotContainer._display.cancelTouch = this.get(\"behavior\") != \"none\" ? true : false;\n\t\t}\n\t}\n\n\tprotected _handleXLine() {\n\t\tlet x = this.lineX.x();\n\t\tlet visible = true;\n\t\tif (x < 0 || x > this.width()) {\n\t\t\tvisible = false;\n\t\t}\n\t\tthis.lineX.setPrivate(\"visible\", visible);\n\t}\n\n\tprotected _handleYLine() {\n\t\tlet y = this.lineY.y();\n\t\tlet visible = true;\n\t\tif (y < 0 || y > this.height()) {\n\t\t\tvisible = false;\n\t\t}\n\t\tthis.lineY.setPrivate(\"visible\", visible);\n\t}\n\n\tprotected _handleLineMove(key: string, ctrlKey?: boolean) {\n\t\tlet dir: any = \"\";\n\n\t\tconst chart = this.chart;\n\n\t\tlet axis: Axis<AxisRenderer> | undefined;\n\t\tif (chart && chart.xAxes.length) {\n\t\t\tif (this._root.focused(this.lineX)) {\n\t\t\t\tdir = \"positionX\";\n\t\t\t\taxis = chart.xAxes.getIndex(0);\n\t\t\t}\n\t\t\telse if (this._root.focused(this.lineY)) {\n\t\t\t\taxis = chart.yAxes.getIndex(0);\n\t\t\t\tdir = \"positionY\";\n\t\t\t}\n\n\t\t\tlet m = 1;\n\t\t\tif (ctrlKey) {\n\t\t\t\tm = 5;\n\t\t\t}\n\n\t\t\tif (axis) {\n\t\t\t\tlet inversed = axis.get(\"renderer\").get(\"inversed\", false);\n\t\t\t\tlet step;\n\t\t\t\tif (key == \"ArrowRight\" || key == \"ArrowDown\") {\n\t\t\t\t\tstep = 1;\n\t\t\t\t}\n\t\t\t\telse if (key == \"ArrowLeft\" || key == \"ArrowUp\") {\n\t\t\t\t\tstep = -1;\n\t\t\t\t}\n\t\t\t\telse if (key == \"Tab\") {\n\t\t\t\t\tstep = 0;\n\t\t\t\t}\n\n\t\t\t\tif (step != null) {\n\t\t\t\t\tif (inversed) {\n\t\t\t\t\t\tstep *= -1;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.set(dir, axis.nextPosition(step * m));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _handleLineFocus() {\n\t\tthis._alwaysShow = this.get(\"alwaysShow\", false);\n\t\tthis.setAll({\n\t\t\tpositionX: this.getPrivate(\"positionX\", 0),\n\t\t\tpositionY: this.getPrivate(\"positionY\", 0),\n\t\t\talwaysShow: true\n\t\t});\n\n\t\tthis._handleLineMove(\"Tab\");\n\t}\n\n\tprotected _handleLineBlur() {\n\t\tif (this.lineX.isFocus() || this.lineY.isFocus()) {\n\t\t\tthis.setAll({\n\t\t\t\tpositionX: undefined,\n\t\t\t\tpositionY: undefined,\n\t\t\t\talwaysShow: this._alwaysShow\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tif (this.isDirty(\"xAxis\")) {\n\t\t\tthis._tooltipX = false;\n\t\t\tconst xAxis = this.get(\"xAxis\");\n\n\t\t\tif (xAxis) {\n\t\t\t\tconst tooltip = xAxis.get(\"tooltip\");\n\t\t\t\tif (tooltip) {\n\t\t\t\t\tthis._tooltipX = true;\n\t\t\t\t\tthis._disposers.push(\n\t\t\t\t\t\ttooltip.on(\"pointTo\", () => {\n\t\t\t\t\t\t\tthis._updateXLine(tooltip);\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"yAxis\")) {\n\t\t\tthis._tooltipY = false;\n\t\t\tconst yAxis = this.get(\"yAxis\");\n\n\t\t\tif (yAxis) {\n\t\t\t\tconst tooltip = yAxis.get(\"tooltip\");\n\t\t\t\tif (tooltip) {\n\t\t\t\t\tthis._tooltipY = true;\n\t\t\t\t\tthis._disposers.push(\n\t\t\t\t\t\ttooltip.on(\"pointTo\", () => {\n\t\t\t\t\t\t\tthis._updateYLine(tooltip);\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _handleSyncWith() {\n\t\tconst chart = this.chart;\n\t\tif (chart) {\n\t\t\tconst syncWith = this.get(\"syncWith\");\n\t\t\tconst otherCharts: Array<XYChart> = [];\n\t\t\tif (syncWith) {\n\t\t\t\t$array.each(syncWith, (cursor) => {\n\t\t\t\t\tconst chart = cursor.chart;\n\t\t\t\t\tif (chart) {\n\t\t\t\t\t\totherCharts.push(chart)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\tchart._otherCharts = otherCharts;\n\t\t}\n\t}\n\n\tpublic _updateChildren() {\n\t\tsuper._updateChildren();\n\t\tthis._handleSyncWith();\n\n\t\tif (this.isDirty(\"positionX\") || this.isDirty(\"positionY\")) {\n\t\t\tconst positionX = this.get(\"positionX\");\n\t\t\tconst positionY = this.get(\"positionY\");\n\n\t\t\tif (positionX == null && positionY == null) {\n\t\t\t\tthis.hide(0);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._movePoint = this.toGlobal(this._getPoint(this.get(\"positionX\", 0), this.get(\"positionY\", 0)));\n\t\t\t\tthis.handleMove();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _updateXLine(tooltip: Tooltip) {\n\t\tlet x = $math.round(this._display.toLocal(tooltip.get(\"pointTo\", { x: 0, y: 0 })).x, 3);\n\t\tif (this._toX != x) {\n\t\t\tthis.lineX.animate({ key: \"x\", to: x, duration: tooltip.get(\"animationDuration\", 0), easing: tooltip.get(\"animationEasing\") });\n\t\t\tthis._toX = x;\n\t\t}\n\t}\n\n\tprotected _updateYLine(tooltip: Tooltip) {\n\t\tlet y = $math.round(this._display.toLocal(tooltip.get(\"pointTo\", { x: 0, y: 0 })).y, 3);\n\t\tif (this._toY != y) {\n\t\t\tthis.lineY.animate({ key: \"y\", to: y, duration: tooltip.get(\"animationDuration\", 0), easing: tooltip.get(\"animationEasing\") });\n\t\t\tthis._toY = y;\n\t\t}\n\t}\n\n\tprotected _drawLines() {\n\t\tthis.lineX.set(\"draw\", (display) => {\n\t\t\tdisplay.moveTo(0, 0);\n\t\t\tdisplay.lineTo(0, this.height());\n\t\t})\n\t\tthis.lineY.set(\"draw\", (display) => {\n\t\t\tdisplay.moveTo(0, 0);\n\t\t\tdisplay.lineTo(this.width(), 0);\n\t\t})\n\t}\n\n\tpublic updateCursor() {\n\t\tif (this.get(\"alwaysShow\")) {\n\t\t\tthis._movePoint = this.toGlobal(this._getPoint(this.get(\"positionX\", 0), this.get(\"positionY\", 0)));\n\t\t}\n\t\tthis.handleMove();\n\t}\n\n\tpublic _setChart(chart: XYChart): void {\n\t\tthis.chart = chart;\n\n\t\tthis._handleSyncWith();\n\n\t\tconst plotContainer = chart.plotContainer;\n\n\t\tthis.events.on(\"boundschanged\", () => {\n\t\t\tthis._disposers.push(this.setTimeout(() => {\n\t\t\t\tthis.updateCursor();\n\t\t\t}, 50))\n\t\t})\n\n\t\t//this._display.interactive = true;\n\t\tif ($utils.supports(\"touchevents\")) {\n\t\t\tthis._disposers.push(plotContainer.events.on(\"click\", (event) => {\n\t\t\t\tif ($utils.isTouchEvent(event.originalEvent)) {\n\t\t\t\t\tthis._handleMove(event);\n\t\t\t\t}\n\t\t\t}));\n\t\t\tthis._setUpTouch();\n\t\t}\n\n\t\tthis._disposers.push(plotContainer.events.on(\"pointerdown\", (event) => {\n\t\t\tthis._handleCursorDown(event);\n\t\t}));\n\n\t\tthis._disposers.push(plotContainer.events.on(\"globalpointerup\", (event) => {\n\t\t\tthis._handleCursorUp(event);\n\t\t\tif (!event.native && !this.isHidden()) {\n\t\t\t\tthis._handleMove(event);\n\t\t\t}\n\t\t}));\n\n\t\tthis._disposers.push(plotContainer.events.on(\"globalpointermove\", (event) => {\n\t\t\tif (!this.get(\"syncWith\")) {\n\t\t\t\tif ($object.keys(plotContainer._downPoints).length == 0 && !event.native && this.isHidden()) {\n\t\t\t\t\t// Ignore mouse movement if it originates on outside element and\n\t\t\t\t\t// we're not dragging.\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._handleMove(event);\n\n\t\t\tif (Math.hypot(this._lastPoint2.x - event.point.x, this._lastPoint2.y - event.point.y) > 1) {\n\t\t\t\tthis._handleLineBlur();\n\t\t\t\tthis._lastPoint2 = event.point;\n\t\t\t}\n\t\t}));\n\n\t\tconst parent = this.parent;\n\t\tif (parent) {\n\t\t\tparent.children.moveValue(this.selection);\n\t\t}\n\t}\n\n\tprotected _inPlot(point: IPoint): boolean {\n\t\tconst chart = this.chart;\n\t\tif (chart) {\n\t\t\treturn chart.inPlot(point);\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected _handleCursorDown(event: ISpritePointerEvent) {\n\t\tif ((event.originalEvent as any).button == 2) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst rootPoint = event.point;\n\t\tlet local = this._display.toLocal(rootPoint);\n\t\tconst chart = this.chart;\n\n\t\tthis.selection.set(\"draw\", () => { });\n\n\t\tif (chart && this._inPlot(local)) {\n\t\t\tthis._downPoint = local;\n\n\t\t\tif (this.get(\"behavior\") != \"none\") {\n\t\t\t\tthis.selection.show();\n\n\t\t\t\tconst type = \"selectstarted\";\n\t\t\t\tif (this.events.isEnabled(type)) {\n\t\t\t\t\tthis.events.dispatch(type, { type: type, target: this, originalEvent: event.originalEvent });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet positionX = this._getPosition(local).x;\n\t\t\tlet positionY = this._getPosition(local).y;\n\n\t\t\tthis.setPrivate(\"downPositionX\", positionX);\n\t\t\tthis.setPrivate(\"downPositionY\", positionY);\n\t\t}\n\t}\n\n\tprotected _handleCursorUp(event: ISpritePointerEvent) {\n\t\t// TODO: handle multitouch\n\t\tif (this._downPoint) {\n\t\t\tconst behavior = this.get(\"behavior\", \"none\");\n\t\t\tif (behavior != \"none\") {\n\t\t\t\tif (behavior.charAt(0) === \"z\") {\n\t\t\t\t\tthis.selection.hide();\n\t\t\t\t}\n\n\t\t\t\tconst rootPoint = event.point;\n\t\t\t\tlet local = this._display.toLocal(rootPoint);\n\n\t\t\t\tconst downPoint = this._downPoint;\n\t\t\t\tconst moveThreshold = this.get(\"moveThreshold\", 1);\n\t\t\t\tif (local && downPoint) {\n\t\t\t\t\tlet dispatch = false;\n\t\t\t\t\tif (behavior === \"zoomX\" || behavior === \"zoomXY\" || behavior === \"selectX\" || behavior === \"selectXY\") {\n\t\t\t\t\t\tif (Math.abs(local.x - downPoint.x) > moveThreshold) {\n\t\t\t\t\t\t\tdispatch = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (behavior === \"zoomY\" || behavior === \"zoomXY\" || behavior === \"selectY\" || behavior === \"selectXY\") {\n\t\t\t\t\t\tif (Math.abs(local.y - downPoint.y) > moveThreshold) {\n\t\t\t\t\t\t\tdispatch = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dispatch) {\n\t\t\t\t\t\tconst type = \"selectended\";\n\t\t\t\t\t\tif (this.events.isEnabled(type)) {\n\t\t\t\t\t\t\tthis.events.dispatch(type, { type: type, target: this, originalEvent: event.originalEvent });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tconst type = \"selectcancelled\";\n\t\t\t\t\t\tif (this.events.isEnabled(type)) {\n\t\t\t\t\t\t\tthis.events.dispatch(type, { type: type, target: this, originalEvent: event.originalEvent });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis._downPoint = undefined;\n\t}\n\n\tprotected _handleMove(event: ISpritePointerEvent) {\n\t\tif (this.getPrivate(\"visible\")) {\n\t\t\tconst chart = this.chart;\n\t\t\tif (chart && $object.keys(chart.plotContainer._downPoints).length > 1) {\n\t\t\t\tthis.set(\"forceHidden\", true)\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.set(\"forceHidden\", false)\n\t\t\t}\n\n\t\t\t// TODO: handle multitouch\n\t\t\tconst rootPoint = event.point;\n\t\t\tconst lastPoint = this._lastPoint;\n\n\t\t\tif (Math.round(lastPoint.x) === Math.round(rootPoint.x) && Math.round(lastPoint.y) === Math.round(rootPoint.y)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._lastPoint = rootPoint;\n\t\t\tthis.setPrivate(\"lastPoint\", rootPoint);\n\n\t\t\tthis.handleMove({ x: rootPoint.x, y: rootPoint.y }, false, event.originalEvent);\n\t\t}\n\t}\n\n\tprotected _getPosition(point: IPoint): IPoint {\n\t\treturn { x: point.x / this.width(), y: point.y / this.height() };\n\t}\n\n\t/**\n\t * Moves the cursor to X/Y coordinates within chart container (`point`).\n\t *\n\t * If `skipEvent` parameter is set to `true`, the move will not invoke\n\t * the `\"cursormoved\"` event.\n\t *\n\t * @param  point      X/Y to move cursor to\n\t * @param  skipEvent  Do not fire \"cursormoved\" event\n\t */\n\tpublic handleMove(point?: IPoint, skipEvent?: boolean, originalEvent?: IPointerEvent) {\n\t\tif (!point) {\n\t\t\tpoint = this._movePoint;\n\t\t}\n\n\t\tconst alwaysShow = this.get(\"alwaysShow\");\n\n\t\tif (!point) {\n\t\t\tthis.hide(0);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._movePoint = point;\n\t\tlet local = this._display.toLocal(point);\n\t\tlet chart = this.chart;\n\n\t\tif (chart && (this._inPlot(local) || this._downPoint)) {\n\t\t\tchart._movePoint = point;\n\n\t\t\tif (this.isHidden()) {\n\t\t\t\tthis.show();\n\n\t\t\t\tconst behavior = this.get(\"behavior\", \"\");\n\t\t\t\tif (behavior.charAt(0) == \"z\") {\n\t\t\t\t\tthis.selection.set(\"draw\", () => { });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet x = local.x;\n\t\t\tlet y = local.y;\n\n\t\t\tlet xyPos = this._getPosition(local);\n\n\t\t\tthis.setPrivate(\"point\", local);\n\n\t\t\tlet snapToSeries = this.get(\"snapToSeries\");\n\n\t\t\tif (this._downPoint) {\n\t\t\t\tsnapToSeries = undefined;\n\t\t\t}\n\n\t\t\tlet userPositionX = this.get(\"positionX\");\n\t\t\tlet positionX = xyPos.x;\n\n\t\t\tif ($type.isNumber(userPositionX)) {\n\t\t\t\tpositionX = userPositionX;\n\t\t\t}\n\n\t\t\tlet userPositionY = this.get(\"positionY\");\n\t\t\tlet positionY = xyPos.y;\n\n\t\t\tif ($type.isNumber(userPositionY)) {\n\t\t\t\tpositionY = userPositionY;\n\t\t\t}\n\n\t\t\tthis.setPrivate(\"positionX\", positionX);\n\t\t\tthis.setPrivate(\"positionY\", positionY);\n\n\t\t\tconst xy = this._getPoint(positionX, positionY);\n\t\t\tx = xy.x;\n\t\t\ty = xy.y;\n\n\t\t\tchart.xAxes.each((axis) => {\n\t\t\t\taxis._handleCursorPosition(positionX, snapToSeries);\n\t\t\t\tif (alwaysShow) {\n\t\t\t\t\taxis.handleCursorShow();\n\t\t\t\t}\n\t\t\t})\n\t\t\tchart.yAxes.each((axis) => {\n\t\t\t\taxis._handleCursorPosition(positionY, snapToSeries);\n\t\t\t\tif (alwaysShow) {\n\t\t\t\t\taxis.handleCursorShow();\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tif (!skipEvent) {\n\t\t\t\tchart._handleCursorPosition();\n\n\t\t\t\tconst type = \"cursormoved\";\n\t\t\t\tif (this.events.isEnabled(type)) {\n\t\t\t\t\tthis.events.dispatch(type, { type: type, target: this, point: point, originalEvent: originalEvent });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._updateLines(x, y);\n\n\t\t\tchart.arrangeTooltips();\n\t\t}\n\t\telse if (!this._downPoint) {\n\t\t\tif (!alwaysShow) {\n\t\t\t\tthis.hide(0);\n\n\t\t\t\tconst type = \"cursorhidden\";\n\t\t\t\tif (this.events.isEnabled(type)) {\n\t\t\t\t\tthis.events.dispatch(type, { type: type, target: this });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this._downPoint && this.get(\"behavior\") != \"none\") {\n\t\t\tthis._updateSelection(local)\n\t\t}\n\t}\n\n\tprotected _getPoint(positionX: number, positionY: number): IPoint {\n\t\treturn { x: this.width() * positionX, y: this.height() * positionY };\n\t}\n\n\n\tprotected _updateLines(x: number, y: number) {\n\t\tif (!this._tooltipX) {\n\t\t\tthis.lineX.set(\"x\", x);\n\t\t}\n\t\tif (!this._tooltipY) {\n\t\t\tthis.lineY.set(\"y\", y);\n\t\t}\n\n\t\tthis._drawLines();\n\t}\n\n\tprotected _updateSelection(point: IPoint) {\n\t\tconst selection = this.selection;\n\t\tconst behavior = this.get(\"behavior\");\n\t\tconst w = this.width();\n\t\tconst h = this.height();\n\n\t\tif (point.x < 0) {\n\t\t\tpoint.x = 0;\n\t\t}\n\n\t\tif (point.x > w) {\n\t\t\tpoint.x = w;\n\t\t}\n\n\t\tif (point.y < 0) {\n\t\t\tpoint.y = 0;\n\t\t}\n\n\t\tif (point.y > h) {\n\t\t\tpoint.y = h;\n\t\t}\n\n\t\tselection.set(\"draw\", (display) => {\n\t\t\tconst downPoint = this._downPoint;\n\t\t\tif (downPoint) {\n\t\t\t\tif (behavior === \"zoomXY\" || behavior === \"selectXY\") {\n\t\t\t\t\tdisplay.moveTo(downPoint.x, downPoint.y);\n\t\t\t\t\tdisplay.lineTo(downPoint.x, point.y);\n\t\t\t\t\tdisplay.lineTo(point.x, point.y);\n\t\t\t\t\tdisplay.lineTo(point.x, downPoint.y);\n\t\t\t\t\tdisplay.lineTo(downPoint.x, downPoint.y);\n\t\t\t\t}\n\t\t\t\telse if (behavior === \"zoomX\" || behavior === \"selectX\") {\n\t\t\t\t\tdisplay.moveTo(downPoint.x, 0);\n\t\t\t\t\tdisplay.lineTo(downPoint.x, h);\n\t\t\t\t\tdisplay.lineTo(point.x, h);\n\t\t\t\t\tdisplay.lineTo(point.x, 0);\n\t\t\t\t\tdisplay.lineTo(downPoint.x, 0);\n\t\t\t\t}\n\t\t\t\telse if (behavior === \"zoomY\" || behavior === \"selectY\") {\n\t\t\t\t\tdisplay.moveTo(0, downPoint.y);\n\t\t\t\t\tdisplay.lineTo(w, downPoint.y);\n\t\t\t\t\tdisplay.lineTo(w, point.y);\n\t\t\t\t\tdisplay.lineTo(0, point.y);\n\t\t\t\t\tdisplay.lineTo(0, downPoint.y);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tprotected _onHide() {\n\t\tif (this.isHidden()) {\n\t\t\tlet chart = this.chart;\n\t\t\tif (chart) {\n\n\t\t\t\tchart.xAxes.each((axis) => {\n\t\t\t\t\taxis.handleCursorHide();\n\t\t\t\t})\n\t\t\t\tchart.yAxes.each((axis) => {\n\t\t\t\t\taxis.handleCursorHide();\n\t\t\t\t})\n\t\t\t\tchart.series.each((series) => {\n\t\t\t\t\tseries.handleCursorHide();\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\tsuper._onHide();\n\t}\n\n\tprotected _onShow() {\n\t\tif (!this.isHidden()) {\n\t\t\tlet chart = this.chart;\n\t\t\tif (chart) {\n\t\t\t\tchart.xAxes.each((axis) => {\n\t\t\t\t\taxis.handleCursorShow();\n\t\t\t\t})\n\t\t\t\tchart.yAxes.each((axis) => {\n\t\t\t\t\taxis.handleCursorShow();\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\tsuper._onShow();\n\t}\n\n\tprotected _dispose() {\n\t\tsuper._dispose();\n\t\tthis.selection.dispose();\n\t}\n}\n"],"names":["Button","Container","_afterNew","this","_settings","themeTags","$utils","super","background","set","RoundedRectangle","new","_root","setPrivate","_prepareChildren","isDirty","previous","_prevSettings","icon","get","_disposeProperty","dispose","children","push","label","Object","defineProperty","classNames","concat","className","Rectangle","_beforeChanged","_clear","_draw","width","height","wSign","Math","abs","hSign","x","y","strokeWidth","w","h","$type","minSide","min","crtl","crtr","crbr","crbl","maxcr","$math","display","_display","moveTo","lineTo","arcTo","closePath","AxisTick","Tick","constructor","Grid","Graphics","isPrivateDirty","AxisLabel","Label","AxisRenderer","addDisposer","ListTemplate","Template","_new","ticks","template","grid","axisFills","labels","makeTick","dataItem","tick","make","_setDataItem","setRaw","axis","labelsContainer","makeGrid","gridContainer","makeAxisFill","axisFill","makeLabel","moveValue","axisLength","gridCount","_updatePositions","thumb","_disposers","events","on","event","_handleThumbDown","_handleThumbUp","_handleThumbMove","root","once","markDirtySize","_changed","pan","removeValue","_thumbDownPoint","toLocal","point","_downStart","_downEnd","_event","undefined","downPoint","downStart","downEnd","extra","_getPan","zoom","_point1","_point2","positionToCoordinate","position","_inversed","_end","_axisLength","_start","updateTooltipBounds","_tooltip","_updateSize","markDirty","toAxisPosition","start","end","toGlobalPosition","fixPosition","_updateLC","toggleVisibility","sprite","minPosition","maxPosition","_positionTooltip","tooltip","chart","toGlobal","inPlot","hide","processAxis","AxisRendererX","p100","isMeasured","setPrivateRaw","gridTemplate","graphics","ghostLabel","opposite","inside","axisChildren","addTag","removeTag","topAxesContainer","indexOf","insertIndex","bottomAxesContainer","_a","_applyThemes","each","_markDirtyRedraw","point1","point2","_ls","_lc","parent","innerWidth","topGridContainer","bulletsContainer","plotContainer","axisHeader","length","setAll","verticalLayout","layout","positionToPoint","updateTick","endPosition","count","location","updateLabel","updateGrid","updateBullet","bullet","bulletPosition","roundAxisPosition","previousBullet","_bullets","d","previousSprite","updateFill","fill","x0","x1","fillDrawMethod","positionTooltip","num","global","pointerOrientation","bounds","left","right","top","bottom","oldBounds","AxisRendererY","renderer","rightAxesContainer","leftAxesContainer","horizontalLayout","innerHeight","y0","y1","Axis","Component","List","interfaceColors","_dispose","axisRanges","onAll","change","type","$array","oldValues","_processAxisRange","newValue","disposeDataItem","oldValue","Error","value","_createGhostLabel","DataItem","adapters","disable","opacity","tooltipText","tooltipHTML","interactive","_updateFinals","duration","priority","sAnimation","_sAnimation","eAnimation","_eAnimation","maxDeviation","maxZoomFactor","getPrivate","maxZoomFactorReal","minZoomCount","dataItems","maxZoomCount","Infinity","minZoomFactor","_handleAxisSelection","playing","to","easing","animate","key","markDirtyKey","stop","series","_series","_createAssets","_rangesDirty","_prepareDataItem","above","container","_dataItem","_index","markDirtyExtremes","markDirtySelectionExtremes","_calculateTotals","_updateAxisRanges","axisRange","_seriesAxisRanges","_updateCursor","delta","rendererTags","toLowerCase","_updateTooltipBounds","_updateBounds","processChart","axisHeadersContainer","onPrivate","hideDataItem","_toggleFHDataItem","showDataItem","forceHidden","fh","_toggleDataItem","visible","v","tags","minor","m","remove","_b","_c","_processBullet","axisBullet","_afterChanged","_updateChartLayout","_seriesAdded","_updateGhost","getCellWidthPosition","isHidden","localBounds","gWidth","ceil","text","_getText","_handleCursorPosition","snapToSeries","_cursorPosition","_snapToSeries","updateTooltip","getSeriesItem","updateLegendMarker","updateLegendValue","tooltipDataItem","showDataItemTooltip","_updateTooltipText","show","getTooltipText","_location","_handleSeriesRemoved","handleCursorShow","handleCursorHide","processSeriesDataItem","_fields","_clearDirty","_sizeDirty","coordinateToPosition","coordinate","shouldGap","_nextItem","_autoGapCount","_fieldName","createAxisRange","axisDataItem","_groupSeriesData","ValueAxis","_dirtyExtremes","_dirtySelectionExtremes","syncWithAxis","_syncDp","MultiDisposer","someDirty","_valuesDirty","_getMinMax","_handleSizeDirty","_isPanning","getMM","letter","xAxes","yAxes","_getSelectionMinMax","_groupData","_handleRangeChange","_prepareAxisItems","_baseValue","baseValue","_dseHandled","_formatText","numberFormat","formatter","getNumberFormatter","format","max","logarithmic","step","selectionMin","selectionMax","differencePower","minLog","_minLogAdjusted","minRealLog","_minRealLog","pow","log","LOG10E","minorLabelsEnabled","minorGridEnabled","stepPower","floor","stepAdjusted","round","minorGridCount","minorStep","i","_dataItems","processDataItem","nextValue","minorValue","_adjustMinMax","minorDataItem","minorDataItems","minorLabel","decCount","j","inited","_markDirtyAxes","endValue","valueToPosition","fillEndPosition","labelEndPosition","labelEndValue","hasTag","fillRule","positionToValue","minMaxStep","stepDecimalPlaces","E","treatZeroAs","valueToFinalPosition","getX","getY","getDataItemCoordinateX","field","_cellLocation","axisLocation","getDataItemPositionX","component","getStackedXValueWorking","getDataItemCoordinateY","getDataItemPositionY","getStackedYValueWorking","basePosition","cellEndValue","fixSmallStep","_fixMin","_fixMax","startIndex","vc","endIndex","fieldWorking","sum","total","totalPercent","minDefined","maxDefined","extraMin","extraMax","selectionStrictMinMax","strictMinMax","seriesMin","seriesMax","outOfSelection","minX","maxX","minY","maxY","isShowing","range","_minReal","_maxReal","smin","_deltaMinMax","minMaxStep2","selectionMinReal","selectionMaxReal","_syncAxes","len","LN10","minDiff","diff","initialMin","initialMax","minAdapted","fold","maxAdapted","_getDelta","strictMinMaxSelection","strict","_fixZoomFactor","_saveMinMax","animatePrivate","exponent","power","_min","_max","strictMode","difference","stepDivisor","maxPrecision","ceiledStep","Number","MAX_VALUE","maxCount","minCount","_adjustPosition","extraDecimals","decimals","index","oldDiff","fieldName","zoomToValues","syncMin","syncMax","syncStep","currentCount","synced","c","omin","omax","ostep","_checkSync","nextPosition","CategoryAxis","fields","_afterDataChange","_itemMap","indices","_getIndices","adjustZoom","getIndices","stopped","zoomToIndexes","startCategory","endCategory","baseAxis","xAxis","yAxis","openKey","otherAxis","startDataItem","endDataItem","findDataItem","categoryAxis","category","direction","idx","categoryToIndex","searchCategory","item","hasValue","__valueXShowFields","__valueYShowFields","frequency","_frequency","f","fillIndex","categoryLocation","endCategoryLocation","indexToPosition","fillEndIndex","NaN","cellLocation","_axisLocation","final","startLocation","endLocation","name","modCount","acc","categoryToPosition","dataItemToPosition","axisPositionToIndex","modifiedLen","cellSizes","cellSize","rel","populateString","markDirtyText","seriesDataItem","zoomToCategories","XYSeries","Series","valueFields","_setRawDefault","_removeAxisRange","states","create","_makeFieldNames","_onDataClear","$object","_dataSets","_key","_updateFields","_valueXFields","_valueYFields","_valueXShowFields","_valueYShowFields","valueXFields","split","valueYFields","_shouldMakeBullet","minBulletDistance","_xField","_yField","xName","xCapName","yName","yCapName","xLetter","yLetter","open","low","high","_xOpenField","_xLowField","_xHighField","_yOpenField","_yLowField","_yHighField","_fixVC","hiddenState","lookup","sequencedInterpolation","_handleMaskBullets","_fixPosition","tooltipFieldX","_tooltipFieldX","tooltipFieldY","_tooltipFieldY","stacked","_dataProcessed","_stack","_unstack","getStackedXValue","getStackedYValue","_seriesValuesDirty","_markStakedDirtyStack","_dataGrouped","_stackDirty","_showBullets","_psi","_pei","_selectionProcessed","vcx","vcy","processYSelectionDataItem","processXSelectionDataItem","selectionMinY","selectionMaxY","selectionMinX","selectionMaxX","_makeRangeMask","mainContainerMask","_mainContainerMask","target","draw","mainContainer","mask","_markDirtyKey","_updateChildren","_x","_y","seriesIndex","_couldStackTo","getIndex","_stackDataItems","_reallyStackedTo","_stackedSeries","uid","_handleRemoved","stackToItemKey","stackToNegative","s","stackToSeries","stackToItem","stackValue","stackedToSeries","createLegendMarker","_axesDirty","_markDataSetDirty","_aggregatesCalculated","_positionBullet","locationX","locationY","exactLocationX","exactLocationY","positionX","positionY","getPoint","_shouldShowBullet","realField","previousBounds","yo","xo","isType","_positionX","_positionY","setDataSet","id","_handleDataSetChange","_dataSetId","isEnabled","dispatch","resetGrouping","dataSet","_mainDataItems","mainDataItems","bullets","promises","_super","call","then","_isShowing","_sequencedShowHide","Promise","all","_isHiding","_valueFields","waitForStop","_markDirtyStack","stackedSeries","_skipped","itemLocationX","itemLocationY","xPos","_aLocationX0","_aLocationX1","yPos","_aLocationY0","_aLocationY1","_getTooltipTarget","hideTooltip","legendDataItem","txt","_emptyDataItem","valueLabel","_getItemReaderLabel","_shouldInclude","_position","resetExtremes","_adjustStartIndex","baseDuration","minSelection","dl","BaseColumnSeries","_makeGraphics","listTemplate","makeColumn","valueAxis","_createGraphics","_ph","_pw","columnsTemplate","columns","clusterCount","xRenderer","yRenderer","cellStartLocation","cellEndLocation","cellLocationX0","cellLocationX1","cellLocationY0","cellLocationY1","_toggleColumn","_beforeColumnsDraw","axisCase","_updateGraphics","_afterColumnsDraw","_columnsUpdated","markerRectangle","ds","visualSettings","setting","graphicsArray","rangeGraphics","previousDataItem","xField","yField","valueX","valueY","xOpenField","yOpenField","openLocationX","openLocationY","xStart","xEnd","yStart","yEnd","l","r","t","b","fitW","fitH","Percent","offset","stackToItemY","stackToItemX","_applyGraphicsStates","_updateSeriesGraphics","maxWidth","maxHeight","ptl","pbr","tooltipPoint","dropFromOpen","riseFromOpen","dropFromPrevious","riseFromPrevious","close","previousClose","apply","list","lastDataItem","column","ColumnSeries","virtualParent","allColumnsData","allColumns","clear","stroke","strokeOpacity","fillOpacity","beginFill","beginPath","lineStyle","drawRect","endStroke","endFill","strokWidth","Array","prototype","slice","from","Linear","context","_context","areaStart","_line","areaEnd","lineStart","_point","lineEnd","p","defined","constant","curve","curveLinear","output","path","withPath","line","data","buffer","n","array","defined0","pointX","pointY","_","arguments","area","k","x0z","y0z","arealine","lineX0","lineY0","lineY1","lineX1","LineSeries","strokes","fills","_fillGenerator","makeStroke","makeFill","_strokeTemplate","_fillTemplate","legendStroke","_legendStroke","legendFill","_legendFill","fillPattern","curveFactory","_strokeGenerator","strokeTemplateField","fillTemplateField","strokeTemplateFound","fillTemplateFound","hasValues","dataContext","_endIndex","_clearGraphics","_sindex","_dindex","_startSegment","dataItemIndex","currentEndIndex","autoGapCount","connect","fillTemplate","originalTemplate","strokeTemplate","xOpenFieldValue","yOpenFieldValue","basePosX","basePosY","baseField","segments","points","minDistance","fillVisible","getOpen","o","rangeStrokeTemplate","rangeFillTemplate","_getPoints","nextItem","_endLine","_drawStroke","_drawFill","iPoint","xPos0","yPos0","closeIPoint","p0","p1","p2","p3","prev","_previousPoint","pp0","pp1","pp2","pp3","hypot","_points","_firstPoint","segment","marker","color","disabledColor","bulletFunction","legend","focusable","focusableGroup","ariaLabel","XYChartDefaultTheme","Theme","setupDefaultRules","ic","language","rule","bind","colors","ColorSet","paddingLeft","paddingRight","paddingTop","paddingBottom","panX","panY","wheelStep","arrangeTooltips","pinchZoomX","pinchZoomY","legendLabelText","Color","fromHex","saturation","setColor","cornerRadiusTR","cornerRadiusTL","cornerRadiusBR","cornerRadiusBL","minGridDistance","centerY","fontSize","populateText","centerX","behavior","layer","exportable","snapToSeriesBy","moveThreshold","forceInactive","strokeDasharray","role","translate","zoomOut","snapTooltip","tooltipLocation","zoomX","zoomY","fixAxisSize","multiLocation","p50","crisp","inversed","cursorOverStyle","gridIntervals","timeUnit","dateFormats","periodChangeDateFormats","tooltipDateFormats","markUnitChange","groupData","groupCount","skipFirstMinor","weekLabelLocation","groupIntervals","intervalDuration","baseInterval","gridInterval","$time","Date","locale","firstDayOfWeek","utc","timezone","getTime","val","autoZoom","baseUnit","maskBullets","openValueXGrouped","openValueYGrouped","valueXGrouped","valueYGrouped","seriesTooltipTarget","adjustBulletPosition","clustered","percent","tension","lowValueXGrouped","lowValueYGrouped","highValueXGrouped","highValueYGrouped","draggable","rotation","XYChart","SerialChart","ListAutoDispose","chartContainer","yAxesAndPlotContainer","maskContent","plotsContainer","topPlotContainer","_defaultThemes","zoomOutButton","seriesContainer","_processAxis","_handlePlotDown","_handlePlotUp","_handlePlotMove","_maskGrid","_setUpTouch","cancelTouch","_removeSeries","_posXDp","_posYDp","cursor","handleWheel","wheelX","wheelY","wheelEvent","originalEvent","prevent","plotPoint","shiftY","deltaY","shiftX","deltaX","wheelZoomPositionX","wheelZoomPositionY","newStart","newEnd","_handleWheelAnimation","_getWheelSign","se","_fixWheel","preventDefault","_handleSetWheel","_wheelDp","sign","button","local","pointerId","_downPoints","_downStartX","_downEndX","_downStartY","_downEndY","_downPoint","clientX","clientY","_panStart","_panEnd","eventType","animation","_dispatchWheelAnimation","_movePoints","_handlePinch","documentPointToRoot","scrollbarX","disableType","panStart","panEnd","enableType","scrollbarY","downPoints","movePoints","movePoint","downPoint0","downPoint1","movePoint0","movePoint1","downStartX","downEndX","downPos0","downPos1","movePos0","movePos1","e","sa","ea","downStartY","downEndY","cursorPoint","isHiding","closestItem","distance","handleMove","updateCursor","_addCursor","_colorize","_setChart","_pushPropertyDisposer","_handleCursorSelectEnd","_handleScrollbar","grip","_handleZoomOut","_processSeries","colorSet","next","_setSoft","patternSet","pattern","downPositionX","downPositionY","position0","position1","axes","axisStart","axisEnd","zoomAnimation","updateScrollbar","_removeAxis","setIndex","newIndex","isDisposed","axisParent","gridParent","topGridParent","force","updateGrips","otherCharts","_otherCharts","chartPlotContainer","documentPoint","rootPointToDocument","chartRoot","hh","tooltipContainer","plotT","plotB","tooltips","closest","closestPoint","_movePoint","maxTooltipDistance","maxTooltipDistanceBy","tooltipSeries","hidden","_tooltipToLocal","totalTooltipH","tooltipCount","sort","a","$order","prevY","_fy","reverse","prevBottom","XYCursor","_drawLines","setTimeout","lineX","_handleXLine","lineY","_handleYLine","_handleLineFocus","_handleLineBlur","document","ev","_handleLineMove","ctrlKey","dir","focused","_alwaysShow","alwaysShow","isFocus","_tooltipX","_updateXLine","_tooltipY","_updateYLine","_handleSyncWith","syncWith","_getPoint","_toX","_toY","_handleMove","_handleCursorDown","_handleCursorUp","native","_lastPoint2","selection","_inPlot","rootPoint","_getPosition","charAt","lastPoint","_lastPoint","skipEvent","xyPos","userPositionX","userPositionY","xy","_updateLines","_updateSelection","_onHide","_onShow"],"sourceRoot":""}