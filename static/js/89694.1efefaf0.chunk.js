"use strict";(self.webpackChunkok_wpa_maps=self.webpackChunkok_wpa_maps||[]).push([[89694],{89694(t,s,r){r.r(s),r.d(s,{SplatSortWorkerInput:()=>e,SplatSortWorkerOutput:()=>n,destroy:()=>u,sort:()=>i});class e{constructor(t,s,r){let e=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.distances=t,this.sortOrderIndices=s,this.numGaussians=r,this.preciseSort=e}}class n{constructor(t,s){this.distances=t,this.sortedOrderIndices=s}}let o=null,l=null;function a(t,s){const r=t.length,e=Math.max(10,Math.min(20,Math.round(Math.log2(r/.25)))),n=1+(1<<e);!function(t,s){var r;(null===(r=o)||void 0===r?void 0:r.length)!==t&&(o=new Uint32Array(t)),l&&l.length===1+(1<<s)?l.fill(0):l=new Uint32Array(1+(1<<s))}(r,e);let a=t[0],i=t[0];for(let o=0;o<t.length;o++)a=Math.min(a,t[o]),i=Math.max(i,t[o]);const u=i-a;if(u<1e-6)for(let c=0;c<r;++c)o[c]=0,l[0]++;else{const s=(1<<e)/u;for(let e=0;e<r;e++){const r=(t[e]-a)*s>>>0;o[e]=r,l[r]++}}for(let o=1;o<n;o++)l[o]+=l[o-1];for(let c=0;c<r;c++){const t=o[c];s[--l[t]]=c}}async function i(t){const{distances:s,sortOrderIndices:r,preciseSort:e,numGaussians:o}=t,l=s.subarray(0,o),i=r.subarray(0,o);if(0===l.length||0===i.length)return{result:new n(s,r),transferList:[s.buffer,r.buffer]};if(e){const t=Array.from(i.keys());t.sort((t,s)=>l[t]-l[s]||t-s);const s=t.map(t=>i[t]);i.set(s)}else a(l,i);return{result:new n(s,r),transferList:[s.buffer,r.buffer]}}function u(){o=null,l=null}}}]);
//# sourceMappingURL=89694.1efefaf0.chunk.js.map