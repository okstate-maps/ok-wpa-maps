{"version":3,"file":"static/js/5738.d8ee0548.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/engine/BitmapTile.js","../node_modules/@arcgis/core/views/2d/engine/BitmapTileContainer.js","../node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js","../node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js","../node_modules/@arcgis/core/views/2d/layers/BitmapTileLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/WMTSLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/support/imageUtils.js","../node_modules/@arcgis/core/views/layers/RefreshableLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{c as t}from\"../../../chunks/mat3f32.js\";import{Bitmap as e}from\"./Bitmap.js\";import{TiledDisplayObject as s}from\"./webgl/TiledDisplayObject.js\";class r extends s{constructor(t,s,r,i,a,n,m=null){super(t,s,r,i,a,n),this.bitmap=new e(m),this.bitmap.coordScale=[a,n],this.bitmap.once(\"isReady\",(()=>this.ready()))}destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(t){this.bitmap.beforeRender(t),super.beforeRender(t)}afterRender(t){this.bitmap.afterRender(t),super.afterRender(t)}set stencilRef(t){this.bitmap.stencilRef=t}get stencilRef(){return this.bitmap.stencilRef}_createTransforms(){return{dvs:t(),tileMat3:t()}}setTransform(t){super.setTransform(t),this.bitmap.transforms.dvs=this.transforms.dvs}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap&&(this.bitmap.stage=null)}}export{r as BitmapTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{BitmapTile as i}from\"./BitmapTile.js\";import{brushes as r}from\"./brushes.js\";import{WGLDrawPhase as t}from\"./webgl/enums.js\";import s from\"./webgl/TileContainer.js\";class n extends s{get requiresDedicatedFBO(){return this.children.some((e=>\"additive\"===e.bitmap.blendFunction))}createTile(r){const t=this._tileInfoView.getTileBounds(e(),r),s=this._tileInfoView.getTileResolution(r.level),[n,o]=this._tileInfoView.tileInfo.size;return new i(r,s,t[0],t[3],n,o)}prepareRenderPasses(e){const i=e.registerRenderPass({name:\"bitmap (tile)\",brushes:[r.bitmap],target:()=>this.children.map((e=>e.bitmap)),drawPhase:t.MAP});return[...super.prepareRenderPasses(e),i]}doRender(e){this.visible&&e.drawPhase===t.MAP&&super.doRender(e)}}export{n as BitmapTileContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import{WGLDrawPhase as e}from\"./enums.js\";import r from\"./WGLContainer.js\";import s from\"./brushes/WGLBrushInfo.js\";import t from\"./brushes/WGLBrushStencil.js\";const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends r{constructor(e){super(),this._tileInfoView=e}renderChildren(e){this.sortChildren(n),this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(r){const n=super.prepareRenderPasses(r);return n.push(r.registerRenderPass({name:\"stencil\",brushes:[t],drawPhase:e.DEBUG|e.MAP|e.HIGHLIGHT,target:()=>this.getStencilTarget()})),has(\"esri-tiles-debug\")&&n.push(r.registerRenderPass({name:\"tileInfo\",brushes:[s],drawPhase:e.DEBUG,target:()=>this.children})),n}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(const s of this.children)s.stencilRef=r++}}export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{s as t,m as s}from\"../../../../chunks/mat3.js\";import{DisplayObject as i}from\"../DisplayObject.js\";import e from\"../../tiling/TileKey.js\";class r extends i{constructor(t,s,i,r,h,o,n=h,a=o){super(),this.triangleCountReportedInDebug=0,this.triangleCount=0,this.texture=null,this.key=new e(t),this.resolution=s,this.x=i,this.y=r,this.width=h,this.height=o,this.rangeX=n,this.rangeY=a}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}setTransform(i){const e=this.resolution/(i.resolution*i.pixelRatio),r=this.transforms.tileMat3,[h,o]=i.toScreenNoRotation([0,0],[this.x,this.y]),n=this.width/this.rangeX*e,a=this.height/this.rangeY*e;t(r,n,0,0,0,a,0,h,o,1),s(this.transforms.dvs,i.displayViewMat3,r)}}export{r as TiledDisplayObject};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/Error.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapTileContainer as t}from\"../engine/BitmapTileContainer.js\";const r=r=>{let s=class extends r{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new t(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView?.removeAllChildren(),this._bitmapView=null}};return s=e([i(\"esri.views.2d.layers.BitmapTileLayerView2D\")],s),s};export{r as BitmapTileLayerView2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Logger.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import{equals as a}from\"../../../geometry/support/spatialReferenceUtils.js\";import{BitmapTileLayerView2D as l}from\"./BitmapTileLayerView2D.js\";import{LayerView2DMixin as o}from\"./LayerView2D.js\";import{resampleImage as h}from\"./support/imageUtils.js\";import n from\"../tiling/TileInfoView.js\";import c from\"../tiling/TileKey.js\";import u from\"../tiling/TileQueue.js\";import p from\"../tiling/TileStrategy.js\";import f from\"../../layers/LayerView.js\";import m from\"../../layers/RefreshableLayerView.js\";const d=new Set([102113,102100,3857,3785,900913]),y=[0,0];let _=class extends(m(l(o(f)))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this.layer=null}get tileMatrixSet(){const e=this._getTileMatrixSetBySpatialReference(this.layer.activeLayer);return e?(e.id!==this.layer.activeLayer.tileMatrixSetId&&(this.layer.activeLayer.tileMatrixSetId=e.id),e):null}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume()}attach(){const e=this.tileMatrixSet?.tileInfo;e&&(this._tileInfoView=new n(e),this._fetchQueue=new u({tileInfoView:this._tileInfoView,concurrency:16,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new p({cachePolicy:\"keep\",resampling:!0,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.addAttachHandles(this._updatingHandles.add((()=>[this.layer?.activeLayer?.styleId,this.tileMatrixSet]),(()=>this.doRefresh()))),super.attach())}detach(){super.detach(),this._tileStrategy?.destroy(),this._fetchQueue?.destroy(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}supportsSpatialReference(e){return this.layer.activeLayer.tileMatrixSets?.some((t=>a(t.tileInfo?.spatialReference,e)))??!1}async doRefresh(){if(this.attached){if(this.suspended)return this._tileStrategy.clear(),void this.requestUpdate();this._fetchQueue.reset(),this._tileStrategy.refresh((e=>this._updatingHandles.addPromise(this._enqueueTileFetch(e))))}}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(y,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._updatingHandles.addPromise(this._enqueueTileFetch(t)),this._bitmapView.addChild(t),this.requestUpdate(),t}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>e.destroy())),this.requestUpdate()}async fetchTile(e,t={}){const s=\"tilemapCache\"in this.layer?this.layer.tilemapCache:null,{signal:r,resamplingLevel:a=0}=t;if(!s)return this._fetchImage(e,r);const l=new c(0,0,0,0);let o;try{await s.fetchAvailabilityUpsample(e.level,e.row,e.col,l,{signal:r}),o=await this._fetchImage(l,r)}catch(n){if(i(n))throw n;if(a<3){const i=this._tileInfoView.getTileParentId(e.id);if(i){const s=new c(i),r=await this.fetchTile(s,{...t,resamplingLevel:a+1});return h(this._tileInfoView,r,s,e)}}throw n}return h(this._tileInfoView,o,l,e)}canResume(){const e=super.canResume();return e?null!==this.tileMatrixSet:e}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once(\"attach\",(()=>this.requestUpdate()))}catch(s){i(s)||t.getLogger(this).error(s)}this.requestUpdate()}}async _fetchImage(e,t){return this.layer.fetchImageBitmapTile(e.level,e.row,e.col,{signal:t})}_getTileMatrixSetBySpatialReference(e){const t=this.view.spatialReference;if(!e.tileMatrixSets)return null;let i=e.tileMatrixSets.find((e=>a(e.tileInfo?.spatialReference,t)));return!i&&t.isWebMercator&&(i=e.tileMatrixSets.find((e=>d.has(e.tileInfo?.spatialReference.wkid??-1)))),i}};e([s({readOnly:!0})],_.prototype,\"tileMatrixSet\",null),_=e([r(\"esri.views.2d.layers.WMTSLayerView2D\")],_);const w=_;export{w as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nfunction e(e){return e instanceof HTMLImageElement?e.naturalWidth:e.width}function t(e){return e instanceof HTMLImageElement?e.naturalHeight:e.height}function n(n,l,r,u){if(r.level===u.level)return l;const i=n.tileInfo.size,a=n.getTileResolution(r.level),c=n.getTileResolution(u.level);let g=n.getLODInfoAt(u.level);const h=g.getXForColumn(u.col),d=g.getYForRow(u.row);g=n.getLODInfoAt(r.level);const f=g.getXForColumn(r.col),s=g.getYForRow(r.row),m=e(l)/i[0],v=t(l)/i[1],w=Math.round(m*((h-f)/a)),I=Math.round(v*(-(d-s)/a)),M=Math.round(m*i[0]*(c/a)),F=Math.round(v*i[1]*(c/a)),L=o(i);return L.getContext(\"2d\").drawImage(l,w,I,M,F,0,0,i[0],i[1]),L}function o(e){const t=document.createElement(\"canvas\");return[t.width,t.height]=e,t}export{o as createBlankImage,n as resampleImage};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/reactiveUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";const a=a=>{let c=class extends a{initialize(){this.addHandles(o((()=>this.layer),\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{s(r)||e.getLogger(this).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([i(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{a as default};\n"],"names":["r","s","constructor","t","i","a","n","m","arguments","length","undefined","super","this","bitmap","e","coordScale","once","ready","destroy","beforeRender","afterRender","stencilRef","_createTransforms","dvs","tileMat3","setTransform","transforms","onAttach","stage","onDetach","requiresDedicatedFBO","children","some","blendFunction","createTile","_tileInfoView","getTileBounds","getTileResolution","level","o","tileInfo","size","prepareRenderPasses","registerRenderPass","name","brushes","target","map","drawPhase","MAP","doRender","visible","key","row","col","renderChildren","sortChildren","setStencilReference","createRenderParams","state","requiredLevel","getClosestInfoForScale","scale","displayLevel","scaleToZoom","push","DEBUG","HIGHLIGHT","getStencilTarget","has","h","triangleCountReportedInDebug","triangleCount","texture","resolution","x","y","width","height","rangeX","rangeY","dispose","pixelRatio","toScreenNoRotation","displayViewMat3","attach","view","timeline","record","concat","layer","title","_bitmapView","container","addChild","detach","_this$_bitmapView","removeChild","removeAllChildren","d","Set","_","l","f","_tileStrategy","_fetchQueue","tileMatrixSet","_getTileMatrixSetBySpatialReference","activeLayer","id","tileMatrixSetId","update","pause","resume","_this$tileMatrixSet","u","tileInfoView","concurrency","process","fetchTile","p","cachePolicy","resampling","acquireTile","releaseTile","addAttachHandles","_updatingHandles","add","_this$layer","styleId","doRefresh","_this$_tileStrategy","_this$_fetchQueue","moveStart","requestUpdate","viewChange","moveEnd","supportsSpatialReference","_this$layer$activeLay","_this$layer$activeLay2","tileMatrixSets","_t$tileInfo","spatialReference","attached","suspended","clear","reset","refresh","addPromise","_enqueueTileFetch","getTileCoords","abort","tilemapCache","signal","resamplingLevel","_fetchImage","c","fetchAvailabilityUpsample","getTileParentId","canResume","source","getLogger","error","fetchImageBitmapTile","find","_e$tileInfo","isWebMercator","_e$tileInfo$spatialRe","_e$tileInfo2","wkid","readOnly","prototype","w","g","getLODInfoAt","getXForColumn","getYForRow","HTMLImageElement","naturalWidth","v","naturalHeight","Math","round","I","M","F","L","getContext","drawImage","document","createElement","initialize","addHandles","dataChanged","catch"],"sourceRoot":""}