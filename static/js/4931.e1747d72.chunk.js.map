{"version":3,"file":"static/js/4931.e1747d72.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/graphics/sources/support/uploadProgressWeights.js","../node_modules/@arcgis/core/support/progressUtils.js","../node_modules/@arcgis/core/widgets/Editor/Upload.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nconst e={upload:{createFromFiles:.8,loadMesh:.2},uploadAssetBlobs:{prepareAssetItems:.9,uploadAssetItems:.1},uploadConvertibleSource:{uploadEditSource:.5,serviceAssetsToGlb:.5},uploadLocalMesh:{meshToAssetBlob:.5,uploadAssetBlobs:.5}};export{e as uploadProgressWeights};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{makeHandle as s}from\"../core/handleUtils.js\";import has from\"../core/has.js\";import{getOrCreateMapValue as t}from\"../core/MapUtils.js\";import{millisecondsFromSeconds as e,Seconds as r,Milliseconds as o}from\"../core/time.js\";function i(s,t=(s=>{}),e){return new n(s,t,e)}class n{constructor(s,t=(s=>{}),e){if(this.onProgress=t,this.taskName=e,this._progressMap=new Map,this._startTime=void 0,this._timingsMap=new Map,\"number\"==typeof s){this._weights={};for(let t=0;t<s;t++){const e=t,r=1/s;this._weights[e]=r,this._progressMap.set(e,0)}}else this._weights=s;this.emitProgress()}emitProgress(){let s=0;for(const[t,e]of this._progressMap.entries()){s+=e*this._weights[t]}if(1===s&&has(\"enable-feature:esri-3dofl-upload-timings\")){const s=Math.round(performance.now()-(this._startTime??0))/1e3;console.log(`${this.taskName} done in ${s} sec`);for(const[t,e]of this._timingsMap){const r=Math.round(e.end-e.start)/1e3,o=Math.round(r/s*100);console.log(this.taskName??\"Task\",{stepKey:t,stepTime:r,relativeTime:o})}}this.onProgress(s)}setProgress(s,e){if(this._progressMap.set(s,e),has(\"enable-feature:esri-3dofl-upload-timings\")){const r=performance.now();this._startTime??=r;const o=t(this._timingsMap,s,(()=>({start:r,end:0})));1===e&&(o.end=r)}this.emitProgress()}simulate(s,t){return a((t=>this.setProgress(s,t)),t)}makeOnProgress(s){return t=>this.setProgress(s,t)}}function a(t=(s=>{}),e=l){const r=performance.now();t(0);const o=setInterval((()=>{const s=performance.now()-r,o=1-Math.exp(-s/e);t(o)}),g);return s((()=>{clearInterval(o),t(1)}))}function h(s,t=c){return e(r(s*f/t))}function m(s,t=p){return e(r(s*f/t))}const c=10,p=10,f=8e-6,g=o(50),l=o(1e3);export{n as ProgressManager,m as estimatedConversionTime,h as estimatedTransferTime,i as makeProgressManager,a as simulateProgress};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Accessor.js\";import{createTask as o}from\"../../core/asyncUtils.js\";import s from\"../../core/Error.js\";import{on as t}from\"../../core/events.js\";import{throwIfAborted as i,createResolver as l}from\"../../core/promiseUtils.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";import p from\"../../geometry/Point.js\";import{uploadProgressWeights as c}from\"../../layers/graphics/sources/support/uploadProgressWeights.js\";import{getSupportedExtensions as u}from\"../../layers/support/infoFor3D.js\";import{makeProgressManager as d,estimatedTransferTime as m}from\"../../support/progressUtils.js\";let f=class extends r{constructor(){super({}),this.files=[],this.progress=0,this._uploadTask=null,this._layer=null}destroy(){this.cancel(),this.files=[],this._layer=null,this._uploadTask=null}get state(){const e=this._uploadTask;return e&&0!==this.files.length?e.finished?e.error?\"error\":\"success\":\"pending\":\"default\"}get result(){return this._uploadTask?.value??null}get error(){return this._uploadTask?.error??null}uploadTo(e){this.cancel(),this.files=[],this._layer=e,this._uploadTask=o((async r=>{const o=await y(e);i(r),this.progress=0,this.files=o;const t=d(c.upload,(e=>{this.progress=e}),\"Upload.uploadTo\");if(0===o.length)return null;const{default:l}=await import(\"../../geometry/Mesh.js\");i(r);const a=await l.extractAndFilterFiles(o,e);i(r),a.length>0&&(this.files=a);const n=new p({x:0,y:0,z:0,spatialReference:e.spatialReference}),u=await l.createFromFiles(n,a,{layer:e,signal:r,onProgress:t.makeOnProgress(\"createFromFiles\")});if(i(r),!u)throw new s(\"editor:upload\",\"could not upload or convert model\");const f=a.reduce(((e,r)=>e+r.size),0),h=t.simulate(\"loadMesh\",m(f));try{await u.load()}finally{h.remove()}return u}))}retry(){this._layer&&this.uploadTo(this._layer)}cancel(){this._uploadTask?.abort()}};e([a()],f.prototype,\"files\",void 0),e([a()],f.prototype,\"progress\",void 0),e([a()],f.prototype,\"state\",null),e([a()],f.prototype,\"result\",null),e([a()],f.prototype,\"error\",null),e([a()],f.prototype,\"_uploadTask\",void 0),e([a()],f.prototype,\"_layer\",void 0),f=e([n(\"esri.widgets.Editor.Upload\")],f);let h=null;async function y(e){const{resolve:r,promise:o}=l(),s=document.createElement(\"input\");s.type=\"file\",s.multiple=!1,s.accept=[...u(e.infoFor3D),\".zip\"].join(\",\"),s.style.display=\"none\",document.body.appendChild(s);const i=t(s,\"change\",(()=>r(s.files?Array.from(s.files):[])));return h?h(s):s.click(),o.finally((()=>{i.remove(),s.remove()}))}function g(e){h=r=>{Promise.resolve().then((()=>e)).then((e=>{if(!h)return;const o=new DataTransfer;e.forEach((e=>o.items.add(e))),r.files=o.files,r.dispatchEvent(new Event(\"change\"))}))}}function j(){h=null}export{f as Upload,j as clearPromptForFilesStub,g as stubFilePickerToSelect};\n"],"names":["e","upload","createFromFiles","loadMesh","uploadAssetBlobs","prepareAssetItems","uploadAssetItems","uploadConvertibleSource","uploadEditSource","serviceAssetsToGlb","uploadLocalMesh","meshToAssetBlob","i","s","n","arguments","length","undefined","constructor","t","this","onProgress","taskName","_progressMap","Map","_startTime","_timingsMap","_weights","r","set","emitProgress","entries","has","_this$_startTime","Math","round","performance","now","console","log","concat","_this$taskName","end","start","o","stepKey","stepTime","relativeTime","setProgress","_this$_startTime2","simulate","a","makeOnProgress","l","setInterval","exp","g","clearInterval","h","c","f","m","p","super","files","progress","_uploadTask","_layer","destroy","cancel","state","finished","error","result","_this$_uploadTask$val","_this$_uploadTask","value","_this$_uploadTask$err","_this$_uploadTask2","uploadTo","async","y","d","default","extractAndFilterFiles","x","z","spatialReference","u","layer","signal","reduce","size","load","remove","retry","_this$_uploadTask3","abort","prototype","resolve","promise","document","createElement","type","multiple","accept","infoFor3D","join","style","display","body","appendChild","Array","from","click","finally"],"sourceRoot":""}