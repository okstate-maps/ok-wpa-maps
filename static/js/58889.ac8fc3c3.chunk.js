"use strict";(self.webpackChunkok_wpa_maps=self.webpackChunkok_wpa_maps||[]).push([[58889],{4429:(t,e,n)=>{n.d(e,{A:()=>u});var r=n(6326),s=n(42553),o=n(46053),i=n(87990),a=n(29067),l=n(84144);let u=class extends s.o{constructor(t){super(t),this.to=null,this.contents=null,this.portalUrl="https://www.arcgis.com",this.translator="esri",this.from=null,this.apiKey=null,this.requestSource=null}};(0,r.Cg)([(0,o.MZ)({type:[String],json:{write:!0}})],u.prototype,"to",void 0),(0,r.Cg)([(0,o.MZ)({type:[l.A],json:{write:!0}})],u.prototype,"contents",void 0),(0,r.Cg)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"portalUrl",void 0),(0,r.Cg)([(0,o.MZ)({type:String,json:{write:!0,default:"esri"}})],u.prototype,"translator",void 0),(0,r.Cg)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"from",void 0),(0,r.Cg)([(0,o.MZ)(a.K)],u.prototype,"apiKey",void 0),(0,r.Cg)([(0,o.MZ)({type:String,json:{name:"x-esri-request-source"}})],u.prototype,"requestSource",void 0),u=(0,r.Cg)([(0,i.$)("esri.rest.support.TranslateParameters")],u)},7061:(t,e,n)=>{n.d(e,{T:()=>a});var r=n(89379),s=n(3825),o=n(54994),i=n(73272);async function a(t,e,n){const a=e.toJSON();a.contents=JSON.stringify(a.contents),a.token=await(0,o.gf)(e.portalUrl,e.apiKey,{signal:null===n||void 0===n?void 0:n.signal,prompt:"no-prompt"!==(null===n||void 0===n?void 0:n.authMode)});const l=(0,o.Dl)(t),u=(0,o.jV)(l.query,(0,r.A)((0,r.A)({},n),{},{query:a,method:"post",authMode:"anonymous"}));return(await(0,s.A)(l.path,u)).data.results.map(t=>i.A.fromJSON(t))}},9634:(t,e,n)=>{n.d(e,{G:()=>l,y:()=>i});var r=n(54093),s=n(43036),o=n(85632);function i(t){a=t}let a;function l(t){return null===t?null:(0,s.e)(t)?t.clone():(0,s.d)(t)?t:(0,s.h)(t)?t.clone():(0,s.j)(t)?t.toArray().map(t=>l(t)):(0,o.cy)(t)?t.map(t=>l(t)):(0,s.k)(t)?a.createFromArcadeFeature(t):(0,s.l)(t)||(0,s.m)(t)?t:(0,s.n)(t)||"esri.arcade.Attachment"===(null===t||void 0===t?void 0:t.declaredClass)?t.deepClone():("esri.arcade.Portal"===(null===t||void 0===t?void 0:t.declaredClass)||(0,s.o)(t)||t instanceof r.x||(0,s.i)(t),t)}},29067:(t,e,n)=>{n.d(e,{K:()=>r});const r={type:String,json:{read:{source:"token"},write:{target:"token"}}}},43317:(t,e,n)=>{n.d(e,{A:()=>A,B:()=>b,P:()=>f,g:()=>w,r:()=>C});var r=n(89379),s=n(66240),o=n(67253),i=n(9861),a=n(43036),l=n(50076),u=n(76460),c=n(87663),d=n(65308),h=n(7061),p=n(84144),g=n(4429),y=n(73272),v=n(85632);class f{constructor(t,e){this.portal=t,this._debugLog=e}async translate(t){var e;this.portal.loaded||await this.portal.load();const n=null===(e=this.portal.helperServices)||void 0===e?void 0:e.aiUtilityServices;if(null==n)return{success:!1};const r=n.url+n.translateUtility;try{var s;return null!==(s=t.requestSource)&&void 0!==s||(t.requestSource="arcade"),{success:!0,results:(await(0,h.T)(r,t,{authMode:"no-prompt"})).map(t=>t.toJSON())}}catch(o){return null!=this._debugLog&&(o instanceof Error||o instanceof l.A)&&this._debugLog("TranslateText error: ".concat(o.message)),u.A.getLogger("esri.arcade.functions.aiServices").error(o),{success:!1}}}}class m{constructor(t,e,n){this._parameters=t,this._maxTotalContentSize=e,this._maxContentsLength=n,this._requests=[],this._normalizedContents=new Map,this._contentsTotalSize=0}tryAdd(t){var e;const n=new Set(t.filter(t=>!this._normalizedContents.has(t.text)).map(t=>t.text));if(this._requests.length+n.size>this._maxContentsLength)return null;let r=0;for(const o of n)r+=o.length;if((r+this._contentsTotalSize)*(null!==(e=this._parameters.to.length)&&void 0!==e?e:1)>this._maxTotalContentSize)return null;const s=this._requests.length;for(const{key:o,text:i}of t)(0,c.tE)(this._normalizedContents,i,()=>[]).push({batchIdx:s,key:o});return this._requests.push(t),this._contentsTotalSize+=r,s}async send(t){const e=[],n=[];let s=0;for(const[r,l]of this._normalizedContents)e.push(new p.A({key:String(s++),text:r})),n.push(l);const o=new g.A(this._parameters);o.contents=e;const i=await t.translate(o);if(!i.success)return Array.from(this._requests,()=>i);const a=Array.from(this._requests,()=>({success:!0,results:[]}));for(const l of i.results){const t=Number(l.key);for(const e of n[t])a[e.batchIdx].results.push((0,r.A)((0,r.A)({},l),{},{key:e.key}))}return a}}function w(t){var e,n;const r=[...new Set(t.to)].sort(),s=null!==(e=t.from)&&void 0!==e?e:null,o=t.portalUrl,i=t.translator,a=null!==(n=t.apiKey)&&void 0!==n?n:null;return JSON.stringify([r,s,o,i,a])}async function _(t,e,n){try{return(await t.yieldFor(n))[e]}catch(r){return{success:!1}}}class b{constructor(t,e){let{maxTotalContentSize:n=5e4,maxContentsLength:r=1e3}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._executor=t,this._service=e,this._openBatches=new Map,this._maxTotalContentSize=n,this._maxContentsLength=r}create(t){return{translate:async e=>{const n=w(e),{contents:r,to:s,from:o,translator:i,portalUrl:a,apiKey:l}=e;if(null==s)return{success:!1};if(null==r||r.every(t=>0===t.text.length))return{success:!1};const u=this._openBatches.get(n);if(null!=u){const e=u.data.tryAdd(r);if(null!=e)return await _(t,e,u);u.send()}const c=new m({to:s,from:o,translator:i,portalUrl:a,apiKey:l},this._maxTotalContentSize,this._maxContentsLength),d=c.tryAdd(r);if(null!=d){const e=this._executor.openBatch(c,{open:t=>{this._openBatches.set(n,t)},execute:t=>t.send(this._service),close:t=>{this._openBatches.get(n)===t&&this._openBatches.delete(n)}});return await _(t,d,e)}return await this._service.translate(e)}}}}function C(t){"async"===t.mode&&(t.functions[(0,s.X)("TranslateText")]=function(e,n){return t.standardFunctionAsync(e,n,async(t,e,n)=>{var s,l,u;if((0,a.B)(n,2,3,t,e),!(0,v.Kg)(n[0])&&!(0,v.cy)(n[0])&&!(0,a.j)(n[0]))throw new i.D$(t,"InvalidParameter",e);const c=(0,a.M)(n[0]);if(!(0,v.Kg)(n[1])&&!(0,v.cy)(n[1])&&!(0,a.j)(n[1]))throw new i.D$(t,"InvalidParameter",e);const h=(0,a.M)(n[1]);let m=null;if(n.length>=3){if(!(0,v.Kg)(n[2]))throw new i.D$(t,"InvalidParameter",e);m=n[2]}const _=c.map((t,e)=>new p.A({key:String(e),text:t})),b=null!==(s=null===(l=t.services)||void 0===l?void 0:l.portal)&&void 0!==s?s:d.A.getDefault(),C=new g.A({to:h,contents:_,from:m,portalUrl:b.restUrl.replace(/\/sharing\/rest$/,"")}),A=new Map;let S=null;if(null!=t.lrucache){var x,k;const e=t.lrucache;null!==(x=S)&&void 0!==x||(S=w(C)),C.contents=null===(k=C.contents)||void 0===k?void 0:k.filter(t=>{const n=e.getCachedTranslation(S,t.text);return null==n||(A.set(t.key,(0,r.A)((0,r.A)({},n),{},{key:t.key,text:t.text})),!1)})}if(null!==(u=C.contents)&&void 0!==u&&u.length){var T,j;const e=null!==(T=null===(j=t.services)||void 0===j?void 0:j.translation)&&void 0!==T?T:new f(b,t.console),n=await e.translate(C);if(!n.success)return new o.A({__proto__:null,success:!1});for(const r of n.results){var L,M;const e=null===(L=C.contents)||void 0===L||null===(L=L.find(t=>t.key===r.key))||void 0===L?void 0:L.text;if(null==e)throw new i.D$(null,"NeverReach",null);A.set(r.key,r),null!=t.lrucache&&(null!==(M=S)&&void 0!==M||(S=w(C)),t.lrucache.setCachedTranslation(S,e,{detectedLanguage:r.detectedLanguage,translation:r.translation}))}}const D=Array.from(_,e=>{var n;const r=y.A.fromJSON(A.get(e.key));if(null==r)throw new i.D$(null,"NeverReach",null);return r.text=e.text,o.A.convertJsonToArcade(r.toJSON(),null!==(n=t.timeZone)&&void 0!==n?n:"system",!0)});return new o.A({__proto__:null,success:!0,results:D})})})}const A=Object.freeze(Object.defineProperty({__proto__:null,BatchTranslationServiceFactory:b,PortalTranslationService:f,getTranslateParametersKey:w,registerFunctions:C},Symbol.toStringTag,{value:"Module"}))},58889:(t,e,n)=>{n.r(e),n.d(e,{BatchTranslationServiceFactory:()=>r.B,PortalTranslationService:()=>r.P,getTranslateParametersKey:()=>r.g,registerFunctions:()=>r.r});n(66240),n(67253),n(9861),n(43036),n(50076),n(76460),n(65308),n(7061),n(84144),n(4429),n(73272);var r=n(43317)},67253:(t,e,n)=>{n.d(e,{A:()=>d});var r=n(89379),s=n(46405),o=n(9634),i=n(9861),a=n(43036),l=n(89189),u=n(85632);function c(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null==t)return null;if((0,u.Et)(t)||(0,u.Lm)(t)||(0,u.Kg)(t)||(0,a.e)(t)||(0,a.f)(t)||(0,a.g)(t))return t;if((0,u.cy)(t)){const s=[];for(const o of t)s.push(c(o,e,n,r));return s}if(r&&(0,a.h)(t))return t;const s=new d;s.immutable=!1;for(const[o,i]of Object.entries(t))void 0!==i&&s.setField(o,c(i,e,n,r));return s.immutable=n,s}class d{constructor(t){this.declaredClass="esri.arcade.Dictionary",this.plain=!1,this.immutable=!0,t instanceof d?this.attributes=t.attributes:null==t?this.attributes=Object.create(null):null!=Object.getPrototypeOf(t)?this.attributes=(0,r.A)({__proto__:null},t):this.attributes=t}static containerEntry(t,e){return new d({__proto__:null,key:t,value:e})}static textFormatting(){const t=new d({__proto__:null,newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});return t.immutable=!1,t}field(t){const e=t.toLowerCase(),n=this.attributes[t];if(void 0!==n)return n;for(const r in this.attributes)if(r.toLowerCase()===e)return this.attributes[r];throw new i.D$(null,"FieldNotFound",null,{key:t})}setField(t,e){if(this.immutable)throw new i.D$(null,"Immutable",null);if((0,a.i)(e))throw new i.D$(null,"NoFunctionInDictionary",null);const n=t.toLowerCase();if(e instanceof Date&&(e=s.lY.dateJSToArcadeDate(e)),void 0===this.attributes[t]){for(const t in this.attributes)if(t.toLowerCase()===n)return void(this.attributes[t]=e);this.attributes[t]=e}else this.attributes[t]=e}eraseField(t){if(this.immutable)throw new i.D$(null,"Immutable",null);if(t in this.attributes)return void delete this.attributes[t];const e=t.toLowerCase();for(const n in this.attributes)if(n.toLowerCase()===e)return void delete this.attributes[n]}hasField(t){const e=t.toLowerCase();if(void 0!==this.attributes[t])return!0;for(const n in this.attributes)if(n.toLowerCase()===e)return!0;return!1}keys(){let t=[];for(const e in this.attributes)t.push(e);return t=t.sort(),t}values(){return this.keys().map(t=>this.attributes[t])}entryCount(){return Object.keys(this.attributes).length}isEmpty(){return this.entryCount()<=0}castToText(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,a.c)(this.attributes,{useNumbersForDates:t})}static convertObjectToArcadeDictionary(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new d;s.immutable=!1;for(const o in t){const i=t[o];void 0!==i&&s.setField(o.toString(),c(i,e,n,r))}return s.immutable=n,s}static convertJsonToArcade(t,e){return c(t,e,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3])}castAsJson(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const e=Object.create(null);for(let n in this.attributes){const r=this.attributes[n];void 0!==r&&(null!==t&&void 0!==t&&t.keyTranslate&&(n=t.keyTranslate(n)),e[n]=(0,a.a)(r,t))}return e}async castDictionaryValueAsJsonAsync(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4?arguments[4]:void 0;const o=await(0,a.b)(n,r,s);return t[e]=o,o}async castAsJsonAsync(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Object.create(null),r=[];for(let o in this.attributes){const i=this.attributes[o];null!==e&&void 0!==e&&e.keyTranslate&&(o=e.keyTranslate(o)),void 0!==i&&((0,a.d)(i)||i instanceof l.A||i instanceof s.lY?n[o]=(0,a.a)(i,e):r.push(this.castDictionaryValueAsJsonAsync(n,o,i,t,e)))}return r.length>0&&await Promise.all(r),n}deepClone(){const t=new d;t.immutable=!1;for(const e of this.keys())t.setField(e,(0,o.G)(this.field(e)));return t}}},73272:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(6326),s=n(42553),o=n(46053),i=n(87990);let a=class extends s.o{constructor(t){super(t),this.text=null,this.detectedLanguage="en",this.detectedLanguageScore=-1}};(0,r.Cg)([(0,o.MZ)({type:String,json:{write:!0}})],a.prototype,"key",void 0),(0,r.Cg)([(0,o.MZ)({type:String,json:{write:!0}})],a.prototype,"text",void 0),(0,r.Cg)([(0,o.MZ)({type:String,json:{read:{source:"detectedLanguage.language"},write:{target:"detectedLanguage.language"}}})],a.prototype,"detectedLanguage",void 0),(0,r.Cg)([(0,o.MZ)({type:Number,json:{read:{source:"detectedLanguage.score"},write:{target:"detectedLanguage.score"}}})],a.prototype,"detectedLanguageScore",void 0),(0,r.Cg)([(0,o.MZ)({type:Object,json:{write:!0}})],a.prototype,"translation",void 0),a=(0,r.Cg)([(0,i.$)("esri.rest.support.TranslateResult")],a)},84144:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(6326),s=n(42553),o=n(46053),i=n(87990);let a=class extends s.o{constructor(t){super(t)}};(0,r.Cg)([(0,o.MZ)({type:String,json:{write:!0}})],a.prototype,"key",void 0),(0,r.Cg)([(0,o.MZ)({type:String,json:{write:!0}})],a.prototype,"text",void 0),a=(0,r.Cg)([(0,i.$)("esri.rest.support.TranslateContent")],a)}}]);
//# sourceMappingURL=58889.ac8fc3c3.chunk.js.map