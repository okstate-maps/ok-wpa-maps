"use strict";(self.webpackChunkok_wpa_maps=self.webpackChunkok_wpa_maps||[]).push([[24928],{5651:(t,e,i)=>{i.d(e,{xH:()=>o,N1:()=>a});i(20664);var s=i(9392),r=i(95925),n=(i(34761),i(42294),i(78315),i(82805),i(35737));n.R;n.R;n.H;n.R;n.R;i(89595);i(71488);(0,s.vt)();function o(t,e){return l(t)===l(e)}function l(t){if(null==t)return null;const e=null!=t.layer?t.layer.id:"";let i=null;return i=null!=t.objectId?t.objectId:null!=t.layer&&"objectIdField"in t.layer&&null!=t.layer.objectIdField&&null!=t.attributes?t.attributes[t.layer.objectIdField]:t.uid,null==i?null:"o-".concat(e,"-").concat(i)}const a={json:{write:{writer:function(t,e){var i;null!=(null===t||void 0===t||null===(i=t.layer)||void 0===i?void 0:i.objectIdField)&&null!=t.attributes&&(e.feature={layerId:t.layer.id,objectId:t.attributes[t.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String],isRequired:!0},"feature.objectId":{type:[Number,String],isRequired:!0}}},origins:{"web-scene":{read:function(t){if(null!=t.layerId&&null!=t.objectId)return{uid:null,layer:{id:t.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:t.objectId}}}}}},clonable:"reference"};(0,r.vt)(),(0,s.vt)()},24928:(t,e,i)=>{i.r(e),i.d(e,{default:()=>q});var s=i(6326),r=i(28126),n=i(5651),o=i(91967),l=i(69098),a=i(42553),u=i(30726),d=i(46053),p=(i(81806),i(76460),i(47249),i(87990)),c=i(37546),y=i(19247),h=i(731);let g=class extends((0,a.T)((0,l.OU)(o.A))){constructor(t){super(t),this.position=null,this.elevationInfo=null,this.feature=null}equals(t){return(0,u.CM)(this.position,t.position)&&(0,u.CM)(this.elevationInfo,t.elevationInfo)&&(0,n.xH)(this.feature,t.feature)}};(0,s.Cg)([(0,d.MZ)({type:y.A,json:{write:{isRequired:!0}}})],g.prototype,"position",void 0),(0,s.Cg)([(0,d.MZ)({type:h.A}),(0,c.P)()],g.prototype,"elevationInfo",void 0),(0,s.Cg)([(0,d.MZ)(n.N1)],g.prototype,"feature",void 0),g=(0,s.Cg)([(0,p.$)("esri.analysis.LineOfSightAnalysisObserver")],g);const v=g;let f=class extends((0,a.T)(l.Pw)){constructor(t){super(t),this.position=null,this.elevationInfo=null,this.feature=null}equals(t){return(0,u.CM)(this.position,t.position)&&(0,u.CM)(this.elevationInfo,t.elevationInfo)&&(0,n.xH)(this.feature,t.feature)}};(0,s.Cg)([(0,d.MZ)({type:y.A,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),(0,c.P)()],f.prototype,"position",void 0),(0,s.Cg)([(0,d.MZ)({type:h.A}),(0,c.P)()],f.prototype,"elevationInfo",void 0),(0,s.Cg)([(0,d.MZ)(n.N1)],f.prototype,"feature",void 0),f=(0,s.Cg)([(0,p.$)("esri.analysis.LineOfSightAnalysisTarget")],f);var b=i(18690),C=i(19276),w=i(3975),m=i(68134),I=i(56611),x=i(42294),M=i(12482);const j=C.A.ofType(f);let O=class extends r.A{constructor(t){super(t),this.type="line-of-sight",this.observer=null,this.extent=null}initialize(){this.addHandles((0,m.wB)(()=>this._computeExtent(),t=>{null==(null===t||void 0===t?void 0:t.pending)&&this._set("extent",null!=t?t.extent:null)},m.pc))}get targets(){return this._get("targets")||new j}set targets(t){this._set("targets",(0,w.V)(t,this.targets,j))}get spatialReference(){var t;return null!=(null===(t=this.observer)||void 0===t?void 0:t.position)?this.observer.position.spatialReference:null}get valid(){var t;return null!=(null===(t=this.observer)||void 0===t?void 0:t.position)}async waitComputeExtent(){const t=this._computeExtent();return null!=t?t.pending:Promise.resolve()}_computeExtent(){var t;const e=this.spatialReference;if(null==(null===(t=this.observer)||void 0===t?void 0:t.position)||null==e)return null;const i=t=>"absolute-height"===(0,M.w7)(t.position,t.elevationInfo),s=this.observer.position,r=(0,x.fA)(s.x,s.y,s.z,s.x,s.y,s.z);for(const o of this.targets)if(null!=o.position){const t=(0,I.projectOrLoad)(o.position,e);if(null!=t.pending)return{pending:t.pending,extent:null};if(null!=t.geometry){const{x:e,y:i,z:s}=t.geometry;(0,x.iT)(r,[e,i,s])}}const n=(0,x.w1)(r,e);return i(this.observer)&&this.targets.every(i)||(n.zmin=void 0,n.zmax=void 0),{pending:null,extent:n}}clear(){this.observer=null,this.targets.removeAll()}equals(t){return this===t||super.equals(t)&&(0,u.CM)(this.observer,t.observer)&&(0,b.aI)(this.targets.toArray(),t.targets.toArray(),(t,e)=>t.equals(e))}};(0,s.Cg)([(0,d.MZ)({type:["line-of-sight"]})],O.prototype,"type",void 0),(0,s.Cg)([(0,d.MZ)({type:v,json:{read:!0,write:!0}})],O.prototype,"observer",void 0),(0,s.Cg)([(0,d.MZ)({cast:w.H,type:j,nonNullable:!0,json:{read:!0,write:!0}})],O.prototype,"targets",null),(0,s.Cg)([(0,d.MZ)({value:null,readOnly:!0})],O.prototype,"extent",void 0),(0,s.Cg)([(0,d.MZ)()],O.prototype,"spatialReference",null),(0,s.Cg)([(0,d.MZ)({readOnly:!0})],O.prototype,"valid",null),O=(0,s.Cg)([(0,p.$)("esri.analysis.LineOfSightAnalysis")],O);var Z=i(77717),A=i(25515),R=i(11270);const L=C.A.ofType(f);let _=class extends((0,R.q)((0,Z.P)(A.A))){constructor(t){super(t),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new O,this.opacity=1}initialize(){this.addHandles((0,m.wB)(()=>this.analysis,(t,e)=>{null!=e&&e.parent===this&&(e.parent=null),null!=t&&(t.parent=this)},m.pc))}async load(){return null!=this.analysis&&this.addResolvingPromise(this.analysis.waitComputeExtent()),this}get observer(){var t;return null===(t=this.analysis)||void 0===t?void 0:t.observer}set observer(t){const{analysis:e}=this;e&&(e.observer=t)}get targets(){return null!=this.analysis?this.analysis.targets:new C.A}set targets(t){var e;(0,w.V)(t,null===(e=this.analysis)||void 0===e?void 0:e.targets)}get fullExtent(){return null!=this.analysis?this.analysis.extent:null}get spatialReference(){return null!=this.analysis?this.analysis.spatialReference:null}releaseAnalysis(t){this.analysis===t&&(this.analysis=new O)}};(0,s.Cg)([(0,d.MZ)({json:{read:!1},readOnly:!0})],_.prototype,"type",void 0),(0,s.Cg)([(0,d.MZ)({type:["LineOfSightLayer"]})],_.prototype,"operationalLayerType",void 0),(0,s.Cg)([(0,d.MZ)({type:v,json:{read:!0,write:{isRequired:!0,ignoreOrigin:!0}}})],_.prototype,"observer",null),(0,s.Cg)([(0,d.MZ)({type:L,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],_.prototype,"targets",null),(0,s.Cg)([(0,d.MZ)({type:O,nonNullable:!0,json:{read:!1,write:!1}})],_.prototype,"analysis",void 0),(0,s.Cg)([(0,d.MZ)({readOnly:!0})],_.prototype,"fullExtent",null),(0,s.Cg)([(0,d.MZ)({readOnly:!0})],_.prototype,"spatialReference",null),(0,s.Cg)([(0,d.MZ)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],_.prototype,"opacity",void 0),(0,s.Cg)([(0,d.MZ)({type:["show","hide"]})],_.prototype,"listMode",void 0),_=(0,s.Cg)([(0,p.$)("esri.layers.LineOfSightLayer")],_);const q=_},28126:(t,e,i)=>{i.d(e,{A:()=>y});var s=i(6326),r=i(69098),n=i(46053),o=(i(81806),i(76460),i(47249),i(87990));let l=class extends r.Pw{constructor(t){super(t),this.type="web-scene"}equals(t){return this.type===t.type}};(0,s.Cg)([(0,n.MZ)()],l.prototype,"type",void 0),l=(0,s.Cg)([(0,o.$)("esri.analysis.support.AnalysisOriginWebScene")],l);const a=l;var u=i(91967),d=i(5632),p=i(42553);let c=0,y=class extends((0,p.T)((0,r.OU)((0,d.sA)(u.A)))){constructor(t){super(t),this.id="".concat(Date.now().toString(16),"-analysis-").concat(c++),this.origin=null}get parent(){return this._get("parent")}set parent(t){const e=this.parent;if(null!=e)switch(e.type){case"line-of-sight":case"dimension":case"viewshed":e.releaseAnalysis(this);break;case"2d":case"3d":e.analyses.includes(this)&&e.analyses.remove(this)}this._set("parent",t)}equals(t){return!0}};(0,s.Cg)([(0,n.MZ)({type:String,constructOnly:!0,clonable:!1})],y.prototype,"id",void 0),(0,s.Cg)([(0,n.MZ)({clonable:!1,value:null})],y.prototype,"parent",null),(0,s.Cg)([(0,n.MZ)({types:{key:"type",base:null,typeMap:{"web-scene":a}}})],y.prototype,"origin",void 0),y=(0,s.Cg)([(0,o.$)("esri.analysis.Analysis")],y)},35737:(t,e,i)=>{i.d(e,{H:()=>s,R:()=>r});class s{constructor(t){this.layerViewUid=t}}class r extends s{constructor(t,e){super(t),this.graphicUid=e}}},71488:(t,e,i)=>{i.d(e,{h:()=>r});i(82805);var s=i(35737);class r extends s.R{constructor(t,e,i,s,r){super(t,e),this.layerViewUid=t,this.graphicUid=e,this.triangleNr=i,this.baseBoundingSphere=s,this.numLodLevels=r}}},82805:(t,e,i)=>{i.d(e,{i:()=>d});var s=i(34761),r=i(13191),n=i(20664),o=i(9392),l=i(43047),a=i(55855),u=i(95925);class d{get ray(){return this._ray}get distanceInRenderSpace(){return null==this.distance?null:((0,n.h)(c,this.ray.direction,this.distance),(0,n.b)(c))}withinDistance(t){return!!p(this)&&this.distanceInRenderSpace<=t}getIntersectionPoint(t){return!!p(this)&&((0,n.h)(c,this.ray.direction,this.distance),(0,n.g)(t,this.ray.origin,c),!0)}getTransformedNormal(t){return(0,n.d)(y,this.normal),y[3]=0,(0,l.t)(y,y,this.transformation),(0,n.d)(t,y),(0,n.n)(t,t)}constructor(t){this.intersector=4,this.normal=(0,o.vt)(),this.transformation=(0,r.vt)(),this._ray=(0,u.vt)(),this.init(t)}init(t){this.distance=this.target=this.drapedLayerOrder=this.renderPriority=null,this.intersector=4,(0,u.C)(t,this._ray)}set(t,e,i,l,a,u,d){this.intersector=t,this.distance=i,(0,n.d)(this.normal,null!==l&&void 0!==l?l:o.Cb),(0,s.C)(this.transformation,null!==a&&void 0!==a?a:r.zK),this.target=e,this.drapedLayerOrder=u,this.renderPriority=d}copy(t){(0,u.C)(t.ray,this._ray),this.intersector=t.intersector,this.distance=t.distance,this.target=t.target,this.drapedLayerOrder=t.drapedLayerOrder,this.renderPriority=t.renderPriority,(0,n.d)(this.normal,t.normal),(0,s.C)(this.transformation,t.transformation)}}function p(t){return null!=(null===t||void 0===t?void 0:t.distance)}const c=(0,o.vt)(),y=(0,a.vt)()},89595:(t,e,i)=>{i.d(e,{rQ:()=>o,lx:()=>l});var s=i(9392),r=i(82805);class n{constructor(t,e,i){this.object=t,this.geometryId=e,this.primitiveIndex=i}}class o extends r.i{constructor(){super(...arguments),this.intersector=1}}class l extends n{constructor(t,e){super(t.object,t.geometryId,t.primitiveIndex),this.center=(0,s.o8)(e)}}}}]);
//# sourceMappingURL=24928.a897f401.chunk.js.map