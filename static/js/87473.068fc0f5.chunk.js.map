{"version":3,"file":"static/js/87473.068fc0f5.chunk.js","mappings":"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","sources":["../node_modules/@esri/calcite-components/dist/chunks/observers.js","../node_modules/@esri/calcite-components/dist/components/calcite-flow/customElement.js"],"sourcesContent":["/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\nv3.3.3 */\nimport { isServer } from \"lit\";\nfunction createObserver(type, callback, options) {\n  if (isServer) {\n    return void 0;\n  }\n  const Observer = getObserver(type);\n  return new Observer(callback, options);\n}\nfunction getObserver(type) {\n  class ExtendedMutationObserver extends window.MutationObserver {\n    constructor(callback) {\n      super(callback);\n      this.observedEntry = [];\n      this.callback = callback;\n    }\n    observe(target, options) {\n      this.observedEntry.push({ target, options });\n      return super.observe(target, options);\n    }\n    unobserve(target) {\n      const newObservedEntries = this.observedEntry.filter((observed) => observed.target !== target);\n      this.observedEntry = [];\n      this.callback(super.takeRecords(), this);\n      this.disconnect();\n      newObservedEntries.forEach((observed) => this.observe(observed.target, observed.options));\n    }\n  }\n  return function() {\n    return type === \"intersection\" ? window.IntersectionObserver : type === \"mutation\" ? ExtendedMutationObserver : window.ResizeObserver;\n  }();\n}\nfunction updateRefObserver(observer, oldTarget, target, options) {\n  if (!observer) {\n    return;\n  }\n  if (oldTarget) {\n    observer.unobserve(oldTarget);\n  }\n  if (!target) {\n    return;\n  }\n  if (observer instanceof MutationObserver) {\n    observer.observe(target, options);\n    return;\n  }\n  observer.observe(target);\n}\nexport {\n  createObserver as c,\n  updateRefObserver as u\n};\n","/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\nv3.3.3 */\nimport { c as customElement } from \"../../chunks/runtime.js\";\nimport { css, html } from \"lit\";\nimport { LitElement, safeClassMap } from \"@arcgis/lumina\";\nimport { createRef, ref } from \"lit-html/directives/ref.js\";\nimport { c as createObserver } from \"../../chunks/observers.js\";\nimport { y as whenAnimationDone } from \"../../chunks/dom.js\";\nimport { u as useSetFocus } from \"../../chunks/useSetFocus.js\";\nconst CSS = {\n  frame: \"frame\",\n  frameAdvancing: \"frame--advancing\",\n  frameRetreating: \"frame--retreating\"\n};\nconst styles = css`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:relative;display:flex;inline-size:100%;flex:1 1 auto;align-items:stretch;overflow:hidden;background-color:transparent}:host .frame{position:relative;margin:0;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;padding:0;animation-name:none;animation-duration:var(--calcite-animation-timing);background-color:var(--calcite-flow-background-color)}:host ::slotted(*){display:none;block-size:100%}:host ::slotted(*[selected]){display:flex}:host ::slotted(.calcite-match-height:last-child){display:flex;flex:1 1 auto;overflow:hidden}:host .frame--advancing{animation-name:calcite-frame-advance}:host .frame--retreating{animation-name:calcite-frame-retreat}@keyframes calcite-frame-advance{0%{--tw-bg-opacity: .5;transform:translate3d(50px,0,0)}to{--tw-bg-opacity: 1;transform:translateZ(0)}}@keyframes calcite-frame-retreat{0%{--tw-bg-opacity: .5;transform:translate3d(-50px,0,0)}to{--tw-bg-opacity: 1;transform:translateZ(0)}}:host([hidden]){display:none}[hidden]{display:none}`;\nclass Flow extends LitElement {\n  constructor() {\n    super();\n    this.frameRef = createRef();\n    this.itemMutationObserver = createObserver(\"mutation\", () => this.updateItemsAndProps());\n    this.items = [];\n    this.selectedIndex = -1;\n    this.focusSetter = useSetFocus()(this);\n    this.flowDirection = \"standby\";\n    this.listen(\"calciteInternalFlowItemChange\", this.handleCalciteInternalFlowItemChange);\n    this.listen(\"calciteFlowItemBack\", this.handleItemBackClick);\n  }\n  static {\n    this.properties = { flowDirection: [16, {}, { state: true }], customItemSelectors: 1 };\n  }\n  static {\n    this.styles = styles;\n  }\n  async back() {\n    const { items, selectedIndex } = this;\n    const selectedItem = items[selectedIndex];\n    const nextSelectedItem = items[selectedIndex - 1];\n    if (!selectedItem || !nextSelectedItem) {\n      return;\n    }\n    const beforeBack = selectedItem.beforeBack ? selectedItem.beforeBack : () => Promise.resolve();\n    try {\n      await beforeBack.call(selectedItem);\n    } catch {\n      return;\n    }\n    selectedItem.selected = false;\n    nextSelectedItem.selected = true;\n    return nextSelectedItem;\n  }\n  async setFocus(options) {\n    return this.focusSetter(() => this.items[this.selectedIndex], options);\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.itemMutationObserver?.observe(this.el, { childList: true, subtree: true });\n  }\n  willUpdate(changes) {\n    if (changes.has(\"flowDirection\") && (this.hasUpdated || this.flowDirection !== \"standby\")) {\n      this.handleFlowDirectionChange(this.flowDirection);\n    }\n  }\n  loaded() {\n    this.updateItemsAndProps();\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.itemMutationObserver?.disconnect();\n  }\n  async handleFlowDirectionChange(flowDirection) {\n    if (flowDirection === \"standby\" || !this.frameRef.value) {\n      return;\n    }\n    await whenAnimationDone(this.frameRef.value, flowDirection === \"retreating\" ? \"calcite-frame-retreat\" : \"calcite-frame-advance\");\n    this.resetFlowDirection();\n  }\n  handleCalciteInternalFlowItemChange(event) {\n    event.stopPropagation();\n    this.updateFlowProps();\n  }\n  async handleItemBackClick(event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n    await this.back();\n    return this.setFocus();\n  }\n  resetFlowDirection() {\n    this.flowDirection = \"standby\";\n  }\n  getFlowDirection(oldSelectedIndex, newSelectedIndex) {\n    const allowRetreatingDirection = oldSelectedIndex > 0;\n    const allowAdvancingDirection = oldSelectedIndex > -1 && newSelectedIndex > 0;\n    if (!allowAdvancingDirection && !allowRetreatingDirection) {\n      return \"standby\";\n    }\n    return newSelectedIndex < oldSelectedIndex ? \"retreating\" : \"advancing\";\n  }\n  updateItemsAndProps() {\n    const { customItemSelectors, el } = this;\n    const newItems = Array.from(el.querySelectorAll(`calcite-flow-item${customItemSelectors ? `,${customItemSelectors}` : \"\"}`)).filter((flowItem) => flowItem.closest(\"calcite-flow\") === el);\n    this.items = newItems;\n    this.ensureSelectedFlowItemExists();\n    this.updateFlowProps();\n  }\n  updateFlowProps() {\n    const { selectedIndex, items } = this;\n    const foundSelectedIndex = this.findSelectedFlowItemIndex(items);\n    items.forEach((flowItem, index) => {\n      const currentlySelected = index === foundSelectedIndex;\n      if (!currentlySelected) {\n        flowItem.menuOpen = false;\n      }\n      flowItem.showBackButton = currentlySelected && foundSelectedIndex > 0;\n    });\n    if (foundSelectedIndex === -1) {\n      return;\n    }\n    if (selectedIndex !== foundSelectedIndex) {\n      this.flowDirection = this.getFlowDirection(selectedIndex, foundSelectedIndex);\n    }\n    this.selectedIndex = foundSelectedIndex;\n  }\n  findSelectedFlowItemIndex(items) {\n    const selectedItem = items.slice(0).reverse().find((item) => !!item.selected);\n    return items.indexOf(selectedItem);\n  }\n  ensureSelectedFlowItemExists() {\n    const { items } = this;\n    const foundSelectedIndex = this.findSelectedFlowItemIndex(items);\n    if (foundSelectedIndex !== -1) {\n      return;\n    }\n    const lastItem = items[items.length - 1];\n    if (lastItem) {\n      lastItem.selected = true;\n    }\n  }\n  render() {\n    const { flowDirection } = this;\n    const frameDirectionClasses = {\n      [CSS.frame]: true,\n      [CSS.frameAdvancing]: flowDirection === \"advancing\",\n      [CSS.frameRetreating]: flowDirection === \"retreating\"\n    };\n    return html`<div class=${safeClassMap(frameDirectionClasses)} ${ref(this.frameRef)}><slot></slot></div>`;\n  }\n}\ncustomElement(\"calcite-flow\", Flow);\nexport {\n  Flow\n};\n"],"names":["createObserver","type","callback","options","isServer","Observer","ExtendedMutationObserver","window","MutationObserver","constructor","super","this","observedEntry","observe","target","push","unobserve","newObservedEntries","filter","observed","takeRecords","disconnect","forEach","IntersectionObserver","ResizeObserver","getObserver","updateRefObserver","observer","oldTarget","CSS","styles","css","_templateObject","_taggedTemplateLiteral","Flow","LitElement","frameRef","createRef","itemMutationObserver","updateItemsAndProps","items","selectedIndex","focusSetter","useSetFocus","flowDirection","listen","handleCalciteInternalFlowItemChange","handleItemBackClick","back","selectedItem","nextSelectedItem","beforeBack","Promise","resolve","call","_unused","selected","setFocus","connectedCallback","_this$itemMutationObs","el","childList","subtree","willUpdate","changes","has","hasUpdated","handleFlowDirectionChange","loaded","disconnectedCallback","_this$itemMutationObs2","value","whenAnimationDone","resetFlowDirection","event","stopPropagation","updateFlowProps","defaultPrevented","getFlowDirection","oldSelectedIndex","newSelectedIndex","customItemSelectors","newItems","Array","from","querySelectorAll","concat","flowItem","closest","ensureSelectedFlowItemExists","foundSelectedIndex","findSelectedFlowItemIndex","index","currentlySelected","menuOpen","showBackButton","slice","reverse","find","item","indexOf","lastItem","length","render","frameDirectionClasses","html","_templateObject2","safeClassMap","ref","_class","properties","state","customElement"],"sourceRoot":""}