"use strict";(self.webpackChunkok_wpa_maps=self.webpackChunkok_wpa_maps||[]).push([[7412,6347],{46228:(e,t,n)=>{n.d(t,{I:()=>a,v:()=>i});var r=n(16889);function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=(0,r.uZ)(e,0,l);for(let r=0;r<4;r++)t[n+r]=Math.floor(256*c(a*o[r]))}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;for(let r=0;r<4;r++)n+=e[t+r]*s[r];return n}const o=[1,256,65536,16777216],s=[1/256,1/65536,1/16777216,1/4294967296],l=i(new Uint8ClampedArray([255,255,255,255]));function c(e){return e-Math.floor(e)}},82272:(e,t,n)=>{n.d(t,{BN:()=>u,Yc:()=>m,em:()=>a,hZ:()=>h,mx:()=>c});var r=n(42265);const a="arial-unicode-ms",i="woff2",o=new Map,s=new Set;class l{constructor(e,t){this.fontFace=e,this.promise=t}}async function c(e){const t=m(e),n=o.get(t);if(n)return n.promise;const a=new FontFace(e.family,"url('".concat(r.default.fontsUrl,"/woff2/").concat(t,".").concat(i,"') format('").concat(i,"')"),{style:e.style,weight:e.weight}),c=document.fonts;if(c.has(a)&&"loading"===a.status)return a.loaded;const h=a.load().then((()=>(c.add(a),a)));return o.set(t,new l(a,h)),s.add(a),h}function h(e){return s.has(e)}function u(e){if(!e)return a;const t=e.toLowerCase().split(" ").join("-");switch(t){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return t}}function m(e){const t=function(e){if(!e.weight)return"";switch(e.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}(e)+function(e){if(!e.style)return"";switch(e.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}(e);return u(e.family)+(t.length>0?t:"-regular")}},58971:(e,t,n)=>{n.d(t,{G6:()=>z,Ie:()=>M,J9:()=>C,RF:()=>y,U1:()=>b,vY:()=>s,ym:()=>v});var r=n(77981);const a=(e,t,n)=>[t,n],i=(e,t,n)=>[t,n,e[2]],o=(e,t,n)=>[t,n,e[2],e[3]];function s(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function l(e,t){let{scale:n,translate:r}=e;return Math.round((t-r[0])/n[0])}function c(e,t){let{scale:n,translate:r}=e;return Math.round((r[1]-t)/n[1])}function h(e,t,n){const r=[];let a,i,o,s;for(let h=0;h<n.length;h++){const u=n[h];h>0?(o=l(e,u[0]),s=c(e,u[1]),o===a&&s===i||(r.push(t(u,o-a,s-i)),a=o,i=s)):(a=l(e,u[0]),i=c(e,u[1]),r.push(t(u,a,i)))}return r.length>0?r:null}function u(e,t){let{scale:n,translate:r}=e;return t*n[0]+r[0]}function m(e,t){let{scale:n,translate:r}=e;return r[1]-t*n[1]}function f(e,t,n){const r=new Array(n.length);if(!n.length)return r;const[a,i]=e.scale;let o=u(e,n[0][0]),s=m(e,n[0][1]);r[0]=t(n[0],o,s);for(let l=1;l<n.length;l++){const e=n[l];o+=e[0]*a,s-=e[1]*i,r[l]=t(e,o,s)}return r}function g(e,t,n){const r=new Array(n.length);for(let a=0;a<n.length;a++)r[a]=f(e,t,n[a]);return r}function d(e,t,n,r,s){var l;return t.points=null!==(l=function(e,t,n,r){return h(e,n?r?o:i:r?i:a,t)}(e,n.points,r,s))&&void 0!==l?l:[],t}function y(e,t,n,r,a){return t.x=l(e,n.x),t.y=c(e,n.y),t!==n&&(r&&(t.z=n.z),a&&(t.m=n.m)),t}function w(e,t,n,r,s){const l=function(e,t,n,r){const s=[],l=n?r?o:i:r?i:a;for(let a=0;a<t.length;a++){const n=h(e,l,t[a]);n&&n.length>=3&&s.push(n)}return s.length?s:null}(e,n.rings,r,s);return l?(t.rings=l,t):null}function p(e,t,n,r,s){const l=function(e,t,n,r){const s=[],l=n?r?o:i:r?i:a;for(let a=0;a<t.length;a++){const n=h(e,l,t[a]);n&&n.length>=2&&s.push(n)}return s.length?s:null}(e,n.paths,r,s);return l?(t.paths=l,t):null}function v(e,t){return e&&t?(0,r.wp)(t)?y(e,{},t,!1,!1):(0,r.l9)(t)?p(e,{},t,!1,!1):(0,r.oU)(t)?w(e,{},t,!1,!1):(0,r.aW)(t)?d(e,{},t,!1,!1):(0,r.YX)(t)?(o=!1,s=!1,(a={}).xmin=l(n=e,(i=t).xmin),a.ymin=c(n,i.ymin),a.xmax=l(n,i.xmax),a.ymax=c(n,i.ymax),a!==i&&(o&&(a.zmin=i.zmin,a.zmax=i.zmax),s&&(a.mmin=i.mmin,a.mmax=i.mmax)),a):null:null;var n,a,i,o,s}function C(e,t,n,r,s){return null!=n&&(t.points=function(e,t,n,r){return f(e,n?r?o:i:r?i:a,t)}(e,n.points,r,s)),t}function b(e,t,n,r,a){return null==n||(t.x=u(e,n.x),t.y=m(e,n.y),t!==n&&(r&&(t.z=n.z),a&&(t.m=n.m))),t}function M(e,t,n,r,s){return null!=n&&(t.rings=function(e,t,n,r){return g(e,n?r?o:i:r?i:a,t)}(e,n.rings,r,s)),t}function z(e,t,n,r,s){return null!=n&&(t.paths=function(e,t,n,r){return g(e,n?r?o:i:r?i:a,t)}(e,n.paths,r,s)),t}},59001:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(82272),a=n(51e3);class i{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){var t;return null!==(t=this._resourceMap.get(e))&&void 0!==t?t:null}async fetchResource(e,t){const n=this._resourceMap.get(e);if(n)return{width:n.width,height:n.height};let r=this._inFlightResourceMap.get(e);return r?r.then((e=>({width:e.width,height:e.height}))):(r=(0,a.n$)(e,t),this._inFlightResourceMap.set(e,r),r.then((t=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,t),{width:t.width,height:t.height})),(()=>({width:0,height:0}))))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}loadFont(e){return(0,r.mx)(e)}}},94304:(e,t,n)=>{n.r(t),n.d(t,{CIMSymbolRasterizer:()=>w});var r=n(51995),a=n(76200),i=n(66978),o=n(17842),s=n(98991),l=n(59001),c=n(66726),h=n(78915),u=n(16285),m=n(22532),f=n(31027),g=n(49729),d=n(83748);const y=e=>null!==e&&void 0!==e&&e.scaleFactor?e.scaleFactor:1;class w{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._lazyImageDataCanvas=null,this._pictureMarkerCache=new Map,this._textRasterizer=new m.Z,this._cimResourceManager=new l.Z,this._rasterizer=new u.Z(this._cimResourceManager)}get _imageDataCanvas(){var e;return null!==(e=this._lazyImageDataCanvas)&&void 0!==e||(this._lazyImageDataCanvas=document.createElement("canvas")),this._lazyImageDataCanvas}get _imageDataContext(){return this._imageDataCanvas.getContext("2d",{willReadFrequently:!0})}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,t,n,r,a,i,o,s,l){if(!e)return null;const{data:u}=e;if(!u||"CIMSymbolReference"!==u.type||!u.symbol)return null;const{symbol:m}=u;i||(i=(0,f.JW)(m));const g=await h.E0.resolveSymbolOverrides(u,t,this._spatialReference,a,i,o,s),d=this._imageDataCanvas,y=this._cimResourceManager,w=[];h.B$.fetchResources(g,y,w),h.B$.fetchFonts(g,y,w),w.length>0&&await Promise.all(w);const{width:p,height:v}=n,C=function(e,t,n,r){const a=1,i=-t/2+a,o=t/2-a,s=n/2-a,l=-n/2+a;switch(e){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[i,0],[0,0],[o,0]]]};default:return"legend"===r?{rings:[[[i,s],[o,0],[o,l],[i,l],[i,s]]]}:{rings:[[[i,s],[o,s],[o,l],[i,l],[i,s]]]}}}(i,p,v,r),b=h.B$.getEnvelope(g,C,y);if(!b)return null;const M=1.3333333333333333*(window.devicePixelRatio||1);let z=1,S=0,x=0;switch(m.type){case"CIMPointSymbol":case"CIMTextSymbol":{let e=1;b.width>p&&(e=p/b.width);let t=1;b.height>v&&(t=v/b.height),"preview"===r&&(b.width<p&&(e=p/b.width),b.height<v&&(t=v/b.height)),z=Math.min(e,t),S=b.x+b.width/2,x=b.y+b.height/2}break;case"CIMLineSymbol":{(l||b.height>v)&&(z=v/b.height),x=b.y+b.height/2;const e=b.x*z+p/2,t=(b.x+b.width)*z+p/2,{paths:n}=C;n[0][0][0]-=e/z,n[0][2][0]-=(t-p)/z}break;case"CIMPolygonSymbol":{S=b.x+b.width/2,x=b.y+b.height/2;const e=b.x*z+p/2,t=(b.x+b.width)*z+p/2,n=b.y*z+v/2,r=(b.y+b.height)*z+v/2,{rings:a}=C;e<0&&(a[0][0][0]-=e,a[0][3][0]-=e,a[0][4][0]-=e),n<0&&(a[0][0][1]+=n,a[0][1][1]+=n,a[0][4][1]+=n),t>p&&(a[0][1][0]-=t-p,a[0][2][0]-=t-p),r>v&&(a[0][2][1]+=r-v,a[0][3][1]+=r-v)}}d.width=p*M,d.height=v*M;d.width+=2,d.height+=2;const _=this._imageDataContext,P=c.zA.createIdentity();return P.translate(-S,-x),P.scale(z*M,-z*M),P.translate(p*M/2+1,v*M/2+1),_.clearRect(0,0,d.width,d.height),new c.cD(_,y,P,!0).drawSymbol(g,C),_.getImageData(0,0,d.width,d.height)}async analyzeCIMSymbol3D(e,t,n,r,a){const o=[],l=t?{geometryType:r,spatialReference:this._spatialReference,fields:t}:null,c=[];h.B$.fetchFonts(e.data.symbol,this._cimResourceManager,c),await Promise.all(c);const u=new s._(this._cimResourceManager,l);let m;await u.analyzeSymbolReference(e.data,this._avoidSDF,o),(0,i.k_)(a);for(const i of o)"CIMPictureMarker"!==i.cim.type&&"CIMPictureFill"!==i.cim.type&&"CIMPictureStroke"!==i.cim.type||(m||(m=[]),m.push(this._fetchPictureMarkerResource(i,a))),n&&"text"===i.type&&"string"==typeof i.text&&i.text.includes("[")&&(i.text=(0,f.Qs)(n,i.text,i.cim.textCase));return m&&await Promise.all(m),o}rasterizeCIMSymbol3D(e,t,n,r,a,i){const o=[];for(const l of e){r&&"function"==typeof r.scaleFactor&&(r.scaleFactor=r.scaleFactor(t,a,i));const e=this._getRasterizedResource(l,t,n,r,a,i);if(!e)continue;let c=0,h=e.anchorX||0,u=e.anchorY||0,m=!1,g=0,d=0;if("esriGeometryPoint"===n){var s;const e=y(r);if(g=(0,f.hf)(l.offsetX,t,a,i)*e||0,d=(0,f.hf)(l.offsetY,t,a,i)*e||0,"marker"===l.type)c=(0,f.hf)(l.rotation,t,a,i)||0,m=null!==(s=l.rotateClockwise)&&void 0!==s&&s;else if("text"===l.type){if(c=(0,f.hf)(l.angle,t,a,i)||0,void 0!==l.horizontalAlignment)switch(l.horizontalAlignment){case"left":h=-.5;break;case"right":h=.5;break;default:h=0}if(void 0!==l.verticalAlignment)switch(l.verticalAlignment){case"top":u=.5;break;case"bottom":u=-.5;break;case"baseline":u=-.25;break;default:u=0}}}null!=e&&o.push({angle:c,rotateClockWise:m,anchorX:h,anchorY:u,offsetX:g,offsetY:d,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement("canvas"),n=t.getContext("2d");let r=0,a=0,i=0,s=0;const l=[];for(let m=0;m<e.length;m++){const t=e[m],c=t.rasterizedResource;if(!c)continue;const h=c.size,u=t.offsetX,f=t.offsetY,g=t.anchorX,d=t.anchorY,y=t.rotateClockWise||!1;let w=t.angle,p=(0,o.F2)(u)-h[0]*(.5+g),v=(0,o.F2)(f)-h[1]*(.5+d),C=p+h[0],b=v+h[1];if(w){y&&(w=-w);const e=Math.sin(w*Math.PI/180),t=Math.cos(w*Math.PI/180),n=p*t-v*e,r=p*e+v*t,a=p*t-b*e,i=p*e+b*t,o=C*t-b*e,s=C*e+b*t,l=C*t-v*e,c=C*e+v*t;p=Math.min(n,a,o,l),v=Math.min(r,i,s,c),C=Math.max(n,a,o,l),b=Math.max(r,i,s,c)}r=p<r?p:r,a=v<a?v:a,i=C>i?C:i,s=b>s?b:s;const M=n.createImageData(c.size[0],c.size[1]);M.data.set(new Uint8ClampedArray(c.image.buffer));const z={offsetX:u,offsetY:f,rotateClockwise:y,angle:w,rasterizedImage:M,anchorX:g,anchorY:d};l.push(z)}t.width=i-r,t.height=s-a;const c=-r,h=s;for(let m=0;m<l.length;m++){const e=l[m],t=this._imageDataToCanvas(e.rasterizedImage),r=e.rasterizedImage.width,a=e.rasterizedImage.height,i=c-r*(.5+e.anchorX),s=h-a*(.5-e.anchorY);if(e.angle){const r=(360-e.angle)*Math.PI/180;n.save(),n.translate((0,o.F2)(e.offsetX),-(0,o.F2)(e.offsetY)),n.translate(c,h),n.rotate(r),n.translate(-c,-h),n.drawImage(t,i,s),n.restore()}else n.drawImage(t,i+(0,o.F2)(e.offsetX),s-(0,o.F2)(e.offsetY))}const u=new d.e({x:c/t.width-.5,y:h/t.height-.5});return{imageData:0!==t.width&&0!==t.height?n.getImageData(0,0,t.width,t.height):n.createImageData(1,1),anchorPosition:u}}async _fetchPictureMarkerResource(e,t){const n=e.materialHash;if(!this._pictureMarkerCache.get(n)){const r=(await(0,a.Z)(e.cim.url,{responseType:"image",signal:null===t||void 0===t?void 0:t.signal})).data;this._pictureMarkerCache.set(n,r)}}_imageDataToCanvas(e){const t=this._imageDataCanvas,n=this._imageDataContext;return t.width=e.width,t.height=e.height,n.putImageData(e,0,0),t}_imageTo32Array(e,t,n,a){const i=this._imageDataCanvas,o=this._imageDataContext;if(i.width=t,i.height=n,o.drawImage(e,0,0,t,n),a){o.save();const i=new r.Z(a);o.fillStyle=i.toHex(),o.globalCompositeOperation="multiply",o.fillRect(0,0,t,n),o.globalCompositeOperation="destination-atop",o.drawImage(e,0,0,t,n),o.restore()}return new Uint32Array(o.getImageData(0,0,t,n).data.buffer)}_getRasterizedResource(e,t,n,r,a,i){let o,l,c;if("text"===e.type)return this._rasterizeTextResource(e,t,r,a,i);({analyzedCIM:o,hash:l}=function(e,t,n,r){let a,i;"function"==typeof e.materialHash?(a=(0,e.materialHash)(t,n,r),i=(0,s.S)(e.cim,e.materialOverrides)):(a=e.materialHash,i=e.cim);return{analyzedCIM:i,hash:a}}(e,t,a,i));const h=y(r);if("CIMPictureMarker"===e.cim.type){const n=(0,f.hf)(e.size,t,a,i)*h,{image:r,width:o,height:s}=this._getPictureResource(e,n,(0,f.hf)(e.color,t,a,i));return c={image:r,size:[o,s],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},c}(0,g.FW)(o,h,{preserveOutlineWidth:!1});const u=o;l+=n,r&&(l+=JSON.stringify(r));const m=this._resourceCache;return m.has(l)?m.get(l):(c=this._rasterizer.rasterizeJSONResource({cim:u,type:e.type,url:e.url,mosaicHash:l,size:null,path:null},window.devicePixelRatio||1,this._avoidSDF),m.set(l,c),c)}_rasterizeTextResource(e,t,n,r,a){var i,o,s;const l=y(n),c=(0,f.hf)(e.text,t,r,a);if(!c||0===c.length)return null;const h=e.cim,u=(0,f.hf)((null===h||void 0===h?void 0:h.fontFamilyName)||e.fontName,t,r,a),m=(0,f.hf)((null===h||void 0===h||null===(i=h.font)||void 0===i?void 0:i.style)||e.style,t,r,a),g=(0,f.hf)((null===h||void 0===h||null===(o=h.font)||void 0===o?void 0:o.weight)||e.weight,t,r,a),d=(0,f.hf)((null===h||void 0===h||null===(s=h.font)||void 0===s?void 0:s.decoration)||e.decoration,t,r,a),w=(0,f.hf)(e.size,t,r,a)*l,p=(0,f.hf)(e.horizontalAlignment,t,r,a),v=(0,f.hf)(e.verticalAlignment,t,r,a),C=(0,f.nn)((0,f.hf)(e.color,t,r,a)),b=(0,f.nn)((0,f.hf)(e.outlineColor,t,r,a)),M=(0,f.hf)(e.outlineSize,t,r,a),z=null!=e.backgroundColor?(0,f.nn)(e.backgroundColor):null,S=null!=e.borderLineColor?(0,f.nn)(e.borderLineColor):null,x=null!=e.borderLineWidth?e.borderLineWidth:null,_={color:C,size:w,horizontalAlignment:p,verticalAlignment:v,font:{family:u,style:m,weight:g,decoration:d},halo:{size:M||0,color:b,style:m},backgroundColor:z,borderLine:null!=S&&null!=x?{color:S,size:x}:null,pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(c,_)}_getPictureResource(e,t,n){const r=this._pictureMarkerCache.get(e.materialHash);if(!r)return null;const a=r.height/r.width,i=t?a>1?(0,o.F2)(t):(0,o.F2)(t)/a:r.width,s=t?a>1?(0,o.F2)(t)*a:(0,o.F2)(t):r.height;return{image:this._imageTo32Array(r,i,s,n),width:i,height:s}}}},16285:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(16889),a=n(78915),i=n(26554),o=n(691),s=n(6388),l=n(31027);class c{constructor(e){this._resourceManager=e,this._lazyRasterizationCanvas=null}dispose(){this._lazyRasterizationCanvas=null}get _rasterizationCanvas(){return null==this._lazyRasterizationCanvas&&(this._lazyRasterizationCanvas=document.createElement("canvas"),this._lazyRasterizationCanvas.getContext("2d",{willReadFrequently:!0})),this._lazyRasterizationCanvas}rasterizeJSONResource(e,t,n){if("simple-fill"===e.type||"esriSFS"===e.type){const[n,a,o]=(0,i.Y)(this._rasterizationCanvas,e.style,t);return{size:[a,o],image:new Uint32Array(n.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0,rasterizationScale:(0,r.fp)(Math.ceil(t))}}if("simple-line"===e.type||"esriSLS"===e.type||"line"===e.type&&e.dashTemplate){let t,n;if("simple-line"===e.type||"esriSLS"===e.type)switch(t=(0,a.U1)(e.style,e.cap),e.cap){case"butt":n="Butt";break;case"square":n="Square";break;default:n="Round"}else t=e.dashTemplate,n=e.cim.capStyle;const[r,o,s]=(0,i.m)(t,n);return{size:[o,s],image:new Uint32Array(r.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let l,c=null,h=null,u=1;if("simple-marker"===e.type||"esriSMS"===e.type||"line-marker"===e.type?(l=a.B$.fromSimpleMarker(e),h=(0,s.Fp)(l)):e.cim&&"CIMHatchFill"===e.cim.type?(l=a.B$.fromCIMHatchFill(e.cim,t),c=new o.Z(l.frame.xmin,-l.frame.ymax,l.frame.xmax-l.frame.xmin,l.frame.ymax-l.frame.ymin),u=t):e.cim.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===e.cim.markerPlacement.type?(l=a.B$.fromCIMInsidePolygon(e.cim),c=new o.Z(l.frame.xmin,-l.frame.ymax,l.frame.xmax-l.frame.xmin,l.frame.ymax-l.frame.ymin)):(l=e.cim,e.avoidSDFRasterization||(h=(0,s.Fp)(l))),h&&!n){const[e,t,n]=(0,s.RL)(h);return e?{size:[t,n],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0,rasterizationScale:u}:null}const[m,f,g,d,y]=a.B$.rasterize(this._rasterizationCanvas,l,c,this._resourceManager,!n);return m?{size:[f,g],image:new Uint32Array(m.buffer),sdf:!1,simplePattern:!1,anchorX:d,anchorY:y}:null}rasterizeImageResource(e,t,n,r){this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=t;const a=this._rasterizationCanvas.getContext("2d");n instanceof ImageData?a.putImageData(n,0,0):(n.setAttribute("width","".concat(e,"px")),n.setAttribute("height","".concat(t,"px")),a.drawImage(n,0,0,e,t));const i=a.getImageData(0,0,e,t),o=new Uint8Array(i.data);if(r)for(const l of r)if(l&&l.oldColor&&4===l.oldColor.length&&l.newColor&&4===l.newColor.length){const[e,t,n,r]=l.oldColor,[a,i,s,c]=l.newColor;if(e===a&&t===i&&n===s&&r===c)continue;for(let l=0;l<o.length;l+=4)e===o[l]&&t===o[l+1]&&n===o[l+2]&&r===o[l+3]&&(o[l]=a,o[l+1]=i,o[l+2]=s,o[l+3]=c)}let s;for(let l=0;l<o.length;l+=4)s=o[l+3]/255,o[l]=o[l]*s,o[l+1]=o[l+1]*s,o[l+2]=o[l+2]*s;let c=o,h=e,u=t;const m=512;if(h>=m||u>=m){const n=h/u;n>1?(h=m,u=Math.round(m/n)):(u=m,h=Math.round(m*n)),c=new Uint8Array(4*h*u);const r=new Uint8ClampedArray(c.buffer);(0,l.TT)(o,e,t,r,h,u,!1)}return{size:[h,u],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}},26554:(e,t,n)=>{n.d(t,{Y:()=>o,m:()=>s});var r=n(46228),a=n(16889);const i=e=>"vertical"===e||"horizontal"===e||"cross"===e||"esriSFSCross"===e||"esriSFSVertical"===e||"esriSFSHorizontal"===e;function o(e,t,n){const r=(0,a.fp)(Math.ceil(n)),o=i(t)?8*r:16*r,s=2*r;e.width=o,e.height=o;const l=e.getContext("2d");l.strokeStyle="#FFFFFF",l.lineWidth=r,l.beginPath(),"vertical"!==t&&"cross"!==t&&"esriSFSCross"!==t&&"esriSFSVertical"!==t||(l.moveTo(o/2,-s),l.lineTo(o/2,o+s)),"horizontal"!==t&&"cross"!==t&&"esriSFSCross"!==t&&"esriSFSHorizontal"!==t||(l.moveTo(-s,o/2),l.lineTo(o+s,o/2)),"forward-diagonal"!==t&&"diagonal-cross"!==t&&"esriSFSDiagonalCross"!==t&&"esriSFSForwardDiagonal"!==t||(l.moveTo(-s,-s),l.lineTo(o+s,o+s),l.moveTo(o-s,-s),l.lineTo(o+s,s),l.moveTo(-s,o-s),l.lineTo(s,o+s)),"backward-diagonal"!==t&&"diagonal-cross"!==t&&"esriSFSBackwardDiagonal"!==t&&"esriSFSDiagonalCross"!==t||(l.moveTo(o+s,-s),l.lineTo(-s,o+s),l.moveTo(s,-s),l.lineTo(-s,s),l.moveTo(o+s,o-s),l.lineTo(o-s,o+s)),l.stroke();const c=l.getImageData(0,0,e.width,e.height),h=new Uint8Array(c.data);let u;for(let a=0;a<h.length;a+=4)u=h[a+3]/255,h[a]=h[a]*u,h[a+1]=h[a+1]*u,h[a+2]=h[a+2]*u;return[h,e.width,e.height]}function s(e,t){const n="Butt"===t,a="Square"===t,i=!n&&!a;e.length%2==1&&(e=[...e,...e]);const o=15.5;let s=0;for(const r of e)s+=r;const l=Math.round(s*o),c=new Float32Array(31*l),h=7.75;let u=0,m=0,f=.5,g=!0;for(const r of e){for(u=m,m+=r*o;f<=m;){let e=.5;for(;e<31;){const t=(e-.5)*l+f-.5,r=i?(e-o)*(e-o):Math.abs(e-o);c[t]=g?n?Math.max(Math.max(u+h-f,r),Math.max(f-m+h,r)):r:i?Math.min((f-u)*(f-u)+r,(f-m)*(f-m)+r):a?Math.min(Math.max(f-u,r),Math.max(m-f,r)):Math.min(Math.max(f-u+h,r),Math.max(m+h-f,r)),e++}f++}g=!g}const d=c.length,y=new Uint8Array(4*d);for(let w=0;w<d;++w){const e=(i?Math.sqrt(c[w]):c[w])/o;(0,r.I)(e,y,4*w)}return[y,l,31]}},54763:(e,t,n)=>{n.d(t,{previewCIMSymbol:()=>d});var r=n(17842),a=n(78915),i=n(94304),o=n(31027),s=n(37817),l=n(69157);const c=new i.CIMSymbolRasterizer(null,!0),h=(0,r.Wz)(s.b_.size),u=(0,r.Wz)(s.b_.maxSize),m=(0,r.Wz)(s.b_.lineWidth),f=1;async function g(e,t,n){const r=null===t||void 0===t?void 0:t.size;let i=null!=r&&"object"==typeof r&&"width"in r?r.width:r,o=null!=r&&"object"==typeof r&&"height"in r?r.height:r;if(null==i||null==o)if("esriGeometryPolygon"===n)i=h,o=h;else{const r=await async function(e,t,n){const{feature:r,fieldMap:i,viewParams:o}=t.cimOptions||t,s=await a.E0.resolveSymbolOverrides(e.data,r,null,i,n,null,o);if(!s)return null;(e=e.clone()).data={type:"CIMSymbolReference",symbol:s},e.data.primitiveOverrides=void 0;const l=[];return a.B$.fetchResources(s,c.resourceManager,l),a.B$.fetchFonts(s,c.resourceManager,l),l.length>0&&await Promise.all(l),a.B$.getEnvelope(s,null,c.resourceManager)}(e,t,n);r&&(i=r.width,o=r.height),"esriGeometryPolyline"===n&&(i=m),i=null!=i&&isFinite(i)?Math.min(i,u):h,o=null!=o&&isFinite(o)?Math.max(Math.min(o,u),f):h}return"legend"===t.style&&"esriGeometryPolyline"===n&&(i=m),{width:i,height:o}}async function d(e){var t,n,a;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{node:s,opacity:h,symbolConfig:u}=i,m=null!=u&&"object"==typeof u&&"isSquareFill"in u&&u.isSquareFill,f=i.cimOptions||i,d=f.geometryType||(0,o.JW)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.symbol),y=await g(e,i,d),{feature:w,fieldMap:p}=f,v=m||"esriGeometryPolygon"!==d?"preview":"legend",C=await c.rasterizeCIMSymbolAsync(e,w,y,v,p,d,null,f.viewParams,f.allowScalingUp);if(!C)return null;const{width:b,height:M}=C,z=document.createElement("canvas");z.width=b,z.height=M,z.getContext("2d").putImageData(C,0,0);const S=(0,r.F2)(y.width),x=(0,r.F2)(y.height),_=new Image(S,x);_.src=z.toDataURL(),_.ariaLabel=null!==(n=i.ariaLabel)&&void 0!==n?n:null,_.alt=null!==(a=i.ariaLabel)&&void 0!==a?a:"",null!=h&&(_.style.opacity="".concat(h));let P=_;if(null!=i.effectView){const e={shape:{type:"image",x:0,y:0,width:S,height:x,src:_.src},fill:null,stroke:null,offset:[0,0]};P=(0,l.wh)([[e]],[S,x],{effectView:i.effectView,ariaLabel:i.ariaLabel})}return s&&P&&s.appendChild(P),P}},91935:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(10064),a=n(32718),i=n(58971);function o(e,t,n,r,i){if(null==e)return null;const o=e.referencesGeometry()&&i?l(t,r,i):t,s=e.repurposeFeature(o);try{return e.evaluate({...n,$feature:s},e.services)}catch(c){return a.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",c),null}}const s=new Map;function l(e,t,n){const{transform:o,hasZ:l,hasM:c}=n;s.has(t)||s.set(t,function(e){const t={};switch(e){case"esriGeometryPoint":return(e,n,r,a)=>(0,i.U1)(n,t,e,r,a);case"esriGeometryPolygon":return(e,n,r,a)=>(0,i.Ie)(n,t,e,r,a);case"esriGeometryPolyline":return(e,n,r,a)=>(0,i.G6)(n,t,e,r,a);case"esriGeometryMultipoint":return(e,n,r,a)=>(0,i.J9)(n,t,e,r,a);default:return a.Z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new r.Z("mapview-arcade","Unable to handle geometryType: ".concat(e))),e=>e}}(t));const h=s.get(t)(e.geometry,o,l,c);return{...e,geometry:h}}},38999:(e,t,n)=>{var r,a;function i(e){switch(e){case"left":return r.Left;case"right":return r.Right;case"center":return r.Center}}function o(e){switch(e){case"top":return a.Top;case"middle":return a.Center;case"baseline":return a.Baseline;case"bottom":return a.Bottom}}function s(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[r.Right,a.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[r.Center,a.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[r.Left,a.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[r.Right,a.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[r.Center,a.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[r.Left,a.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[r.Right,a.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[r.Center,a.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[r.Left,a.Top];default:return console.debug("Found invalid placement type ".concat(e)),[r.Center,a.Center]}}function l(e){switch(e){case r.Right:return-1;case r.Center:return 0;case r.Left:return 1;default:return console.debug("Found invalid horizontal alignment ".concat(e)),0}}function c(e){switch(e){case a.Top:return 1;case a.Center:return 0;case a.Bottom:case a.Baseline:return-1;default:return console.debug("Found invalid vertical alignment ".concat(e)),0}}function h(e){switch(e){case"left":return r.Left;case"right":return r.Right;case"center":return r.Center}}function u(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}n.d(t,{Hd:()=>h,M7:()=>r,NS:()=>u,TR:()=>a,b7:()=>o,g:()=>l,kH:()=>i,qv:()=>s,tf:()=>c}),function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"}(r||(r={})),function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(a||(a={}))},73271:(e,t,n)=>{n.d(t,{Au:()=>a,Jz:()=>o,UJ:()=>i});const r=new Float32Array(1);new Uint32Array(r.buffer);function a(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function i(e,t){return 65535&e|t<<16}function o(e,t,n,r){return 255&e|(255&t)<<8|(255&n)<<16|r<<24}}}]);
//# sourceMappingURL=7412.8e5142ae.chunk.js.map