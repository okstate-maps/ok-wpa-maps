{"version":3,"sources":["../node_modules/@arcgis/core/chunks/vec32.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/DecodeNormal.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js","../node_modules/@arcgis/core/chunks/vec33.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/DefaultMaterialTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RealisticTreeTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultMaterial.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js","../node_modules/@arcgis/core/views/webgl/testFloatBufferBlend.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/WebGLDriverTest.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/DoublePrecision.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientLighting.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateMainLighting.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js","../node_modules/@arcgis/core/geometry/support/buffer/math/common.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/Material/shader/DecodeSymbolColor.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexPosition.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexNormal.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Normals.glsl.js","../node_modules/@arcgis/core/views/webgl/testSVGPremultipliedAlpha.js","../node_modules/@arcgis/core/chunks/DefaultMaterial.glsl.js","../node_modules/@arcgis/core/chunks/RealisticTree.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/TextureAtlasLookup.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexTextureCoordinates.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ComputeNormalTexture.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/HeaderComment.glsl.js","../node_modules/@arcgis/core/views/3d/layers/graphics/wosrLoader.js","../node_modules/@arcgis/core/views/3d/layers/graphics/objectResourceUtils.js"],"names":["e","f","r","count","o","n","u","d","s","c","i","a","p","y","B","m","h","l","typedBuffer","S","typedBufferStride","b","v","t","M","error","Math","min","sqrt","Object","freeze","__proto__","transformMat4","transformMat3","scale","normalize","shiftRight","attributeTextureCoordinates","attributes","add","varyings","vertex","code","fragment","receiveAmbientOcclusion","uniforms","normalType","include","extensions","dstIndex","srcIndex","copy","fill","R","shader","get","this","configuration","build","OITEnabled","transparencyPassType","output","viewingMode","receiveShadows","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","symbolColor","symbolColors","vvSize","vvColor","vvInstancingEnabled","instanced","instancedColor","instancedDoublePrecision","pbrMode","usePBR","isSchematic","hasMetalnessAndRoughnessTexture","hasEmissionTexture","hasOcclusionTexture","hasNormalTexture","hasColorTexture","useCustomDTRExponentForWater","normalsTypeDerivate","doubleSidedMode","vertexTangents","textureAlphaPremultiplied","attributeColor","vertexColors","screenSizePerspectiveEnabled","screenSizePerspective","verticalOffsetEnabled","verticalOffset","offsetBackfaces","doublePrecisionRequiresObfuscation","rctx","alphaDiscardMode","supportsTextureAtlas","multipassTerrainEnabled","cullAboveGround","program","camera","projectionMatrix","setUniform2fv","nearFar","inverseViewport","setUniform1f","opacity","layerOpacity","setUniform4fv","externalColor","setUniform1i","D","colorMixMode","lighting","setUniforms","setUniform3fv","ambient","diffuse","w","textureAlphaMode","textureAlphaCutoff","shadowMap","bind","ssaoHelper","viewInverseTransposeMatrix","origin","viewMatrix","rebindTextures","setUniformMatrix4fv","bindCustomOrigin","slicePlane","A","blending","transparent","x","culling","L","E","cullFace","depthTest","func","T","depthWrite","writeDepth","U","colorWrite","z","stencilWrite","sceneHasOcludees","stencilTest","C","O","polygonOffset","P","enableOffset","_occludeePipelineState","setPipeline","pipeline","j","H","arguments","g","prototype","supportsEdges","techniqueConfig","q","vertexBufferLayout","getVertexBufferLayout","params","instanceBufferLayout","getInstanceBufferLayout","castShadows","indexOf","vvColorEnabled","normalTextureId","textureId","vvSizeEnabled","normals","treeRendering","doubleSided","doubleSidedType","shadowMappingEnabled","ssaoEnabled","receiveSSAO","metallicRoughnessTextureId","emissiveTextureId","occlusionTextureId","offsetTransparentBackfaces","relativeElevation","eye","I","transform","inverseRotation","_","vec3f","vec4f","vec2f","vec4u8","mat3f","mat4f","material","updateParameters","_material","updateTexture","_technique","_techniqueRep","releaseAndAcquire","getTechniqueConfig","_output","setParameterValues","hasOccludees","_updateShadowState","_updateOccludeeState","bindPass","bindTextures","getPipelineState","initTextureTransparent","emissiveFactor","mrrFactors","vvSizeMinSize","vvSizeMaxSize","vvSizeOffset","vvSizeFactor","vvSizeValue","vvColorValues","vvColorColors","vvSymbolAnchor","vvSymbolRotationMatrix","createBuffer","indices","length","transformation","invTranspTransformation","Uniforms","exports","window","console","log","enable","disable","getParameter","drawArrays","drawElements","createShader","getShaderParameter","getProgramParameter","getShaderPrecisionFormat","getVertexAttrib","vertexAttribPointer","bindTexture","activeTexture","getTexParameter","texParameterf","texParameteri","texImage2D","texSubImage2D","copyTexImage2D","copyTexSubImage2D","generateMipmap","compressedTexImage2D","compressedTexSubImage2D","bindBuffer","bufferData","bufferSubData","getBufferParameter","pixelStorei","readPixels","bindRenderbuffer","bindFramebuffer","checkFramebufferStatus","framebufferRenderbuffer","framebufferTexture2D","getFramebufferAttachmentParameter","getRenderbufferParameter","renderbufferStorage","clear","enumBitwiseOr","depthFunc","blendFunc","blendFuncSeparate","blendEquation","blendEquationSeparate","stencilFunc","stencilFuncSeparate","stencilMaskSeparate","stencilOp","stencilOpSeparate","frontFace","drawArraysInstancedANGLE","drawElementsInstancedANGLE","blendEquationEXT","toString","push","join","__defineGetter__","__defineSetter__","MAX_VERTEX_ATTRIBS","ARRAY_BUFFER","disableVertexAttribArray","FLOAT","vertexAttrib1f","deleteBuffer","MAX_TEXTURE_IMAGE_UNITS","TEXTURE0","TEXTURE_CUBE_MAP","TEXTURE_2D","useProgram","ELEMENT_ARRAY_BUFFER","FRAMEBUFFER","RENDERBUFFER","BLEND","CULL_FACE","DEPTH_TEST","DITHER","SCISSOR_TEST","blendColor","FUNC_ADD","ONE","ZERO","clearColor","clearDepth","clearStencil","colorMask","BACK","LESS","depthMask","depthRange","CCW","hint","GENERATE_MIPMAP_HINT","DONT_CARE","lineWidth","PACK_ALIGNMENT","UNPACK_ALIGNMENT","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_COLORSPACE_CONVERSION_WEBGL","BROWSER_DEFAULT_WEBGL","sampleCoverage","scissor","canvas","width","height","ALWAYS","stencilMask","KEEP","viewport","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","getError","init","mightBeEnum","glEnumToString","glFunctionArgToString","glFunctionArgsToString","makeDebugContext","apply","hasOwnProperty","NO_ERROR","makeLostContextSimulatingCanvas","handleEvent","getContext","WebGLRenderingContext","loseContext","statusMessage","preventDefault","addEventListener","keys","F","CONTEXT_LOST_WEBGL","slice","setTimeout","restoreContext","WebGLBuffer","WebGLFramebuffer","deleteFramebuffer","WebGLProgram","deleteProgram","WebGLRenderbuffer","deleteRenderbuffer","WebGLShader","deleteShader","WebGLTexture","deleteTexture","loseContextInNCalls","getNumCalls","setRestoreTimeout","__webglDebugContextLostId__","FRAMEBUFFER_UNSUPPORTED","getAttribLocation","getVertexAttribOffset","isContextLost","resetToInitialState","context","svgAlwaysPremultipliesAlpha","floatBufferBlendWorking","_doublePrecisionRequiresObfuscation","gl","webglVersion","capabilities","textureFloat","colorBufferFloat","floatBlend","colorTarget","depthStencilTarget","target","wrapMode","pixelFormat","dataType","internalFormat","samplingMode","createVertex","Uint16Array","Map","geometry","name","type","offset","stride","normalized","getBoundFramebufferObject","getViewport","setViewport","bindVAO","setPipelineState","dispose","warn","then","Float32Array","setUniform3f","Uint8Array","abs","lightingSphericalHarmonicsOrder","getLogger","linearDepth","int","ModelTransform","worldFromModel_RS","worldFromModel_TH","worldFromModel_TL","ViewProjectionTransform","worldFromView_TH","worldFromView_TL","viewFromCameraRelative_RS","projFromView","bindModelTransform","setUniformMatrix3fv","bindViewProjTransform","bindUniforms","Image","src","decode","preMultiplyAlpha","$","float","textureDefinitions","resource","textures","streamDataRequester","ok","value","data","request","details","url","topology","vertexAttributes","faces","values","valueType","valuesPerElement","parse","version","validate","model","geometries","materialDefinitions","size","exclusive","Uint32Array","texture","has","image","set","id","substring","lastIndexOf","transparency","alphaChannelUsage","externalColorMixMode","materialParamsMixin","assign","position","stageResources","materials","pivotOffset","boundingBox","numberOfVertices","lodThreshold","forEach","boundingInfo","getBBMin","getBBMax","images","encoding","channels","noUnpackFlip","wrap","disableTextures","Promise","resolve","refId","all","region","fileType","cache","loadWOSR","N","lods","referenceBoundingBox","isEsriSymbolResource","isWosr","remove","loadGLTF","meta","uri","J","customMeta","esriTreeRendering","specifiedLodIndex","K","match","Number","Array","parts","normal","color","texCoord0","tangent","Q","alphaMode","textureColor","parameters","textureNormal","textureOcclusion","textureEmissive","textureMetallicRoughness","alphaCutoff","metallicFactor","roughnessFactor","k","primitiveType","elementCount","V","W","G","buffer","getVec","center","radius","setVec"],"mappings":"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","file":"static/js/60.576eb771.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{logger as t}from\"../geometry/support/buffer/math/common.js\";function e(e,f,r){if(e.count!==f.count)return void t.error(\"source and destination buffers need to have the same number of elements\");const o=e.count,n=r[0],u=r[1],d=r[2],s=r[4],c=r[5],i=r[6],a=r[8],p=r[9],y=r[10],B=r[12],m=r[13],h=r[14],l=e.typedBuffer,S=e.typedBufferStride,b=f.typedBuffer,v=f.typedBufferStride;for(let t=0;t<o;t++){const e=t*S,f=t*v,r=b[f],o=b[f+1],M=b[f+2];l[e]=n*r+s*o+a*M+B,l[e+1]=u*r+c*o+p*M+m,l[e+2]=d*r+i*o+y*M+h}}function f(e,f,r){if(e.count!==f.count)return void t.error(\"source and destination buffers need to have the same number of elements\");const o=e.count,n=r[0],u=r[1],d=r[2],s=r[3],c=r[4],i=r[5],a=r[6],p=r[7],y=r[8],B=e.typedBuffer,m=e.typedBufferStride,h=f.typedBuffer,l=f.typedBufferStride;for(let t=0;t<o;t++){const e=t*m,f=t*l,r=h[f],o=h[f+1],S=h[f+2];B[e]=n*r+s*o+a*S,B[e+1]=u*r+c*o+p*S,B[e+2]=d*r+i*o+y*S}}function r(t,e,f){const r=Math.min(t.count,e.count),o=t.typedBuffer,n=t.typedBufferStride,u=e.typedBuffer,d=e.typedBufferStride;for(let s=0;s<r;s++){const t=s*n,e=s*d;o[t]=f*u[e],o[t+1]=f*u[e+1],o[t+2]=f*u[e+2]}}function o(t,e){const f=Math.min(t.count,e.count),r=t.typedBuffer,o=t.typedBufferStride,n=e.typedBuffer,u=e.typedBufferStride;for(let d=0;d<f;d++){const t=d*o,e=d*u,f=n[e],s=n[e+1],c=n[e+2],i=Math.sqrt(f*f+s*s+c*c);if(i>0){const e=1/i;r[t]=e*f,r[t+1]=e*s,r[t+2]=e*c}}}function n(t,e,f){const r=Math.min(t.count,e.count),o=t.typedBuffer,n=t.typedBufferStride,u=e.typedBuffer,d=e.typedBufferStride;for(let s=0;s<r;s++){const t=s*n,e=s*d;o[t]=u[e]>>f,o[t+1]=u[e+1]>>f,o[t+2]=u[e+2]>>f}}var u=Object.freeze({__proto__:null,transformMat4:e,transformMat3:f,scale:r,normalize:o,shiftRight:n});export{f as a,n as b,o as n,r as s,e as t,u as v};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t,d){1===d.attributeTextureCoordinates&&(t.attributes.add(\"uv0\",\"vec2\"),t.varyings.add(\"vuv0\",\"vec2\"),t.vertex.code.add(e`void forwardTextureCoordinates() {\nvuv0 = uv0;\n}`)),2===d.attributeTextureCoordinates&&(t.attributes.add(\"uv0\",\"vec2\"),t.varyings.add(\"vuv0\",\"vec2\"),t.attributes.add(\"uvRegion\",\"vec4\"),t.varyings.add(\"vuvRegion\",\"vec4\"),t.vertex.code.add(e`void forwardTextureCoordinates() {\nvuv0 = uv0;\nvuvRegion = uvRegion;\n}`)),0===d.attributeTextureCoordinates&&t.vertex.code.add(e`void forwardTextureCoordinates() {}`)}export{t as TextureCoordinateAttribute};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function o(o,t){const r=o.fragment;t.receiveAmbientOcclusion?(r.uniforms.add(\"ssaoTex\",\"sampler2D\"),r.uniforms.add(\"viewportPixelSz\",\"vec4\"),r.code.add(e`float evaluateAmbientOcclusion() {\nreturn 1.0 - texture2D(ssaoTex, (gl_FragCoord.xy - viewportPixelSz.xy) * viewportPixelSz.zw).a;\n}\nfloat evaluateAmbientOcclusionInverse() {\nfloat ssao = texture2D(ssaoTex, (gl_FragCoord.xy - viewportPixelSz.xy) * viewportPixelSz.zw).a;\nreturn viewportPixelSz.z < 0.0 ? 1.0 : ssao;\n}`)):r.code.add(e`float evaluateAmbientOcclusion() { return 0.0; }\nfloat evaluateAmbientOcclusionInverse() { return 1.0; }`)}export{o as EvaluateAmbientOcclusion};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function o(o){const d=e`vec3 decodeNormal(vec2 f) {\nfloat z = 1.0 - abs(f.x) - abs(f.y);\nreturn vec3(f + sign(f) * min(z, 0.0), z);\n}`;o.fragment.code.add(d),o.vertex.code.add(d)}export{o as DecodeNormal};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{DecodeNormal as e}from\"../util/DecodeNormal.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function o(o,d){0===d.normalType&&(o.attributes.add(\"normal\",\"vec3\"),o.vertex.code.add(r`vec3 normalModel() {\nreturn normal;\n}`)),1===d.normalType&&(o.include(e),o.attributes.add(\"normalCompressed\",\"vec2\"),o.vertex.code.add(r`vec3 normalModel() {\nreturn decodeNormal(normalCompressed);\n}`)),3===d.normalType&&(o.extensions.add(\"GL_OES_standard_derivatives\"),o.fragment.code.add(r`vec3 screenDerivativeNormal(vec3 positionView) {\nreturn normalize(cross(dFdx(positionView), dFdy(positionView)));\n}`))}export{o as NormalAttribute};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nfunction e(e,t,n){const d=e.typedBuffer,f=e.typedBufferStride,r=t.typedBuffer,u=t.typedBufferStride,l=n?n.count:t.count;let o=(n&&n.dstIndex?n.dstIndex:0)*f,c=(n&&n.srcIndex?n.srcIndex:0)*u;for(let s=0;s<l;++s)d[o]=r[c],d[o+1]=r[c+1],d[o+2]=r[c+2],o+=f,c+=u}function t(e,t,n,d,f){var r,u;const l=e.typedBuffer,o=e.typedBufferStride,c=null!=(r=null==f?void 0:f.count)?r:e.count;let s=(null!=(u=null==f?void 0:f.dstIndex)?u:0)*o;for(let p=0;p<c;++p)l[s]=t,l[s+1]=n,l[s+2]=d,s+=o}var n=Object.freeze({__proto__:null,copy:e,fill:t});export{e as c,t as f,n as v};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function o(o){o.attributes.add(\"position\",\"vec3\"),o.vertex.code.add(e`vec3 positionModel() { return position; }`)}export{o as PositionAttribute};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{f as t}from\"../../../../chunks/vec3f64.js\";import{bindSliceUniforms as i}from\"../core/shaderLibrary/Slice.glsl.js\";import{InstancedDoublePrecision as r}from\"../core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js\";import{bindVerticalOffsetUniforms as o}from\"../core/shaderLibrary/attributes/VerticalOffset.glsl.js\";import{bindOutputHighlight as s}from\"../core/shaderLibrary/output/OutputHighlight.glsl.js\";import{bindMultipassTerrainTexture as a}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{bindPBRUniforms as n}from\"../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{bindReadShadowMapViewCustomOrigin as l}from\"../core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{bindVisualVariablesUniformsForSymbols as p}from\"../core/shaderLibrary/shading/VisualVariables.glsl.js\";import{doublePrecisionRequiresObfuscation as c}from\"../core/shaderLibrary/util/DoublePrecision.glsl.js\";import{bindProjectionMatrix as u,bindViewCustomOrigin as h,bindCameraPosition as d}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as m}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as f}from\"../core/shaderTechnique/ShaderTechnique.js\";import{parameter as v,ShaderTechniqueConfiguration as g}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as b}from\"../lib/DefaultVertexAttributeLocations.js\";import{blendingDefault as y,OITBlending as x,OITDepthTest as T,getOITPolygonOffset as P}from\"../lib/OrderIndependentTransparency.js\";import{Program as M}from\"../lib/Program.js\";import{stencilWriteMaskOn as S,stencilToolMaskBaseParams as C,stencilBaseAllZerosParams as O}from\"../lib/StencilUtils.js\";import{colorMixModes as D,bindScreenSizePerspective as w}from\"../materials/internal/MaterialUtil.js\";import{D as j}from\"../../../../chunks/DefaultMaterial.glsl.js\";import{makePipelineState as A,cullingParams as E,defaultDepthWriteParams as U,defaultColorWriteParams as z}from\"../../../webgl/renderState.js\";class R extends f{initializeProgram(e){const t=R.shader.get(),i=this.configuration,r=t.build({OITEnabled:0===i.transparencyPassType,output:i.output,viewingMode:e.viewingMode,receiveShadows:i.receiveShadows,slicePlaneEnabled:i.slicePlaneEnabled,sliceHighlightDisabled:i.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1,symbolColor:i.symbolColors,vvSize:i.vvSize,vvColor:i.vvColor,vvInstancingEnabled:!0,instanced:i.instanced,instancedColor:i.instancedColor,instancedDoublePrecision:i.instancedDoublePrecision,pbrMode:i.usePBR?i.isSchematic?2:1:0,hasMetalnessAndRoughnessTexture:i.hasMetalnessAndRoughnessTexture,hasEmissionTexture:i.hasEmissionTexture,hasOcclusionTexture:i.hasOcclusionTexture,hasNormalTexture:i.hasNormalTexture,hasColorTexture:i.hasColorTexture,receiveAmbientOcclusion:i.receiveAmbientOcclusion,useCustomDTRExponentForWater:!1,normalType:i.normalsTypeDerivate?3:0,doubleSidedMode:i.doubleSidedMode,vertexTangents:i.vertexTangents,attributeTextureCoordinates:i.hasMetalnessAndRoughnessTexture||i.hasEmissionTexture||i.hasOcclusionTexture||i.hasNormalTexture||i.hasColorTexture?1:0,textureAlphaPremultiplied:i.textureAlphaPremultiplied,attributeColor:i.vertexColors,screenSizePerspectiveEnabled:i.screenSizePerspective,verticalOffsetEnabled:i.verticalOffset,offsetBackfaces:i.offsetBackfaces,doublePrecisionRequiresObfuscation:c(e.rctx),alphaDiscardMode:i.alphaDiscardMode,supportsTextureAtlas:!1,multipassTerrainEnabled:i.multipassTerrainEnabled,cullAboveGround:i.cullAboveGround});return new M(e.rctx,r,b)}bindPass(e,t){var i,r;u(this.program,t.camera.projectionMatrix);const l=this.configuration.output;(1===this.configuration.output||t.multipassTerrainEnabled||3===l)&&this.program.setUniform2fv(\"cameraNearFar\",t.camera.nearFar),t.multipassTerrainEnabled&&(this.program.setUniform2fv(\"inverseViewport\",t.inverseViewport),a(this.program,t)),7===l&&(this.program.setUniform1f(\"opacity\",e.opacity),this.program.setUniform1f(\"layerOpacity\",e.layerOpacity),this.program.setUniform4fv(\"externalColor\",e.externalColor),this.program.setUniform1i(\"colorMixMode\",D[e.colorMixMode])),0===l?(t.lighting.setUniforms(this.program,!1),this.program.setUniform3fv(\"ambient\",e.ambient),this.program.setUniform3fv(\"diffuse\",e.diffuse),this.program.setUniform4fv(\"externalColor\",e.externalColor),this.program.setUniform1i(\"colorMixMode\",D[e.colorMixMode]),this.program.setUniform1f(\"opacity\",e.opacity),this.program.setUniform1f(\"layerOpacity\",e.layerOpacity),this.configuration.usePBR&&n(this.program,e,this.configuration.isSchematic)):4===l&&s(this.program,t),p(this.program,e),o(this.program,e,t),w(e.screenSizePerspective,this.program,\"screenSizePerspectiveAlignment\"),2!==e.textureAlphaMode&&3!==e.textureAlphaMode||this.program.setUniform1f(\"textureAlphaCutoff\",e.textureAlphaCutoff),null==(i=t.shadowMap)||i.bind(this.program),null==(r=t.ssaoHelper)||r.bind(this.program,t.camera)}bindDraw(e){const o=this.configuration.instancedDoublePrecision?t(e.camera.viewInverseTransposeMatrix[3],e.camera.viewInverseTransposeMatrix[7],e.camera.viewInverseTransposeMatrix[11]):e.origin;h(this.program,o,e.camera.viewMatrix),this.program.rebindTextures(),(0===this.configuration.output||7===this.configuration.output||1===this.configuration.output&&this.configuration.screenSizePerspective||2===this.configuration.output&&this.configuration.screenSizePerspective||4===this.configuration.output&&this.configuration.screenSizePerspective)&&d(this.program,o,e.camera.viewInverseTransposeMatrix),2===this.configuration.output&&this.program.setUniformMatrix4fv(\"viewNormal\",e.camera.viewInverseTransposeMatrix),this.configuration.instancedDoublePrecision&&r.bindCustomOrigin(this.program,o),i(this.program,this.configuration,e.slicePlane,o),0===this.configuration.output&&l(this.program,e,o)}setPipeline(e,t){const i=this.configuration,r=3===e,o=2===e;return A({blending:0!==i.output&&7!==i.output||!i.transparent?null:r?y:x(e),culling:L(i)&&E(i.cullFace),depthTest:{func:T(e)},depthWrite:r||o?i.writeDepth&&U:null,colorWrite:z,stencilWrite:i.sceneHasOcludees?S:null,stencilTest:i.sceneHasOcludees?t?C:O:null,polygonOffset:r||o?null:P(i.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this.setPipeline(this.configuration.transparencyPassType,!0),this.setPipeline(this.configuration.transparencyPassType,!1)}getPipelineState(e){return e?this._occludeePipelineState:this.pipeline}}function L(e){return e.cullFace?0!==e.cullFace:!e.slicePlaneEnabled&&(!e.transparent&&!e.doubleSidedMode)}R.shader=new m(j,(()=>import(\"./DefaultMaterial.glsl.js\")));class H extends g{constructor(){super(...arguments),this.output=0,this.alphaDiscardMode=1,this.doubleSidedMode=0,this.isSchematic=!1,this.vertexColors=!1,this.offsetBackfaces=!1,this.symbolColors=!1,this.vvSize=!1,this.vvColor=!1,this.verticalOffset=!1,this.receiveShadows=!1,this.slicePlaneEnabled=!1,this.sliceHighlightDisabled=!1,this.receiveAmbientOcclusion=!1,this.screenSizePerspective=!1,this.textureAlphaPremultiplied=!1,this.hasColorTexture=!1,this.usePBR=!1,this.hasMetalnessAndRoughnessTexture=!1,this.hasEmissionTexture=!1,this.hasOcclusionTexture=!1,this.hasNormalTexture=!1,this.instanced=!1,this.instancedColor=!1,this.instancedDoublePrecision=!1,this.vertexTangents=!1,this.normalsTypeDerivate=!1,this.writeDepth=!0,this.sceneHasOcludees=!1,this.transparent=!1,this.enableOffset=!0,this.cullFace=0,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}e([v({count:8})],H.prototype,\"output\",void 0),e([v({count:4})],H.prototype,\"alphaDiscardMode\",void 0),e([v({count:3})],H.prototype,\"doubleSidedMode\",void 0),e([v()],H.prototype,\"isSchematic\",void 0),e([v()],H.prototype,\"vertexColors\",void 0),e([v()],H.prototype,\"offsetBackfaces\",void 0),e([v()],H.prototype,\"symbolColors\",void 0),e([v()],H.prototype,\"vvSize\",void 0),e([v()],H.prototype,\"vvColor\",void 0),e([v()],H.prototype,\"verticalOffset\",void 0),e([v()],H.prototype,\"receiveShadows\",void 0),e([v()],H.prototype,\"slicePlaneEnabled\",void 0),e([v()],H.prototype,\"sliceHighlightDisabled\",void 0),e([v()],H.prototype,\"receiveAmbientOcclusion\",void 0),e([v()],H.prototype,\"screenSizePerspective\",void 0),e([v()],H.prototype,\"textureAlphaPremultiplied\",void 0),e([v()],H.prototype,\"hasColorTexture\",void 0),e([v()],H.prototype,\"usePBR\",void 0),e([v()],H.prototype,\"hasMetalnessAndRoughnessTexture\",void 0),e([v()],H.prototype,\"hasEmissionTexture\",void 0),e([v()],H.prototype,\"hasOcclusionTexture\",void 0),e([v()],H.prototype,\"hasNormalTexture\",void 0),e([v()],H.prototype,\"instanced\",void 0),e([v()],H.prototype,\"instancedColor\",void 0),e([v()],H.prototype,\"instancedDoublePrecision\",void 0),e([v()],H.prototype,\"vertexTangents\",void 0),e([v()],H.prototype,\"normalsTypeDerivate\",void 0),e([v()],H.prototype,\"writeDepth\",void 0),e([v()],H.prototype,\"sceneHasOcludees\",void 0),e([v()],H.prototype,\"transparent\",void 0),e([v()],H.prototype,\"enableOffset\",void 0),e([v({count:3})],H.prototype,\"cullFace\",void 0),e([v({count:4})],H.prototype,\"transparencyPassType\",void 0),e([v()],H.prototype,\"multipassTerrainEnabled\",void 0),e([v()],H.prototype,\"cullAboveGround\",void 0);export{R as DefaultMaterialTechnique,H as DefaultMaterialTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{R as e}from\"../../../../chunks/RealisticTree.glsl.js\";import{doublePrecisionRequiresObfuscation as r}from\"../core/shaderLibrary/util/DoublePrecision.glsl.js\";import{ReloadableShaderModule as s}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{Default3D as i}from\"../lib/DefaultVertexAttributeLocations.js\";import{Program as o}from\"../lib/Program.js\";import{DefaultMaterialTechnique as t}from\"./DefaultMaterialTechnique.js\";class a extends t{initializeProgram(e){const s=a.shader.get(),t=this.configuration,l=s.build({OITEnabled:0===t.transparencyPassType,output:t.output,viewingMode:e.viewingMode,receiveShadows:t.receiveShadows,slicePlaneEnabled:t.slicePlaneEnabled,sliceHighlightDisabled:t.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1,symbolColor:t.symbolColors,vvSize:t.vvSize,vvColor:t.vvColor,vvInstancingEnabled:!0,instanced:t.instanced,instancedColor:t.instancedColor,instancedDoublePrecision:t.instancedDoublePrecision,pbrMode:t.usePBR?1:0,hasMetalnessAndRoughnessTexture:!1,hasEmissionTexture:!1,hasOcclusionTexture:!1,hasNormalTexture:!1,hasColorTexture:t.hasColorTexture,receiveAmbientOcclusion:t.receiveAmbientOcclusion,useCustomDTRExponentForWater:!1,normalType:0,doubleSidedMode:2,vertexTangents:!1,attributeTextureCoordinates:t.hasColorTexture?1:0,textureAlphaPremultiplied:t.textureAlphaPremultiplied,attributeColor:t.vertexColors,screenSizePerspectiveEnabled:t.screenSizePerspective,verticalOffsetEnabled:t.verticalOffset,offsetBackfaces:t.offsetBackfaces,doublePrecisionRequiresObfuscation:r(e.rctx),alphaDiscardMode:t.alphaDiscardMode,supportsTextureAtlas:!1,multipassTerrainEnabled:t.multipassTerrainEnabled,cullAboveGround:t.cullAboveGround});return new o(e.rctx,l,i)}}a.shader=new s(e,(()=>import(\"../core/shaderLibrary/default/RealisticTree.glsl.js\")));export{a as RealisticTreeTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../../chunks/mat3f64.js\";import{s as t,g as i,n as s,f as a,l as r,a as n,d as o,t as l}from\"../../../../chunks/vec3.js\";import{c as u,f as c}from\"../../../../chunks/vec3f64.js\";import{newLayout as h}from\"../../support/buffer/InterleavedLayout.js\";import{defaultMaskAlphaCutoff as d}from\"../core/shaderLibrary/util/AlphaDiscard.glsl.js\";import p from\"../lib/GLMaterialTexture.js\";import{Material as m,materialParametersDefaults as f}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as v}from\"../lib/OrderIndependentTransparency.js\";import{getVerticalOffsetObject3D as g}from\"../lib/verticalOffsetUtils.js\";import{writeDefaultAttributes as C}from\"./internal/bufferWriterUtils.js\";import{verticalOffsetAtDistance as b,intersectTriangleGeometry as x}from\"./internal/MaterialUtil.js\";import{DefaultMaterialTechniqueConfiguration as q,DefaultMaterialTechnique as S}from\"../shaders/DefaultMaterialTechnique.js\";import{RealisticTreeTechnique as T}from\"../shaders/RealisticTreeTechnique.js\";class y extends m{constructor(e){super(e,O),this.supportsEdges=!0,this.techniqueConfig=new q,this.vertexBufferLayout=y.getVertexBufferLayout(this.params),this.instanceBufferLayout=e.instanced?y.getInstanceBufferLayout(this.params):null}isVisibleInPass(e){return 4!==e&&6!==e&&7!==e||this.params.castShadows}isVisible(){const e=this.params;if(!super.isVisible()||0===e.layerOpacity)return!1;const t=e.instanced,i=e.vertexColors,s=e.symbolColors,a=!!t&&t.indexOf(\"color\")>-1,r=e.vvColorEnabled,n=\"replace\"===e.colorMixMode,o=e.opacity>0,l=e.externalColor&&e.externalColor[3]>0;return i&&(a||r||s)?!!n||o:i?n?l:o:a||r||s?!!n||o:n?l:o}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.hasNormalTexture=!!this.params.normalTextureId,this.techniqueConfig.hasColorTexture=!!this.params.textureId,this.techniqueConfig.vertexTangents=this.params.vertexTangents,this.techniqueConfig.instanced=!!this.params.instanced,this.techniqueConfig.instancedDoublePrecision=this.params.instancedDoublePrecision,this.techniqueConfig.vvSize=this.params.vvSizeEnabled,this.techniqueConfig.verticalOffset=null!==this.params.verticalOffset,this.techniqueConfig.screenSizePerspective=null!==this.params.screenSizePerspective,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.sliceHighlightDisabled=this.params.sliceHighlightDisabled,this.techniqueConfig.alphaDiscardMode=this.params.textureAlphaMode,this.techniqueConfig.normalsTypeDerivate=\"screenDerivative\"===this.params.normals,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.cullFace=this.params.slicePlaneEnabled?0:this.params.cullFace,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!!t&&t.cullAboveGround,0!==e&&7!==e||(this.techniqueConfig.vertexColors=this.params.vertexColors,this.techniqueConfig.symbolColors=this.params.symbolColors,this.params.treeRendering?this.techniqueConfig.doubleSidedMode=2:this.techniqueConfig.doubleSidedMode=this.params.doubleSided&&\"normal\"===this.params.doubleSidedType?1:this.params.doubleSided&&\"winding-order\"===this.params.doubleSidedType?2:0,this.techniqueConfig.instancedColor=!!this.params.instanced&&this.params.instanced.indexOf(\"color\")>-1,this.techniqueConfig.receiveShadows=this.params.receiveShadows&&this.params.shadowMappingEnabled,this.techniqueConfig.receiveAmbientOcclusion=!(!t||!t.ssaoEnabled)&&this.params.receiveSSAO,this.techniqueConfig.vvColor=this.params.vvColorEnabled,this.techniqueConfig.textureAlphaPremultiplied=!!this.params.textureAlphaPremultiplied,this.techniqueConfig.usePBR=this.params.usePBR,this.techniqueConfig.hasMetalnessAndRoughnessTexture=!!this.params.metallicRoughnessTextureId,this.techniqueConfig.hasEmissionTexture=!!this.params.emissiveTextureId,this.techniqueConfig.hasOcclusionTexture=!!this.params.occlusionTextureId,this.techniqueConfig.offsetBackfaces=!(!this.params.transparent||!this.params.offsetTransparentBackfaces),this.techniqueConfig.isSchematic=this.params.usePBR&&this.params.isSchematic,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.enableOffset=!t||t.camera.relativeElevation<v),this.techniqueConfig}intersect(e,u,c,h,d,p,m){if(null!==this.params.verticalOffset){const e=h.camera;t(A,c[12],c[13],c[14]);let u=null;switch(h.viewingMode){case 1:u=s(E,A);break;case 2:u=i(E,B)}let m=0;if(null!==this.params.verticalOffset){const t=a(L,A,e.eye),i=r(t),s=n(t,t,1/i);let l=null;this.params.screenSizePerspective&&(l=o(u,s)),m+=b(e,i,this.params.verticalOffset,l,this.params.screenSizePerspective)}n(u,u,m),l(I,u,h.transform.inverseRotation),d=a(w,d,I),p=a(_,p,I)}x(e,u,h,d,p,g(h.verticalOffset),m)}getGLMaterial(e){if(0===e.output||7===e.output||1===e.output||2===e.output||3===e.output||4===e.output)return new P(e)}createBufferWriter(){return new M(this.vertexBufferLayout,this.instanceBufferLayout)}static getVertexBufferLayout(e){const t=e.textureId||e.normalTextureId||e.metallicRoughnessTextureId||e.emissiveTextureId||e.occlusionTextureId,i=h().vec3f(\"position\").vec3f(\"normal\");return e.vertexTangents&&i.vec4f(\"tangent\"),t&&i.vec2f(\"uv0\"),e.vertexColors&&i.vec4u8(\"color\"),e.symbolColors&&i.vec4u8(\"symbolColor\"),i}static getInstanceBufferLayout(e){let t=h();return t=e.instancedDoublePrecision?t.vec3f(\"modelOriginHi\").vec3f(\"modelOriginLo\").mat3f(\"model\").mat3f(\"modelNormal\"):t.mat4f(\"model\").mat4f(\"modelNormal\"),e.instanced&&e.instanced.indexOf(\"color\")>-1&&(t=t.vec4f(\"instanceColor\")),e.instanced&&e.instanced.indexOf(\"featureAttribute\")>-1&&(t=t.vec4f(\"instanceFeatureAttribute\")),t}}class P extends p{constructor(e){const t=e.material;super({...e,...t.params}),this.updateParameters()}updateParameters(e){const t=this._material.params;this.updateTexture(t.textureId),this._technique=this._techniqueRep.releaseAndAcquire(t.treeRendering?T:S,this._material.getTechniqueConfig(this._output,e),this._technique)}selectPipelines(){}_updateShadowState(e){e.shadowMappingEnabled!==this._material.params.shadowMappingEnabled&&this._material.setParameterValues({shadowMappingEnabled:e.shadowMappingEnabled})}_updateOccludeeState(e){e.hasOccludees!==this._material.params.sceneHasOcludees&&this._material.setParameterValues({sceneHasOcludees:e.hasOccludees})}ensureParameters(e){0!==this._output&&7!==this._output||(this._updateShadowState(e),this._updateOccludeeState(e)),this.updateParameters(e)}bind(e){this._technique.bindPass(this._material.params,e),this.bindTextures(this._technique.program)}beginSlot(e){return e===(this._material.params.transparent?this._material.params.writeDepth?5:8:3)||23===e}getPipelineState(e,t){return this._technique.getPipelineState(t)}}const O={textureId:void 0,initTextureTransparent:!1,isSchematic:!1,usePBR:!1,normalTextureId:void 0,vertexTangents:!1,occlusionTextureId:void 0,emissiveTextureId:void 0,metallicRoughnessTextureId:void 0,emissiveFactor:[0,0,0],mrrFactors:[0,1,.5],ambient:[.2,.2,.2],diffuse:[.8,.8,.8],externalColor:[1,1,1,1],colorMixMode:\"multiply\",opacity:1,layerOpacity:1,vertexColors:!1,symbolColors:!1,doubleSided:!1,doubleSidedType:\"normal\",cullFace:2,instanced:void 0,instancedDoublePrecision:!1,normals:\"default\",receiveSSAO:!0,receiveShadows:!0,castShadows:!0,shadowMappingEnabled:!1,verticalOffset:null,screenSizePerspective:null,slicePlaneEnabled:!1,sliceHighlightDisabled:!1,offsetTransparentBackfaces:!1,vvSizeEnabled:!1,vvSizeMinSize:[1,1,1],vvSizeMaxSize:[100,100,100],vvSizeOffset:[0,0,0],vvSizeFactor:[1,1,1],vvSizeValue:[1,1,1],vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvSymbolAnchor:[0,0,0],vvSymbolRotationMatrix:e(),transparent:!1,writeDepth:!0,textureAlphaMode:0,textureAlphaCutoff:d,textureAlphaPremultiplied:!1,sceneHasOcludees:!1,...f};class M{constructor(e,t){this.vertexBufferLayout=e,this.instanceBufferLayout=t}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return e.indices.get(\"position\").length}write(e,t,i,s){C(t,this.vertexBufferLayout,e.transformation,e.invTranspTransformation,i,s)}}const w=u(),_=u(),B=c(0,0,1),E=u(),I=u(),A=u(),L=u();export{y as DefaultMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../../../../chunks/vec3f64.js\";import{DoublePrecision as i}from\"../util/DoublePrecision.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";import{encodeDoubleArraySplit as n}from\"../../../lib/doublePrecisionUtils.js\";function o(e,n){n.instanced&&n.instancedDoublePrecision&&(e.attributes.add(\"modelOriginHi\",\"vec3\"),e.attributes.add(\"modelOriginLo\",\"vec3\"),e.attributes.add(\"model\",\"mat3\"),e.attributes.add(\"modelNormal\",\"mat3\")),n.instancedDoublePrecision&&(e.vertex.include(i,n),e.vertex.uniforms.add(\"viewOriginHi\",\"vec3\"),e.vertex.uniforms.add(\"viewOriginLo\",\"vec3\"));const o=[r`\n    vec3 calculateVPos() {\n      ${n.instancedDoublePrecision?\"return model * localPosition().xyz;\":\"return localPosition().xyz;\"}\n    }\n    `,r`\n    vec3 subtractOrigin(vec3 _pos) {\n      ${n.instancedDoublePrecision?r`\n          vec3 originDelta = dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);\n          return _pos - originDelta;`:\"return vpos;\"}\n    }\n    `,r`\n    vec3 dpNormal(vec4 _normal) {\n      ${n.instancedDoublePrecision?\"return normalize(modelNormal * _normal.xyz);\":\"return normalize(_normal.xyz);\"}\n    }\n    `,r`\n    vec3 dpNormalView(vec4 _normal) {\n      ${n.instancedDoublePrecision?\"return normalize((viewNormal * vec4(modelNormal * _normal.xyz, 1.0)).xyz);\":\"return normalize((viewNormal * _normal).xyz);\"}\n    }\n    `,n.vertexTangents?r`\n    vec4 dpTransformVertexTangent(vec4 _tangent) {\n      ${n.instancedDoublePrecision?\"return vec4(modelNormal * _tangent.xyz, _tangent.w);\":\"return _tangent;\"}\n\n    }\n    `:r``];e.vertex.code.add(o[0]),e.vertex.code.add(o[1]),e.vertex.code.add(o[2]),2===n.output&&e.vertex.code.add(o[3]),e.vertex.code.add(o[4])}!function(e){class i{}function r(e,i){n(i,t,a,3),e.setUniform3fv(\"viewOriginHi\",t),e.setUniform3fv(\"viewOriginLo\",a)}e.Uniforms=i,e.bindCustomOrigin=r}(o||(o={}));const t=e(),a=e();export{o as InstancedDoublePrecision};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{f as e}from\"../../../../../../chunks/vec3f32.js\";import{VertexTextureCoordinates as s}from\"../attributes/VertexTextureCoordinates.glsl.js\";import{glsl as o}from\"../../shaderModules/interfaces.js\";const t=e(0,.6,.2);function r(e,t){const r=e.fragment,a=t.hasMetalnessAndRoughnessTexture||t.hasEmissionTexture||t.hasOcclusionTexture;1===t.pbrMode&&a&&e.include(s,t),2!==t.pbrMode?(0===t.pbrMode&&r.code.add(o`float getBakedOcclusion() { return 1.0; }`),1===t.pbrMode&&(r.uniforms.add(\"emissionFactor\",\"vec3\"),r.uniforms.add(\"mrrFactors\",\"vec3\"),r.code.add(o`vec3 mrr;\nvec3 emission;\nfloat occlusion;`),t.hasMetalnessAndRoughnessTexture&&(r.uniforms.add(\"texMetallicRoughness\",\"sampler2D\"),t.supportsTextureAtlas&&r.uniforms.add(\"texMetallicRoughnessSize\",\"vec2\"),r.code.add(o`void applyMetallnessAndRoughness(TextureLookupParameter params) {\nvec3 metallicRoughness = textureLookup(texMetallicRoughness, params).rgb;\nmrr[0] *= metallicRoughness.b;\nmrr[1] *= metallicRoughness.g;\n}`)),t.hasEmissionTexture&&(r.uniforms.add(\"texEmission\",\"sampler2D\"),t.supportsTextureAtlas&&r.uniforms.add(\"texEmissionSize\",\"vec2\"),r.code.add(o`void applyEmission(TextureLookupParameter params) {\nemission *= textureLookup(texEmission, params).rgb;\n}`)),t.hasOcclusionTexture?(r.uniforms.add(\"texOcclusion\",\"sampler2D\"),t.supportsTextureAtlas&&r.uniforms.add(\"texOcclusionSize\",\"vec2\"),r.code.add(o`void applyOcclusion(TextureLookupParameter params) {\nocclusion *= textureLookup(texOcclusion, params).r;\n}\nfloat getBakedOcclusion() {\nreturn occlusion;\n}`)):r.code.add(o`float getBakedOcclusion() { return 1.0; }`),r.code.add(o`\n    void applyPBRFactors() {\n      mrr = mrrFactors;\n      emission = emissionFactor;\n      occlusion = 1.0;\n      ${a?\"vtc.uv = vuv0;\":\"\"}\n      ${t.hasMetalnessAndRoughnessTexture?t.supportsTextureAtlas?\"vtc.size = texMetallicRoughnessSize; applyMetallnessAndRoughness(vtc);\":\"applyMetallnessAndRoughness(vtc);\":\"\"}\n      ${t.hasEmissionTexture?t.supportsTextureAtlas?\"vtc.size = texEmissionSize; applyEmission(vtc);\":\"applyEmission(vtc);\":\"\"}\n      ${t.hasOcclusionTexture?t.supportsTextureAtlas?\"vtc.size = texOcclusionSize; applyOcclusion(vtc);\":\"applyOcclusion(vtc);\":\"\"}\n    }\n  `))):r.code.add(o`const vec3 mrr = vec3(0.0, 0.6, 0.2);\nconst vec3 emission = vec3(0.0);\nfloat occlusion = 1.0;\nvoid applyPBRFactors() {}\nfloat getBakedOcclusion() { return 1.0; }`)}function a(e,s,o=!1){o||(e.setUniform3fv(\"mrrFactors\",s.mrrFactors),e.setUniform3fv(\"emissionFactor\",s.emissiveFactor))}export{t as PBRSchematicMRRValues,r as PhysicallyBasedRenderingParameters,a as bindPBRUniforms};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{blendingAlpha as e}from\"../3d/webgl-engine/lib/OrderIndependentTransparency.js\";import t from\"./BufferObject.js\";import r from\"./FramebufferObject.js\";import{Program as n}from\"./Program.js\";import{makePipelineState as o}from\"./renderState.js\";import i from\"./VertexArrayObject.js\";var a,u,f,l={exports:{}};function c(a){var u,f,c,s,d;if(!a.gl)return!1;if(\"webgl\"===a.webglVersion)return(null==(s=a.capabilities.textureFloat)?void 0:s.textureFloat)&&(null==(d=a.capabilities.colorBufferFloat)?void 0:d.textureFloat);if(!((null==(u=a.capabilities.textureFloat)?void 0:u.textureFloat)&&(null==(f=a.capabilities.colorBufferFloat)?void 0:f.textureFloat)&&(null==(c=a.capabilities.colorBufferFloat)?void 0:c.floatBlend)))return!1;const g=new r(a,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5126,internalFormat:34836,samplingMode:9728,width:1,height:1}),b=t.createVertex(a,35044,new Uint16Array([0,0,1,0,0,1,1,1])),p=new i(a,new Map([[\"a_pos\",0]]),{geometry:[{name:\"a_pos\",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:b}),m=new n(a,\"\\n  precision highp float;\\n  attribute vec2 a_pos;\\n\\n  void main() {\\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  \",\"\\n   precision highp float;\\n\\n   void main() {\\n    gl_FragColor = vec4(0.5, 0.5, 0.5, 0.5);\\n   }\\n  \",new Map([[\"a_pos\",0]]));a.useProgram(m);const E=a.getBoundFramebufferObject(),{x:v,y:T,width:F,height:_}=a.getViewport();a.bindFramebuffer(g),a.setViewport(0,0,1,1),a.bindVAO(p),a.drawArrays(5,0,4);const x=o({blending:e});a.setPipelineState(x),a.drawArrays(5,0,4),l.exports.init(a);const h=a.gl.getError();return a.setViewport(v,T,F,_),a.bindFramebuffer(E),m.dispose(),p.dispose(!1),b.dispose(),g.dispose(),1282!==h||(console.warn(\"Device claims support for WebGL extension EXT_float_blend but does not support it. Using fall back.\"),!1)}a=l,u=function(){var e=function(e){window.console&&window.console.log&&window.console.log(e)},t=function(t){window.console&&window.console.error?window.console.error(t):e(t)},r={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:[\"COLOR_BUFFER_BIT\",\"DEPTH_BUFFER_BIT\",\"STENCIL_BUFFER_BIT\"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},n=null,o=null;function i(e){if(null==n)for(var t in n={},o={},e)\"number\"==typeof e[t]&&(n[e[t]]=t,o[t]=e[t])}function a(){if(null==n)throw\"WebGLDebugUtils.init(ctx) not called\"}function u(e){return a(),void 0!==n[e]}function f(e){a();var t=n[e];return void 0!==t?\"gl.\"+t:\"/*UNKNOWN WebGL ENUM*/ 0x\"+e.toString(16)}function l(e,t,n,i){var a;if(void 0!==(a=r[e])&&void 0!==(a=a[t])&&a[n]){if(\"object\"==typeof a[n]&&void 0!==a[n].enumBitwiseOr){for(var u=a[n].enumBitwiseOr,l=0,c=[],s=0;s<u.length;++s){var d=o[u[s]];0!=(i&d)&&(l|=d,c.push(f(d)))}return l===i?c.join(\" | \"):f(i)}return f(i)}return null===i?\"null\":void 0===i?\"undefined\":i.toString()}function c(e,t){for(var r=\"\",n=t.length,o=0;o<n;++o)r+=(0==o?\"\":\", \")+l(e,n,o,t[o]);return r}function s(e,t,r){e.__defineGetter__(r,(function(){return t[r]})),e.__defineSetter__(r,(function(e){t[r]=e}))}function d(e,r,n,o){o=o||e,i(e),r=r||function(e,r,n){for(var o=\"\",i=n.length,a=0;a<i;++a)o+=(0==a?\"\":\", \")+l(r,i,a,n[a]);t(\"WebGL error \"+f(e)+\" in \"+r+\"(\"+o+\")\")};var a={};function u(e,t){return function(){n&&n(t,arguments);var i=e[t].apply(e,arguments),u=o.getError();return 0!=u&&(a[u]=!0,r(u,t,arguments)),i}}var c={};for(var g in e)if(\"function\"==typeof e[g])if(\"getExtension\"!=g)c[g]=u(e,g);else{var b=u(e,g);c[g]=function(){return d(b.apply(e,arguments),r,n,o)}}else s(c,e,g);return c.getError=function(){for(var t in a)if(a.hasOwnProperty(t)&&a[t])return a[t]=!1,t;return e.NO_ERROR},c}function g(e){var t=e.getParameter(e.MAX_VERTEX_ATTRIBS),r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r);for(var n=0;n<t;++n)e.disableVertexAttribArray(n),e.vertexAttribPointer(n,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(n,0);e.deleteBuffer(r);var o=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);for(n=0;n<o;++n)e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null);for(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);e.getError(););}function b(e){var t,r,n=[],o=[],i={},a=1,u=!1,f=[],l=0,c=0,d=!1,b=0,p={};function m(e){return\"function\"==typeof e?e:function(t){e.handleEvent(t)}}e.getContext=(r=e.getContext,function(){var n=r.apply(e,arguments);if(n instanceof WebGLRenderingContext){if(n!=t){if(t)throw\"got different context\";i=R(t=n)}return i}return n});var E=function(e){n.push(m(e))},v=function(e){o.push(m(e))};function T(e){var t=e.addEventListener;e.addEventListener=function(r,n,o){switch(r){case\"webglcontextlost\":E(n);break;case\"webglcontextrestored\":v(n);break;default:t.apply(e,arguments)}}}function F(){for(var e=Object.keys(p),t=0;t<e.length;++t)delete p[e]}function _(){++c,u||l==c&&e.loseContext()}function x(e,t){var r=e[t];return function(){if(_(),!u)return r.apply(e,arguments)}}function h(){for(var e=0;e<f.length;++e){var r=f[e];r instanceof WebGLBuffer?t.deleteBuffer(r):r instanceof WebGLFramebuffer?t.deleteFramebuffer(r):r instanceof WebGLProgram?t.deleteProgram(r):r instanceof WebGLRenderbuffer?t.deleteRenderbuffer(r):r instanceof WebGLShader?t.deleteShader(r):r instanceof WebGLTexture&&t.deleteTexture(r)}}function A(e){return{statusMessage:e,preventDefault:function(){d=!0}}}return T(e),e.loseContext=function(){if(!u){for(u=!0,l=0,++a;t.getError(););F(),p[t.CONTEXT_LOST_WEBGL]=!0;var r=A(\"context lost\"),o=n.slice();setTimeout((function(){for(var t=0;t<o.length;++t)o[t](r);b>=0&&setTimeout((function(){e.restoreContext()}),b)}),0)}},e.restoreContext=function(){u&&o.length&&setTimeout((function(){if(!d)throw\"can not restore. webglcontestlost listener did not call event.preventDefault\";h(),g(t),u=!1,c=0,d=!1;for(var e=o.slice(),r=A(\"context restored\"),n=0;n<e.length;++n)e[n](r)}),0)},e.loseContextInNCalls=function(e){if(u)throw\"You can not ask a lost contet to be lost\";l=c+e},e.getNumCalls=function(){return c},e.setRestoreTimeout=function(e){b=e},e;function R(e){for(var r in e)\"function\"==typeof e[r]?i[r]=x(e,r):s(i,e,r);i.getError=function(){if(_(),!u)for(;e=t.getError();)p[e]=!0;for(var e in p)if(p[e])return delete p[e],e;return i.NO_ERROR};for(var n=[\"createBuffer\",\"createFramebuffer\",\"createProgram\",\"createRenderbuffer\",\"createShader\",\"createTexture\"],o=0;o<n.length;++o){var l=n[o];i[l]=function(t){return function(){if(_(),u)return null;var r=t.apply(e,arguments);return r.__webglDebugContextLostId__=a,f.push(r),r}}(e[l])}var c=[\"getActiveAttrib\",\"getActiveUniform\",\"getBufferParameter\",\"getContextAttributes\",\"getAttachedShaders\",\"getFramebufferAttachmentParameter\",\"getParameter\",\"getProgramParameter\",\"getProgramInfoLog\",\"getRenderbufferParameter\",\"getShaderParameter\",\"getShaderInfoLog\",\"getShaderSource\",\"getTexParameter\",\"getUniform\",\"getUniformLocation\",\"getVertexAttrib\"];for(o=0;o<c.length;++o)l=c[o],i[l]=function(t){return function(){return _(),u?null:t.apply(e,arguments)}}(i[l]);var d=[\"isBuffer\",\"isEnabled\",\"isFramebuffer\",\"isProgram\",\"isRenderbuffer\",\"isShader\",\"isTexture\"];for(o=0;o<d.length;++o)l=d[o],i[l]=function(t){return function(){return _(),!u&&t.apply(e,arguments)}}(i[l]);return i.checkFramebufferStatus=function(t){return function(){return _(),u?i.FRAMEBUFFER_UNSUPPORTED:t.apply(e,arguments)}}(i.checkFramebufferStatus),i.getAttribLocation=function(t){return function(){return _(),u?-1:t.apply(e,arguments)}}(i.getAttribLocation),i.getVertexAttribOffset=function(t){return function(){return _(),u?0:t.apply(e,arguments)}}(i.getVertexAttribOffset),i.isContextLost=function(){return u},i}}return{init:i,mightBeEnum:u,glEnumToString:f,glFunctionArgToString:l,glFunctionArgsToString:c,makeDebugContext:d,makeLostContextSimulatingCanvas:b,resetToInitialState:g}},void 0!==(f=u())&&(a.exports=f);export{c as testFloatBufferBlend};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as n}from\"../../../../core/maybe.js\";import{f as t}from\"../../../../chunks/vec3f64.js\";import o from\"../../../webgl/BufferObject.js\";import i from\"../../../webgl/FramebufferObject.js\";import{Program as r}from\"../../../webgl/Program.js\";import\"../../../webgl/enums.js\";import\"../../../webgl/checkWebGLError.js\";import\"../../../webgl/renderState.js\";import\"../../../webgl/Texture.js\";import s from\"../../../webgl/VertexArrayObject.js\";import{encodeDoubleArray as a}from\"./doublePrecisionUtils.js\";import{unpackFloatRGBA as c}from\"./Util.js\";import{testFloatBufferBlend as l}from\"../../../webgl/testFloatBufferBlend.js\";import{testSVGPremultipliedAlpha as u}from\"../../../webgl/testSVGPremultipliedAlpha.js\";class f{constructor(e){this.context=e,this.svgAlwaysPremultipliesAlpha=!1,this.floatBufferBlendWorking=!1,this._doublePrecisionRequiresObfuscation=null,this.floatBufferBlendWorking=l(e),u(e).then((e=>this.svgAlwaysPremultipliesAlpha=!e))}get doublePrecisionRequiresObfuscation(){if(e(this._doublePrecisionRequiresObfuscation)){const e=v(this.context,!1),n=v(this.context,!0);this._doublePrecisionRequiresObfuscation=0!==e&&(0===n||e/n>5)}return this._doublePrecisionRequiresObfuscation}}let p=null;function h(n){return(e(p)||p.context!==n)&&(p=new f(n)),p}function m(e){n(p)&&p.context===e&&(p=null)}function v(e,n){const l=new i(e,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1});function u(t,o){const i=new r(e,`\\n\\n  precision highp float;\\n\\n  attribute vec2 position;\\n\\n  uniform vec3 u_highA;\\n  uniform vec3 u_lowA;\\n  uniform vec3 u_highB;\\n  uniform vec3 u_lowB;\\n\\n  varying vec4 v_color;\\n\\n  ${n?\"#define DOUBLE_PRECISION_REQUIRES_OBFUSCATION\":\"\"}\\n\\n  #ifdef DOUBLE_PRECISION_REQUIRES_OBFUSCATION\\n\\n  vec3 dpPlusFrc(vec3 a, vec3 b) {\\n    return mix(a, a + b, vec3(notEqual(b, vec3(0))));\\n  }\\n\\n  vec3 dpMinusFrc(vec3 a, vec3 b) {\\n    return mix(vec3(0), a - b, vec3(notEqual(a, b)));\\n  }\\n\\n  vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\\n    vec3 t1 = dpPlusFrc(hiA, hiB);\\n    vec3 e = dpMinusFrc(t1, hiA);\\n    vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;\\n    return t1 + t2;\\n  }\\n\\n  #else\\n\\n  vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\\n    vec3 t1 = hiA + hiB;\\n    vec3 e = t1 - hiA;\\n    vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\\n    return t1 + t2;\\n  }\\n\\n  #endif\\n\\n  const float MAX_RGBA_FLOAT =\\n    255.0 / 256.0 +\\n    255.0 / 256.0 / 256.0 +\\n    255.0 / 256.0 / 256.0 / 256.0 +\\n    255.0 / 256.0 / 256.0 / 256.0 / 256.0;\\n\\n  const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\\n\\n  vec4 float2rgba(const float value) {\\n    // Make sure value is in the domain we can represent\\n    float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);\\n\\n    // Decompose value in 32bit fixed point parts represented as\\n    // uint8 rgba components. Decomposition uses the fractional part after multiplying\\n    // by a power of 256 (this removes the bits that are represented in the previous\\n    // component) and then converts the fractional part to 8bits.\\n    vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);\\n\\n    // Convert uint8 values (from 0 to 255) to floating point representation for\\n    // the shader\\n    const float toU8AsFloat = 1.0 / 255.0;\\n\\n    return fixedPointU8 * toU8AsFloat;\\n  }\\n\\n  void main() {\\n    vec3 val = dpAdd(u_highA, u_lowA, -u_highB, -u_lowB);\\n\\n    v_color = float2rgba(val.z / 25.0);\\n\\n    gl_Position = vec4(position * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  `,\"\\n  precision highp float;\\n\\n  varying vec4 v_color;\\n\\n  void main() {\\n    gl_FragColor = v_color;\\n  }\\n  \",new Map([[\"position\",0]])),s=new Float32Array(6);a(t,s,3);const c=new Float32Array(6);return a(o,c,3),e.useProgram(i),i.setUniform3f(\"u_highA\",s[0],s[2],s[4]),i.setUniform3f(\"u_lowA\",s[1],s[3],s[5]),i.setUniform3f(\"u_highB\",c[0],c[2],c[4]),i.setUniform3f(\"u_lowB\",c[1],c[3],c[5]),i}const f=o.createVertex(e,35044,new Uint16Array([0,0,1,0,0,1,1,1])),p=new s(e,new Map([[\"position\",0]]),{geometry:[{name:\"position\",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:f}),h=t(5633261.287538229,2626832.878767164,1434988.0495278358),m=t(5633271.46742708,2626873.6381334523,1434963.231608387),v=u(h,m),d=e.getBoundFramebufferObject(),{x:b,y:g,width:A,height:w}=e.getViewport();e.bindFramebuffer(l),e.setViewport(0,0,1,1),e.bindVAO(p),e.drawArrays(5,0,4);const _=new Uint8Array(4);l.readPixels(0,0,1,1,6408,5121,_),v.dispose(),p.dispose(!1),f.dispose(),l.dispose(),e.setViewport(b,g,A,w),e.bindFramebuffer(d);const B=(h[2]-m[2])/25,F=c(_);return Math.abs(B-F)}export{m as clearTestWebGLDriver,h as testWebGLDriver};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../../core/has.js\";import{glsl as c}from\"../../shaderModules/interfaces.js\";import{testWebGLDriver as i}from\"../../../lib/WebGLDriverTest.js\";function r({code:e},i){i.doublePrecisionRequiresObfuscation?e.add(c`vec3 dpPlusFrc(vec3 a, vec3 b) {\nreturn mix(a, a + b, vec3(notEqual(b, vec3(0))));\n}\nvec3 dpMinusFrc(vec3 a, vec3 b) {\nreturn mix(vec3(0), a - b, vec3(notEqual(a, b)));\n}\nvec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\nvec3 t1 = dpPlusFrc(hiA, hiB);\nvec3 e = dpMinusFrc(t1, hiA);\nvec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;\nreturn t1 + t2;\n}`):e.add(c`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\nvec3 t1 = hiA + hiB;\nvec3 e = t1 - hiA;\nvec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\nreturn t1 + t2;\n}`)}function o(c){return!!e(\"force-double-precision-obfuscation\")||i(c).doublePrecisionRequiresObfuscation}export{r as DoublePrecision,o as doublePrecisionRequiresObfuscation};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as i}from\"../../shaderModules/interfaces.js\";function n(n,t){const e=n.fragment,a=void 0!==t.lightingSphericalHarmonicsOrder?t.lightingSphericalHarmonicsOrder:2;0===a?(e.uniforms.add(\"lightingAmbientSH0\",\"vec3\"),e.code.add(i`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec3 ambientLight = 0.282095 * lightingAmbientSH0;\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`)):1===a?(e.uniforms.add(\"lightingAmbientSH_R\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_G\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_B\",\"vec4\"),e.code.add(i`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec4 sh0 = vec4(\n0.282095,\n0.488603 * normal.x,\n0.488603 * normal.z,\n0.488603 * normal.y\n);\nvec3 ambientLight = vec3(\ndot(lightingAmbientSH_R, sh0),\ndot(lightingAmbientSH_G, sh0),\ndot(lightingAmbientSH_B, sh0)\n);\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`)):2===a&&(e.uniforms.add(\"lightingAmbientSH0\",\"vec3\"),e.uniforms.add(\"lightingAmbientSH_R1\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_G1\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_B1\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_R2\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_G2\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_B2\",\"vec4\"),e.code.add(i`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec3 ambientLight = 0.282095 * lightingAmbientSH0;\nvec4 sh1 = vec4(\n0.488603 * normal.x,\n0.488603 * normal.z,\n0.488603 * normal.y,\n1.092548 * normal.x * normal.y\n);\nvec4 sh2 = vec4(\n1.092548 * normal.y * normal.z,\n0.315392 * (3.0 * normal.z * normal.z - 1.0),\n1.092548 * normal.x * normal.z,\n0.546274 * (normal.x * normal.x - normal.y * normal.y)\n);\nambientLight += vec3(\ndot(lightingAmbientSH_R1, sh1),\ndot(lightingAmbientSH_G1, sh1),\ndot(lightingAmbientSH_B1, sh1)\n);\nambientLight += vec3(\ndot(lightingAmbientSH_R2, sh2),\ndot(lightingAmbientSH_G2, sh2),\ndot(lightingAmbientSH_B2, sh2)\n);\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`),1!==t.pbrMode&&2!==t.pbrMode||e.code.add(i`const vec3 skyTransmittance = vec3(0.9, 0.9, 1.0);\nvec3 calculateAmbientRadiance(float ambientOcclusion)\n{\nvec3 ambientLight = 1.2 * (0.282095 * lightingAmbientSH0) - 0.2;\nreturn ambientLight *= (1.0 - ambientOcclusion) * skyTransmittance;\n}`))}export{n as EvaluateAmbientLighting};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as i}from\"../../shaderModules/interfaces.js\";function n(n){const t=n.fragment;t.uniforms.add(\"lightingMainDirection\",\"vec3\"),t.uniforms.add(\"lightingMainIntensity\",\"vec3\"),t.uniforms.add(\"lightingFixedFactor\",\"float\"),t.code.add(i`vec3 evaluateMainLighting(vec3 normal_global, float shadowing) {\nfloat dotVal = clamp(dot(normal_global, lightingMainDirection), 0.0, 1.0);\ndotVal = mix(dotVal, 1.0, lightingFixedFactor);\nreturn lightingMainIntensity * ((1.0 - shadowing) * dotVal);\n}`)}export{n as EvaluateMainLighting};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{EvaluateAmbientLighting as i}from\"./EvaluateAmbientLighting.glsl.js\";import{EvaluateAmbientOcclusion as n}from\"./EvaluateAmbientOcclusion.glsl.js\";import{EvaluateMainLighting as o}from\"./EvaluateMainLighting.glsl.js\";import{PhysicallyBasedRendering as e}from\"./PhysicallyBasedRendering.glsl.js\";import{PiUtils as t}from\"./PiUtils.glsl.js\";import{ReadShadowMap as a}from\"./ReadShadowMap.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function l(l,d){const c=l.fragment;l.include(o),l.include(n,d),0!==d.pbrMode&&l.include(e,d),l.include(i,d),d.receiveShadows&&l.include(a,d),c.uniforms.add(\"lightingGlobalFactor\",\"float\"),c.uniforms.add(\"ambientBoostFactor\",\"float\"),l.include(t),c.code.add(r`\n    const float GAMMA_SRGB = 2.1;\n    const float INV_GAMMA_SRGB = 0.4761904;\n    ${0===d.pbrMode?\"\":\"const vec3 GROUND_REFLECTANCE = vec3(0.2);\"}\n  `),c.code.add(r`\n    float additionalDirectedAmbientLight(vec3 vPosWorld) {\n      float vndl = dot(${1===d.viewingMode?r`normalize(vPosWorld)`:r`vec3(0.0, 0.0, 1.0)`}, lightingMainDirection);\n      return smoothstep(0.0, 1.0, clamp(vndl * 2.5, 0.0, 1.0));\n    }\n  `),c.code.add(r`vec3 evaluateAdditionalLighting(float ambientOcclusion, vec3 vPosWorld) {\nfloat additionalAmbientScale = additionalDirectedAmbientLight(vPosWorld);\nreturn (1.0 - ambientOcclusion) * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor * lightingMainIntensity;\n}`),0===d.pbrMode||4===d.pbrMode?c.code.add(r`vec3 evaluateSceneLighting(vec3 normalWorld, vec3 albedo, float shadow, float ssao, vec3 additionalLight)\n{\nvec3 mainLighting = evaluateMainLighting(normalWorld, shadow);\nvec3 ambientLighting = calculateAmbientIrradiance(normalWorld, ssao);\nvec3 albedoLinear = pow(albedo, vec3(GAMMA_SRGB));\nvec3 totalLight = mainLighting + ambientLighting + additionalLight;\ntotalLight = min(totalLight, vec3(PI));\nvec3 outColor = vec3((albedoLinear / PI) * totalLight);\nreturn pow(outColor, vec3(INV_GAMMA_SRGB));\n}`):1!==d.pbrMode&&2!==d.pbrMode||(c.code.add(r`const float fillLightIntensity = 0.25;\nconst float horizonLightDiffusion = 0.4;\nconst float additionalAmbientIrradianceFactor = 0.02;\nvec3 evaluateSceneLightingPBR(vec3 normal, vec3 albedo, float shadow, float ssao, vec3 additionalLight, vec3 viewDir, vec3 normalGround, vec3 mrr, vec3 _emission, float additionalAmbientIrradiance)\n{\nvec3 viewDirection = -viewDir;\nvec3 mainLightDirection = lightingMainDirection;\nvec3 h = normalize(viewDirection + mainLightDirection);\nPBRShadingInfo inputs;\ninputs.NdotL = clamp(dot(normal, mainLightDirection), 0.001, 1.0);\ninputs.NdotV = clamp(abs(dot(normal, viewDirection)), 0.001, 1.0);\ninputs.NdotH = clamp(dot(normal, h), 0.0, 1.0);\ninputs.VdotH = clamp(dot(viewDirection, h), 0.0, 1.0);\ninputs.NdotNG = clamp(dot(normal, normalGround), -1.0, 1.0);\nvec3 reflectedView = normalize(reflect(viewDirection, normal));\ninputs.RdotNG = clamp(dot(reflectedView, normalGround), -1.0, 1.0);\ninputs.albedoLinear = pow(albedo, vec3(GAMMA_SRGB));\ninputs.ssao = ssao;\ninputs.metalness = mrr[0];\ninputs.roughness = clamp(mrr[1] * mrr[1], 0.001, 0.99);`),c.code.add(r`inputs.f0 = (0.16 * mrr[2] * mrr[2]) * (1.0 - inputs.metalness) + inputs.albedoLinear * inputs.metalness;\ninputs.f90 = vec3(clamp(dot(inputs.f0, vec3(50.0 * 0.33)), 0.0, 1.0));\ninputs.diffuseColor = inputs.albedoLinear * (vec3(1.0) - inputs.f0) * (1.0 - inputs.metalness);`),c.code.add(r`vec3 ambientDir = vec3(5.0 * normalGround[1] - normalGround[0] * normalGround[2], - 5.0 * normalGround[0] - normalGround[2] * normalGround[1], normalGround[1] * normalGround[1] + normalGround[0] * normalGround[0]);\nambientDir = ambientDir != vec3(0.0)? normalize(ambientDir) : normalize(vec3(5.0, -1.0, 0.0));\ninputs.NdotAmbDir = abs(dot(normal, ambientDir));\nvec3 mainLightIrradianceComponent = inputs.NdotL * (1.0 - shadow) * lightingMainIntensity;\nvec3 fillLightsIrradianceComponent = inputs.NdotAmbDir * lightingMainIntensity * fillLightIntensity;\nvec3 ambientLightIrradianceComponent = calculateAmbientIrradiance(normal, ssao) + additionalLight;\ninputs.skyIrradianceToSurface = ambientLightIrradianceComponent + mainLightIrradianceComponent + fillLightsIrradianceComponent ;\ninputs.groundIrradianceToSurface = GROUND_REFLECTANCE * ambientLightIrradianceComponent + mainLightIrradianceComponent + fillLightsIrradianceComponent ;`),c.code.add(r`vec3 horizonRingDir = inputs.RdotNG * normalGround - reflectedView;\nvec3 horizonRingH = normalize(viewDirection + horizonRingDir);\ninputs.NdotH_Horizon = dot(normal, horizonRingH);\nvec3 mainLightRadianceComponent = normalDistribution(inputs.NdotH, inputs.roughness) * lightingMainIntensity * (1.0 - shadow);\nvec3 horizonLightRadianceComponent = normalDistribution(inputs.NdotH_Horizon, min(inputs.roughness + horizonLightDiffusion, 1.0)) * lightingMainIntensity * fillLightIntensity;\nvec3 ambientLightRadianceComponent = calculateAmbientRadiance(ssao) + additionalLight;\ninputs.skyRadianceToSurface = ambientLightRadianceComponent + mainLightRadianceComponent + horizonLightRadianceComponent;\ninputs.groundRadianceToSurface = GROUND_REFLECTANCE * (ambientLightRadianceComponent + horizonLightRadianceComponent) + mainLightRadianceComponent;\ninputs.averageAmbientRadiance = ambientLightIrradianceComponent[1] * (1.0 + GROUND_REFLECTANCE[1]);`),c.code.add(r`\n        vec3 reflectedColorComponent = evaluateEnvironmentIllumination(inputs);\n        vec3 additionalMaterialReflectanceComponent = inputs.albedoLinear * additionalAmbientIrradiance;\n        vec3 emissionComponent = pow(_emission, vec3(GAMMA_SRGB));\n        vec3 outColorLinear = reflectedColorComponent + additionalMaterialReflectanceComponent + emissionComponent;\n        ${2===d.pbrMode?r`vec3 outColor = pow(max(vec3(0.0), outColorLinear - 0.005 * inputs.averageAmbientRadiance), vec3(INV_GAMMA_SRGB));`:r`vec3 outColor = pow(blackLevelSoftCompression(outColorLinear, inputs), vec3(INV_GAMMA_SRGB));`}\n        return outColor;\n      }\n    `))}export{l as EvaluateSceneLighting};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport r from\"../../../../core/Logger.js\";const e=r.getLogger(\"esri.views.3d.support.buffer.math\");export{e as logger};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../shaderModules/interfaces.js\";function e(e){e.vertex.code.add(o`vec4 offsetBackfacingClipPosition(vec4 posClip, vec3 posWorld, vec3 normalWorld, vec3 camPosWorld) {\nvec3 camToVert = posWorld - camPosWorld;\nbool isBackface = dot(camToVert, normalWorld) > 0.0;\nif (isBackface) {\nposClip.z += 0.0000003 * posClip.w;\n}\nreturn posClip;\n}`)}export{e as Offset};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{Slice as o}from\"../Slice.glsl.js\";import{Transform as r}from\"../Transform.glsl.js\";import{NormalAttribute as e}from\"../attributes/NormalAttribute.glsl.js\";import{TextureCoordinateAttribute as t}from\"../attributes/TextureCoordinateAttribute.glsl.js\";import{VertexNormal as i}from\"../attributes/VertexNormal.glsl.js\";import{OutputDepth as a}from\"../output/OutputDepth.glsl.js\";import{OutputHighlight as l}from\"../output/OutputHighlight.glsl.js\";import{VisualVariables as s}from\"../shading/VisualVariables.glsl.js\";import{DiscardOrAdjustAlpha as d}from\"../util/AlphaDiscard.glsl.js\";import{glsl as n}from\"../../shaderModules/interfaces.js\";function u(u,c){const p=u.vertex.code,v=u.fragment.code;1!==c.output&&3!==c.output||(u.include(r,{linearDepth:!0}),u.include(t,c),u.include(s,c),u.include(a,c),u.include(o,c),u.vertex.uniforms.add(\"cameraNearFar\",\"vec2\"),u.varyings.add(\"depth\",\"float\"),c.hasColorTexture&&u.fragment.uniforms.add(\"tex\",\"sampler2D\"),p.add(n`void main(void) {\nvpos = calculateVPos();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPositionWithDepth(proj, view, vpos, cameraNearFar, depth);\nforwardTextureCoordinates();\n}`),u.include(d,c),v.add(n`\n      void main(void) {\n        discardBySlice(vpos);\n        ${c.hasColorTexture?n`\n        vec4 texColor = texture2D(tex, vuv0);\n        discardOrAdjustAlpha(texColor);`:\"\"}\n        outputDepth(depth);\n      }\n    `)),2===c.output&&(u.include(r,{linearDepth:!1}),u.include(e,c),u.include(i,c),u.include(t,c),u.include(s,c),c.hasColorTexture&&u.fragment.uniforms.add(\"tex\",\"sampler2D\"),u.vertex.uniforms.add(\"viewNormal\",\"mat4\"),u.varyings.add(\"vPositionView\",\"vec3\"),p.add(n`\n      void main(void) {\n        vpos = calculateVPos();\n        vpos = subtractOrigin(vpos);\n        ${0===c.normalType?n`\n        vNormalWorld = dpNormalView(vvLocalNormal(normalModel()));`:\"\"}\n        vpos = addVerticalOffset(vpos, localOrigin);\n        gl_Position = transformPosition(proj, view, vpos);\n        forwardTextureCoordinates();\n      }\n    `),u.include(o,c),u.include(d,c),v.add(n`\n      void main() {\n        discardBySlice(vpos);\n        ${c.hasColorTexture?n`\n        vec4 texColor = texture2D(tex, vuv0);\n        discardOrAdjustAlpha(texColor);`:\"\"}\n\n        ${3===c.normalType?n`\n            vec3 normal = screenDerivativeNormal(vPositionView);`:n`\n            vec3 normal = normalize(vNormalWorld);\n            if (gl_FrontFacing == false) normal = -normal;`}\n        gl_FragColor = vec4(vec3(0.5) + 0.5 * normal, 1.0);\n      }\n    `)),4===c.output&&(u.include(r,{linearDepth:!1}),u.include(t,c),u.include(s,c),c.hasColorTexture&&u.fragment.uniforms.add(\"tex\",\"sampler2D\"),p.add(n`void main(void) {\nvpos = calculateVPos();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPosition(proj, view, vpos);\nforwardTextureCoordinates();\n}`),u.include(o,c),u.include(d,c),u.include(l),v.add(n`\n      void main() {\n        discardBySlice(vpos);\n        ${c.hasColorTexture?n`\n        vec4 texColor = texture2D(tex, vuv0);\n        discardOrAdjustAlpha(texColor);`:\"\"}\n        outputHighlight();\n      }\n    `))}export{u as DefaultMaterialAuxiliaryPasses};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{ColorConversion as e}from\"./ColorConversion.glsl.js\";import{glsl as t}from\"../../shaderModules/interfaces.js\";function i(i){i.include(e),i.code.add(t`\n    vec3 mixExternalColor(vec3 internalColor, vec3 textureColor, vec3 externalColor, int mode) {\n      // workaround for artifacts in OSX using Intel Iris Pro\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475\n      vec3 internalMixed = internalColor * textureColor;\n      vec3 allMixed = internalMixed * externalColor;\n\n      if (mode == ${t.int(1)}) {\n        return allMixed;\n      }\n      else if (mode == ${t.int(2)}) {\n        return internalMixed;\n      }\n      else if (mode == ${t.int(3)}) {\n        return externalColor;\n      }\n      else {\n        // tint (or something invalid)\n        float vIn = rgb2v(internalMixed);\n        vec3 hsvTint = rgb2hsv(externalColor);\n        vec3 hsvOut = vec3(hsvTint.x, hsvTint.y, vIn * hsvTint.z);\n        return hsv2rgb(hsvOut);\n      }\n    }\n\n    float mixExternalOpacity(float internalOpacity, float textureOpacity, float externalOpacity, int mode) {\n      // workaround for artifacts in OSX using Intel Iris Pro\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475\n      float internalMixed = internalOpacity * textureOpacity;\n      float allMixed = internalMixed * externalOpacity;\n\n      if (mode == ${t.int(2)}) {\n        return internalMixed;\n      }\n      else if (mode == ${t.int(3)}) {\n        return externalOpacity;\n      }\n      else {\n        // multiply or tint (or something invalid)\n        return allMixed;\n      }\n    }\n  `)}export{i as MixExternalColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../../../core/shaderModules/interfaces.js\";function l(l){l.vertex.code.add(o`\n    vec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {\n      float symbolAlpha = 0.0;\n\n      const float maxTint = 85.0;\n      const float maxReplace = 170.0;\n      const float scaleAlpha = 3.0;\n\n      if (symbolColor.a > maxReplace) {\n        colorMixMode = ${o.int(1)};\n        symbolAlpha = scaleAlpha * (symbolColor.a - maxReplace);\n      } else if (symbolColor.a > maxTint) {\n        colorMixMode = ${o.int(3)};\n        symbolAlpha = scaleAlpha * (symbolColor.a - maxTint);\n      } else if (symbolColor.a > 0.0) {\n        colorMixMode = ${o.int(4)};\n        symbolAlpha = scaleAlpha * symbolColor.a;\n      } else {\n        colorMixMode = ${o.int(1)};\n        symbolAlpha = 0.0;\n      }\n\n      return vec4(symbolColor.r, symbolColor.g, symbolColor.b, symbolAlpha);\n    }\n  `)}export{l as DecodeSymbolColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{DecodeSymbolColor as o}from\"../../../collections/Component/Material/shader/DecodeSymbolColor.glsl.js\";import{glsl as e}from\"../../shaderModules/interfaces.js\";function r(r,l){l.symbolColor?(r.include(o),r.attributes.add(\"symbolColor\",\"vec4\"),r.varyings.add(\"colorMixMode\",\"mediump float\")):r.fragment.uniforms.add(\"colorMixMode\",\"int\"),l.symbolColor?r.vertex.code.add(e`int symbolColorMixMode;\nvec4 getSymbolColor() {\nreturn decodeSymbolColor(symbolColor, symbolColorMixMode) * 0.003921568627451;\n}\nvoid forwardColorMixMode() {\ncolorMixMode = float(symbolColorMixMode) + 0.5;\n}`):r.vertex.code.add(e`vec4 getSymbolColor() { return vec4(1.0); }\nvoid forwardColorMixMode() {}`)}export{r as SymbolColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{c as o}from\"../../../../../../chunks/mat3f64.js\";import{c as r}from\"../../../../../../chunks/mat4f64.js\";import{c as e}from\"../../../../../../chunks/vec3f64.js\";import{PositionAttribute as i}from\"./PositionAttribute.glsl.js\";import{DoublePrecision as m}from\"../util/DoublePrecision.glsl.js\";import{glsl as a}from\"../../shaderModules/interfaces.js\";function d(o,r){o.include(i),o.vertex.include(m,r),o.varyings.add(\"vPositionWorldCameraRelative\",\"vec3\"),o.varyings.add(\"vPosition_view\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromModel_RS\",\"mat3\"),o.vertex.uniforms.add(\"uTransform_WorldFromModel_TH\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromModel_TL\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromView_TH\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromView_TL\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_ViewFromCameraRelative_RS\",\"mat3\"),o.vertex.uniforms.add(\"uTransform_ProjFromView\",\"mat4\"),o.vertex.code.add(a`vec3 positionWorldCameraRelative() {\nvec3 rotatedModelPosition = uTransform_WorldFromModel_RS * positionModel();\nvec3 transform_CameraRelativeFromModel = dpAdd(\nuTransform_WorldFromModel_TL,\nuTransform_WorldFromModel_TH,\n-uTransform_WorldFromView_TL,\n-uTransform_WorldFromView_TH\n);\nreturn transform_CameraRelativeFromModel + rotatedModelPosition;\n}\nvec3 position_view() {\nreturn uTransform_ViewFromCameraRelative_RS * positionWorldCameraRelative();\n}\nvoid forwardPosition() {\nvPositionWorldCameraRelative = positionWorldCameraRelative();\nvPosition_view = position_view();\ngl_Position = uTransform_ProjFromView * vec4(vPosition_view, 1.0);\n}\nvec3 positionWorld() {\nreturn uTransform_WorldFromView_TL + vPositionWorldCameraRelative;\n}`),o.fragment.uniforms.add(\"uTransform_WorldFromView_TL\",\"vec3\"),o.fragment.code.add(a`vec3 positionWorld() {\nreturn uTransform_WorldFromView_TL + vPositionWorldCameraRelative;\n}`)}!function(i){class m{constructor(){this.worldFromModel_RS=o(),this.worldFromModel_TH=e(),this.worldFromModel_TL=e()}}i.ModelTransform=m;class a{constructor(){this.worldFromView_TH=e(),this.worldFromView_TL=e(),this.viewFromCameraRelative_RS=o(),this.projFromView=r()}}function d(o,r){o.setUniformMatrix3fv(\"uTransform_WorldFromModel_RS\",r.worldFromModel_RS),o.setUniform3fv(\"uTransform_WorldFromModel_TH\",r.worldFromModel_TH),o.setUniform3fv(\"uTransform_WorldFromModel_TL\",r.worldFromModel_TL)}function s(o,r){o.setUniform3fv(\"uTransform_WorldFromView_TH\",r.worldFromView_TH),o.setUniform3fv(\"uTransform_WorldFromView_TL\",r.worldFromView_TL),o.setUniformMatrix4fv(\"uTransform_ProjFromView\",r.projFromView),o.setUniformMatrix3fv(\"uTransform_ViewFromCameraRelative_RS\",r.viewFromCameraRelative_RS)}i.ViewProjectionTransform=a,i.bindModelTransform=d,i.bindViewProjTransform=s}(d||(d={}));export{d as VertexPosition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{NormalAttribute as o}from\"./NormalAttribute.glsl.js\";import{VertexPosition as r}from\"./VertexPosition.glsl.js\";import{glsl as a}from\"../../shaderModules/interfaces.js\";function l(l,e){0===e.normalType||1===e.normalType?(l.include(o,e),l.varyings.add(\"vNormalWorld\",\"vec3\"),l.varyings.add(\"vNormalView\",\"vec3\"),l.vertex.uniforms.add(\"uTransformNormal_GlobalFromModel\",\"mat3\"),l.vertex.uniforms.add(\"uTransformNormal_ViewFromGlobal\",\"mat3\"),l.vertex.code.add(a`void forwardNormal() {\nvNormalWorld = uTransformNormal_GlobalFromModel * normalModel();\nvNormalView = uTransformNormal_ViewFromGlobal * vNormalWorld;\n}`)):2===e.normalType?(l.include(r,e),l.varyings.add(\"vNormalWorld\",\"vec3\"),l.vertex.code.add(a`\n    void forwardNormal() {\n      vNormalWorld = ${1===e.viewingMode?a`normalize(vPositionWorldCameraRelative);`:a`vec3(0.0, 0.0, 1.0);`}\n    }\n    `)):l.vertex.code.add(a`void forwardNormal() {}`)}!function(o){function r(o,r){o.setUniformMatrix4fv(\"viewNormal\",r)}o.bindUniforms=r}(l||(l={}));export{l as VertexNormal};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as a}from\"../../shaderModules/interfaces.js\";function r(r,e){const m=r.fragment;m.code.add(a`struct ShadingNormalParameters {\nvec3 normalView;\nvec3 viewDirection;\n} shadingParams;`),1===e.doubleSidedMode?m.code.add(a`vec3 shadingNormal(ShadingNormalParameters params) {\nreturn dot(params.normalView, params.viewDirection) > 0.0 ? normalize(-params.normalView) : normalize(params.normalView);\n}`):2===e.doubleSidedMode?m.code.add(a`vec3 shadingNormal(ShadingNormalParameters params) {\nreturn gl_FrontFacing ? normalize(params.normalView) : normalize(-params.normalView);\n}`):m.code.add(a`vec3 shadingNormal(ShadingNormalParameters params) {\nreturn normalize(params.normalView);\n}`)}export{r as Normals};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"./BufferObject.js\";import t from\"./FramebufferObject.js\";import{Program as r}from\"./Program.js\";import i from\"./Texture.js\";import o from\"./VertexArrayObject.js\";async function n(n){const a=new Image;if(a.src=\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A\",a.width=5,a.height=5,await a.decode(),!n.gl)return!0;const s=new t(n,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1}),p=e.createVertex(n,35044,new Uint16Array([0,0,1,0,0,1,1,1])),m=new o(n,new Map([[\"a_pos\",0]]),{geometry:[{name:\"a_pos\",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:p}),d=new r(n,\"\\n  precision highp float;\\n\\n  attribute vec2 a_pos;\\n  varying vec2 v_uv;\\n\\n  void main() {\\n    v_uv = a_pos;\\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  \",\"\\n  precision highp float;\\n\\n  varying vec2 v_uv;\\n  uniform sampler2D u_texture;\\n\\n  void main() {\\n    gl_FragColor = texture2D(u_texture, v_uv);\\n  }\\n  \",new Map([[\"a_pos\",0]]));n.useProgram(d);const g=new i(n,{dataType:5121,pixelFormat:6408,preMultiplyAlpha:!1,wrapMode:33071,samplingMode:9729},a);n.bindTexture(g,0),d.setUniform1i(\"u_texture\",0);const c=n.getBoundFramebufferObject(),{x:u,y:f,width:w,height:l}=n.getViewport();n.bindFramebuffer(s),n.setViewport(0,0,1,1),n.bindVAO(m),n.drawArrays(5,0,4);const v=new Uint8Array(4);return s.readPixels(0,0,1,1,6408,5121,v),d.dispose(),m.dispose(!1),p.dispose(),s.dispose(),g.dispose(),n.setViewport(u,f,w,l),n.bindFramebuffer(c),a.src=\"\",255===v[0]}export{n as testSVGPremultipliedAlpha};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{ForwardLinearDepth as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js\";import{Offset as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js\";import{Slice as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{InstancedDoublePrecision as i}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js\";import{NormalAttribute as l}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{PositionAttribute as t}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl.js\";import{SymbolColor as n}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js\";import{TextureCoordinateAttribute as d}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{VertexColor as s}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";import{VertexNormal as c}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexNormal.glsl.js\";import{VerticalOffset as g}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js\";import{DefaultMaterialAuxiliaryPasses as m}from\"../views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js\";import{ReadLinearDepth as v}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{ComputeNormalTexture as p}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ComputeNormalTexture.glsl.js\";import{EvaluateAmbientOcclusion as u}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js\";import{EvaluateSceneLighting as b}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js\";import{multipassTerrainTest as h}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{Normals as f}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/Normals.glsl.js\";import{PhysicallyBasedRendering as x}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js\";import{PhysicallyBasedRenderingParameters as w}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{ReadShadowMap as y}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{VisualVariables as C}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js\";import{symbolAlphaCutoff as L,DiscardOrAdjustAlpha as j}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{HeaderComment as M}from\"../views/3d/webgl-engine/core/shaderLibrary/util/HeaderComment.glsl.js\";import{MixExternalColor as T}from\"../views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js\";import{glsl as E}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as O}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function P(P){const _=new O,S=_.vertex.code,$=_.fragment.code;return _.include(M,{name:\"Default Material Shader\",output:P.output}),_.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\"),_.include(t),_.varyings.add(\"vpos\",\"vec3\"),_.include(C,P),_.include(i,P),_.include(g,P),0!==P.output&&7!==P.output||(_.include(l,P),_.include(a,{linearDepth:!1}),0===P.normalType&&P.offsetBackfaces&&_.include(r),_.include(p,P),_.include(c,P),P.instancedColor&&_.attributes.add(\"instanceColor\",\"vec4\"),_.varyings.add(\"localvpos\",\"vec3\"),_.include(d,P),_.include(e,P),_.include(n,P),_.include(s,P),_.vertex.uniforms.add(\"externalColor\",\"vec4\"),_.varyings.add(\"vcolorExt\",\"vec4\"),P.multipassTerrainEnabled&&_.varyings.add(\"depth\",\"float\"),S.add(E`\n      void main(void) {\n        forwardNormalizedVertexColor();\n        vcolorExt = externalColor;\n        ${P.instancedColor?\"vcolorExt *= instanceColor;\":\"\"}\n        vcolorExt *= vvColor();\n        vcolorExt *= getSymbolColor();\n        forwardColorMixMode();\n\n        if (vcolorExt.a < ${E.float(L)}) {\n          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n        }\n        else {\n          vpos = calculateVPos();\n          localvpos = vpos - view[3].xyz;\n          vpos = subtractOrigin(vpos);\n          ${0===P.normalType?E`\n          vNormalWorld = dpNormal(vvLocalNormal(normalModel()));`:\"\"}\n          vpos = addVerticalOffset(vpos, localOrigin);\n          ${P.vertexTangents?\"vTangent = dpTransformVertexTangent(tangent);\":\"\"}\n          gl_Position = transformPosition(proj, view, vpos);\n          ${0===P.normalType&&P.offsetBackfaces?\"gl_Position = offsetBackfacingClipPosition(gl_Position, vpos, vNormalWorld, camPos);\":\"\"}\n        }\n\n        ${P.multipassTerrainEnabled?\"depth = (view * vec4(vpos, 1.0)).z;\":\"\"}\n        forwardLinearDepth();\n        forwardTextureCoordinates();\n      }\n    `)),7===P.output&&(_.include(o,P),_.include(j,P),P.multipassTerrainEnabled&&(_.fragment.include(v),_.include(h,P)),_.fragment.uniforms.add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\").add(\"opacity\",\"float\").add(\"layerOpacity\",\"float\"),P.hasColorTexture&&_.fragment.uniforms.add(\"tex\",\"sampler2D\"),_.fragment.include(T),$.add(E`\n      void main() {\n        discardBySlice(vpos);\n        ${P.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n        ${P.hasColorTexture?E`\n        vec4 texColor = texture2D(tex, vuv0);\n        ${P.textureAlphaPremultiplied?\"texColor.rgb /= texColor.a;\":\"\"}\n        discardOrAdjustAlpha(texColor);`:E`vec4 texColor = vec4(1.0);`}\n        ${P.attributeColor?E`\n        float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:E`\n        float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n        `}\n        gl_FragColor = vec4(opacity_);\n      }\n    `)),0===P.output&&(_.include(o,P),_.include(b,P),_.include(u,P),_.include(j,P),P.receiveShadows&&_.include(y,P),P.multipassTerrainEnabled&&(_.fragment.include(v),_.include(h,P)),_.fragment.uniforms.add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\").add(\"ambient\",\"vec3\").add(\"diffuse\",\"vec3\").add(\"opacity\",\"float\").add(\"layerOpacity\",\"float\"),P.hasColorTexture&&_.fragment.uniforms.add(\"tex\",\"sampler2D\"),_.include(w,P),_.include(x,P),_.fragment.include(T),_.include(f,P),$.add(E`\n      void main() {\n        discardBySlice(vpos);\n        ${P.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n        ${P.hasColorTexture?E`\n        vec4 texColor = texture2D(tex, vuv0);\n        ${P.textureAlphaPremultiplied?\"texColor.rgb /= texColor.a;\":\"\"}\n        discardOrAdjustAlpha(texColor);`:E`vec4 texColor = vec4(1.0);`}\n        shadingParams.viewDirection = normalize(vpos - camPos);\n        ${3===P.normalType?E`\n        vec3 normal = screenDerivativeNormal(localvpos);`:E`\n        shadingParams.normalView = vNormalWorld;\n        vec3 normal = shadingNormal(shadingParams);`}\n        ${1===P.pbrMode?\"applyPBRFactors();\":\"\"}\n        float ssao = evaluateAmbientOcclusionInverse();\n        ssao *= getBakedOcclusion();\n\n        float additionalAmbientScale = additionalDirectedAmbientLight(vpos + localOrigin);\n        vec3 additionalLight = ssao * lightingMainIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;\n        ${P.receiveShadows?\"float shadow = readShadowMap(vpos, linearDepth);\":1===P.viewingMode?\"float shadow = lightingGlobalFactor * (1.0 - additionalAmbientScale);\":\"float shadow = 0.0;\"}\n        vec3 matColor = max(ambient, diffuse);\n        ${P.attributeColor?E`\n        vec3 albedo_ = mixExternalColor(vColor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n        float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:E`\n        vec3 albedo_ = mixExternalColor(matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n        float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n        `}\n        ${P.hasNormalTexture?E`\n              mat3 tangentSpace = ${P.vertexTangents?\"computeTangentSpace(normal);\":\"computeTangentSpace(normal, vpos, vuv0);\"}\n              vec3 shadedNormal = computeTextureNormal(tangentSpace, vuv0);`:\"vec3 shadedNormal = normal;\"}\n        ${1===P.pbrMode||2===P.pbrMode?1===P.viewingMode?E`vec3 normalGround = normalize(vpos + localOrigin);`:E`vec3 normalGround = vec3(0.0, 0.0, 1.0);`:E``}\n        ${1===P.pbrMode||2===P.pbrMode?E`\n            float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * lightingMainIntensity[2];\n            vec3 shadedColor = evaluateSceneLightingPBR(shadedNormal, albedo_, shadow, 1.0 - ssao, additionalLight, shadingParams.viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);`:\"vec3 shadedColor = evaluateSceneLighting(shadedNormal, albedo_, shadow, 1.0 - ssao, additionalLight);\"}\n        gl_FragColor = highlightSlice(vec4(shadedColor, opacity_), vpos);\n        ${P.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n      }\n    `)),_.include(m,P),_}var _=Object.freeze({__proto__:null,build:P});export{_ as D,P as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{ForwardLinearDepth as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js\";import{Offset as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js\";import{Slice as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{InstancedDoublePrecision as i}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js\";import{NormalAttribute as l}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{PositionAttribute as t}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl.js\";import{SymbolColor as d}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js\";import{TextureCoordinateAttribute as n}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{VertexColor as s}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";import{VerticalOffset as c}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js\";import{DefaultMaterialAuxiliaryPasses as g}from\"../views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js\";import{ReadLinearDepth as v}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{EvaluateAmbientOcclusion as m}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js\";import{EvaluateSceneLighting as p}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js\";import{multipassTerrainTest as u}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{PhysicallyBasedRendering as b}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js\";import{PhysicallyBasedRenderingParameters as f}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{ReadShadowMap as h}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{VisualVariables as w}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js\";import{symbolAlphaCutoff as x,DiscardOrAdjustAlpha as y}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{MixExternalColor as C}from\"../views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js\";import{glsl as L}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as M}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function j(j){const E=new M,O=E.vertex.code,_=E.fragment.code;return E.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\"),E.include(t),E.varyings.add(\"vpos\",\"vec3\"),E.include(w,j),E.include(i,j),E.include(c,j),0!==j.output&&7!==j.output||(E.include(l,j),E.include(a,{linearDepth:!1}),j.offsetBackfaces&&E.include(o),j.instancedColor&&E.attributes.add(\"instanceColor\",\"vec4\"),E.varyings.add(\"vNormalWorld\",\"vec3\"),E.varyings.add(\"localvpos\",\"vec3\"),j.multipassTerrainEnabled&&E.varyings.add(\"depth\",\"float\"),E.include(n,j),E.include(e,j),E.include(d,j),E.include(s,j),E.vertex.uniforms.add(\"externalColor\",\"vec4\"),E.varyings.add(\"vcolorExt\",\"vec4\"),O.add(L`\n        void main(void) {\n          forwardNormalizedVertexColor();\n          vcolorExt = externalColor;\n          ${j.instancedColor?\"vcolorExt *= instanceColor;\":\"\"}\n          vcolorExt *= vvColor();\n          vcolorExt *= getSymbolColor();\n          forwardColorMixMode();\n\n          if (vcolorExt.a < ${L.float(x)}) {\n            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n          }\n          else {\n            vpos = calculateVPos();\n            localvpos = vpos - view[3].xyz;\n            vpos = subtractOrigin(vpos);\n            vNormalWorld = dpNormal(vvLocalNormal(normalModel()));\n            vpos = addVerticalOffset(vpos, localOrigin);\n            gl_Position = transformPosition(proj, view, vpos);\n            ${j.offsetBackfaces?\"gl_Position = offsetBackfacingClipPosition(gl_Position, vpos, vNormalWorld, camPos);\":\"\"}\n          }\n          ${j.multipassTerrainEnabled?L`depth = (view * vec4(vpos, 1.0)).z;`:\"\"}\n          forwardLinearDepth();\n          forwardTextureCoordinates();\n        }\n      `)),7===j.output&&(E.include(r,j),E.include(y,j),j.multipassTerrainEnabled&&(E.fragment.include(v),E.include(u,j)),E.fragment.uniforms.add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\").add(\"opacity\",\"float\").add(\"layerOpacity\",\"float\"),E.fragment.uniforms.add(\"view\",\"mat4\"),j.hasColorTexture&&E.fragment.uniforms.add(\"tex\",\"sampler2D\"),E.fragment.include(C),_.add(L`\n      void main() {\n        discardBySlice(vpos);\n        ${j.multipassTerrainEnabled?L`terrainDepthTest(gl_FragCoord, depth);`:\"\"}\n        ${j.hasColorTexture?L`\n        vec4 texColor = texture2D(tex, vuv0);\n        ${j.textureAlphaPremultiplied?\"texColor.rgb /= texColor.a;\":\"\"}\n        discardOrAdjustAlpha(texColor);`:L`vec4 texColor = vec4(1.0);`}\n        ${j.attributeColor?L`\n        float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:L`\n        float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n        `}\n\n        gl_FragColor = vec4(opacity_);\n      }\n    `)),0===j.output&&(E.include(r,j),E.include(p,j),E.include(m,j),E.include(y,j),j.receiveShadows&&E.include(h,j),j.multipassTerrainEnabled&&(E.fragment.include(v),E.include(u,j)),E.fragment.uniforms.add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\").add(\"ambient\",\"vec3\").add(\"diffuse\",\"vec3\").add(\"opacity\",\"float\").add(\"layerOpacity\",\"float\"),E.fragment.uniforms.add(\"view\",\"mat4\"),j.hasColorTexture&&E.fragment.uniforms.add(\"tex\",\"sampler2D\"),E.include(f,j),E.include(b,j),E.fragment.include(C),_.add(L`\n      void main() {\n        discardBySlice(vpos);\n        ${j.multipassTerrainEnabled?L`terrainDepthTest(gl_FragCoord, depth);`:\"\"}\n        ${j.hasColorTexture?L`\n        vec4 texColor = texture2D(tex, vuv0);\n        ${j.textureAlphaPremultiplied?\"texColor.rgb /= texColor.a;\":\"\"}\n        discardOrAdjustAlpha(texColor);`:L`vec4 texColor = vec4(1.0);`}\n        vec3 viewDirection = normalize(vpos - camPos);\n        ${1===j.pbrMode?\"applyPBRFactors();\":\"\"}\n        float ssao = evaluateAmbientOcclusionInverse();\n        ssao *= getBakedOcclusion();\n\n        float additionalAmbientScale = additionalDirectedAmbientLight(vpos + localOrigin);\n        vec3 additionalLight = ssao * lightingMainIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;\n        ${j.receiveShadows?\"float shadow = readShadowMap(vpos, linearDepth);\":1===j.viewingMode?\"float shadow = lightingGlobalFactor * (1.0 - additionalAmbientScale);\":\"float shadow = 0.0;\"}\n        vec3 matColor = max(ambient, diffuse);\n        ${j.attributeColor?L`\n        vec3 albedo_ = mixExternalColor(vColor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n        float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:L`\n        vec3 albedo_ = mixExternalColor(matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n        float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n        `}\n        ${L`\n        vec3 shadedNormal = normalize(vNormalWorld);\n        albedo_ *= 1.2;\n        vec3 viewForward = vec3(view[0][2], view[1][2], view[2][2]);\n        float alignmentLightView = clamp(dot(viewForward, -lightingMainDirection), 0.0, 1.0);\n        float transmittance = 1.0 - clamp(dot(viewForward, shadedNormal), 0.0, 1.0);\n        float treeRadialFalloff = vColor.r;\n        float backLightFactor = 0.5 * treeRadialFalloff * alignmentLightView * transmittance * (1.0 - shadow);\n        additionalLight += backLightFactor * lightingMainIntensity;`}\n        ${1===j.pbrMode||2===j.pbrMode?1===j.viewingMode?L`vec3 normalGround = normalize(vpos + localOrigin);`:L`vec3 normalGround = vec3(0.0, 0.0, 1.0);`:L``}\n        ${1===j.pbrMode||2===j.pbrMode?L`\n            float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * lightingMainIntensity[2];\n            vec3 shadedColor = evaluateSceneLightingPBR(shadedNormal, albedo_, shadow, 1.0 - ssao, additionalLight, viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);`:\"vec3 shadedColor = evaluateSceneLighting(shadedNormal, albedo_, shadow, 1.0 - ssao, additionalLight);\"}\n        gl_FragColor = highlightSlice(vec4(shadedColor, opacity_), vpos);\n        ${j.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n      }\n    `)),E.include(g,j),E}var E=Object.freeze({__proto__:null,build:j});export{E as R,j as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t){t.extensions.add(\"GL_EXT_shader_texture_lod\"),t.extensions.add(\"GL_OES_standard_derivatives\"),t.fragment.code.add(e`#ifndef GL_EXT_shader_texture_lod\nfloat calcMipMapLevel(const vec2 ddx, const vec2 ddy) {\nfloat deltaMaxSqr = max(dot(ddx, ddx), dot(ddy, ddy));\nreturn max(0.0, 0.5 * log2(deltaMaxSqr));\n}\n#endif\nvec4 textureAtlasLookup(sampler2D texture, vec2 textureSize, vec2 textureCoordinates, vec4 atlasRegion) {\nvec2 atlasScale = atlasRegion.zw - atlasRegion.xy;\nvec2 uvAtlas = fract(textureCoordinates) * atlasScale + atlasRegion.xy;\nfloat maxdUV = 0.125;\nvec2 dUVdx = clamp(dFdx(textureCoordinates), -maxdUV, maxdUV) * atlasScale;\nvec2 dUVdy = clamp(dFdy(textureCoordinates), -maxdUV, maxdUV) * atlasScale;\n#ifdef GL_EXT_shader_texture_lod\nreturn texture2DGradEXT(texture, uvAtlas, dUVdx, dUVdy);\n#else\nvec2 dUVdxAuto = dFdx(uvAtlas);\nvec2 dUVdyAuto = dFdy(uvAtlas);\nfloat mipMapLevel = calcMipMapLevel(dUVdx * textureSize, dUVdy * textureSize);\nfloat autoMipMapLevel = calcMipMapLevel(dUVdxAuto * textureSize, dUVdyAuto * textureSize);\nreturn texture2D(texture, uvAtlas, mipMapLevel - autoMipMapLevel);\n#endif\n}`)}export{t as TextureAtlasLookup};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{TextureCoordinateAttribute as e}from\"./TextureCoordinateAttribute.glsl.js\";import{TextureAtlasLookup as t}from\"../util/TextureAtlasLookup.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function u(u,a){u.include(e,a),u.fragment.code.add(r`\n  struct TextureLookupParameter {\n    vec2 uv;\n    ${a.supportsTextureAtlas?\"vec2 size;\":\"\"}\n  } vtc;\n  `),1===a.attributeTextureCoordinates&&u.fragment.code.add(r`vec4 textureLookup(sampler2D tex, TextureLookupParameter params) {\nreturn texture2D(tex, params.uv);\n}`),2===a.attributeTextureCoordinates&&(u.include(t),u.fragment.code.add(r`vec4 textureLookup(sampler2D tex, TextureLookupParameter params) {\nreturn textureAtlasLookup(tex, params.size, params.uv, vuvRegion);\n}`))}export{u as VertexTextureCoordinates};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{VertexTextureCoordinates as e}from\"../attributes/VertexTextureCoordinates.glsl.js\";import{glsl as t}from\"../../shaderModules/interfaces.js\";function n(n,a){const r=n.fragment;a.vertexTangents?(n.attributes.add(\"tangent\",\"vec4\"),n.varyings.add(\"vTangent\",\"vec4\"),2===a.doubleSidedMode?r.code.add(t`mat3 computeTangentSpace(vec3 normal) {\nfloat tangentHeadedness = gl_FrontFacing ? vTangent.w : -vTangent.w;\nvec3 tangent = normalize(gl_FrontFacing ? vTangent.xyz : -vTangent.xyz);\nvec3 bitangent = cross(normal, tangent) * tangentHeadedness;\nreturn mat3(tangent, bitangent, normal);\n}`):r.code.add(t`mat3 computeTangentSpace(vec3 normal) {\nfloat tangentHeadedness = vTangent.w;\nvec3 tangent = normalize(vTangent.xyz);\nvec3 bitangent = cross(normal, tangent) * tangentHeadedness;\nreturn mat3(tangent, bitangent, normal);\n}`)):(n.extensions.add(\"GL_OES_standard_derivatives\"),r.code.add(t`mat3 computeTangentSpace(vec3 normal, vec3 pos, vec2 st) {\nvec3 Q1 = dFdx(pos);\nvec3 Q2 = dFdy(pos);\nvec2 stx = dFdx(st);\nvec2 sty = dFdy(st);\nfloat det = stx.t * sty.s - sty.t * stx.s;\nvec3 T = stx.t * Q2 - sty.t * Q1;\nT = T - normal * dot(normal, T);\nT *= inversesqrt(max(dot(T,T), 1.e-10));\nvec3 B = sign(det) * cross(normal, T);\nreturn mat3(T, B, normal);\n}`)),0!==a.attributeTextureCoordinates&&(n.include(e,a),r.uniforms.add(\"normalTexture\",\"sampler2D\"),r.uniforms.add(\"normalTextureSize\",\"vec2\"),r.code.add(t`\n    vec3 computeTextureNormal(mat3 tangentSpace, vec2 uv) {\n      vtc.uv = uv;\n      ${a.supportsTextureAtlas?\"vtc.size = normalTextureSize;\":\"\"}\n      vec3 rawNormal = textureLookup(normalTexture, vtc).rgb * 2.0 - 1.0;\n      return tangentSpace * rawNormal;\n    }\n  `))}export{n as ComputeNormalTexture};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{glsl as t}from\"../../shaderModules/interfaces.js\";import{webglValidateShadersEnabled as e}from\"../../../../../webgl/checkWebGLError.js\";function u(u,o){const r=t`\n  /*\n  *  ${o.name}\n  *  ${0===o.output?\"RenderOutput: Color\":1===o.output?\"RenderOutput: Depth\":3===o.output?\"RenderOutput: Shadow\":2===o.output?\"RenderOutput: Normal\":4===o.output?\"RenderOutput: Highlight\":\"\"}\n  */\n  `;e()&&(u.fragment.code.add(r),u.vertex.code.add(r))}export{u as HeaderComment};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import{result as t}from\"../../../../core/asyncUtils.js\";import r from\"../../../../core/Error.js\";import n from\"../../../../core/Logger.js\";import{isSome as a,unwrap as s}from\"../../../../core/maybe.js\";import{throwIfAbortError as o}from\"../../../../core/promiseUtils.js\";import{Version as i}from\"../../../../core/Version.js\";import{d as u}from\"../../../../chunks/vec3f64.js\";import{empty as l,expandWithVec3 as c}from\"../../../../geometry/support/aaBoundingBox.js\";import{requestImage as p}from\"../../../../support/requestImageUtils.js\";import{Geometry as m}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as f}from\"../../webgl-engine/lib/Texture.js\";import{DefaultMaterial as d}from\"../../webgl-engine/materials/DefaultMaterial.js\";const y=n.getLogger(\"esri.views.3d.layers.graphics.objectResourceUtils\");async function x(e,t){const r=await g(e,t);return{resource:r,textures:await A(r.textureDefinitions,t)}}async function g(r,n){const i=a(n)&&n.streamDataRequester;if(i)return h(r,i,n);const u=await t(e(r,s(n)));if(!0===u.ok)return u.value.data;o(u.error),w(u.error)}async function h(e,r,n){const a=await t(r.request(e,\"json\",n));if(!0===a.ok)return a.value;o(a.error),w(a.error.details.url)}function w(e){throw new r(\"\",`Request for object resource failed: ${e}`)}function v(e){const t=e.params,r=t.topology;let n=!0;switch(t.vertexAttributes||(y.warn(\"Geometry must specify vertex attributes\"),n=!1),t.topology){case\"PerAttributeArray\":break;case\"Indexed\":case null:case void 0:{const e=t.faces;if(e){if(t.vertexAttributes)for(const r in t.vertexAttributes){const t=e[r];t&&t.values?(null!=t.valueType&&\"UInt32\"!==t.valueType&&(y.warn(`Unsupported indexed geometry indices type '${t.valueType}', only UInt32 is currently supported`),n=!1),null!=t.valuesPerElement&&1!==t.valuesPerElement&&(y.warn(`Unsupported indexed geometry values per element '${t.valuesPerElement}', only 1 is currently supported`),n=!1)):(y.warn(`Indexed geometry does not specify face indices for '${r}' attribute`),n=!1)}}else y.warn(\"Indexed geometries must specify faces\"),n=!1;break}default:y.warn(`Unsupported topology '${r}'`),n=!1}e.params.material||(y.warn(\"Geometry requires material\"),n=!1);const a=e.params.vertexAttributes;for(const s in a){a[s].values||(y.warn(\"Geometries with externally defined attributes are not yet supported\"),n=!1)}return n}function b(e,t){const r=[],n=[],s=[],o=[],l=e.resource,c=i.parse(l.version||\"1.0\",\"wosr\");I.validate(c);const p=l.model.name,y=l.model.geometries,x=l.materialDefinitions,g=e.textures;let h=0;const w=new Map;for(let i=0;i<y.length;i++){const e=y[i];if(!v(e))continue;const l=M(e),c=e.params.vertexAttributes,p=[];for(const t in c){const e=c[t],r=e.values;p.push([t,{data:r,size:e.valuesPerElement,exclusive:!0}])}const b=[];if(\"PerAttributeArray\"!==e.params.topology){const t=e.params.faces;for(const e in t)b.push([e,new Uint32Array(t[e].values)])}const j=g&&g[l.texture];if(j&&!w.has(l.texture)){const{image:e,params:t}=j,r=new f(e,t);o.push(r),w.set(l.texture,r)}const A=w.get(l.texture),I=A?A.id:void 0;let P=s[l.material]?s[l.material][l.texture]:null;if(!P){const e=x[l.material.substring(l.material.lastIndexOf(\"/\")+1)].params;1===e.transparency&&(e.transparency=0);const r=j&&j.alphaChannelUsage,n=e.transparency>0||\"transparency\"===r||\"maskAndTransparency\"===r,o=j?U(j.alphaChannelUsage):void 0,i={ambient:u(e.diffuse),diffuse:u(e.diffuse),opacity:1-(e.transparency||0),transparent:n,textureAlphaMode:o,textureAlphaCutoff:.33,textureId:I,initTextureTransparent:!0,doubleSided:!0,cullFace:0,colorMixMode:e.externalColorMixMode||\"tint\",textureAlphaPremultiplied:!!j&&!!j.params.preMultiplyAlpha};a(t)&&t.materialParamsMixin&&Object.assign(i,t.materialParamsMixin),P=new d(i),s[l.material]||(s[l.material]={}),s[l.material][l.texture]=P}n.push(P);const T=new m(p,b);h+=b.position?b.position.length:0,r.push(T)}return{name:p,stageResources:{textures:o,materials:n,geometries:r},pivotOffset:l.model.pivotOffset,boundingBox:j(r),numberOfVertices:h,lodThreshold:null}}function j(e){const t=l();return e.forEach((e=>{const r=e.boundingInfo;a(r)&&(c(t,r.getBBMin()),c(t,r.getBBMax()))})),t}async function A(e,t){const r=[];for(const o in e){const n=e[o],s=n.images[0].data;if(!s){y.warn(\"Externally referenced texture data is not yet supported\");continue}const i=n.encoding+\";base64,\"+s,u=\"/textureDefinitions/\"+o,l=\"rgba\"===n.channels?n.alphaChannelUsage||\"transparency\":\"none\",c={noUnpackFlip:!0,wrap:{s:10497,t:10497},preMultiplyAlpha:1!==U(l)},m=a(t)&&t.disableTextures?Promise.resolve(null):p(i,t);r.push(m.then((e=>({refId:u,image:e,params:c,alphaChannelUsage:l}))))}const n=await Promise.all(r),s={};for(const a of n)s[a.refId]=a;return s}function U(e){switch(e){case\"mask\":return 2;case\"maskAndTransparency\":return 3;case\"none\":return 1;default:return 0}}function M(e){const t=e.params;return{id:1,material:t.material,texture:t.texture,region:t.texture}}const I=new i(1,2,\"wosr\");export{A as createTextureResources,x as load,b as processLoadResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.21/esri/copyright.txt for details.\n*/\nimport{adjustStaticAGOUrl as e}from\"../../../../core/devEnvironmentUtils.js\";import{get as t,isSome as r,isNone as s}from\"../../../../core/maybe.js\";import{a as o}from\"../../../../chunks/mat3.js\";import{c as i}from\"../../../../chunks/mat3f64.js\";import{b as a}from\"../../../../chunks/mat4.js\";import{c as u}from\"../../../../chunks/mat4f64.js\";import{m as n,f as l,E as c,l as m,n as d,e as f}from\"../../../../chunks/vec3.js\";import{c as p}from\"../../../../chunks/vec3f64.js\";import{empty as x,expandWithVec3 as g}from\"../../../../geometry/support/aaBoundingBox.js\";import{BufferViewVec3f as h,BufferViewVec4f as b,BufferViewVec2f as v,BufferViewVec4u8 as R,BufferViewVec4u16 as y,BufferViewVec3u8 as B,BufferViewVec3u16 as M}from\"../../../../geometry/support/buffer/BufferView.js\";import{t as w,a as j,s as C}from\"../../../../chunks/vec32.js\";import{t as E,s as T}from\"../../../../chunks/vec42.js\";import{createBuffer as S}from\"../../../../geometry/support/buffer/utils.js\";import{DefaultLoadingContext as O}from\"../../glTF/DefaultLoadingContext.js\";import{load as F}from\"../../glTF/loader.js\";import{triangleFanToTriangles as A,triangleStripToTriangles as I,trianglesToTriangles as k}from\"../../glTF/internal/indexUtils.js\";import{load as L,processLoadResult as N}from\"./wosrLoader.js\";import{Geometry as P}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as _}from\"../../webgl-engine/lib/Texture.js\";import{DefaultMaterial as z}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{COLOR_GAMMA as D}from\"../../webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";import{n as V}from\"../../../../chunks/vec22.js\";import{c as W,f as G}from\"../../../../chunks/vec43.js\";import{c as U}from\"../../../../chunks/vec33.js\";async function $(s,o){const i=q(e(s));if(\"wosr\"===i.fileType){const e=await(o.cache?o.cache.loadWOSR(i.url,o):L(i.url,o)),t=N(e,o);return{lods:[t],referenceBoundingBox:t.boundingBox,isEsriSymbolResource:!1,isWosr:!0,remove:e.remove}}const a=await(o.cache?o.cache.loadGLTF(i.url,o,o.usePBR):F(new O(o.streamDataRequester),i.url,o,o.usePBR)),u=t(a.model.meta,\"ESRI_proxyEllipsoid\");a.meta.isEsriSymbolResource&&r(u)&&-1!==a.meta.uri.indexOf(\"/RealisticTrees/\")&&J(a,u);const n=a.meta.isEsriSymbolResource?{usePBR:o.usePBR,isSchematic:!1,treeRendering:a.customMeta.esriTreeRendering,mrrFactors:[0,1,.2]}:{usePBR:o.usePBR,isSchematic:!1,mrrFactors:[0,1,.5]},l={...o.materialParamsMixin,treeRendering:a.customMeta.esriTreeRendering};if(null!=i.specifiedLodIndex){const e=K(a,n,l,i.specifiedLodIndex);let t=e[0].boundingBox;if(0!==i.specifiedLodIndex){t=K(a,n,l,0)[0].boundingBox}return{lods:e,referenceBoundingBox:t,isEsriSymbolResource:a.meta.isEsriSymbolResource,isWosr:!1,remove:a.remove}}const c=K(a,n,l);return{lods:c,referenceBoundingBox:c[0].boundingBox,isEsriSymbolResource:a.meta.isEsriSymbolResource,isWosr:!1,remove:a.remove}}function q(e){const t=e.match(/(.*\\.(gltf|glb))(\\?lod=([0-9]+))?$/);if(t)return{fileType:\"gltf\",url:t[1],specifiedLodIndex:null!=t[4]?Number(t[4]):null};return e.match(/(.*\\.(json|json\\.gz))$/)?{fileType:\"wosr\",url:e,specifiedLodIndex:null}:{fileType:\"unknown\",url:e,specifiedLodIndex:null}}function K(e,t,s,a){const u=e.model,n=i(),l=new Array,c=new Map,m=new Map;return u.lods.forEach(((e,i)=>{if(void 0!==a&&i!==a)return;const d={name:e.name,stageResources:{textures:new Array,materials:new Array,geometries:new Array},lodThreshold:r(e.lodThreshold)?e.lodThreshold:null,pivotOffset:[0,0,0],numberOfVertices:0,boundingBox:x()};l.push(d),e.parts.forEach((e=>{const i=e.material+(e.attributes.normal?\"_normal\":\"\")+(e.attributes.color?\"_color\":\"\")+(e.attributes.texCoord0?\"_texCoord0\":\"\")+(e.attributes.tangent?\"_tangent\":\"\"),a=u.materials.get(e.material),l=r(e.attributes.texCoord0),f=r(e.attributes.normal),p=Q(a.alphaMode);if(!c.has(i)){if(l){if(r(a.textureColor)&&!m.has(a.textureColor)){const e=u.textures.get(a.textureColor),t={...e.parameters,preMultiplyAlpha:1!==p};m.set(a.textureColor,new _(e.data,t))}if(r(a.textureNormal)&&!m.has(a.textureNormal)){const e=u.textures.get(a.textureNormal);m.set(a.textureNormal,new _(e.data,e.parameters))}if(r(a.textureOcclusion)&&!m.has(a.textureOcclusion)){const e=u.textures.get(a.textureOcclusion);m.set(a.textureOcclusion,new _(e.data,e.parameters))}if(r(a.textureEmissive)&&!m.has(a.textureEmissive)){const e=u.textures.get(a.textureEmissive);m.set(a.textureEmissive,new _(e.data,e.parameters))}if(r(a.textureMetallicRoughness)&&!m.has(a.textureMetallicRoughness)){const e=u.textures.get(a.textureMetallicRoughness);m.set(a.textureMetallicRoughness,new _(e.data,e.parameters))}}const o=a.color[0]**(1/D),n=a.color[1]**(1/D),d=a.color[2]**(1/D),x=a.emissiveFactor[0]**(1/D),g=a.emissiveFactor[1]**(1/D),h=a.emissiveFactor[2]**(1/D),b=r(a.textureColor)&&l?m.get(a.textureColor):null;c.set(i,new z({...t,transparent:0===p,textureAlphaMode:p,textureAlphaCutoff:a.alphaCutoff,diffuse:[o,n,d],ambient:[o,n,d],opacity:a.opacity,doubleSided:a.doubleSided,doubleSidedType:\"winding-order\",cullFace:a.doubleSided?0:2,vertexColors:!!e.attributes.color,vertexTangents:!!e.attributes.tangent,normals:f?\"default\":\"screenDerivative\",castShadows:!0,receiveSSAO:!0,textureId:r(b)?b.id:void 0,colorMixMode:a.colorMixMode,normalTextureId:r(a.textureNormal)&&l?m.get(a.textureNormal).id:void 0,textureAlphaPremultiplied:r(b)&&!!b.params.preMultiplyAlpha,occlusionTextureId:r(a.textureOcclusion)&&l?m.get(a.textureOcclusion).id:void 0,emissiveTextureId:r(a.textureEmissive)&&l?m.get(a.textureEmissive).id:void 0,metallicRoughnessTextureId:r(a.textureMetallicRoughness)&&l?m.get(a.textureMetallicRoughness).id:void 0,emissiveFactor:[x,g,h],mrrFactors:[a.metallicFactor,a.roughnessFactor,t.mrrFactors[2]],isSchematic:!1,...s}))}const x=H(e.indices||e.attributes.position.count,e.primitiveType),O=e.attributes.position.count,F=S(h,O);w(F,e.attributes.position,e.transform);const A=[[\"position\",{data:F.typedBuffer,size:F.elementCount,exclusive:!0}]],I=[[\"position\",x]];if(r(e.attributes.normal)){const t=S(h,O);o(n,e.transform),j(t,e.attributes.normal,n),A.push([\"normal\",{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),I.push([\"normal\",x])}if(r(e.attributes.tangent)){const t=S(b,O);o(n,e.transform),E(t,e.attributes.tangent,n),A.push([\"tangent\",{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),I.push([\"tangent\",x])}if(r(e.attributes.texCoord0)){const t=S(v,O);V(t,e.attributes.texCoord0),A.push([\"uv0\",{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),I.push([\"uv0\",x])}if(r(e.attributes.color)){const t=S(R,O);if(4===e.attributes.color.elementCount)e.attributes.color instanceof b?T(t,e.attributes.color,255):e.attributes.color instanceof R?W(t,e.attributes.color):e.attributes.color instanceof y&&T(t,e.attributes.color,1/256);else{G(t,255,255,255,255);const r=new B(t.buffer,0,4);e.attributes.color instanceof h?C(r,e.attributes.color,255):e.attributes.color instanceof B?U(r,e.attributes.color):e.attributes.color instanceof M&&C(r,e.attributes.color,1/256)}A.push([\"color\",{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),I.push([\"color\",x])}const k=new P(A,I);d.stageResources.geometries.push(k),d.stageResources.materials.push(c.get(i)),l&&(r(a.textureColor)&&d.stageResources.textures.push(m.get(a.textureColor)),r(a.textureNormal)&&d.stageResources.textures.push(m.get(a.textureNormal)),r(a.textureOcclusion)&&d.stageResources.textures.push(m.get(a.textureOcclusion)),r(a.textureEmissive)&&d.stageResources.textures.push(m.get(a.textureEmissive)),r(a.textureMetallicRoughness)&&d.stageResources.textures.push(m.get(a.textureMetallicRoughness))),d.numberOfVertices+=O;const L=k.boundingInfo;r(L)&&(g(d.boundingBox,L.getBBMin()),g(d.boundingBox,L.getBBMax()))}))})),l}function Q(e){switch(e){case\"BLEND\":return 0;case\"MASK\":return 2;case\"OPAQUE\":case null:case void 0:return 1}}function H(e,t){switch(t){case 4:return k(e);case 5:return I(e);case 6:return A(e)}}function J(e,t){for(let r=0;r<e.model.lods.length;++r){const o=e.model.lods[r];e.customMeta.esriTreeRendering=!0;for(const i of o.parts){const o=i.attributes.normal;if(s(o))return;const x=i.attributes.position,g=x.count,b=p(),v=p(),y=p(),B=S(R,g),M=S(h,g),w=a(u(),i.transform);for(let s=0;s<g;s++){x.getVec(s,v),o.getVec(s,b),n(v,v,i.transform),l(y,v,t.center),c(y,y,t.radius);const a=y[2],u=m(y),p=Math.min(.45+.55*u*u,1);c(y,y,t.radius),n(y,y,w),d(y,y),r+1!==e.model.lods.length&&e.model.lods.length>1&&f(y,y,b,a>-1?.2:Math.min(-4*a-3.8,1)),M.setVec(s,y),B.set(s,0,255*p),B.set(s,1,255*p),B.set(s,2,255*p),B.set(s,3,255)}i.attributes.normal=M,i.attributes.color=B}}}export{$ as fetch,K as gltfToEngineResources,q as parseUrl};\n"],"sourceRoot":""}